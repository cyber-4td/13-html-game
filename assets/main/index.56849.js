window.__require=function e(t,n,o){function a(r,c){if(!n[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return a(t[r][1][e]||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({AStar:[function(e,t,n){"use strict";cc._RF.push(t,"3ca91YosMlH1ZRSiQfvU5Ip","AStar");var o=t,a=n;cc._RF.push(o,"7129dYza6lEt4JRdsgUkkwG","AStar"),Object.defineProperty(a,"__esModule",{value:!0}),a.AStar=a.Grid=a.Node=void 0;var i=function(e,t){this.walkable=!0,this.costMultiplier=1,this.x=e,this.y=t};a.Node=i;var r=function(){function e(e,t){this._numCols=e,this._numRows=t,this._nodes=[];for(var n=0;n<e;n++){this._nodes[n]=[];for(var o=0;o<t;o++)this._nodes[n][o]=new i(n,o)}}return e.prototype.getNode=function(e,t){return this._nodes[e][t]},e.prototype.setEndNode=function(e,t){this._endNode=this._nodes[e][t]},e.prototype.setStartNode=function(e,t){this._startNode=this._nodes[e][t]},e.prototype.setWalkable=function(e,t,n){this._nodes[e][t].walkable=n,this._nodes[e][t].walkable=n,this._nodes[e][t].walkable=n},Object.defineProperty(e.prototype,"endNode",{get:function(){return this._endNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numCols",{get:function(){return this._numCols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numRows",{get:function(){return this._numRows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startNode",{get:function(){return this._startNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),e}();a.Grid=r;var c=function(){function e(e,t){this._straightCost=1,this._diagCost=Math.SQRT2,this._heuristic=this.euclidian,this._grid=new r(e,t)}return e.prototype.setWalkable=function(e,t,n){this._grid.setWalkable(e,t,n)},e.prototype.findPath=function(e,t){return this._open=[],this._closed=[],this._startNode=this._grid.nodes[e.x][e.y],null==this._startNode&&console.error("\u5bfb\u8def\u8d77\u70b9\u5750\u6807\uff1f\uff1f\uff1f\uff1f\uff1f"+e),this._endNode=this._grid.nodes[t.x][t.y],this._startNode.g=0,this._startNode.h=this._heuristic(this._startNode),this._startNode.f=this._startNode.g+this._startNode.h,this.search()},e.prototype.search=function(){for(var e=this._startNode;e!=this._endNode;){for(var t=Math.max(0,e.x-1),n=Math.min(this._grid.numCols-1,e.x+1),o=Math.max(0,e.y-1),a=Math.min(this._grid.numRows-1,e.y+1),i=t;i<=n;i++)for(var r=o;r<=a;r++){var c=this._grid.getNode(i,r);if(c!=e&&c.walkable&&this._grid.getNode(e.x,c.y).walkable&&this._grid.getNode(c.x,e.y).walkable){var s=this._straightCost;e.x!=c.x&&e.y!=c.y&&(s=this._diagCost);var l=e.g+s*c.costMultiplier,u=this._heuristic(c),d=l+u;this.isOpen(c)||this.isClosed(c)?c.f>d&&(c.f=d,c.g=l,c.h=u,c.parent=e):(c.f=d,c.g=l,c.h=u,c.parent=e,this._open.push(c))}}for(var h=0;h<this._open.length;h++);if(this._closed.push(e),0==this._open.length)return console.log("AStar >> no path found"),!1;for(var p=this._open.length,f=0;f<p;f++)for(var _=f+1;_<p;_++)if(this._open[f].f>this._open[_].f){var y=this._open[f];this._open[f]=this._open[_],this._open[_]=y}e=this._open.shift()}return this.buildPath(),!0},e.prototype.buildPath=function(){this._path=new Array;var e=this._endNode;for(this._path.push(e);e!=this._startNode;)e=e.parent,this._path.unshift(e)},Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!1,configurable:!0}),e.prototype.Obstacle=function(e){return!this._grid._nodes[e.x][e.y].walkable},e.prototype.isOpen=function(e){for(var t=0;t<this._open.length;t++)if(this._open[t]==e)return!0;return!1},e.prototype.isClosed=function(e){for(var t=0;t<this._closed.length;t++)if(this._closed[t]==e)return!0;return!1},e.prototype.manhattan=function(e){return Math.abs(e.x-this._endNode.x)*this._straightCost+Math.abs(e.y+this._endNode.y)*this._straightCost},e.prototype.euclidian=function(e){var t=e.x-this._endNode.x,n=e.y-this._endNode.y;return Math.sqrt(t*t+n*n)*this._straightCost},e.prototype.diagonal=function(e){var t=Math.abs(e.x-this._endNode.x),n=Math.abs(e.y-this._endNode.y),o=Math.min(t,n),a=t+n;return this._diagCost*o+this._straightCost*(a-2*o)},Object.defineProperty(e.prototype,"visited",{get:function(){return this._closed.concat(this._open)},enumerable:!1,configurable:!0}),e}();a.AStar=c,cc._RF.pop(),cc._RF.pop()},{}],AddDesktopInterface:[function(e,t,n){"use strict";cc._RF.push(t,"f1726FqfelMs7YeHBs9XeGd","AddDesktopInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"d58c9tjEdxGVqhZq7l27okS","AddDesktopInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("ShopAwardInterface"),h=o("SoundManager"),p=o("StoragerManager"),f=o("TypeManager"),_=o("UIManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.btn_go=null,t.btn_award=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_go.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_award.on(cc.Node.EventType.TOUCH_END,this.award,this)},t.prototype.onInit=function(e){this.ts=e[0],0==p.default.Instance.Record[f.RecordType.add_desktop]?(this.btn_go.active=!1,this.btn_award.active=!0):(this.btn_go.active=!0,this.btn_award.active=!1),h.default.Instance.PlaySound("book_pop_open")},t.prototype.award=function(){null==p.default.Instance.BarbecueProp.prop_1?p.default.Instance.BarbecueProp.prop_1=1:p.default.Instance.BarbecueProp.prop_1++,null==p.default.Instance.BarbecueProp.prop_2?p.default.Instance.BarbecueProp.prop_2=1:p.default.Instance.BarbecueProp.prop_2++,p.default.Instance.Record[f.RecordType.add_desktop]=!0,p.default.Instance.AutoSyncData(!1,!0),this.ts.btn_desktop.active=!1,this.ts.rightBtnLayout.updateLayout(),this.close(),_.default.Instance.OpenUI(d.default,_.UIOrder.Window_2,[{type:"prop_1",value:1},{type:"prop_2",value:1}],"\u6dfb\u52a0\u684c\u9762")},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){_.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle7Pre",t.prefabUrl="PlatformPre/AddDesktopPre",t.className="AddDesktopInterface",l([v(cc.Animation)],t.prototype,"ani_popup",void 0),l([v(cc.Node)],t.prototype,"btn_close",void 0),l([v(cc.Node)],t.prototype,"btn_go",void 0),l([v(cc.Node)],t.prototype,"btn_award",void 0),n=l([b],t)}(u.default);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],AddPowerInterface:[function(e,t,n){"use strict";cc._RF.push(t,"23645/+URRKtKVWwJ+cbml2","AddPowerInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"3df8eHkjrZL7rjVvfyxsjqy","AddPowerInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("FunctionManager"),h=o("GameManger"),p=o("InfoManager"),f=o("PoolManager"),_=o("SdkManager"),y=o("SoundManager"),b=o("StoragerManager"),v=o("UIManager"),m=cc._decorator,g=m.ccclass,I=m.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.label_time=null,t.label_power1=null,t.label_power2=null,t.btn_gold=null,t.btn_video=null,t.label_gold=null,t.gold_num=100,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_gold.on(cc.Node.EventType.TOUCH_END,this.click_gold,this),this.btn_video.on(cc.Node.EventType.TOUCH_END,this.click_video,this)},t.prototype.onInit=function(){this.label_power1.string="+1",this.label_power2.string="+5",this.label_gold.string=this.gold_num.toString(),this.time(),this.schedule(this.time,1),this.ani_popup.play("ani_tongyongtanchuang_open"),y.default.Instance.PlaySound("book_pop_open")},t.prototype.time=function(){this.label_time.string="<b>\u4e0b\u6b21\u6062\u590d1\u70b9\u4f53\u529b\uff1a<color=#BF491F>"+d.default.Instance.TimecFormat(p.default.Instance.TsInitial.power_time)+"</color></b>"},t.prototype.click_gold=function(){b.default.Instance.GoldNum<this.gold_num||(b.default.Instance.GoldNum-=this.gold_num,b.default.Instance.BarbecuePower+=1,this.close())},t.prototype.click_video=function(){var e=this;_.default.Instance.ShareOrVideo(_.ShareLoc.physical_strength,function(){b.default.Instance.BarbecuePower+=5,f.default.Instance.PlayCurrencyEffects2(2,cc.v2(125,50),cc.v2(-85,583+h.default.Instance.ScreenAdaptive),function(){}),e.close()})},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){v.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="AddPowerPre/AddPowerPre",t.className="AddPowerInterface",l([I(cc.Animation)],t.prototype,"ani_popup",void 0),l([I(cc.Node)],t.prototype,"btn_close",void 0),l([I(cc.RichText)],t.prototype,"label_time",void 0),l([I(cc.Label)],t.prototype,"label_power1",void 0),l([I(cc.Label)],t.prototype,"label_power2",void 0),l([I(cc.Node)],t.prototype,"btn_gold",void 0),l([I(cc.Node)],t.prototype,"btn_video",void 0),l([I(cc.Label)],t.prototype,"label_gold",void 0),n=l([g],t)}(u.default);i.default=T,cc._RF.pop(),cc._RF.pop()},{}],Arrayincludes:[function(e,t){"use strict";cc._RF.push(t,"6826e/ws/VMiZfQRiFmklJH","Arrayincludes"),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),o=n.length>>>0;if(0==o)return!1;for(var a,i,r=0|t,c=Math.max(0<=r?r:o-Math.abs(r),0);c<o;){if((a=n[c])===(i=e)||"number"==typeof a&&"number"==typeof i&&isNaN(a)&&isNaN(i))return!0;c++}return!1}}),cc._RF.pop()},{}],AuthorizationInterface:[function(e,t,n){"use strict";cc._RF.push(t,"3c4e2Qt43NPu58bWMnbEtnX","AuthorizationInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"8df2fwpjQ5MUaL6XjFAF70t","AuthorizationInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("InfoManager"),h=o("SoundManager"),p=o("StoragerManager"),f=o("TypeManager"),_=o("UIManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.bg=null,t.agreeBtn=null,t._userInfoButton=null,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.bg.on(cc.Node.EventType.TOUCH_END,this._bgClick,this),this.agreeBtn.on(cc.Node.EventType.TOUCH_END,this._agreeBtnClick,this)},t.prototype.onUIDisable=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this._bgClick,this),this.agreeBtn.off(cc.Node.EventType.TOUCH_END,this._agreeBtnClick,this)},t.prototype.onInit=function(){h.default.Instance.PlaySound("book_pop_open")},t.prototype._bgClick=function(){LWGSDK.destroyButton(),this.closeView()},t.prototype._agreeBtnClick=function(){this.closeView()},t.prototype.onUIStart=function(){this._initView()},t.prototype._initView=function(){var e=cc.view.getFrameSize(),t=cc.view.getVisibleSize(),n=t.width/e.width,o=t.height/e.height,a=this.agreeBtn.convertToWorldSpaceAR(cc.v2(0,-this.agreeBtn.height/2)),i=t.height/2-this.agreeBtn.position.y-this.agreeBtn.height/2,r=Math.floor(this.agreeBtn.width/n),c=Math.floor(this.agreeBtn.height/o),s=(a.x-this.agreeBtn.width/2)/n,l=i/o;LWGSDK.addUserInfoButton(!0,function(e){LWGSDK.destroyButton(),e&&e.userInfo&&(p.default.Instance.isAuthorization=!0,d.default.Instance.UserHead=e.userInfo.avatarUrl,d.default.Instance.UserName=e.userInfo.nickname,p.default.Instance.sysWinActivityData(),cc.systemEvent.emit(f.DistributedEvent.userInfoUpdate))},s,l,r,c)},t.prototype.closeView=function(){1!=this.is_close&&(this._userInfoButton&&this._userInfoButton.destroy(),this._userInfoButton=null,this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){_.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="authorizationPre/AuthorizationPre",t.className="AuthorizationInterface",l([v(cc.Animation)],t.prototype,"ani_popup",void 0),l([v(cc.Node)],t.prototype,"bg",void 0),l([v(cc.Node)],t.prototype,"agreeBtn",void 0),n=l([b],t)}(u.default);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],AutoManager:[function(e,t,n){"use strict";cc._RF.push(t,"9cddeG2gUxDOaIvLcF6kxs+","AutoManager");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"803b9ly5ZhFb7GZR507dwX8","AutoManager");var r=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(){function e(){this.panelWaitTime=2,this.isAuto=!1,this.pause=!1,this.misRate=0,this.minTime=60,this.maxTime=600,this.misTime=0,this.curMisTime=0}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t.instance||(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inMis",{get:function(){return!!(this.misTime&&this.misTime>this.curMisTime)},enumerable:!1,configurable:!0}),e.prototype.getOperateTime=function(){return 1*Math.random()+1},e.prototype.initManager=function(){this.curMisTime=0},e.prototype.resetMisTime=function(){this.curMisTime=0},e.prototype.updateMisTime=function(e){return this.curMisTime+=e,this.minTime>=this.curMisTime},t=r([s],e)}());a.default=l,cc._RF.pop(),cc._RF.pop()},{}],BarbecueAgainInterface:[function(e,t,n){"use strict";cc._RF.push(t,"6300a8Pn7tGEowYvabQdZJW","BarbecueAgainInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"c1dbdtc/GZE7ahp07uWS+B4","BarbecueAgainInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("StoragerManager"),p=o("InfoManager"),f=o("AddPowerInterface"),_=o("GameManger"),y=o("TypeManager"),b=o("SdkManager"),v=o("SoundManager"),m=cc._decorator,g=m.ccclass,I=m.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.btn_close2=null,t.btn_yes=null,t.video=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close2.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_yes.on(cc.Node.EventType.TOUCH_END,this.again,this)},t.prototype.onInit=function(e){this.ts=e[0],this.video.active=!1,_.default.Instance.gameType==y.GameType.challange&&(this.video.active=!0),v.default.Instance.PlaySound("book_pop_open")},t.prototype.again=function(){var e=this;if(_.default.Instance.gameType==y.GameType.challange)b.default.Instance.ShareOrVideo(b.ShareLoc.daily_challenge,function(){cc.systemEvent.emit(y.DistributedEvent.challangeGameRestart,!0),e.close()});else{if(h.default.Instance.BarbecuePower<=0)return d.default.Instance.OpenUI(f.default,d.UIOrder.Window_2),p.default.Instance.TsInitial.ShowTips("\u4f53\u529b\u4e0d\u8db3");h.default.Instance.BarbecuePower--,this.ts.Begin(!0),this.close()}},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){d.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueResurgencePre/BarbecueAgainPre",t.className="BarbecueAgainInterface",l([I(cc.Animation)],t.prototype,"ani_popup",void 0),l([I(cc.Node)],t.prototype,"btn_close",void 0),l([I(cc.Node)],t.prototype,"btn_close2",void 0),l([I(cc.Node)],t.prototype,"btn_yes",void 0),l([I(cc.Node)],t.prototype,"video",void 0),n=l([g],t)}(u.default);i.default=T,cc._RF.pop(),cc._RF.pop()},{}],BarbecueBase:[function(e,t,n){"use strict";cc._RF.push(t,"e257fbLtapGAZ/FLaMb8+oR","BarbecueBase");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"5a2f7X2S/1EDJytv32hpsfX","BarbecueBase");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("SoundManager"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_kebabs=[],t.eff_select=null,t.ani_kebabs=null,t.node_frozen=[],t.node_tinfoil=[],t}return s(t,e),t.prototype.ChangeKebabs=function(e,t,n,o){void 0===o&&(o=!0),this.kebabs_data[e].id=t,this.kebabs_data[e].condition=n,1==o&&this.RefreshKebabs(e)},t.prototype.RefreshKebabs=function(e){if(0==this.kebabs_data[e].id)this.node_kebabs[e].active=!1;else switch(u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+this.kebabs_data[e].id,this.node_kebabs[e]),1==this.type&&this.oven_data&&this.oven_data.condition==h.OvenCondition.cover?this.node_kebabs[e].opacity=0:this.node_kebabs[e].opacity=255,this.node_kebabs[e].active=!0,this.kebabs_data[e].condition){case h.KebabCondition.frozen:if(null==this.node_frozen[e]){var t=this.ts.GetEffFrozen(this.node_kebabs[e]);this.node_frozen[e]=t,this.node_frozen[e].Init(this.type)}break;case h.KebabCondition.tinfoil:var n=this.ts.GetEffTinfoil(this.node_kebabs[e]);this.node_tinfoil[e]=n,n.Init(this.type),this.kebabs_data[e].condition=h.KebabCondition.normal}},t.prototype.draw=function(){for(var e=0;e<this.kebabs_data.length;e++){var t=this.kebabs_data[e];if(0==t.id)this.node_kebabs[e].active=!1;else{switch(u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+t.id,this.node_kebabs[e]),this.node_kebabs[e].active=!0,t.condition){case h.KebabCondition.frozen:var n=this.ts.GetEffFrozen(this.node_kebabs[e]);this.node_frozen[e]=n,n.Init(this.type);break;case h.KebabCondition.tinfoil:var o=this.ts.GetEffTinfoil(this.node_kebabs[e]);this.node_tinfoil[e]=o,o.Init(this.type),t.condition=h.KebabCondition.normal}1==this.type&&this.oven_data&&this.oven_data.condition==h.OvenCondition.cover?this.node_kebabs[e].opacity=0:this.node_kebabs[e].opacity=255}}},t.prototype.Brokenfrozen=function(){for(var e=!1,t=0;t<this.kebabs_data.length;t++)if(this.kebabs_data[t].condition==h.KebabCondition.frozen){var n=this.node_frozen[t];null!=n&&(n.Broken(),n.UnlockNum<=0&&(this.node_frozen[t]=null,this.kebabs_data[t].condition=h.KebabCondition.normal,e=!0))}1==e&&(d.default.Instance.PlaySound("g127_thaw"),this.ts.JudgeOvenKebabs(this,!1,"\u70e4\u4e32\u6e10\u6e10\u89e3\u9664\u51b0\u51bb"))},t.prototype.amend_kebabs=function(){for(var e=0;e<this.kebabs_data.length;e++){var t=this.kebabs_data[e];null==t.id&&(console.error("\u70e4\u7089\u6216\u76d8\u5b50"+this.type+"\u7684"+this.index+"\u4f4d\u7684\u70e4\u4e32"+e+"\u6570\u636e=null"),t.id=0)}},Object.defineProperty(t.prototype,"Index",{get:function(){return this.index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"KebabsData",{get:function(){return this.kebabs_data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"OvenData",{get:function(){return this.oven_data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Useing",{get:function(){return this.useing},set:function(e){this.useing=e},enumerable:!1,configurable:!0}),l([_(cc.Node)],t.prototype,"node_kebabs",void 0),l([_(cc.Node)],t.prototype,"eff_select",void 0),l([_(cc.Animation)],t.prototype,"ani_kebabs",void 0),l([f],t)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],BarbecueChallangeDetailInterface:[function(e,t,n){"use strict";cc._RF.push(t,"e8678zbJlpJfK8xyIgEhFyQ","BarbecueChallangeDetailInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"9a6612imZBMxo8KEJkG/zsi","BarbecueChallangeDetailInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("BundleManger"),f=o("DayChallangeManager"),_=o("GameManger"),y=o("InfoManager"),b=o("SdkManager"),v=o("StoragerManager"),m=o("TypeManager"),g=o("UIManager"),I=o("Util"),T=o("BarbecueChallangeInterface"),k=cc._decorator,S=k.ccclass,w=k.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.bg=null,t.closeBtn=null,t.list=null,t.talk=null,t.talkLabel=null,t.progressMask=null,t.progressLabel=null,t.timeLabel=null,t.challangeBtn=null,t.challange_unlock_label=null,t.challange_free_label=null,t.bgIcon=null,t.finger=null,t._noFinishTalks=["\u96c6\u9f50\u4e03\u4e2a\uff0c\u89e3\u9501\u80cc\u666f\u5956\u52b1~"],t._finishTalks=["\u7ee7\u7eed\u6311\u6218\uff0c\u83b7\u5f97\u5927\u91cf\u94dc\u5e01~"],t._talkIndex=0,t._dayTime=0,t._isHasClick=!1,t._hasEnter=!1,t._newUnlockKebab=[],t._time=0,t._talkTime=0,t._fingerTime=0,t}var n;return s(t,e),n=t,Object.defineProperty(t.prototype,"IsHasClick",{set:function(e){this._isHasClick=e,this._showFinger(!1)},enumerable:!1,configurable:!0}),t.prototype.onUIEnable=function(){_.default.Instance.TsGame&&_.default.Instance.TsGame.node&&_.default.Instance.TsGame.node.isValid&&(_.default.Instance.TsGame.node.active=!1),f.default.Instance.inDetailPanel=!0,this.bg.on(cc.Node.EventType.TOUCH_END,this._bgClick,this),this.closeBtn.on(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this),this.challangeBtn.on(cc.Node.EventType.TOUCH_END,this._challangeBtnClick,this),this.closeBtn.y+=_.default.Instance.ScreenAdaptive;for(var e=this.list.childrenCount,t=0;t<e;t++){var n=this.list.children[t];n&&n.getChildByName("touch").on(cc.Node.EventType.TOUCH_END,this._touchClick.bind(this,t),this)}},t.prototype.onUIDisable=function(){_.default.Instance.TsGame&&_.default.Instance.TsGame.node&&_.default.Instance.TsGame.node.isValid&&(_.default.Instance.TsGame.node.active=!0),f.default.Instance.inDetailPanel=!1,this.bg.off(cc.Node.EventType.TOUCH_END,this._bgClick,this),this.closeBtn.off(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this),this.challangeBtn.off(cc.Node.EventType.TOUCH_END,this._challangeBtnClick,this);for(var e=this.list.childrenCount,t=0;t<e;t++){var n=this.list.children[t];n&&n.getChildByName("touch").off(cc.Node.EventType.TOUCH_END,this._touchClick,this)}},t.prototype.onUIStart=function(){this._hasEnter=v.default.Instance.openChallage,this._newUnlockKebab=v.default.Instance.newUnlockKebab,v.default.Instance.newUnlockKebab=[],v.default.Instance.openChallage=!0,this.ani_popup.play("ani_tongyongtanchuang_open"),this._initView()},t.prototype.onInit=function(){},t.prototype.onUpdate=function(e){if(this._time+=e,this._time>=1){var t=Math.floor(this._time);this._time-=t,this._updateTime(t)}var n=this._talkTime+0;this._talkTime+=e,n<5&&this._talkTime>=5?this._hideTalk():this._talkTime>=6&&(this._talkTime=0,this._updateTalk()),this._hasEnter||this._isHasClick||(this._fingerTime+=e,this._fingerTime>=3&&this._showFinger(!0))},t.prototype._bgClick=function(){this.IsHasClick=!0},t.prototype._closeBtnClick=function(){this.IsHasClick=!0,this.close()},t.prototype._touchClick=function(e){var t=f.default.Instance.kebabReward[e];v.default.Instance.unlockKebabs.includes(t)||y.default.Instance.TsInitial.ShowTips("\u5b8c\u6210\u6bcf\u65e5\u6311\u6218\u83b7\u53d6\uff01")},t.prototype._challangeBtnClick=function(){var e=this;this.IsHasClick=!0;var t=!1;if(v.default.Instance.BarbecueLv.length>=f.default.Instance.unlockLevel&&(t=!0),!t){var n=f.default.Instance.unlockLevel;return _.default.Instance.isJump36AB&&(n=_.default.Instance.getRealLevel(n)),void y.default.Instance.TsInitial.ShowTips("\u901a\u5173"+n+"\u5173\u89e3\u9501")}if(f.default.Instance.winNum)y.default.Instance.TsInitial.ShowTips("\u4eca\u65e5\u5df2\u901a\u5173\uff0c\u8bf7\u660e\u5929\u518d\u6765\uff01");else{var o=v.default.Instance.BarbecueLv.length+1,a=function(t){t&&(f.default.Instance.updateFreeNum(),v.default.Instance.AutoSyncData(!1,!0)),cc.systemEvent.emit(m.DistributedEvent.challangeUpdateBtnState),g.default.Instance.OpenUI(T.default,g.UIOrder.Window_2,o),e.close()},i=!1;f.default.Instance.freeNum>f.default.Instance.useFreeNum&&(i=!0),i?a(i):b.default.Instance.ShareOrVideo(b.ShareLoc.daily_challenge,function(){a(i)})}},t.prototype._initView=function(){this.finger.active=!1,this._updateDayChallangeBtn(),this._initList(),this._updateTalk();var e=1e3*_.default.Instance.OnlineTime+_.default.Instance.LoginTime,t=new Date(e),n=3600*t.getHours()+60*t.getMinutes()+t.getSeconds();this._dayTime=86400-n,this._updateTime()},t.prototype._initList=function(){return u(this,void 0,void 0,function(){var e,t,n,o,a;return d(this,function(i){switch(i.label){case 0:e=0,t=this.list.childrenCount,n=function(t){var n,a,i,r,c,s,l,u,h,_,y,b;return d(this,function(d){switch(d.label){case 0:return(n=o.list.children[t])?(a=n.getChildByName("icon"),i=n.getChildByName("get"),r=i.getChildByName("descLabel").getComponent(cc.Label),c=t+1,s=f.default.Instance.kebabReward[t],l=!0,p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebab_"+s,a),v.default.Instance.unlockKebabs.includes(s)?(e++,l=!1,p.default.Instance.LoadSpriteFrame(m.BundleName.Bundle1UI_Challange,"get/"+c,n),p.default.Instance.LoadSpriteFrame(m.BundleName.Bundle1UI_Challange,"get",i),u=cc.Material.getBuiltinMaterial("2d-sprite"),a.getComponent(cc.Sprite).setMaterial(0,u),r.node.color=(new cc.Color).fromHEX("#FFFFFF")):(p.default.Instance.LoadSpriteFrame(m.BundleName.Bundle1UI_Challange,"noget/"+c,n),p.default.Instance.LoadSpriteFrame(m.BundleName.Bundle1UI_Challange,"noget",i),u=cc.Material.getBuiltinMaterial("2d-gray-sprite"),a.getComponent(cc.Sprite).setMaterial(0,u),r.node.color=(new cc.Color).fromHEX("#DFDFDF")),r.string=l?"\u672a\u83b7\u5f97":"\u5df2\u83b7\u5f97",h=.6*Math.random(),o.scheduleOnce(function(){n&&n.isValid&&n.getComponent(cc.Animation).play()},h),o._newUnlockKebab.includes(s)?[4,p.default.Instance.LoadPrefab("unlockEffItem",m.BundleName.Bundle1Pre_Challange)]:[3,2]):[3,2];case 1:(_=d.sent())&&((y=cc.instantiate(_)).parent=n,(b=f.default.Instance.pos[c])&&y.setPosition(b)),d.label=2;case 2:return[2]}})},o=this,a=0,i.label=1;case 1:return a<t?[5,n(a)]:[3,4];case 2:i.sent(),i.label=3;case 3:return a++,[3,1];case 4:return this._initProgress(e,f.default.Instance.kebabReward.length),[2]}})})},t.prototype._initProgress=function(e,t){var n=e/t;this.progressMask.width=Math.floor(204*n),this.progressLabel.string=e+"/"+t,e>=t&&(this.progressLabel.string="\u5df2\u83b7\u5f97")},t.prototype._updateTime=function(e){void 0===e&&(e=0),this._dayTime-=e,this._dayTime<=0&&(this._dayTime=0);var t=I.default.TimerFormatHour(this._dayTime);this.timeLabel.string=t+" \u540e\u5237\u65b0\u6311\u6218"},t.prototype._updateTalk=function(){var e,t=(e=f.default.Instance.isAllGetKebabReward()?this._finishTalks:this._noFinishTalks)[this._talkIndex%e.length];this.talkLabel.string=t,this._talkIndex++;var n=this.talk.getComponent(cc.Animation);n&&n.play("ani_talk_open",0)},t.prototype._hideTalk=function(){var e=this.talk.getComponent(cc.Animation);e&&e.play("ani_talk_close",0)},t.prototype._showFinger=function(e){this.finger.active=e},t.prototype._updateDayChallangeBtn=function(){var e=this.challangeBtn.getChildByName("lock"),t=this.challangeBtn.getChildByName("unlock"),n=t.getChildByName("video"),o=this.challangeBtn.getChildByName("finish");o.active=!1;var a=!1;v.default.Instance.BarbecueLv.length>=f.default.Instance.unlockLevel&&(a=!0),e.active=!a,t.active=a,f.default.Instance.winNum&&(e.active=!1,t.active=!1,o.active=!0);var i=f.default.Instance.unlockLevel;_.default.Instance.isJump36AB&&(i=_.default.Instance.getRealLevel(i)),this.challange_unlock_label.string="\u901a\u5173"+i+"\u5173\u89e3\u9501";var r=f.default.Instance.freeNum-f.default.Instance.useFreeNum;r<=0&&(r=0),n.active=r<=0,this.challange_free_label.string="\u4eca\u65e5\u514d\u8d39"+r+"/"+f.default.Instance.freeNum+"\u6b21"},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){g.default.Instance.DestroyUI(n)},.3))},t.bundleName=m.BundleName.Bundle1Pre_Challange,t.prefabUrl="BarbecueChallangeDetailPre",t.className="BarbecueChallangeDetailInterface",l([w(cc.Animation)],t.prototype,"ani_popup",void 0),l([w(cc.Node)],t.prototype,"bg",void 0),l([w(cc.Node)],t.prototype,"closeBtn",void 0),l([w(cc.Node)],t.prototype,"list",void 0),l([w(cc.Node)],t.prototype,"talk",void 0),l([w(cc.Label)],t.prototype,"talkLabel",void 0),l([w(cc.Node)],t.prototype,"progressMask",void 0),l([w(cc.Label)],t.prototype,"progressLabel",void 0),l([w(cc.Label)],t.prototype,"timeLabel",void 0),l([w(cc.Node)],t.prototype,"challangeBtn",void 0),l([w(cc.Label)],t.prototype,"challange_unlock_label",void 0),l([w(cc.Label)],t.prototype,"challange_free_label",void 0),l([w(cc.Node)],t.prototype,"bgIcon",void 0),l([w(cc.Node)],t.prototype,"finger",void 0),n=l([S],t)}(h.default);i.default=O,cc._RF.pop(),cc._RF.pop()},{}],BarbecueChallangeInterface:[function(e,t,n){"use strict";cc._RF.push(t,"7ff92uhVkFF3L4eJ03gSa8S","BarbecueChallangeInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"fe437xN8wxCqbp8YrHpXwSe","BarbecueChallangeInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("BarbecueBase"),f=o("BarbecueFreePropInterface"),_=o("BarbecueOvenInterface"),y=o("BarbecuePropInterface"),b=o("BarbecueResurgenceInterface"),v=o("MainInterface"),m=o("SettingInterface"),g=o("barbecue_oven_item"),I=o("barbecue_plate_item"),T=o("barbecue_tray_item"),k=o("eff_compound_item"),S=o("eff_frozen_tiem"),w=o("eff_kebabs_item"),O=o("eff_tinfoil_item"),F=o("GameInterface"),B=o("gameGuestItem"),x=o("AutoManager"),P=o("BundleManger"),C=o("DataManager"),R=o("DayChallangeManager"),N=o("FunctionManager"),A=o("GameManger"),D=o("InfoManager"),U=o("PoolManager"),M=o("RoleSoundManager"),L=o("SdkManager"),E=o("SoundManager"),G=o("StoragerManager"),j=o("TypeManager"),z=o("UIManager"),K=o("moreClickUtil"),H=o("BarbecueChallangeOverInterface"),W=o("BarbecueChallangeRecoverInterface"),V=o("BarbecueChallangePropItem"),J=cc._decorator,q=J.ccclass,X=J.property,Y=null,Z=null,Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.oven_item=null,t.tray_item=null,t.plate_item=null,t.special_order_item=null,t.eff_kebabs_item=null,t.eff_frozen_tiem=null,t.eff_tinfoil_item=null,t.eff_compound_item=null,t.eff_jinbi=null,t.eff_congrats=null,t.eff_smoke=null,t.bg_1=null,t.bg_2=null,t.spine_bg=null,t.btn_stop=null,t.label_score=null,t.label_time=null,t.ani_time=null,t.bar_score=null,t.label_lv=null,t.group_oven_plate=null,t.group_kebabs=null,t.icon_pan=null,t.node_item=null,t.group_eff=null,t.group_tips=null,t.group_guest=null,t.ani_group_order=null,t.bar_order=null,t.label_time2=null,t.layout_order=null,t.btn_video=null,t.ani_double_hit=null,t.label_double_hit=null,t.label_double_hit2=null,t.bar_double_hit=null,t.order_tips=null,t.icon_finger=null,t.ani_finger=null,t.label_finger=null,t.eff_huoyan=null,t.spine_tips=null,t.icon_bar=null,t.label_bar=null,t.label_speek=null,t.tips_prop=null,t.ani_kaishiyingye=null,t.ani_nandutisheng=null,t.ani_shijianbuzu=null,t.btn_begin=null,t.btn_down=null,t.btn_add=null,t.btn_sub=null,t.btn_next=null,t.loseBtn=null,t.btn_prop=[],t.btn_tips=null,t.pack_mask=null,t.moreClickUtil=null,t.noTimeGameNode=null,t.endNode=null,t.homeBtn=null,t.restartBtn=null,t.recoverBtn=null,t.kebabs_move_speed=4e3,t.compound_pos=[cc.v2(-10,410),cc.v2(30,400),cc.v2(65,395)],t.useing_oven_tray=[],t.kebabs_max=10,t._isGameOver=!1,t.special_order_array=[],t.tray_correlation=[[9,6,3,0],[10,7,4,1],[11,8,5,2]],t.vacate_tips_finish=!1,t.bottom=null,t.icon_3=null,t.GM=null,t.editbox=null,t.sureBtn=null,t._propUseData={},t._frozenBarbecue=!1,t._recoverNum=0,t._recoverSucNum=0,t._day=0,t._difficultLevel=0,t.compound_kebabs=[],t.speek_str=["\u60f3\u5403\u70e7\u70e4\u4e86","\u771f\u9999\u554a","\u8c22\u8c22\u8001\u677f","\u770b\u7740\u5c31\u597d\u5403","\u4e0b\u6b21\u8fd8\u6765"],t.guest_id_array=[1,2,3,4,5,6,7,9,10,11,12,15,16,17,18,19,20,21,22,23,24,25,26,27,29,30,31],t.n1=.15,t.n2=.3,t.oven_array=[],t.plate_array=[],t.tray_array=[],t.eff_kebabs_array=[],t.eff_frozen_array=[],t.eff_tinfoil_array=[],t.eff_flame_array=[],t.eff_compound_array=[],t.pos_jinbi=[cc.v2(-240,380),cc.v2(-120,450),cc.v2(-180,470),cc.v2(-290,350),cc.v2(-130,370)],t.eff_jinbi_array=[],t.eff_congrats_array=[],t.eff_smoke_array=[],t._guestCountID=0,t.guest_array=[],t._operateLists=[],t._aimEven=null,t._operateId=null,t._operateType=null,t._operateListIndex=0,t._isMisTakeOperate=!1,t._autoTime=1e6,t._curAutoTime=0,t._autoState=1,t._voiceLists={},t._compountGuestId=-1,t._waitMoveGuset=[],t._compoundCount=0,t._playVoiceCount=0,t._noOperateTime=0,t._compountOCount=0,t._frozenTime=0,t._frozenCount=0,t}var n;return s(t,e),n=t,Object.defineProperty(t.prototype,"IsGameOver",{set:function(e){this._isGameOver=e},enumerable:!1,configurable:!0}),t.prototype.addPropUse=function(e){this._propUseData[e]?this._propUseData[e]++:this._propUseData[e]=1,console.error("addPropUse",e,this._propUseData)},t.prototype.checkIsCanUseProp=function(e){return!(this._propUseData[e]||!this._frozenBarbecue&&3==e)},t.prototype.onUILoad=function(){var e=this;window.wx&&window.wx.onShow&&(Z=window.wx.onShow(function(){e._day&&e._propUseData&&L.default.Instance.reportEnterStage(e._day,"difficult_"+e._difficultLevel)}),Y=window.wx.onHide(function(){if(e._day&&e._propUseData){var t=0,n={};for(var o in e._propUseData)e._propUseData[o]&&(t+=e._propUseData[o],n["prop"+o]=e._propUseData[o]);var a=R.default.Instance.curNum/R.default.Instance.totalNum;L.default.Instance.reportEndStage(e._day,0,t,e._recoverSucNum,{label:"difficult_"+e._difficultLevel,progress:Math.floor(100*a)/100,keyItemUseList:n})}}))},t.prototype.onUIDestroy=function(){window.wx&&window.wx.offShow&&(window.wx.offShow(Z),window.wx.offHide(Y))},t.prototype.onUIEnable=function(){this.homeBtn.on(cc.Node.EventType.TOUCH_END,this._homeBtnClick,this),this.restartBtn.on(cc.Node.EventType.TOUCH_END,this._restartBtnClick,this),this.recoverBtn.on(cc.Node.EventType.TOUCH_END,this._recoverBtnClick,this),this.sureBtn.on(cc.Node.EventType.TOUCH_END,this._sureBtnClick,this),cc.systemEvent.on(j.DistributedEvent.challangeGameRestart,this._gameRestartEvent,this),cc.systemEvent.on(j.DistributedEvent.challangeGameRecover,this._gameRecoverEvent,this),cc.systemEvent.on(j.DistributedEvent.backHome,this._backHomeEvent,this)},t.prototype.onUIDisable=function(){A.default.Instance.gameType=j.GameType.none,this.homeBtn.off(cc.Node.EventType.TOUCH_END,this._homeBtnClick,this),this.restartBtn.off(cc.Node.EventType.TOUCH_END,this._restartBtnClick,this),this.recoverBtn.off(cc.Node.EventType.TOUCH_END,this._recoverBtnClick,this),this.sureBtn.off(cc.Node.EventType.TOUCH_END,this._sureBtnClick,this),cc.systemEvent.off(j.DistributedEvent.challangeGameRestart,this._gameRestartEvent,this),cc.systemEvent.off(j.DistributedEvent.challangeGameRecover,this._gameRecoverEvent,this),cc.systemEvent.off(j.DistributedEvent.backHome,this._backHomeEvent,this)},t.prototype._homeBtnClick=function(){this._gameOver(0,!0)},t.prototype._restartBtnClick=function(){var e=this;this.node&&this.node.isValid&&L.default.Instance.ShareOrVideo(L.ShareLoc.daily_challenge,function(){e.node&&e.node.isValid&&e.Begin()})},t.prototype._recoverBtnClick=function(){var e=this;L.default.Instance.ShareOrVideo(L.ShareLoc.daily_challenge_revive,function(){e.node&&e.node.isValid&&cc.systemEvent.emit(j.DistributedEvent.challangeGameRecover,!0)})},t.prototype._sureBtnClick=function(){var e=this.editbox.string,t=!0;e||(t=!1);var n=JSON.parse(e);Number(n[0])||(t=!1),Number(n[1])||(t=!1),t?(R.default.Instance.testday=Number(n[0]),R.default.Instance.testLevel=Number(n[1]),cc.systemEvent.emit(j.DistributedEvent.challangeGameRestart)):console.error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u606f",e)},t.prototype._gameRestartEvent=function(){this.node&&this.node.isValid&&this.Begin()},t.prototype._gameRecoverEvent=function(e){if(this.node&&this.node.isValid){if(e){this._recoverSucNum++,this._showEndNode(!1),this.prop_cooling=1;var t=R.default.Instance.totalNum-R.default.Instance.curNum,n=Math.floor(t/3);n>3&&(n=3);var o=this,a=0;(function e(t){o.prop_cooling=1,cc.tween(o).delay(.35*t).call(function(){o.node&&o.node.isValid&&(o.prop_compound(),--n>0?e(a++):(o.IsGameOver=!1,o.GameStop(!1)))}).start()})(a)}else this._showEndNode(!0);this._recoverNum++}},t.prototype._backHomeEvent=function(e){if(e=1!=e?0:1,this.IsGameOver=!0,this.node&&this.node.isValid){var t=0,o={};for(var a in this._propUseData)this._propUseData[a]&&(t+=this._propUseData[a],o["prop"+a]=this._propUseData[a]);var i=R.default.Instance.curNum/R.default.Instance.totalNum;L.default.Instance.reportEndStage(this._day,e,t,this._recoverSucNum,{label:"difficult_"+this._difficultLevel,progress:Math.floor(100*i)/100,keyItemUseList:o}),z.default.Instance.DestroyUI(n)}},t.prototype.onUIStart=function(){var e=this;M.default.Instance.nowTime=0,A.default.Instance.inGame=!0,A.default.Instance.gameType=j.GameType.challange,A.default.Instance.TsGame&&A.default.Instance.TsGame.node&&A.default.Instance.TsGame.node.isValid&&(A.default.Instance.TsGame.node.active=!1),this.random_value(3,[12,12,12],!0),this.node.on(cc.Node.EventType.TOUCH_START,function(){null==e.game_stop&&(e.GameStop(!1),e.compound_tips_time=5,e.reset_vacate_time(!0),e.resetOpenrateTime(),e.resetFrozenTime()),1==e.finger_tips_type&&(e.icon_finger.active=!1),E.default.Instance.PlaySound("g127_click")},this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){1!=e.finger_tips_type&&3!=e.finger_tips_type||(e.icon_finger.active=!1)}),this.node.on(cc.Node.EventType.TOUCH_END,function(){1!=e.finger_tips_type&&3!=e.finger_tips_type||(e.icon_finger.active=!1)}),this.btn_stop.on(cc.Node.EventType.TOUCH_END,this.open_setting,this),this.btn_video.on(cc.Node.EventType.TOUCH_END,this.video,this);for(var t=0;t<this.btn_prop.length;t++)this.btn_prop[t].node.on(cc.Node.EventType.TOUCH_END,this.use_prop.bind(this,this.btn_prop[t].prop_id,!1));this.btn_begin.on(cc.Node.EventType.TOUCH_END,this.Begin,this),this.btn_down.on(cc.Node.EventType.TOUCH_END,this.down,this),this.btn_add.on(cc.Node.EventType.TOUCH_END,this.change_lv.bind(this,1)),this.btn_sub.on(cc.Node.EventType.TOUCH_END,this.change_lv.bind(this,-1)),this.btn_tips.on(cc.Node.EventType.TOUCH_END,this.amendment,this),this.btn_next.on(cc.Node.EventType.TOUCH_END,this.next,this),this.loseBtn.on(cc.Node.EventType.TOUCH_END,this._loseBtnClick,this),this.spine_tips.setCompleteListener(this.animation_listener1.bind(this)),this.schedule(this.second,1),this.btn_stop.parent.y+=A.default.Instance.ScreenAdaptive-this.node.y,E.default.Instance.PlayLoop("bustling",!1,"bustling"),E.default.Instance.playmusic("g127_backgroundmusic");var n=LWGSDK.isAdWhiteList();console.log("\u7528\u6237\u767d\u540d\u5355===",n),1==n&&this.label_score.node.on(cc.Node.EventType.TOUCH_END,this.open_gm,this),this.btn_down.active=!1,this.btn_add.active=!1,this.btn_sub.active=!1,this.btn_tips.active=!1,this.btn_begin.active=!1,this.btn_next.active=!1,this.GM.active=!1,this.loseBtn.active=!1,this.node.y-=.5*A.default.Instance.ScreenAdaptive;var o=0;.5*A.default.Instance.ScreenAdaptive>=40&&(o=.5*A.default.Instance.ScreenAdaptive-40),o=o||0,this.bottom.y-=o,x.default.Instance.initManager()},t.prototype.animation_listener1=function(e){switch(e.animation.name){case"appear":this.spine_tips.setAnimation(0,"idle",!0)}},t.prototype.onDestroy=function(){A.default.Instance.inGame=!1;var e=G.default.Instance.musicVolume;E.default.Instance.setMusicVolume(e),E.default.Instance.playmusic("BGM");var t=z.default.Instance.GetUI(v.default);t&&1==N.default.Instance.JudgeFacilityBuy()&&(t.btn_facility.children[0].active=!0),z.default.Instance.GetUI(F.default)?A.default.Instance.TsGame&&A.default.Instance.TsGame.node&&A.default.Instance.TsGame.node.isValid&&(A.default.Instance.TsGame.node.active=!0):(z.default.Instance.OpenUI(v.default,z.UIOrder.Window_1),z.default.Instance.OpenUI(F.default,z.UIOrder.Interface_1),D.default.Instance.TsInitial.login.active=!0)},t.prototype.onInit=function(){this.lv=1e3;for(var e=0;e<this.btn_prop.length;e++)this.btn_prop[e].draw();this.Begin()},t.prototype.onUpdate=function(e){if(M.default.Instance.updateVoiceTime(e),this.prop_cooling>=0&&(this.prop_cooling-=e),this.tray_cooling>=0&&(this.tray_cooling-=e),this.touch_pos)if(N.default.Instance.Distance(this.touch_pos,this.node_item.getPosition())>4e3*e){var t=N.default.Instance.Direction(this.touch_pos,this.node_item.getPosition());this.node_item.x-=4e3*t.x*e,this.node_item.y-=4e3*t.y*e}else this.node_item.setPosition(this.touch_pos),this.touch_pos=null;this.gm_time>0&&(this.gm_time-=e,this.gm_time<=0&&(this.gm_num=null))},t.prototype.open_gm=function(){null==this.gm_num?(this.gm_num=1,this.gm_time=1):this.gm_num++,this.gm_num<2||(this.gm_num=null,this.gm_time=null,this.btn_down.active=!this.btn_down.active,this.btn_add.active=!this.btn_add.active,this.btn_sub.active=!this.btn_sub.active,this.btn_tips.active=!this.btn_tips.active,this.btn_begin.active=!this.btn_begin.active,this.btn_next.active=!this.btn_next.active,this.GM.active=!this.GM.active,this.loseBtn.active=!this.loseBtn.active)},t.prototype.Begin=function(e){return void 0===e&&(e=!1),u(this,void 0,void 0,function(){var e,t,n,o,a,i,r;return d(this,function(c){switch(c.label){case 0:return R.default.Instance.updateFailNum(1),this.noTimeGameNode.active=!1,this.label_score.node.setPosition(0,5),this._propUseData={},this._frozenBarbecue=!1,this._recoverNum=0,this._recoverSucNum=0,this.IsGameOver=!1,this._voiceLists={},this._compoundCount=0,this._playVoiceCount=0,this._compountOCount=0,this._noOperateTime=0,this._frozenTime=0,this._frozenCount=0,this._compountGuestId=-1,this._waitMoveGuset=[],this.is_over=!1,this.lv,this.score=0,this.compound_num=0,this.game_stop=null,this.compound_tips_time=null,this.reset_vacate_time(!1),this.resetOpenrateTime(),this.resetFrozenTime(),this.special_order_execute=null,this.tray_plate={},this.useing_oven_tray=[],this.prop_cooling=-10,this.eff_smoke_time=5,this.guest_queue=[],this.guest_queue_ids=[],this.finger_tips_type=null,this.label_score.string=""+this.score,this.bar_score.width=0,this.ani_group_order.node.active=!1,this.node_item.active=!1,this.ani_double_hit.node.active=!1,this.icon_pan.node.setPosition(500,400),this.icon_finger.active=!1,this.eff_huoyan.active=!1,this.spine_tips.node.active=!1,this.tips_prop.node.parent.active=!1,e=R.default.Instance.difficultLevel,t=R.default.Instance.dayConfigKey,n=R.default.Instance.dayLevelToKey(t,e),this._day=t,this._difficultLevel=e,L.default.Instance.reportEnterStage(this._day,"difficult_"+this._difficultLevel),console.error("day",t),console.error("difficult_level",e),console.error("levelKey",n),o=2,[4,P.default.Instance.LoadJson2(j.BundleName.Bundle1UI_Challange,"Json/lv_"+n)];case 1:return(a=c.sent())?(this.BarbecueLvData=a,this.render_barbecue(a,o),this.show_speek(!1),this.label_speek.node.parent.active=!1,this.ani_kaishiyingye.node.active=!1,this.ani_nandutisheng.node.active=!1,this.ani_shijianbuzu.node.active=!1,this.pack_mask.active=!1,1==this.open_explain()&&this.OpeningTips(),this.init_prop(),i=null,A.default.Instance.isYuTinAB&&(M.default.Instance.isFinishFisrt||(r=M.default.Instance.getIpConfigById(A.default.Instance.province))&&r.role&&this.guest_id_array.includes(r.role)&&(i=r.role)),this.guest_move(!0,!0,i),this.guest_move(!0),this.guest_move(!0),this.spine_bg.setAnimation(0,"animation",!0),this._showEndNode(!1),z.default.Instance.DestroyUI(_.default),[2]):(console.error("\u914d\u7f6e\u4e0d\u5b58\u5728"),[2])}})})},t.prototype.OpeningTips=function(){this.ani_kaishiyingye.node.active=!0,this.ani_kaishiyingye.play()},t.prototype.init_prop=function(){for(var e=0;e<this.btn_prop.length;e++)this.btn_prop[e].init(this.lv),2==e&&(this.btn_prop[e].node.active=this._frozenBarbecue)},t.prototype.use_prop=function(e,t){var n=this;if(!this._isGameOver||t)if(this.checkIsCanUseProp(e)){if(this.resetOpenrateTime(),this.resetFrozenTime(),0==t&&(this.prop_cooling>0||this.tray_cooling>0))return D.default.Instance.TsInitial.ShowTips("\u8bf7\u6162\u70b9");var o=this.btn_prop[e-1];if(1!=o.label_unlock.node.active||0!=t){var a,i=G.default.Instance.BarbecueProp["prop_"+e];if((null==i||i<=0)&&0==t)return this.GameStop(!0),void z.default.Instance.OpenUI(y.default,z.UIOrder.Window_2,e,!1,this,function(){n.GameStop(!1)});switch(this.select_data&&(this.select_data.item.node_kebabs[this.select_data.index].opacity=255,this.node_item.active=!1,this.select_data=null),this.icon_finger.active=!1,this.prop_cooling=2,e){case 1:a=this.prop_compound(),cc.tween(this).delay(.35).call(function(){0==n.game_stop&&(n.prop_compound(),n.prop_cooling=1)}).start();break;case 2:a=!0,this.prop_reset2();break;case 3:a=this.prop_torch()}(a||t)&&this.addPropUse(e),1==a&&0==t&&(this.reset_compound_tips(),G.default.Instance.BarbecueProp["prop_"+e]&&G.default.Instance.BarbecueProp["prop_"+e]--,o.Refresh(),G.default.Instance.AutoSyncData()),this.tips_prop.node.parent.active=!1}else D.default.Instance.TsInitial.ShowTips("\u9053\u5177\u672a\u89e3\u9501")}else D.default.Instance.TsInitial.ShowTips("\u4f7f\u7528\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650")},t.prototype.prop_compound=function(){1==A.default.Instance.GudieStep&&(A.default.Instance.GudieStep=30);var e=this.get_prop1_compound();if(null==e)return D.default.Instance.TsInitial.ShowTips("\u6ca1\u6709\u53ef\u4ee5\u5408\u6210\u7684\u70e4\u4e32"),!1;for(var t=0;t<e.length;t++){var n=e[t];null!=n.ts&&null!=n.ts.node_frozen&&null!=n.ts.node_frozen[n.index]&&(n.ts.node_frozen[n.index].node.active=!1,n.ts.node_frozen[n.index]=null)}var o=e[0].ts.KebabsData[e[0].index].id;return this.monitor_compound(o,e,!0),this.amendment(),!0},t.prototype.prop_reset2=function(e){var t=this;void 0===e&&(e=!0),this.prop_cooling=1;for(var n=[],o=0,a=0;a<this.useing_oven_tray.length;a++)if(null!=(_=this.useing_oven_tray[a])&&0!=_.node.active)for(var i=0;i<_.KebabsData.length;i++)if((s=_.KebabsData[i]).id>0)n.push(s.id);else switch(_.OvenData.condition){case j.OvenCondition.cover:case j.OvenCondition.video:break;case j.OvenCondition.one_grid:1==i&&o++;break;default:o++}for(i=0;i<this.plate_array.length;i++){var r=this.plate_array[i];if(0!=r.node.active&&0!=r.Useing)for(var c=0;c<r.KebabsData.length;c++){var s;(s=r.KebabsData[c]).id>0&&n.push(s.id)}}for(var l in this.tray_plate){var u=this.tray_plate[l];for(a=0;a<u.length;a++)u[a].id>0&&n.push(u[a].id)}if(0==n.length)return!1;if(o<3){var d=n[Math.floor(Math.random()*n.length)];for(a=0;a<3;a++){var h=n.indexOf(d);h>=0?n.splice(h,1):console.error("\u5220\u9664\u70e4\u4e32\u5931\u8d25------\u70e4\u4e32\u6b8b\u7f3a")}var p=void 0;for(a=4;a<this.useing_oven_tray.length;a++)if(null!=(_=this.useing_oven_tray[a])&&0!=_.node.active){p=_;break}this.compound_eff(d,[{ts:p,key:null,index:0},{ts:p,key:null,index:1},{ts:p,key:null,index:2}],!1,!0)}n.sort(function(){return Math.random()-.5});var f=0;if(1==e){for(a=0;a<this.useing_oven_tray.length;a++){var _;null!=(_=this.useing_oven_tray[a])&&0!=_.node.active&&_.ani_kebabs.play("ani_daluan1")}f=.5}cc.tween(this).delay(f).call(function(){for(var e in t.tray_plate)for(var a=t.tray_plate[e],i=[],r=0;r<a.length;r++)if(a[r].id>0){var c=0;if(2==i.length&&i[0]==i[1])for(;n[c]==i[0];)if(null==n[++c]){c=0;break}i.push(n[c]),a[r].id=n[c],n.splice(c,1)}for(var s=0;s<t.plate_array.length;s++){var l=t.plate_array[s];if(0!=l.node.active&&0!=l.Useing){i=[];for(var u=0;u<l.KebabsData.length;u++)if((p=l.KebabsData[u]).id>0){if(c=0,2==i.length&&i[0]==i[1])for(;n[c]==i[0];)if(null==n[++c]){c=0;break}i.push(n[c]),l.ChangeKebabs(u,n[c],p.condition),n.splice(c,1)}}}var d=0;o<3&&(d=3);var h=!1;for(r=0;r<t.useing_oven_tray.length;r++)if(null!=(f=t.useing_oven_tray[r])&&0!=f.node.active)for(i=[],s=0;s<f.KebabsData.length;s++){var p;if((p=f.KebabsData[s]).id>0)if(n.length>0){if(c=0,2==i.length&&i[0]==i[1])for(;n[c]==i[0];)if(null==n[++c]){c=0,h=!0,console.error("\u70e4\u7089"+f.Index+"\u7684\u4e09\u4e2a\u70e4\u4e32\u76f8\u540c====================");break}2==i.length&&d>0?(f.ChangeKebabs(s,0,j.KebabCondition.normal),d--):(i.push(n[c]),f.ChangeKebabs(s,n[c],p.condition),n.splice(c,1))}else f.ChangeKebabs(s,0,j.KebabCondition.normal),console.error("\u70e4\u7089"+f.Index+",\u5e8f\u53f7"+s+"\u70e4\u4e32\u5e93\u6ca1\u70e4\u4e32\u4e86")}if(1==h)t.prop_reset2(!1);else{for(r=0;r<t.useing_oven_tray.length;r++){var f;null!=(f=t.useing_oven_tray[r])&&0!=f.node.active&&f.ani_kebabs.play("ani_daluan2")}t.amendment()}}).start()},t.prototype.prop_torch=function(){for(var e=this,t=!1,n=function(n){var a=o.useing_oven_tray[n];if(null==a||0==a.node.active)return"continue";for(var i=!1,r=function(e){if(a.KebabsData[e].condition==j.KebabCondition.frozen){var n=e;o.PlayEffFlame(a.Index,2,n),o.scheduleOnce(function(){null==a.node_frozen[n]?console.error("\u62a5\u9519\uff0c\u878d\u5316\u9053\u5177\u51b0\u51bb\u8282\u70b9"):(a.node_frozen[n].Thaw(),a.node_frozen[n]=null,a.KebabsData[n].condition=j.KebabCondition.normal)},.5),i=!0,t=!0}},c=0;c<a.KebabsData.length;c++)r(c);1==i&&o.scheduleOnce(function(){e.JudgeOvenKebabs(a,!1,"\u9053\u5177-\u878d\u5316\u51b0\u51bb\u70e4\u4e32")},.6)},o=this,a=0;a<this.useing_oven_tray.length;a++)n(a);return 0==t?D.default.Instance.TsInitial.ShowTips("\u573a\u4e0a\u6ca1\u6709\u53ef\u4ee5\u878d\u5316\u7684\u51b0\u51bb\u70e4\u4e32"):(E.default.Instance.PlaySound("g127_torch"),cc.tween(this).delay(.5).call(function(){E.default.Instance.PlaySound("g127_thaw")}).start(),this.scheduleOnce(function(){e.judge_prop_tips("\u6210\u529f\u79fb\u52a8\u70e4\u4e32")},3)),t},t.prototype.fill_oven=function(e){var t=this.get_plate(e.Index);if(null!=t){for(var n=this.kebabs_max-3*this.compound_num,o=0;o<t.KebabsData.length;o++){var a=t.KebabsData[o];0!=a.id&&(n<10?e.ChangeKebabs(o,a.id,j.KebabCondition.normal):e.ChangeKebabs(o,a.id,a.condition))}switch(console.log("\u70e4\u7089"+e.Index+"\u586b\u5145\u70e4\u4e32"),e.ani_kebabs.play(),cc.tween(this).delay(.3).call(function(){E.default.Instance.PlaySound("g127_plating")}).start(),this.recycle_plate(t,"\u70e4\u76d8\u586b\u5145\u70e4\u7089"),this.reset_vacate_time(!0),e.OvenData.condition){case j.OvenCondition.hot:case j.OvenCondition.normal:var i=e.node.getPosition();i.y+=90,this.PlayEffSmoke(i)}}},t.prototype.fill_tray=function(e,t){for(var n,o,a,i,r=0;r<this.tray_correlation.length;r++)if((o=this.tray_correlation[r].indexOf(e.Index))>=0){n=this.tray_correlation[r],a="tray_plate_"+r,i="tray_plate_"+r;break}if(null==this.tray_plate[i]||0==this.tray_plate[a].length)for(var c in i=null,this.tray_plate)if(c!=i&&this.tray_plate[c].length>0){i=c;break}for(e.Hide(t),r=o+1;r<n.length;r++){var s=this.useing_oven_tray[n[r]];if(null==s)break;s.Move(n[r-1],"\u586b\u5145\u6258\u76d8-\u65e7\u6258\u76d8\u4e0b\u843d"),this.useing_oven_tray[n[r-1]]=s,this.useing_oven_tray[n[r]]=null}if(null!=i){var l=void 0;switch(a){case"tray_plate_0":l=cc.v2(-225,480);break;case"tray_plate_1":l=cc.v2(0,480);break;case"tray_plate_2":l=cc.v2(225,480)}var u=this.tray_plate[i].splice(0,3);if(this.kebabs_max-3*this.compound_num<10)for(r=0;r<u.length;r++)u[r].condition=j.KebabCondition.normal;this.found_tray(n[n.length-1],u,l,"\u586b\u5145\u6258\u76d8-\u751f\u6210\u65b0\u6258\u76d8")}this.reset_vacate_time(!0)},t.prototype.recycle_plate=function(e){if(0!=e.Useing){e.Useing=!1,e.KebabsData[0].id==e.KebabsData[1].id&&e.KebabsData[1].id==e.KebabsData[2].id&&0==e.KebabsData[2].id||(e.node_kebabs[0].active=!1,e.node_kebabs[1].active=!1,e.node_kebabs[2].active=!1),cc.tween(e.node).to(.5,{opacity:0}).call(function(){e.node.active=!1,e.node.opacity=255}).start();var t=this.get_plate(e.Index);t&&t.ShowKebabs(!0)}},t.prototype.operate_succeed=function(e,t,n){var o=this;if(this.select_data){var a=this.select_data,i=a.item.KebabsData[a.index].id;a.item.ChangeKebabs(a.index,0,j.KebabCondition.normal),e.ChangeKebabs(t,i,j.KebabCondition.normal,!1),console.log("\u70e4\u4e32"+i+"\u79fb\u52a8\u6210\u529f\uff1a\u4ece\u7089\u5b50"+a.item.Index+"\u4f4d\u7f6e"+a.index+"\u79fb\u52a8\u5230\u7089\u5b50"+e.Index+"\u4f4d\u7f6e"+t+"\uff0c\u662f\u62d6\u62fd"+n),e.Index!=a.item.Index?e.Index>a.item.Index?(this.JudgeOvenKebabs(a.item,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u51fa\u53bb"),this.JudgeOvenKebabs(e,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u8fc7\u6765")):(this.JudgeOvenKebabs(e,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u8fc7\u6765"),this.JudgeOvenKebabs(a.item,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u51fa\u53bb")):this.JudgeOvenKebabs(a.item,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u51fa\u53bb"),this.amendment(),this.next_pos=null,this.select_data=null,e.eff_select.active=!1,a.item.eff_select.active=!1,this.node_item.getComponent(cc.Sprite).spriteFrame=null,this.node_item.active=!1;var r,c=e.node.convertToWorldSpaceAR(e.node_kebabs[t].getPosition()),s=this.group_eff.convertToNodeSpaceAR(c),l=this.get_eff_kebab();if(0==n){var u=a.item.node.convertToWorldSpaceAR(a.item.node_kebabs[a.index].getPosition());r=this.group_eff.convertToNodeSpaceAR(u)}else r=this.node_item.getPosition();var d=l.Init(i,r,s,this.kebabs_move_speed);this.scheduleOnce(function(){e.RefreshKebabs(t)},d),E.default.Instance.PlaySound("g127_drop"),cc.Tween.stopAllByTag(10),cc.tween(this).tag(10).delay(5).call(function(){o.judge_prop_tips("\u6210\u529f\u79fb\u52a8\u70e4\u4e32")}).start()}},t.prototype.operate_fail=function(){if(null!=this.next_pos&&(this.next_pos.ts.node_kebabs[this.next_pos.index].active=!1,console.error("\u70e4\u4e32\u79fb\u52a8\u5931\u8d25\uff1a\u610f\u5916\u51fa\u73b0\u9884\u5224\u4f4d\u7f6e\u70e4\u7089"+this.next_pos.ts.Index+"\u4f4d\u7f6e"+this.next_pos.index+"\uff0c\u9690\u85cf"),this.next_pos=null),null!=this.select_data){var e=this.select_data;this.select_data=null;var t=this.node_item.getPosition(),n=e.item.node.convertToWorldSpaceAR(e.item.node_kebabs[e.index].getPosition()),o=this.group_eff.convertToNodeSpaceAR(n),a=this.get_eff_kebab().Init(e.item.KebabsData[e.index].id,t,o,this.kebabs_move_speed);e.item.eff_select.active=!1,this.node_item.getComponent(cc.Sprite).spriteFrame=null,this.node_item.active=!1,this.scheduleOnce(function(){e.item.node_kebabs[e.index].opacity=255,e.item.node_kebabs[e.index].active=!0},a),console.log("\u70e4\u4e32\u79fb\u52a8\u5931\u8d25\uff1a\u539f\u6765\u70e4\u7089"+e.item.Index+"\u4f4d\u7f6e"+e.index+"\u6062\u590d\uff0c\u52a8\u753b\u8017\u65f6"+a)}},t.prototype.compound_eff=function(e,t,n,o){var a=this;if(0==o&&t[0].ts.OvenData.condition==j.OvenCondition.tray);else{if(this.compound_kebabs.length>0){for(var i=0;i<this.compound_kebabs.length;i++)this.compound_kebabs[i].node.active=!1;this.compound_kebabs=[]}var r=0,c=void 0;if(null!=t[1].ts){var s=t[1].ts.node.convertToWorldSpaceAR(t[1].ts.node_kebabs[t[1].index].getPosition());c=this.group_eff.convertToNodeSpaceAR(s)}else o=!0;for(i=0;i<t.length;i++){var l=void 0;if(t[i].ts){var u=t[i].ts.node.convertToWorldSpaceAR(t[i].ts.node_kebabs[t[i].index].getPosition());l=this.group_eff.convertToNodeSpaceAR(u)}else l=cc.v2(0,800);var d=this.get_eff_kebab(),h=d.Init2(e,l,c,this.compound_pos[i],2e3,o);this.compound_kebabs.push(d),r<h&&(r=h)}A.default.Instance.isYuTinAB||null==this.special_order_execute&&this.guest_move(!1),0==n&&(this.icon_pan.play("ani_icon_pan_in"),cc.Tween.stopAllByTag(11),cc.tween(this).tag(11).delay(r+.5).call(function(){cc.tween(a.icon_pan.node).to(.4,{opacity:0}).call(function(){a.icon_pan.node.x=600,a.icon_pan.node.opacity=255}).start();for(var e=0;e<a.compound_kebabs.length;e++)a.compound_kebabs[e].Hide3();a.compound_kebabs=[]}).start())}var p=this.double_hit(e);if(0==o){U.default.Instance.Label3Effect(p,t[0].ts.node.getPosition(),this.group_eff);var f=t[0].ts.node.getPosition();this.PlayEffCompound(f);var _=this.double_hit_num;for(0==_&&(_=1),_>3&&(_=3),i=0;i<_;i++)cc.tween(this).delay(.3*i).call(function(){a.PlayEffCongrats(f)}).start()}else U.default.Instance.Label3Effect(p,this.btn_prop[0].node.getPosition(),this.group_eff);if(A.default.Instance.isYuTinAB){if(!M.default.Instance.isFinishFisrt){M.default.Instance.isFinishFisrt=!0;var y=this.bar_double_hit.width/170;this.checkCompoundPlaySound(this.guest_queue_ids,y,null)}this.guest_move(!1)}},t.prototype.double_hit=function(e){var t=this;if(0==this.ani_double_hit.node.active)this._compoundCount=0,this._playVoiceCount=0,this.double_hit_num=0,this.ani_double_hit.node.opacity=0;else if(this.double_hit_num++,this.ani_double_hit.node.opacity=255,A.default.Instance.isYuTinAB){var n=!1;if(this._compoundCount++,-1==this._compountGuestId&&(this._playVoiceCount?(this._compoundCount-4)%3==0&&(n=!0):this._compoundCount>=4&&(n=!0)),n){var o=this.bar_double_hit.width/170;this.checkCompoundPlaySound([].concat(this.guest_queue_ids),o,e)}}E.default.Instance.PlaySound("combo_"+Math.min(this.double_hit_num+1,13)),this.bar_double_hit.width=170,this.label_double_hit.string="x"+this.double_hit_num,this.label_double_hit2.string="x"+this.double_hit_num,this.ani_double_hit.node.active=!0,cc.Tween.stopAllByTarget(this.bar_double_hit),cc.tween(this.bar_double_hit).to(Math.max(10-.2*this.double_hit_num,1),{width:0}).call(function(){t.ani_double_hit.node.active=!1}).start();var a=60+20*this.double_hit_num;if(this.score+=a,this.label_score.string=""+this.score,this.barbecue_lv_data&&this.barbecue_lv_data.star_rating){for(var i=[80,80,70],r=[],c=this.barbecue_lv_data.star_rating[this.barbecue_lv_data.star_rating.length-1],s=0;s<this.barbecue_lv_data.star_rating.length;s++){var l=this.barbecue_lv_data.star_rating[s];0==s?r.push(l):r.push(l-this.barbecue_lv_data.star_rating[s-1])}if(this.score>=c)this.bar_score.width=230;else{var u=0;for(s=0;s<this.barbecue_lv_data.star_rating.length;s++){if(l=this.barbecue_lv_data.star_rating[s],!(this.score>l)){var d=i[s]/r[s],h=0;s>0&&(h=this.barbecue_lv_data.star_rating[s-1]),u+=d*(this.score-h);break}u+=i[s]}this.bar_score.width=u}}0==this.double_hit_num||this.ani_double_hit.play();var p=this.double_hit_num>5?5:this.double_hit_num;return cc.tween(this).delay(.2).call(function(){if(t.double_hit_num>0)for(var e=0;e<p;e++)t.PlayEffJinbi(e)}).start(),a},t.prototype.draw_special_order=function(){var e=this;this.special_order_time=this.special_order_execute.time,this.label_time2.string=""+N.default.Instance.TimecFormat(this.special_order_execute.time),this.bar_order.fillRange=1,this.special_order_execute.time>40?P.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/bar_5",this.bar_order.node):P.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/bar_6",this.bar_order.node);for(var t=0;t<this.special_order_execute.kebab_data.length;t++){var n=this.special_order_array[t];null==n&&((n=cc.instantiate(this.special_order_item)).setParent(this.layout_order),this.special_order_array[t]=n),1==this.special_order_execute.hot[t]?P.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_17",n):P.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_bg7",n),this.special_order_execute.kebab_data[t]<0?n.children[1].active=!0:n.children[1].active=!1,n.children[2].opacity=0,n.active=!0,P.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+Math.abs(this.special_order_execute.kebab_data[t]),n.children[0])}if(this.special_order_array.length>this.special_order_execute.kebab_data.length)for(t=this.special_order_execute.kebab_data.length;t<this.special_order_array.length;t++)this.special_order_array[t].active=!1;this.ani_group_order.node.active=!0,this.order_tips.play("ani_order_tips_in"),cc.tween(this).delay(3).call(function(){e.order_tips.play("ani_order_tips_out")}).start(),E.default.Instance.PlaySound("g127_order")},t.prototype.video=function(){var e=this;L.default.Instance.ShareOrVideo(L.ShareLoc.skip_order,function(){e.special_order_execute=null,e.ani_group_order.node.active=!1,e.GameDelay()})},t.prototype.reset_compound_tips=function(){if(this.compound_tips_time=5,null!=this.compound_tips_data){for(var e=0;e<this.compound_tips_data.length;e++){var t=this.compound_tips_data[e];t.ts&&t.ts.KebabShake(t.index,!1)}this.compound_tips_data=null}},t.prototype.broken_frozen=function(){for(var e=0;e<this.useing_oven_tray.length;e++){var t=this.useing_oven_tray[e];null!=t&&0!=t.node.active&&t.Brokenfrozen()}},t.prototype.guest_move=function(e,t,n){var o,a=this;switch(void 0===t&&(t=!0),void 0===n&&(n=null),e){case!0:if(this.kebabs_max/3-this.compound_num<3)return;(o=this.get_guest()).active=!0,o.setPosition(500,300);var i=Math.floor(Math.random()*this.guest_id_array.length),r=this.guest_id_array[i];if(n)r=n;else if(A.default.Instance.isYuTinAB){for(var c=0,s=0,l=0;l<this.guest_queue_ids.length;l++){var u=this.guest_queue_ids[l];M.default.Instance.womanIds.includes(u)&&s++,M.default.Instance.manIds.includes(u)&&c++}s<=0?(i=Math.floor(Math.random()*M.default.Instance.womanIds.length),r=M.default.Instance.womanIds[i]):c<=0&&(i=Math.floor(Math.random()*M.default.Instance.manIds.length),r=M.default.Instance.manIds[i])}P.default.Instance.LoadSkeletonData("guest_spine","guest_"+r,o,"standby_1",!0),this.guest_queue.push(o),this.guest_queue_ids.push(r),o.guestId=r;var d=this.guest_queue.length;if(o.zIndex=100-120*(d-1),t)for(l=0;l<this.guest_queue.length;l++)cc.tween(this.guest_queue[l]).to(.4,{x:120*l}).start(),this.guest_queue[l].zIndex=100-120*l;break;default:var h=(o=this.guest_queue[0]).getComponent(B.default);if(-1!=this._compountGuestId);else{if(A.default.Instance.isYuTinAB){var p=o.getComponent(B.default);p?p.IsCanMove&&p.leave():cc.tween(o).to(.6*3,{x:-500}).call(function(){o.active=!1}).start()}else h.leave();for(this.guest_queue.splice(0,1),this.guest_queue_ids.shift(),l=0;l<this.guest_queue.length;l++)cc.tween(this.guest_queue[l]).to(.4,{x:120*l}).start(),this.guest_queue[l].zIndex=100-120*l;this.guest_move(!0),this.show_speek(!1),cc.tween(this).delay(.5).call(function(){null==a.special_order_execute&&a.show_speek(!0)}).start()}}},t.prototype.show_speek=function(e){var t=this;if(!A.default.Instance.isYuTinAB){switch(e){case!0:var n=Math.floor(Math.random()*this.speek_str.length);this.label_speek.string=this.speek_str[n],cc.tween(this).tag(12).delay(2).call(function(){t.label_speek.node.parent.active=!1}).start();break;default:cc.Tween.stopAllByTag(12)}this.label_speek.node.parent.active=e}},t.prototype._showVoiceSpeek=function(e,t){var n=this;if(t&&t.isValid){cc.Tween.stopAllByTarget(this.label_speek.node);var o=M.default.Instance.getWordsById(e);if(o&&o.words){var a=t.posIndex;a=a||0;var i=[{x:210,scaleX:1},{x:-90,scaleX:-1},{x:12,scaleX:-1}];this.label_speek.node.parent.active=!0,this.label_speek.string=o.words;var r=i[a]?i[a].x:0,c=i[a]?i[a].scaleX:1;this.label_speek.node.parent.setPosition(r,460),this.label_speek.node.parent.setScale(c,1),this.label_speek.node.setScale(c,1),cc.tween(this.label_speek.node).delay(M.default.Instance.talkTime).call(function(){n.label_speek.node.parent.active=!1}).start()}}else console.error("\u5df2\u7ecf\u4e0d\u53ef\u7528")},t.prototype.reset_vacate_time=function(e){cc.Tween.stopAllByTarget(this.ani_finger.node.parent),0==e||this.vacate_tips_finish?this.vacate_tips_time=-1:this.lv<10?this.vacate_tips_time=8:this.vacate_tips_time=15},t.prototype.TipsVideoOven=function(){console.log("=============\u63d0\u793a\u89c6\u9891\u70e4\u7089");for(var e=0;e<this.useing_oven_tray.length;e++){var t=this.useing_oven_tray[e];if(null!=t&&0!=t.node.active&&t.OvenData.condition==j.OvenCondition.video){console.log("=============\u63d0\u793a\u89c6\u9891\u70e4\u7089222",t.Index),this.icon_finger.setPosition(t.node.getPosition()),this.label_finger.string="\u65e0\u6cd5\u6d88\u9664\u5566\uff0c\u89e3\u9501\u65b0\u70e4\n\u7089\u8bd5\u8bd5\u5427",this.icon_finger.active=!0,this.ani_finger.node.parent.setPosition(0,0),this.ani_finger.play("ani_finger_zhiyin2"),this.label_finger.node.parent.setPosition(-1*t.node.x,-160),this.finger_tips_type=2;break}}},t.prototype.second=function(){if(1!=this.game_stop&&null!=this.game_stop&&!this._isGameOver){var e=this.count_down;if(this.count_down<0?(this.GameStop(!0),z.default.Instance.OpenUI(b.default,z.UIOrder.Window_2,this,2)):this.label_time.string=""+N.default.Instance.TimecFormat(this.count_down),this.compound_tips_time>0&&(this.compound_tips_time--,this.compound_tips_time<=0&&(this.compound_tips_data=this.get_oven_compound(),null!=this.compound_tips_data)))for(var t=0;t<this.compound_tips_data.length;t++){var n=this.compound_tips_data[t];n.ts&&n.ts.KebabShake(n.index,!0)}if(this.vacate_tips_time>0&&(this.vacate_tips_time--,this.vacate_tips_time<=0&&this.judge_oven_vacancy()),this.eff_smoke_time>0&&(this.eff_smoke_time--,this.eff_smoke_time<=0)){this.eff_smoke_time=5;var o=[];for(t=0;t<this.useing_oven_tray.length;t++){var a=this.useing_oven_tray[t];if(null!=a&&0!=a.node.active)switch(a.OvenData.condition){case j.OvenCondition.hot:case j.OvenCondition.normal:o.push(a)}}if(o.length>0){var i=o[Math.floor(Math.random()*o.length)].node.getPosition();i.y+=90,this.PlayEffSmoke(i)}}A.default.Instance.isYuTinAB&&(this.checkOperateSound(1),this.checkFrozenSound(1),this.checkTimeSound(this.count_down,e))}},t.prototype.monitor_compound=function(e,t,n){for(var o="\u51c6\u5907\u5408\u6210\u70e4\u4e32"+e+"\u6570\u636e\uff1a",a=0;a<t.length;a++)(i=t[a]).ts?1==i.ts.Type?o+="\u70e4\u7089"+i.ts.Index+"\u4f4d\u7f6e"+i.index+"\u70e4\u4e32"+i.ts.KebabsData[i.index].id+"\uff1b":o+="\u70e4\u76d8"+i.ts.Index+"\u4f4d\u7f6e"+i.index+"\u70e4\u4e32"+i.ts.KebabsData[i.index].id+"\uff1b":o+="\u865a\u62df\u6258\u76d8"+i.key+"\u4f4d\u7f6e"+i.index+"\u70e4\u4e32"+this.tray_plate[i.key][i.index].id+"\uff1b";for(console.log(o),a=0;a<t.length;a++){var i;(i=t[a]).ts?(i.ts.KebabsData[i.index].condition==j.KebabCondition.tinfoil&&(i.ts.node_tinfoil[i.index].node.active=!1,i.ts.node_tinfoil[i.index]=null),i.ts.ChangeKebabs(i.index,0,j.KebabCondition.normal)):i.key&&(this.tray_plate[i.key][i.index].id=0,this.tray_plate[i.key][i.index].condition=j.KebabCondition.normal)}if(this.broken_frozen(),console.log("\u5408\u6210\u70e4\u4e32"+e+",\u6709\u4f7f\u7528\u6253\u5305\u9053\u5177"+n),0==n){var r=t[0].ts;this.JudgeOvenKebabs(r,!0,"\u5408\u6210\u70e4\u4e32"+e+"-\u672a\u4f7f\u7528\u6253\u5305\u9053\u5177")}else{var c=[];for(a=0;a<t.length;a++)if(t[a].ts&&2==t[a].ts.Type){var s=t[a].ts,l="plate_"+s.Index+"_"+s.StackNum;if(!(c.indexOf(l)<0))continue;c.push(l),s.KebabsData[0].id==s.KebabsData[1].id&&s.KebabsData[1].id==s.KebabsData[2].id&&0==s.KebabsData[2].id&&this.recycle_plate(s,"\u5408\u6210\u70e4\u4e32"+e+"-\u4f7f\u7528\u6253\u5305\u9053\u5177-\u70e4\u76d8\u65e0\u70e4\u4e32")}for(a=0;a<t.length;a++)if(t[a].key){if(l="tray_"+t[a].key,!(c.indexOf(l)<0))continue;c.push(l);for(var u=t[a].key,d=this.tray_plate[u].length-1;d>=0;d-=3)0==this.tray_plate[u][d].id&&0==this.tray_plate[u][d-1].id&&0==this.tray_plate[u][d-2].id&&(console.log("\u6e05\u7406\u6389\u865a\u62df\u6258\u76d8"+u+"\u7a7a\u76d8\u5b50"+(d-2)+"-"+d),this.tray_plate[u].splice(d-2,3))}for(a=0;a<t.length;a++)if(t[a].ts&&1==t[a].ts.Type){var h=t[a].ts;if(l="oven_"+h.Index,!(c.indexOf(l)<0))continue;c.push(l),this.JudgeOvenKebabs(h,!1,"\u5408\u6210\u70e4\u4e32"+e+"-\u4f7f\u7528\u6253\u5305\u9053\u5177")}}for(this.compound_num++,R.default.Instance.curNum=3*this.compound_num,A.default.Instance.isYuTinAB&&(this.reduceFrozenCount(1),this.reduceOperateCompountCount(1)),this.compound_eff(e,t,!1,n),this.special_order_execute,this._updateProgress(),this.icon_bar.width=Math.floor(387*this.compound_num/this.kebabs_max),3*this.compound_num==this.kebabs_max&&this.GameStop(!0),this.reset_vacate_time(!0),this.judge_over(),a=0;a<this.useing_oven_tray.length;a++){var p=this.useing_oven_tray[a];null!=p&&0!=p.node.active&&p.OvenData.condition==j.OvenCondition.cover&&p.monitor_compound(e)}},t.prototype.JudgeOvenKebabs=function(e,t,n){var o=0,a=e.KebabsData[0].id;switch(e.KebabsData[0].condition==j.KebabCondition.normal&&e.KebabsData[1].condition==j.KebabCondition.normal&&e.KebabsData[2].condition==j.KebabCondition.normal&&e.KebabsData[0].id==e.KebabsData[1].id&&e.KebabsData[1].id==e.KebabsData[2].id&&(o=0==a?1:2),o){case 1:console.log("\u5224\u65ad\u70e4\u7089"+e.Index+"\uff0c\u7ed3\u679c\uff1a\u9700\u8981\u586b\u5145\uff0c\u89e6\u53d1\u9014\u5f84\uff1a"+n),e.OvenData.condition==j.OvenCondition.tray?this.fill_tray(e,t):this.fill_oven(e);break;case 2:console.log("\u5224\u65ad\u70e4\u7089"+e.Index+"\uff0c\u7ed3\u679c\uff1a\u53ef\u4ee5\u5408\u6210\uff0c\u89e6\u53d1\u9014\u5f84\uff1a"+n);var i=[{ts:e,index:0},{ts:e,index:1},{ts:e,index:2}];this.monitor_compound(a,i,!1);break;default:console.log("\u5224\u65ad\u70e4\u7089"+e.Index+"\uff0c\u7ed3\u679c\uff1a\u65e0\u53cd\u5e94\uff0c\u89e6\u53d1\u9014\u5f84\uff1a"+n)}return o},t.prototype.judge_prop_tips=function(){if(this.node&&this.node.isValid&&1!=this._isGameOver){for(var e=0,t=3,n=0;n<this.useing_oven_tray.length;n++)if(null!=(u=this.useing_oven_tray[n])&&0!=u.node.active&&u.OvenData.condition!=j.OvenCondition.video&&u.OvenData.condition!=j.OvenCondition.cover)if(u.OvenData.condition!=j.OvenCondition.one_grid)for(var o=0;o<3;o++)0==u.KebabsData[o].id&&e++;else 0==u.KebabsData[1].id&&e++,3==t&&null!=this.get_plate(u.Index)&&(t=1);var a=this.get_oven_compound();if(this.tips_prop.node.parent.active=!1,null==a&&e<t||0==e){var i=!1;for(n=0;n<this.useing_oven_tray.length;n++)if(null!=(u=this.useing_oven_tray[n])&&0!=u.node.active&&u.OvenData.condition==j.OvenCondition.video){i=!0;break}var r=!1;if(1==i)z.default.Instance.OpenUI(_.default,z.UIOrder.Window_2,this);else if(this.checkIsCanUseProp(1))r=!0,(c=G.default.Instance.BarbecueProp.prop_1)&&c>0?(this.tips_prop.string="<b><color=#C03B0C>\u65e0\u6cd5\u6d88\u9664\u5566</c><color=#3D2218>\n\u8bd5\u8bd5\u6253\u5305\u5427</color>",this.tips_prop.node.parent.x=this.btn_prop[0].node.x,this.tips_prop.node.parent.active=!0):z.default.Instance.OpenUI(f.default,z.UIOrder.Window_2,1,this);else if(this.checkIsCanUseProp(2))r=!0,(c=G.default.Instance.BarbecueProp.prop_2)&&c>0?(this.tips_prop.string="<b><color=#C03B0C>\u65e0\u6cd5\u6d88\u9664\u5566</c><color=#3D2218>\n\u8bd5\u8bd5\u6253\u4e71\u5427</color>",this.tips_prop.node.parent.x=this.btn_prop[1].node.x,this.tips_prop.node.parent.active=!0):z.default.Instance.OpenUI(f.default,z.UIOrder.Window_2,2,this);else{var c,s=0,l=0;for(n=0;n<this.useing_oven_tray.length;n++){var u;if(null!=(u=this.useing_oven_tray[n])&&0!=u.node.active){var d=this.get_plate(u.Index),h=!1;for(o=0;o<u.KebabsData.length;o++){var p=u.KebabsData[o];if(p&&0!=p.id&&p.condition==j.KebabCondition.frozen){h=!0,l++;break}}null!=d&&0==h&&s++}}l>0&&0==s&&this.checkIsCanUseProp(3)?(c=G.default.Instance.BarbecueProp.prop_3)&&c>0?(this.tips_prop.string="<b><color=#C03B0C>\u65e0\u6cd5\u6d88\u9664\u5566</c><color=#3D2218>\n\u8bd5\u8bd5\u89e3\u51bb\u5427</color>",this.tips_prop.node.parent.x=this.btn_prop[2].node.x,this.tips_prop.node.parent.active=!0):z.default.Instance.OpenUI(f.default,z.UIOrder.Window_2,3,this):this._gameOver(0)}r&&(this.reset_compound_tips(),this.reset_vacate_time(!1))}}},t.prototype.judge_oven_vacancy=function(){var e=this;if(this.compound_tips_data=this.get_oven_compound(),null==this.compound_tips_data){for(var t,n,o={},a=0;a<9;a++)if((u=this.useing_oven_tray[a])&&0!=u.Useing&&u.OvenData.condition!=j.OvenCondition.video&&u.OvenData.condition!=j.OvenCondition.cover&&(null!=this.get_plate(a)||u.OvenData.condition==j.OvenCondition.tray)){for(var i=0,r=0;r<u.KebabsData.length;r++)u.KebabsData[r].id>0&&i++;null==o[""+i]?o[""+i]=[u]:o[""+i].push(u)}for(var c=1;c<4;c++){var s=o[""+c];if(null!=s&&0!=s.length){for(t={oven:s[0],index:0},r=0;r<s[0].KebabsData.length;r++)if(s[0].KebabsData[r].id>0){t.index=r;break}break}}if(null!=t){var l=1e4;for(a=0;a<9;a++){var u;if((u=this.useing_oven_tray[a])&&0!=u.Useing&&u.OvenData.condition!=j.OvenCondition.video&&u.OvenData.condition!=j.OvenCondition.cover&&t.oven.Index!=u.Index){var d=N.default.Instance.Distance(t.oven.node.getPosition(),u.node.getPosition());if(!(d>l))for(r=0;r<u.KebabsData.length;r++)if(0==u.KebabsData[r].id){n={oven:u,index:r},l=d;break}}}n&&n.oven&&(this.lv>10&&(this.vacate_tips_finish=!0),this.icon_finger.active=!0,this.ani_finger.stop(),this.icon_finger.setPosition(0,0),this.label_finger.node.parent.setPosition(0,0),this.label_finger.string="\u5c06\u70e4\u4e32\u79fb\u5230\u5176\u4ed6\u7a7a\u95f2\u70e4\u76d8\n\u4f7f\u76d8\u91cc\u70e4\u4e32\u6446\u4e0a\u70e4\u7089",cc.tween(this.ani_finger.node.parent).repeatForever(cc.tween().call(function(){e.ani_finger.play("ani_finger_zhiyin3"),e.ani_finger.node.parent.setPosition(t.oven.node.x+50*(t.index-1),t.oven.node.y)}).delay(1).to(l/500,{x:n.oven.node.x+50*(n.index-1),y:n.oven.node.y}).call(function(){e.ani_finger.play("ani_finger_zhiyin4")}).delay(1)).start(),this.finger_tips_type=null,cc.tween(this).delay(3).call(function(){e.finger_tips_type=1}).start())}}},t.prototype.judge_special_order=function(){if(null==this.special_order_execute)return console.error("\u5224\u65ad\u7279\u6b8a\u8ba2\u5355\u5b8c\u6210\u51fa\u9519");for(var e=!0,t=0;t<this.special_order_execute.kebab_data.length;t++)if(this.special_order_execute.kebab_data[t]>0){e=!1;break}console.log("\u5224\u65ad\u7279\u6b8a\u8ba2\u5355\u5df2\u7ed3\u675f"+e+",\u6570\u636e"+JSON.stringify(this.special_order_execute)),1==e&&(this.special_order_execute=null,this.ani_group_order.node.active=!1,A.default.Instance.isYuTinAB||this.guest_move(!0))},t.prototype.judge_over=function(){for(var e,t=0,n=0;n<this.useing_oven_tray.length;n++){var o=this.useing_oven_tray[n];if(null!=o&&0!=o.node.active)for(var a=0;a<o.KebabsData.length;a++)0!=o.KebabsData[a].id&&t++}for(n=0;n<this.plate_array.length;n++){var i=this.plate_array[n];if(0!=i.node.active&&0!=i.Useing)for(a=0;a<i.KebabsData.length;a++)0!=i.KebabsData[a].id&&t++}for(var r in this.tray_plate){var c=this.tray_plate[r];for(n=0;n<c.length;n++)0!=c[n].id&&t++}if(t<3){if(-1==this._compountGuestId)for(n=0;n<this.guest_queue.length;n++){var s=this.guest_queue[n];if(s&&s.active){var l=s.getComponent(B.default);l&&l.leave()}}this._updateProgress(),this.GameStop(!0),this._gameOver(1),e=!0}else e=!1;return console.log("\u5f53\u524d\u70e4\u4e32\u6570\u91cf"+t+"\uff0c\u5224\u65ad\u6e38\u620f\u7ed3\u675f\uff1a"+e),e},t.prototype.touch_start=function(e){var t=this;if(!(this._isGameOver||this.prop_cooling>0)){this.reset_vacate_time(!0),this.reset_compound_tips(),this.resetOpenrateTime(),this.resetFrozenTime();var n=e.getCurrentTarget(),o=n.getComponent(p.default);switch(o.OvenData.condition){case j.OvenCondition.video:return void this.operate_fail();case j.OvenCondition.cover:return this.operate_fail(),void D.default.Instance.TsInitial.ShowTips("\u6d88\u9664\u70e4\u4e32"+C.default.Instance.KebabsConfig[o.OvenData.value-1].name+"\u624d\u80fd\u89e3\u9501\u54e6")}this.move_dis=0,this.touch_pos=null;var a,i=n.width/3,r=n.convertToNodeSpaceAR(e.getLocation());if(a=r.x<-.5*i?0:r.x<.5*i?1:2,o.OvenData.condition==j.OvenCondition.one_grid&&(a=1),null!=this.select_data){if(0!=o.KebabsData[a].id)if(this.select_data.item.Index==o.Index&&this.select_data.index==a)a=null;else if(a=null,o.OvenData.condition!=j.OvenCondition.one_grid)for(var c=0;c<o.KebabsData.length;c++)if(0==o.KebabsData[c].id){a=c;break}if(null==a)return void this.operate_fail();0==o.KebabsData[a].id&&(1==o.Useing?this.operate_succeed(o,a,!1):this.operate_fail())}else{if(0==o.KebabsData[a].id)switch(a){case 0:a=1;break;case 1:a=r.x<0?0:2;break;case 2:a=1}if(o.RefreshKebabs(a),0!=o.KebabsData[a].id){if(o.KebabsData[a].condition==j.KebabCondition.frozen)return void D.default.Instance.TsInitial.ShowTips("\u51b0\u51bb\u70e4\u4e32");this.select_data={item:o,index:a},o.node_kebabs[a].opacity=0,o.eff_select.active=!0,P.default.Instance.LoadSpriteFrame2("Bundle1UI","BarbecueStandUI/kebab/kebab_"+o.KebabsData[a].id,null,function(e,n){t.node_item.getComponent(cc.Sprite).spriteFrame=n;var i=o.node.convertToWorldSpaceAR(o.node_kebabs[a].getPosition()),r=t.node.convertToNodeSpaceAR(i);t.node_item.setPosition(r),t.node_item.active=!0}),this.next_pos=null}}}},t.prototype.touch_move=function(e){if(!this._isGameOver&&null!=this.select_data){var t=e.getDelta();if(this.move_dis+=N.default.Instance.Distance(cc.v2(0,0),t),!(this.move_dis<15)){var n=this.node.convertToNodeSpaceAR(e.getLocation());n.y-=(D.default.Instance.ScreenSize.height-1334)/2,this.touch_pos=cc.v2(n.x,n.y+70);var o=this.get_touch_oven(cc.v2(n.x,n.y));if(null!=this.next_pos&&null!=o&&this.next_pos.ts.Index==o.ts.Index&&this.next_pos.index==o.index);else if(null!=this.next_pos&&((a=this.next_pos.ts.node_kebabs[this.next_pos.index]).active=!1,this.next_pos.ts.eff_select.active=!1),null!=o){var a,i=this.select_data.item.KebabsData[this.select_data.index].id;(a=o.ts.node_kebabs[o.index]).opacity=150,a.active=!0,P.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+i,a),o.ts.eff_select.active=!0}this.next_pos=o}}},t.prototype.touch_end=function(e){if(!this._isGameOver&&null!=this.select_data)if(this.reset_vacate_time(!0),this.reset_compound_tips(),this.resetOpenrateTime(),this.resetFrozenTime(),this.move_dis<30)101==A.default.Instance.GudieStep&&(A.default.Instance.GudieStep=100,this.operate_fail());else{this.next_pos&&(this.next_pos.ts.node_kebabs[this.next_pos.index].active=!1);var t=this.node.convertToNodeSpaceAR(e.getLocation());t.y-=(D.default.Instance.ScreenSize.height-1334)/2;var n=this.get_touch_oven(cc.v2(t.x,t.y));if(null!=n)if(this.select_data.item.Index!=n.ts.Index||this.select_data.index!=n.index)if(0!=n.ts.Useing){switch(n.ts.OvenData.condition){case j.OvenCondition.video:return this.operate_fail(),void D.default.Instance.TsInitial.ShowTips("\u770b\u89c6\u9891\u624d\u80fd\u89e3\u9501\u54e6");case j.OvenCondition.cover:return this.operate_fail(),void D.default.Instance.TsInitial.ShowTips("\u6d88\u9664\u70e4\u4e32"+C.default.Instance.KebabsConfig[n.ts.OvenData.value-1].name+"\u624d\u80fd\u89e3\u9501\u54e6")}this.operate_succeed(n.ts,n.index,!0)}else this.operate_fail();else this.operate_fail();else this.operate_fail()}},t.prototype.get_touch_oven=function(e){for(var t,n=0;n<this.useing_oven_tray.length;n++){var o=this.useing_oven_tray[n];if(null!=o&&0!=o.node.active&&o.OvenData.condition!=j.OvenCondition.video&&o.OvenData.condition!=j.OvenCondition.cover){var a=this.node.convertToWorldSpaceAR(e),i=o.node.convertToNodeSpaceAR(a);if(!(Math.abs(i.x)>o.node.width*o.node.scale/2||Math.abs(i.y)>o.node.height*o.node.scale/2)){var r=void 0;if(o.OvenData.condition==j.OvenCondition.one_grid)r=1;else{var c=o.node.convertToNodeSpaceAR(a),s=o.node.width/3;r=c.x<-.5*s?0:c.x<.5*s?1:2}if(0==o.KebabsData[r].id||this.select_data.item.Index==o.Index&&this.select_data.index==r)t={ts:o,key:null,index:r};else if(o.OvenData.condition!=j.OvenCondition.one_grid)for(var l=0;l<o.KebabsData.length;l++)if(0==o.KebabsData[l].id||this.select_data.item.Index==o.Index&&this.select_data.index==l){t={ts:o,key:null,index:l};break}break}}}return t},t.prototype.get_oven_compound=function(){for(var e,t={},n=0;n<this.useing_oven_tray.length;n++){var o=this.useing_oven_tray[n];if(null!=o&&0!=o.node.active&&o.OvenData.condition!=j.OvenCondition.cover)for(var a=0;a<o.KebabsData.length;a++)(r=o.KebabsData[a]).condition==j.KebabCondition.normal&&0!=r.id&&(null==t[""+r.id]&&(t[""+r.id]=[]),t[""+r.id].push({ts:o,key:null,index:a}))}for(var i in t){var r;if((r=t[i]).length>=3){e=r.splice(0,3);break}}return e},t.prototype.get_prop1_compound=function(){var e={};try{for(var t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(null!=n&&0!=n.node.active)for(var o=0;o<n.KebabsData.length;o++)0!=(c=n.KebabsData[o]).id&&(null==e[""+c.id]&&(e[""+c.id]=[]),e[""+c.id].push({ts:n,key:null,index:o}))}var a=[];for(var i in e)switch((c=e[i]).length){case 1:a.push(Number(i));break;case 2:a.unshift(Number(i));break;default:return c.splice(0,3)}for(t=0;t<this.plate_array.length;t++){var r=this.plate_array[t];if(0!=r.node.active&&0!=r.Useing)for(o=0;o<r.KebabsData.length;o++)0!=(c=r.KebabsData[o]).id&&null!=e[""+c.id]&&e[""+c.id].push({ts:r,key:null,index:o})}for(var i in this.tray_plate)if(s=this.tray_plate[i])for(t=0;t<s.length;t++){var c;0!=(c=s[t]).id&&null!=e[""+c.id]&&e[""+c.id].push({ts:null,key:i,index:t})}for(t=0;t<a.length;t++){var s;if((s=e[""+a[t]]).length>=3)return s.splice(0,3)}console.error("\u6ca1\u6709\u53ef\u4ee5\u5408\u6210\u7684\u70e4\u4e32\uff0c\u70e4\u7089\u4e0a\u6709\u70e4\u4e32",a)}catch(p){}return null},t.prototype.get_special_order=function(e,t){for(var n={},o=0;o<12;o++){var a=this.get_plate(o);null!=a&&(n[""+o]=a.StackNum)}for(var i=this.BarbecueLvData.order_select,r=this.get_special_order2(i,n,"\u7279\u6b8a\u8ba2\u5355\u62bd\u53d6\u70e4\u4e32");r.length<e&&i<10;)i++,r=this.get_special_order2(i,n,"\u7279\u6b8a\u8ba2\u5355\u62bd\u53d6\u70e4\u4e32");if(console.log("\u7279\u6b8a\u8ba2\u5355\u9700\u8981\u70e4\u4e32"+e+"\u4e2a,\u968f\u673a\u6c60"+r),r.length<e)return null;var c=[];for(o=0;o<e;o++){var s=Math.floor(Math.random()*r.length);c.push(r[s]),r.splice(s,1)}var l=[];for(o=0;o<c.length;o++)o<t?l.push(!0):l.push(!1);return l.sort(function(){return Math.random()-.5}),{kebab_data:c,hot:l}},t.prototype.get_special_order2=function(e,t,n){for(var o={},a=0;a<this.useing_oven_tray.length;a++)if(null!=(r=this.useing_oven_tray[a])&&0!=r.node.active&&r.OvenData.condition!=j.OvenCondition.cover)for(var i=0;i<r.KebabsData.length;i++)0!=(s=r.KebabsData[i]).id&&(null==o[""+s.id]?o[""+s.id]=1:o[""+s.id]++);for(a=0;a<this.plate_array.length;a++){var r,c=this.plate_array[a];if(0!=c.node.active&&0!=c.Useing&&!((r=this.useing_oven_tray[c.Index])&&r.OvenData.condition==j.OvenCondition.cover||t[""+c.Index]-c.StackNum>=e))for(i=0;i<c.KebabsData.length;i++){var s;0!=(s=c.KebabsData[i]).id&&(null==o[""+s.id]?o[""+s.id]=1:o[""+s.id]++)}}var l=[];for(var u in o)o[u]>=3&&l.push(Number(u));return console.log("\u70e4\u7089+\u524d"+e+"\u5c42\u76d8\u5b50\u4e2d\u5168\u90e8\u70e4\u4e32",o),console.log("\u89e6\u53d1\u70b9:"+n+"\uff0c\u83b7\u53d6\u70e4\u7089+\u524d"+e+"\u5c42\u76d8\u5b50\u4e2d\u53ef\u4ee5\u5408\u6210\u7684\u70e4\u4e32"+l),l},t.prototype.get_plate=function(e,t){for(var n,o=0;o<this.plate_array.length;o++){var a=this.plate_array[o];if(0!=a.node.active&&a.Index==e&&0!=a.Useing)if(t){if(a.StackNum==t)return a}else(null==n||a.StackNum>n.StackNum)&&(n=a)}return n},t.prototype.get_oven_kebabs=function(){for(var e=[],t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(null!=n&&0!=n.node.active)for(var o=0;o<n.KebabsData.length;o++){var a=n.KebabsData[o];0!=a.id&&e.indexOf(a.id)<0&&e.push(a.id)}}return e},t.prototype.get_kebabs_max=function(){for(var e=0,t=0;t<this.BarbecueLvData.kebab_data.length;t++){var n=this.BarbecueLvData.kebab_data[t];null!=n&&n.id>0&&e++}for(var o in this.BarbecueLvData.plate_data){var a=this.BarbecueLvData.plate_data[o];for(t=0;t<a.length;t++)a[t].id>0&&e++}return e},t.prototype.found_barbecue_data=function(e){this.log_record="",this.ok=!0;var t=C.default.Instance.BarbecueLogicConfig["lv_"+e];if(N.default.Instance.UnlockKebabsNum(t.Inn_Lv)<t.Food_species)return D.default.Instance.TsInitial.ShowTips("\u53ef\u6e32\u67d3\u98df\u7269\u79cd\u7c7b\u4e0d\u8db3!!!!!");this.BarbecueLvData={oven_data:[],kebab_data:[],plate_data:{},count_down:this.barbecue_lv_data.count_down,star_rating:this.barbecue_lv_data.star_rating,special_order:[],order_select:this.barbecue_lv_data.order_select};for(var n=[],o=[],a=[],i={},r=[],c=Array.from({length:t.Food_species},function(e,t){return t+1}),s=Math.floor(t.Elimination/3/t.Food_species),l=0;l<t.Elimination/3;l++)if(l<t.Food_species*s)a.push(l%t.Food_species+1,l%t.Food_species+1,l%t.Food_species+1);else{var u=Math.floor(Math.random()*c.length);a.push(c[u],c[u],c[u]),c.splice(u,1)}for(console.log("\u6240\u6709\u70e4\u4e32\u6570\u636e\u957f\u5ea6"+a.length+",\u5185\u5bb9"+a),this.log_record+="\u6240\u6709\u70e4\u4e32\u6570\u636e\u957f\u5ea6"+a.length+",\u5185\u5bb9"+a+"\n",l=0;l<a.length;l++)null==i[""+a[l]]?i[""+a[l]]=1:i[""+a[l]]++;for(var d in i)r.push({id:Number(d),num:i[d]});r.sort(function(e,t){return t.num-e.num}),console.log("\u6392\u5e8f\u540e\u70e4\u4e32====",r);var h=Math.floor(.8*t.Food_species),p=Math.floor(.2*t.Food_species);for(l=0;l<r.length;l++){var f=r[l];u=void 0,null==n[u=l<h?0:l<h+p?1:2]&&(n[u]=[]);for(var _=0;_<f.num;_++)n[u].push(f.id)}for(l=n.length-1;l>=0;l--)null!=n[l]&&0!=n[l].length||(n.splice(l,1),console.error("\u70e4\u4e32\u603b\u5e93\u62a5\u9519==index="+l+"=\u7684\u6279\u6b21\u6ca1\u6709\u70e4\u4e32="));for(l=0;l<n.length;l++)o.push(n[l].filter(function(e,t,n){return n.indexOf(e)===t}));console.log("\u70e4\u4e32\u603b\u5e93========",JSON.stringify(n)),console.log("\u70e4\u4e32\u6279\u6b21\u7684\u79cd\u7c7b========",JSON.stringify(o)),this.kebabs_kind=o,a=n[0],n.splice(0,1),a.sort(function(){return Math.random()-.5});var y=a.filter(function(e,t,n){return n.indexOf(e)===t}),b=[],v=[];for(l=0;l<t.Initial_species;l++)if(u=Math.floor(Math.random()*y.length),b.push(y[u]),y.splice(u,1),0==y.length){console.error("\u7b2c\u4e00\u6279\u6b21\u70e4\u4e32\u79cd\u7c7b\u5c0f\u4e8e\u70e4\u7089\u4e0a\u70e4\u4e32\u79cd\u7c7b========");break}console.log("\u521d\u59cb\u70e4\u7089\u4e0a\u70e4\u4e32\u79cd\u7c7b "+b.length+"\u4e2a\uff0c\u5185\u5bb9 "+b),this.log_record+="\u521d\u59cb\u70e4\u7089\u4e0a\u70e4\u4e32\u79cd\u7c7b "+b.length+"\u4e2a\uff0c\u5185\u5bb9 "+b+"\n";var m={};for(l=0;l<t.Initial_num;l++){var g=void 0;if(l<t.Initial_species)m[g=b[l]]=1;else{var I=Math.floor(Math.random()*b.length);m[g=b[I]]++,3==m[g]&&b.splice(I,1)}(u=a.indexOf(g))>=0?(v.push(g),a.splice(u,1)):(this.ok=!1,console.error("\u70e4\u7089\u62bd\u53d6\u70e4\u4e32"+g+"\u4e0d\u5b58\u5728"),this.log_record+="\u62a5\u9519==\u70e4\u7089\u62bd\u53d6\u70e4\u4e32"+g+"\u4e0d\u5b58\u5728 "+b+"\n")}var T=0,k={},S=0;for(l=0;l<t.Oven_state.length;l++){var w={condition:null,value:0};switch(t.Oven_state[l]){case 0:break;case 1:w.condition=j.OvenCondition.normal,T+=1,k[""+l]=1;break;case 2:w.condition=j.OvenCondition.video;break;case 3:w.condition=j.OvenCondition.cover,w.value=0,T+=1,k[""+l]=1;break;case 4:w.condition=j.OvenCondition.hot,T+=1,k[""+l]=1;break;case 5:w.condition=j.OvenCondition.one_grid,S++;break;case 6:w.condition=j.OvenCondition.tray,T+=1,k[""+l]=1}this.BarbecueLvData.oven_data.push(w)}console.log("\u53ef\u7528\u7089\u5b50"+T+"\u4e2a\uff0c\u9700\u8981\u968f\u673a\u7684\u70e4\u4e32\u6570\u91cf"+(v.length-T-S)),this.log_record+="\u53ef\u7528\u7089\u5b50"+T+"\u4e2a\uff0c\u9700\u8981\u968f\u673a\u7684\u70e4\u4e32\u6570\u91cf"+(v.length-T-S)+"\n";var O=Object.keys(k);for(l=0;l<v.length-T-S;l++)k[""+O[u=Math.floor(Math.random()*O.length)]]++,k[""+O[u]]>=3&&O.splice(u,1);var F=0;for(var d in k)F+=k[d];for(console.log("\u70e4\u7089\u4e0a\u70e4\u4e32\u6570\u91cf===="+F+",\u5185\u5bb9"+JSON.stringify(k)),this.log_record+="\u70e4\u7089\u4e0a\u70e4\u4e32\u6570\u91cf===="+F+",\u5185\u5bb9"+JSON.stringify(k)+"\n",console.log("\u521d\u59cb\u70e4\u7089\u4e0a\u70e4\u4e32\u957f\u5ea6"+v.length+",\u5185\u5bb9"+JSON.stringify(v)),this.log_record+="\u521d\u59cb\u70e4\u7089\u4e0a\u70e4\u4e32\u957f\u5ea6"+v.length+",\u5185\u5bb9"+JSON.stringify(v)+"\n",l=0;l<t.Oven_state.length;l++)switch(this.BarbecueLvData.oven_data[l].condition){case j.OvenCondition.normal:case j.OvenCondition.cover:case j.OvenCondition.hot:case j.OvenCondition.tray:for(var B=this.random_value(k[""+l],v,!0),x=0;x<3;x++)null==B[x]?B[x]=0:(u=v.indexOf(B[x]))>=0&&v.splice(u,1);console.log("\u666e\u901a\u7089\u5b50"+l+"\u62bd\u53d6"+k[""+l]+"\u4e2a\u70e4\u4e32,\u7089\u5b50\u70e4\u4e32\u6c60\u5269\u4f59"+v.length+",\u62bd\u53d6\u7684\u70e4\u4e32"+JSON.stringify(B)),this.log_record+="\u666e\u901a\u7089\u5b50"+l+"\u62bd\u53d6"+k[""+l]+"\u4e2a\u70e4\u4e32,\u7089\u5b50\u70e4\u4e32\u6c60\u5269\u4f59"+v.length+",\u62bd\u53d6\u7684\u70e4\u4e32"+JSON.stringify(B)+"\n",B.sort(function(){return Math.random()-.5});var P={id:B[0],condition:j.KebabCondition.normal},R={id:B[1],condition:j.KebabCondition.normal},A={id:B[2],condition:j.KebabCondition.normal};this.BarbecueLvData.kebab_data.push(P,R,A);break;case j.OvenCondition.one_grid:var U={id:0,condition:j.KebabCondition.normal},M={id:v[0],condition:j.KebabCondition.normal},L={id:0,condition:j.KebabCondition.normal};this.BarbecueLvData.kebab_data.push(U,M,L),v.splice(0,1),console.log("\u5f02\u5f62\u7089\u5b50"+l+"\u62bd\u53d61\u4e2a\u70e4\u4e32,\u7089\u5b50\u70e4\u4e32\u6c60\u5269\u4f59"+v.length+",\u62bd\u53d6\u7684\u70e4\u4e32"+v[0]),this.log_record+="\u5f02\u5f62\u7089\u5b50"+l+"\u62bd\u53d61\u4e2a\u70e4\u4e32,\u7089\u5b50\u70e4\u4e32\u6c60\u5269\u4f59"+v.length+",\u62bd\u53d6\u7684\u70e4\u4e32"+v[0]+"\n";break;case j.OvenCondition.video:var E={id:0,condition:j.KebabCondition.normal},G={id:0,condition:j.KebabCondition.normal},z={id:0,condition:j.KebabCondition.normal};this.BarbecueLvData.kebab_data.push(E,G,z);break;default:this.BarbecueLvData.kebab_data.push(null,null,null)}console.log("=============\u7089\u5b50\u6b8b\u7559\u70e4\u4e32",v),this.log_record+="=============\u7089\u5b50\u6b8b\u7559\u70e4\u4e32"+JSON.stringify(v)+"\n",v.length>0&&(this.ok=!1);var K=Math.floor(t.Same_food/2);t.PlateType_num[1]<K&&(K=t.PlateType_num[1]);var H=t.Same_food-K;t.PlateType_num[2]<H&&(K+=H-t.PlateType_num[2],H=t.PlateType_num[2]);var W=[],V=[],J=[];console.log("\u76d8\u5b50\u70e4\u4e32\u6c60\u6570\u636e\u957f\u5ea6"+a.length+"\uff0c\u5185\u5bb9"+a),this.log_record+="\u76d8\u5b50\u70e4\u4e32\u6c60\u6570\u636e\u957f\u5ea6"+a.length+"\uff0c\u5185\u5bb9"+a+"\n";var q=0,X=0;for(l=0;l<t.Plate.length;l++)t.Plate[l]>0&&(q+=t.Plate[l]);for(l=2;l>=0;l--){var Y=t.PlateType_num[l];for(_=0;_<Y;_++){var Z=void 0;switch(++X>q*this.n1&&1==n.length?(console.error("\u70e4\u4e32\u603b\u5e93\u70e4\u4e32\u7b2c\u4e8c\u6279\u6ce8\u5165\uff0c\u5f53\u524d\u70e4\u4e32\u7ec4\u6570\u91cf",a.length),a=a.concat(n[0]),n.splice(0,1),a.sort(function(){return Math.random()-.5})):X>q*this.n2&&1==n.length?(console.error("\u70e4\u4e32\u603b\u5e93\u70e4\u4e32\u7b2c\u4e09\u6279\u6ce8\u5165\uff0c\u5f53\u524d\u70e4\u4e32\u7ec4\u6570\u91cf",a.length),a=a.concat(n[0]),n.splice(0,1),a.sort(function(){return Math.random()-.5})):a.length<5&&n.length>0&&(a=a.concat(n[0]),n.splice(0,1),console.error("\u70e4\u4e32\u603b\u5e93\u70e4\u4e32\u6ce8\u5165\u5230\u53ef\u9009\u70e4\u4e32\u7ec4\u4e2d"),a.sort(function(){return Math.random()-.5})),l){case 0:Z=this.random_value(1,a,!1);break;case 1:K>0?(Z=this.random_value(2,a,!0),K--):Z=this.random_value(2,a,!1);break;case 2:H>0?(Z=this.random_value(3,a,!0),H--):Z=this.random_value(3,a,!1)}Z.sort(function(){return Math.random()-.5});var Q={id:Z[0],condition:j.KebabCondition.normal,value:0},$={id:Z[1],condition:j.KebabCondition.normal,value:0},ee={id:Z[2],condition:j.KebabCondition.normal,value:0},te={id:0,condition:j.KebabCondition.normal,value:0},ne={id:0,condition:j.KebabCondition.normal,value:0};switch(l){case 0:W.push(Q,te,ne);break;case 1:V.push(Q,$,te);break;case 2:J.push(Q,$,ee)}for(var oe=0;oe<Z.length;oe++)(u=a.indexOf(Z[oe]))>=0?a.splice(u,1):(this.ok=!1,console.error("\u968f\u673a\u76d8\u5b50\u6570\u636e\u62a5\u9519,\u5f53\u524d\u957f\u5ea6"+a.length+"=========\u62ff\u5230\u6ca1\u6709\u4e0b\u6807\u7684\u5143\u7d20"+Z[oe]+"\u4e86,"+JSON.stringify(a)),this.log_record+="\u62a5\u9519==\u968f\u673a\u76d8\u5b50\u6570\u636e\u62a5\u9519,\u5f53\u524d\u957f\u5ea6"+a.length+"=========\u62ff\u5230\u6ca1\u6709\u4e0b\u6807\u7684\u5143\u7d20"+Z[oe]+"\u4e86,"+JSON.stringify(a)+"\n");console.log("\u76d8\u5b50\u62bd\u53d6\u70e4\u4e32\u6570\u636e"+Z+",\u76d8\u5b50\u70e4\u4e32\u6c60\u5269\u4f59\u6570\u91cf"+a.length),this.log_record+="\u76d8\u5b50\u62bd\u53d6\u70e4\u4e32\u6570\u636e"+Z+",\u76d8\u5b50\u70e4\u4e32\u6c60\u5269\u4f59\u6570\u91cf"+a.length+"\n"}}for(console.log("=============\u603b\u70e4\u4e32\u6b8b\u7559",a),this.log_record+="=============\u603b\u70e4\u4e32\u6b8b\u7559"+JSON.stringify(a)+"\n",a.length>0&&(this.ok=!1),l=0;l<this.BarbecueLvData.oven_data.length;l++)if((w=this.BarbecueLvData.oven_data[l]).condition==j.OvenCondition.one_grid)for(this.BarbecueLvData.plate_data["plate_"+l]=[],_=0;_<t.Plate[l];_++){var ae=void 0;for(oe=0;oe<3;oe++)W[oe].id>0&&(ae=W[oe]);this.BarbecueLvData.plate_data["plate_"+l].push({id:0,condition:j.KebabCondition.normal},ae,{id:0,condition:j.KebabCondition.normal}),W.splice(0,3)}for(X=0,_=0;_<10;_++)for(l=0;l<t.Plate.length;l++)if(this.BarbecueLvData.oven_data[l].condition!=j.OvenCondition.one_grid&&null!=this.BarbecueLvData.oven_data[l].condition&&(null==this.BarbecueLvData.plate_data["plate_"+l]&&(this.BarbecueLvData.plate_data["plate_"+l]=[]),!(t.Plate[l]<_+1))){var ie=void 0;switch(this.random_value2(W.length,V.length,J.length,t.PlateType_weight)){case 1:ie=W;break;case 2:ie=V;break;case 3:ie=J}var re=[];if(0==_)re.push(this.BarbecueLvData.kebab_data[3*l].id),re.push(this.BarbecueLvData.kebab_data[3*l+1].id),re.push(this.BarbecueLvData.kebab_data[3*l+2].id);else if(1==_){var ce=this.BarbecueLvData.plate_data["plate_"+l].length;re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-1].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-2].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-3].id)}else ce=this.BarbecueLvData.plate_data["plate_"+l].length,re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-1].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-2].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-3].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-4].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-5].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-6].id);u=void 0,u=++X<q*this.n1?0:X<q*this.n2?1:2;var se=this.random_value3(ie,re,u);(Ie=[ie[se],ie[se+1],ie[se+2]]).sort(function(){return Math.random()-.5}),this.BarbecueLvData.plate_data["plate_"+l].push(Ie[0],Ie[1],Ie[2]),ie.splice(se,3)}for(var d in this.BarbecueLvData.plate_data)this.BarbecueLvData.plate_data[d].reverse();for(var le=t.Tinfoil,ue=t.Ice,de=Object.keys(this.BarbecueLvData.plate_data);le+ue>0;){if(le>0){var he=de[Math.floor(Math.random()*de.length)],pe=this.BarbecueLvData.plate_data[he],fe=Math.floor(666*Math.random())%(pe.length/3),_e=Math.floor(3*Math.random());if(pe.length>0)for(_=0;_<3;_++){var ye=(_+_e)%3;if((Ie=pe[3*fe+ye]).id>0&&Ie.condition==j.KebabCondition.normal){this.BarbecueLvData.plate_data[he][3*fe+ye].condition=j.KebabCondition.tinfoil,le--;break}}}if(ue>0){var be=de[Math.floor(666*Math.random())%de.length],ve=this.BarbecueLvData.plate_data[be],me=Math.floor(Math.random()*(ve.length/3)+3),ge=Math.floor(3*Math.random());if(3*me<ve.length)for(_=0;_<3;_++){var Ie,Te=(_+ge)%3;if((Ie=ve[3*me+Te]).id>0&&Ie.condition==j.KebabCondition.normal){this.BarbecueLvData.plate_data[be][3*me+Te].condition=j.KebabCondition.frozen,ue--;break}}}}t.OrderOne.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderOne)),t.OrderTwo.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderTwo)),t.OrderThree.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderThree)),t.OrderFour.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderFour)),t.OrderFive.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderFive)),0==this.ok?(console.error("\u91cd\u65b0\u521b\u5efa\u70e4\u7089\u6570\u636e========="),this.found_barbecue_data(e)):(this.render_barbecue(this.BarbecueLvData,3),this.oven_cover_random(),this.barbecue2_data=JSON.stringify(this.BarbecueLvData),console.log("\u5173\u5361\u65b0\u5efa\u6570\u636e========="+e,this.BarbecueLvData),this.log_record+="\u5173\u5361\u65b0\u5efa\u6570\u636e========="+e+this.barbecue2_data+"\n")},t.prototype.random_value3=function(e,t,n){for(var o=t.length-1;o>=0;o--)0==t[o]&&t.splice(o,1);var a=[];for(o=0;o<e.length;o+=3){for(var i=0,r=0;r<3;r++)0!=(l=e[o+r]).id&&(this.kebabs_kind[2]&&this.kebabs_kind[2].indexOf(l.id)>=0?i=2:this.kebabs_kind[1]&&this.kebabs_kind[1].indexOf(l.id)>=0&&i<1&&(i=1));i<=n&&a.push(o)}console.log("\u603b\u6570"+e.length+"\u5f53\u524d\u6279\u6b21"+n+"\u53ef\u7528\u76d8\u5b50\u70b9",a);var c=[];for(o=0;o<a.length;o++){var s=!0;for(r=0;r<3;r++){var l;if(0!=(l=e[a[o]+r]).id&&t.indexOf(l.id)>=0){s=!1;break}}1==s&&c.push(a[o])}if(0==c.length)return console.log("\u4f4e\u4f18\u5148\u7ea7\u7684\u70e4\u4e32"+JSON.stringify(t)+",\u76d8\u5b50\u6570\u636e"+e.length+",\u6ca1\u6709\u7b26\u5408\u8981\u6c42\u7684"),0;var u=Math.floor(Math.random()*c.length);return console.log("\u4f4e\u4f18\u5148\u7ea7\u7684\u70e4\u4e32"+JSON.stringify(t)+",\u76d8\u5b50\u6570\u636e"+e.length+"\uff0c\u7b26\u5408\u8981\u6c42\u7684\u8d77\u59cb\u4e0b\u6807"+c[u]),c[u]},t.prototype.random_value2=function(e,t,n,o){var a=[];e>0&&a.push({value:1,weight:o[0]}),t>0&&a.push({value:2,weight:o[1]}),n>0&&a.push({value:3,weight:o[1]});for(var i=0,r=0;r<a.length;r++)i+=a[r].weight;for(var c=9999*Math.random()%i,s=0;s<a.length;s++){var l=a[s];if((c-=l.weight)<=0)return l.value}this.ok=!1,console.error("\u76d8\u5b50\u968f\u673a\u6743\u91cd\u5931\u8d25======================"),this.log_record+="\u62a5\u9519==\u76d8\u5b50\u968f\u673a\u6743\u91cd\u5931\u8d25======================\n"},t.prototype.random_value=function(e,t,n){for(var o=t.length,a=JSON.stringify(t),i={},r=[],c=[],s=[],l=0;l<t.length;l++){var u=t[l];null==i[""+u]?(i[""+u]=1,s.push(u)):i[""+u]++}for(var d in i)1==i[d]?r.push(Number(d)):c.push(Number(d));var h=[];if(1==n&&e>1){if(0==c.length)console.error("\u6ca1\u6709\u76f8\u540c\u7684\u5143\u7d20\u4e86===\u88ab\u8feb\u62bd\u53d6\u4e0d\u540c\u5143\u7d20"),this.log_record+="\u62a5\u9519==\u6ca1\u6709\u76f8\u540c\u7684\u5143\u7d20\u4e86===\u88ab\u8feb\u62bd\u53d6\u4e0d\u540c\u5143\u7d20\n",h.push(r[0],r[1]),r.splice(0,2);else{var p=Math.floor(Math.random()*c.length);h.push(c[p],c[p]),c.splice(p,1)}3==e&&(0==r.length?(p=Math.floor(Math.random()*c.length),h.push(c[p])):(p=Math.floor(Math.random()*r.length),h.push(r[p])))}else for(l=0;l<e;l++)s.length>0?(p=Math.floor(Math.random()*s.length),h.push(s[p]),s.splice(p,1)):c.length>0?(p=Math.floor(Math.random()*c.length),h.push(c[p]),c.splice(p,1),console.error("\u6ca1\u6709\u4e0d\u76f8\u540c\u7684\u5143\u7d20\u4e86===\u88ab\u8feb\u62bd\u53d6\u76f8\u540c\u5143\u7d20"),this.log_record+="\u62a5\u9519==\u6ca1\u6709\u4e0d\u76f8\u540c\u7684\u5143\u7d20\u4e86===\u88ab\u8feb\u62bd\u53d6\u76f8\u540c\u5143\u7d20\n"):(this.ok=!1,console.error("\u62bd\u53d6\u4e09\u4e2a\u4e0d\u540c\u5143\u7d20\u51fa\u95ee\u9898\u4e86\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f"),this.log_record+="\u62a5\u9519==\u62bd\u53d6\u4e09\u4e2a\u4e0d\u540c\u5143\u7d20\u51fa\u95ee\u9898\u4e86\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\n");return console.log("\u539f\u6570\u7ec4\u957f\u5ea6"+o+"\u5185\u5bb9"+a+"\uff0c\n\u62bd\u53d6"+e+"\u4e2a\u5143\u7d20,\u53ef\u4ee5\u76f8\u540c:"+n+",\u5185\u5bb9"+JSON.stringify(h)),this.log_record+="\u539f\u6570\u7ec4\u957f\u5ea6"+o+"\u5185\u5bb9"+a+"\uff0c\n\u62bd\u53d6"+e+"\u4e2a\u5143\u7d20,\u53ef\u4ee5\u76f8\u540c:"+n+",\u5185\u5bb9"+JSON.stringify(h)+"\n",h},t.prototype.oven_cover_random=function(){for(var e={},t=0;t<12;t++){var n=this.get_plate(t);null!=n&&(e[""+t]=n.StackNum)}for(var o=this.BarbecueLvData.order_select,a=this.get_special_order2(o,e,"\u9505\u76d6\u70e4\u7089\u89e3\u9501\u70e4\u4e32");0==a.length;)o++,a=this.get_special_order2(o,e,"\u9505\u76d6\u70e4\u7089\u89e3\u9501\u70e4\u4e32");for(console.log("\u9505\u76d6\u70e4\u7089+\u76d8\u5b50\u8303\u56f4"+o+",\u53ef\u7528\u70e4\u4e32\u6c60"+a),this.log_record+="\u9505\u76d6\u70e4\u7089+\u76d8\u5b50\u8303\u56f4"+o+",\u53ef\u7528\u70e4\u4e32\u6c60"+a+"\n",t=0;t<this.BarbecueLvData.oven_data.length;t++){var i=this.BarbecueLvData.oven_data[t];if(null!=i&&i.condition==j.OvenCondition.cover){var r=Math.floor(Math.random()*a.length);this.BarbecueLvData.oven_data[t].value=a[r],console.log("\u9505\u76d6\u70e4\u7089"+t+"\u968f\u673a\u4e0b\u6807"+r+"\uff0cid\u4e3a"+a[r]),this.log_record+="\u9505\u76d6\u70e4\u7089"+t+"\u968f\u673a\u4e0b\u6807"+r+"\uff0cid\u4e3a"+a[r]+"\n";var c=this.useing_oven_tray[t];c&&(c.OvenData.value=a[r]),P.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+a[r],this.useing_oven_tray[t].cover_kebabs)}}},t.prototype.render_barbecue=function(e,t){this.reset_pool();for(var n=C.default.Instance.getUnlockKebabsNum(),o=[].concat(G.default.Instance.selectKebabs),a=[],i=0;i<e.kebab_data.length;i++)(p=e.kebab_data[i])&&(a.includes(p.id)||a.push(p.id),p.condition==j.KebabCondition.frozen&&(this._frozenBarbecue=!0));if(e.plate_data)for(var r in e.plate_data){var c=e.plate_data[r];for(i=0;i<c.length;i++)(p=c[i])&&(a.includes(p.id)||a.push(p.id),p.condition==j.KebabCondition.frozen&&(this._frozenBarbecue=!0))}a.length>=n?(console.error("\u89e3\u9501\u70e4\u4e32\u79cd\u7c7b\u8d85\u8fc7\u914d\u7f6e",a.length,n),n=a.length):console.error("\u89e3\u9501\u70e4\u4e32\u79cd\u7c7b\u6ca1\u8d85\u8fc7\u914d\u7f6e",a.length,n),console.error("\u6709\u6ca1\u6709\u51b0\u51bb\u70e4\u4e32",this._frozenBarbecue);var s=Array.from({length:n},function(e,t){return t+1});if(3!=t&&s.sort(function(){return Math.random()-.5}),o.length>0)for(i=0;i<s.length&&o[i];i++)s[i]=o[i];for(s.unshift(0),console.log("\u6e32\u67d3\u70e4\u4e32\u6c60\u6570\u636e========="+s.length,s),this.log_record+="\u6e32\u67d3\u70e4\u4e32\u6c60\u6570\u636e========="+JSON.stringify(s)+"\n",i=0;i<e.oven_data.length;i++)if(null!=e.oven_data[i].condition){var l=3*i,u={id:s[e.kebab_data[l].id],condition:e.kebab_data[l].condition},d={id:s[e.kebab_data[l+1].id],condition:e.kebab_data[l+1].condition},h={id:s[e.kebab_data[l+2].id],condition:e.kebab_data[l+2].condition};switch(e.oven_data[i].condition){case j.OvenCondition.tray:this.found_tray(i,[u,d,h],null,"=====");break;default:this.found_oven(i,[u,d,h],{condition:e.oven_data[i].condition,value:s[e.oven_data[i].value]})}}for(var r in e.plate_data){var p=e.plate_data[r],f=Number(r.split("_")[1]);if(e.oven_data[f].condition==j.OvenCondition.tray){var _=void 0;for(i=0;i<this.tray_correlation.length;i++)this.tray_correlation[i].indexOf(f)>=0&&(_="tray_plate_"+i);for(null==this.tray_plate[_]&&(this.tray_plate[_]=[]),i=0;i<p.length;i++)u={id:s[p[i].id],condition:p[i].condition},this.tray_plate[_].push(u)}else for(i=0;i<p.length/3;i++)u={id:s[p[l=3*i].id],condition:p[l].condition},d={id:s[p[l+1].id],condition:p[l+1].condition},h={id:s[p[l+2].id],condition:p[l+2].condition},this.found_plate(f,[u,d,h])}for(this.special_order_pool=[],i=0;i<e.special_order.length;i++)this.special_order_pool.push([].concat([].concat(e.special_order[i])));1!=t&&(this.kebabs_max=this.get_kebabs_max(),this.icon_bar.width=0,R.default.Instance.totalNum=this.kebabs_max,R.default.Instance.curNum=0,this._updateProgress())},t.prototype.found_oven=function(e,t,n){for(var o,a=0;a<this.oven_array.length;a++){var i;if(0==(i=this.oven_array[a]).node.active){o=i;break}}null==o&&((i=cc.instantiate(this.oven_item)).setParent(this.group_oven_plate),(o=i.getComponent(g.default)).ts=this,this.oven_array.push(o),i.on(cc.Node.EventType.TOUCH_START,this.touch_start,this),i.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move,this),i.on(cc.Node.EventType.TOUCH_END,this.touch_end,this),i.on(cc.Node.EventType.TOUCH_CANCEL,this.touch_end,this)),this.useing_oven_tray[e]=o,o.Init(e,t,n)},t.prototype.found_plate=function(e,t){if(t[0].id==t[1].id&&t[1].id==t[2].id&&0==t[2].id)return D.default.Instance.TsInitial.ShowTips("\u51fa\u73b0\u7a7a\u76d8\u5b50"+e+",\u8bf7\u67e5\u627e"),console.error("\u521b\u5efa\u7a7a\u76d8\u5b50==============",e);for(var n,o=[],a=0;a<this.plate_array.length;a++){var i=this.plate_array[a];0!=i.node.active?i.Index==e&&o.push(i):null==n&&(n=i)}if(o.length>0&&o[o.length-1].ShowKebabs(!1),null==n){var r=cc.instantiate(this.plate_item);r.setParent(this.group_oven_plate),n=r.getComponent(I.default),this.plate_array.push(n),n.ts=this}n.Init(e,t,o.length)},t.prototype.found_tray=function(e,t,n,o){for(var a,i=0;i<this.tray_array.length;i++){var r=this.tray_array[i];if(0==r.node.active){null==a&&(a=r);break}}if(null==a){var c=cc.instantiate(this.tray_item);c.setParent(this.group_oven_plate),(a=c.getComponent(T.default)).ts=this,this.tray_array.push(a),c.on(cc.Node.EventType.TOUCH_START,this.touch_start,this),c.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move,this),c.on(cc.Node.EventType.TOUCH_END,this.touch_end,this),c.on(cc.Node.EventType.TOUCH_CANCEL,this.touch_end,this)}this.useing_oven_tray[e]=a,null==n?a.Init(e,t):a.Init2(e,t,n,o)},t.prototype.change_lv=function(e){this.lv+=e;var t=A.default.Instance.getRealLevel(this.lv);this.label_lv.string="\u7b2c"+t+"\u5173"},t.prototype.next=function(){return this.score=1e4,this.GameStop(!0),this._gameOver(1),!0},t.prototype._loseBtnClick=function(){return this.score=1e4,this.GameStop(!0),this._gameOver(0),!0},t.prototype.amendment=function(){for(var e={},t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(null!=n&&0!=n.node.active)for(var o=0;o<n.KebabsData.length;o++)0!=(c=n.KebabsData[o]).id&&(null==e[""+c.id]?e[""+c.id]=1:e[""+c.id]++)}for(t=0;t<this.plate_array.length;t++){var a=this.plate_array[t];if(0!=a.node.active&&0!=a.Useing)for(o=0;o<a.KebabsData.length;o++)0!=(c=a.KebabsData[o]).id&&(null==e[""+c.id]?e[""+c.id]=1:e[""+c.id]++)}for(var i in this.tray_plate){var r=this.tray_plate[i];for(t=0;t<r.length;t++){var c;0!=(c=r[t]).id&&(null==e[""+c.id]?e[""+c.id]=1:e[""+c.id]++)}}for(var i in console.error("\u70e4\u4e32\u64cd\u4f5c\u7ed3\u675f\uff0c\u5f00\u59cb\u68c0\u6d4b\u6570\u636e\u635f\u574f"),e)(r=e[i])%3!=0&&console.error("\u70e4\u4e32"+i+"\u6570\u91cf"+r+"\u65e0\u6cd5\u5b8c\u5168\u6d88\u9664")},t.prototype.down=function(){null!=this.barbecue2_data&&(this.saveForBrowser(this.barbecue2_data,"lv_"+this.lv,"application/json"),this.saveForBrowser(this.log_record,"log_record_"+this.lv,"text/plain"))},t.prototype.saveForBrowser=function(e,t,n){if(cc.sys.isBrowser){console.log("\u6d4f\u89c8\u5668");var o=new Blob([e],{type:n}),a=document.createElement("a");a.download=t,a.innerHTML="Download File",null!=window.webkitURL?a.href=window.webkitURL.createObjectURL(o):(a.href=window.URL.createObjectURL(o),a.style.display="none",document.body.appendChild(a)),a.click()}},t.prototype.level_archive=function(){for(var e={count_down:this.count_down,star_rating:this.barbecue_lv_data.star_rating,oven_data:[],kebab_data:[],plate_data:{},special_order:this.special_order_pool,order_select:this.barbecue_lv_data.order_select},t=0;t<9;t++){var n=this.useing_oven_tray[t];if(null==n||0==n.node.active)e.oven_data[t]={value:0,condition:null},e.kebab_data[3*t]=null,e.kebab_data[3*t+1]=null,e.kebab_data[3*t+2]=null;else{e.oven_data[t]={value:n.OvenData.value,condition:n.OvenData.condition};for(var o=0;o<n.KebabsData.length;o++)e.kebab_data[3*t+o]={id:n.KebabsData[o].id,condition:n.KebabsData[o].condition}}}var a={};for(t=0;t<9;t++)if(null!=(i=this.get_plate(t)))for(e.plate_data["plate_"+t]=[],a["plate_"+t]=i.StackNum,o=0;o<i.KebabsData.length;o++)e.plate_data["plate_"+t].push({id:i.KebabsData[o].id,condition:i.KebabsData[o].condition});for(t=0;t<this.plate_array.length;t++){var i;if(0!=(i=this.plate_array[t]).node.active&&0!=i.Useing&&a["plate_"+i.Index]!=i.StackNum)for(o=i.KebabsData.length-1;o>=0;o--)e.plate_data["plate_"+i.Index].unshift({id:i.KebabsData[o].id,condition:i.KebabsData[o].condition})}for(var r in this.tray_plate){var c=void 0;switch(r){case"tray_plate_0":c=0;break;case"tray_plate_1":c=1;break;case"tray_plate_2":c=2}for(e.plate_data["plate_"+c]=[],t=0;t<this.tray_plate[r].length;t++){var s=this.tray_plate[r][t];e.plate_data["plate_"+c].push({id:s.id,condition:s.condition})}}G.default.Instance.Barbecue={data:e,lv:this.lv,kebabs_max:this.kebabs_max,compound_num:this.compound_num,special_order_execute:this.special_order_execute}},t.prototype.open_setting=function(){var e=G.default.Instance.BarbecueLv;if(e&&0==e.length)return D.default.Instance.TsInitial.ShowTips("\u5148\u7ee7\u7eed\u5b8c\u6210\u70e7\u70e4\u4efb\u52a1\u5427");this.GameStop(!0),z.default.Instance.OpenUI(m.default,z.UIOrder.Window_2,this)},t.prototype.GameDelay=function(){this.count_down<90&&(this.count_down=90,this.label_time.string=""+N.default.Instance.TimecFormat(this.count_down),this.label_time.node.color=cc.Color.RED.fromHEX("#FEFFE1")),this.GameStop(!1)},t.prototype.Resurgence=function(){this.count_down<=0&&(this.count_down=120,this.label_time.string=""+N.default.Instance.TimecFormat(this.count_down),this.label_time.node.color=cc.Color.RED.fromHEX("#FEFFE1")),2==this.Lv&&L.default.Instance.reportUserGuide(23),this.GameStop(!1)},t.prototype.GameStop=function(e){if(this.game_stop=e,0!=this.ani_double_hit.node.active)switch(this.game_stop){case!0:this.bar_double_hit.pauseAllActions();break;case!1:this.bar_double_hit.resumeAllActions()}},t.prototype.open_explain=function(){return!0},t.prototype.get_eff_kebab=function(){for(var e,t=0;t<this.eff_kebabs_array.length;t++){var n=this.eff_kebabs_array[t];if(0==n.node.active){e=n;break}}if(null==e){var o=cc.instantiate(this.eff_kebabs_item);o.setParent(this.group_eff),e=o.getComponent(w.default),this.eff_kebabs_array.push(e)}return e},t.prototype.GetEffFrozen=function(e){for(var t,n=0;n<this.eff_frozen_array.length;n++){var o=this.eff_frozen_array[n];if(0==o.node.active){t=o;break}}return null==t&&(t=cc.instantiate(this.eff_frozen_tiem).getComponent(S.default),this.eff_frozen_array.push(t),console.log("\u65b0\u5efa\u51b0\u51bb\u8282\u70b9,\u603b\u957f\u5ea6",this.eff_frozen_array.length)),t.node.setParent(e),t.node.setPosition(0,0),t.node.angle=0,t},t.prototype.GetEffTinfoil=function(e){for(var t,n=0;n<this.eff_tinfoil_array.length;n++){var o=this.eff_tinfoil_array[n];if(0==o.node.active){t=o;break}}return null==t&&(t=cc.instantiate(this.eff_tinfoil_item).getComponent(O.default),this.eff_tinfoil_array.push(t),console.log("\u65b0\u5efa\u9521\u7eb8\u8282\u70b9,\u603b\u957f\u5ea6",this.eff_tinfoil_array.length)),t.node.setParent(e),t.node.setPosition(0,0),t.node.angle=0,t},t.prototype.PlayEffFlame=function(e,t,n){for(var o,a=0;a<this.eff_flame_array.length;a++){var i=this.eff_flame_array[a];if(0==i.active){o=i;break}}if(null==o){(o=new cc.Node("eff_flame")).setParent(this.group_eff);var r=o.addComponent(sp.Skeleton);this.eff_flame_array.push(o),r.loop=!1,r.premultipliedAlpha=!1,r.setCompleteListener(function(){o.active=!1})}switch(o.active=!0,t){case 1:o.x=e%3*240-240+10,o.y=210-270*Math.floor(e/3)-100,P.default.Instance.LoadSkeletonData("Bundle1UI","spine/ignite_1",o,"animation",!1);break;case 2:o.x=e%3*240-240-60+60*n+30,o.y=210-270*Math.floor(e/3)+10,P.default.Instance.LoadSkeletonData("Bundle1UI","spine/ignite_2",o,"animation",!1)}},t.prototype.PlayEffCompound=function(e){for(var t,n=0;n<this.eff_compound_array.length;n++){var o=this.eff_compound_array[n];if(0==o.node.active){t=o;break}}if(null==t){var a=cc.instantiate(this.eff_compound_item);a.setParent(this.group_eff),t=a.getComponent(k.default),this.eff_compound_array.push(t)}t.Init(e)},t.prototype.PlayEffJinbi=function(e){for(var t,n=0;n<this.eff_jinbi_array.length;n++){var o=this.eff_jinbi_array[n];if(0==o.active){t=o;break}}null==t&&((t=cc.instantiate(this.eff_jinbi)).setParent(this.group_tips),this.eff_jinbi_array.push(t)),t.setPosition(-180,420),t.active=!0;var a=this.pos_jinbi[e];cc.tween(t).to(.2,{x:a.x,y:a.y}).delay(.4).to(.3,{x:-60,y:600+A.default.Instance.ScreenAdaptive}).call(function(){t.active=!1}).start()},t.prototype.PlayEffCongrats=function(e){for(var t,n=0;n<this.eff_congrats_array.length;n++){var o=this.eff_congrats_array[n];if(0==o.node.parent.active){t=o;break}}if(null==t){var a=cc.instantiate(this.eff_congrats);a.setParent(this.group_tips),t=a.children[0].getComponent(cc.Animation),this.eff_congrats_array.push(t),t.on(cc.Animation.EventType.FINISHED,function(){t.node.parent.active=!1})}var i=Math.floor(100*Math.random())%7+1;P.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/zi"+(30+i),t.node.children[0]),t.node.parent.setPosition(e),t.node.parent.active=!0,e.x<0?t.play("ani_dianzan_right"):t.play("ani_dianzan")},t.prototype.PlayEffSmoke=function(e){for(var t,n=0;n<this.eff_smoke_array.length;n++){var o=this.eff_smoke_array[n];if(0==o.node.active){t=o;break}}if(null==t){var a=cc.instantiate(this.eff_smoke);a.setParent(this.group_tips),t=a.getComponent(cc.Animation),this.eff_smoke_array.push(t),t.on(cc.Animation.EventType.FINISHED,function(){t.node.active=!1})}t.node.setPosition(e),t.node.active=!0,t.play()},t.prototype.get_guest=function(){for(var e,t=0;t<this.guest_array.length;t++){var n=this.guest_array[t];if(0==n.active){e=n;break}}e||((e=new cc.Node).setParent(this.group_guest),e.setScale(2),e.scaleX=-2,e.addComponent(sp.Skeleton).premultipliedAlpha=!1,this.guest_array.push(e));var o=e.getComponent(B.default);return o||(o=e.addComponent(B.default)),o.init(this._guestCountID++),e},t.prototype.reset_pool=function(){for(var e=0;e<this.guest_array.length;e++){var t=this.guest_array[e];if(1==t.active){var n=t.getComponent(B.default);n&&n.reset()}this.guest_array[e].active=!1}for(e=0;e<this.eff_congrats_array.length;e++)this.eff_congrats_array[e].node.parent.active=!1;for(e=0;e<this.eff_smoke_array.length;e++)this.eff_smoke_array[e].node.active=!1;for(e=0;e<this.eff_kebabs_array.length;e++)this.eff_kebabs_array[e].node.active=!1;for(e=0;e<this.eff_frozen_array.length;e++)this.eff_frozen_array[e].node.active=!1;for(e=0;e<this.eff_tinfoil_array.length;e++)this.eff_tinfoil_array[e].node.active=!1;for(e=0;e<this.eff_flame_array.length;e++)this.eff_flame_array[e].active=!1;for(e=0;e<this.eff_compound_array.length;e++)this.eff_compound_array[e].node.active=!1;for(e=0;e<this.plate_array.length;e++)this.plate_array[e].Useing=!1,this.plate_array[e].node.active=!1;for(e=0;e<this.oven_array.length;e++)this.oven_array[e].node.active=!1,this.oven_array[e].ani_kebabs.node.active=!1;for(e=0;e<this.tray_array.length;e++)this.tray_array[e].Useing=!1,this.tray_array[e].node.active=!1},Object.defineProperty(t.prototype,"Lv",{get:function(){return this.lv},set:function(e){this.lv=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Score",{get:function(){return this.score},enumerable:!1,configurable:!0}),t.prototype.restoreAuto=function(){},t.prototype._updateAutoTime=function(e){x.default.Instance.isAuto&&(this.game_stop||2!=this._autoState&&(this._curAutoTime+=e,1==this._autoState?this._curAutoTime>=this._autoTime&&(this._curAutoTime=0,this._autoTime=1e8,this._autoState=2,this._doAutoOperate()?0==this._operateType&&(this._autoState=3):(console.log("-------------------\u64cd\u4f5c\u4e0d\u6210\u529f\uff0c\u7528\u9053\u5177"),this._isMisTakeOperate?(this._operateType=0,this.use_prop(1,!1),this._autoState=3):(this._operateType=0,this._doAutoOperate(),this._autoState=3))):3==this._autoState?this._beginAuto():0==this._autoState&&this._curAutoTime>=5&&this._beginAuto()))},t.prototype._beginAuto=function(){x.default.Instance.isAuto&&(this._initAutoOperate(),this._updateAutoOperate(0,0),this._autoTime=x.default.Instance.getOperateTime(),this._curAutoTime=0,this._autoState=1)},t.prototype._initAutoOperate=function(){this._autoState=0,this._autoTime=1e5,this._curAutoTime=0,this._operateListIndex=0,this._operateLists=[],this._aimEven=null,this._operateId=0,this._operateType=0;var e=this._filtrateOperates();e&&(this._operateType=e.operateType,this._aimEven=e.aimEven,this._operateId=e.operateId,this._operateLists=e.operateEvenList)},t.prototype._doAutoOperate=function(){var e=!1;if(this._isMisTakeOperate){var t=this._getOneEvenCanOperate();if(t){var n=t.id,o=t.index,a=t.oven,i=this._getOneFreeEvenAndNoCombine(n);i&&(this.select_data={item:a,index:o},e=this._moveOperate(this.select_data,i.oven,i.index))}return console.error("\u80e1\u4e71\u64cd\u4f5c"),e}if(this._operateType){if(1==this._operateType){if(!this._aimEven)return console.error("\u6d88\u9664\u4e3a\u4ec0\u4e48\u6ca1\u6709\u79fb\u52a8\u7684\u76ee\u6807\u5730"),e;for(var r=this._aimEven.KebabsData,c=(o=-1,[]),s=0;s<r.length;s++){if(!(n=(d=r[s]).id)){o=s;break}n!=this._operateId&&d.condition==j.KebabCondition.normal&&c.push(s)}-1==o?c.length>0?(this.select_data={item:this._aimEven,index:c[0]},(l=this._getOneFreeEven([this._aimEven]))?e=this._moveOperate(this.select_data,l.oven,l.index):console.error("\u627e\u4e0d\u5230\u53ef\u4ee5\u632a\u52a8\u7684\u7a7a\u4f4d")):console.error("\u627e\u4e0d\u5230\u53ef\u4ee5\u632a\u52a8\u7684\u7a7a\u4f4d"):(l=this._getOneEvenById(this._operateId,[this._aimEven]))?(this.select_data={item:l.item,index:l.index},e=this._moveOperate(this.select_data,this._aimEven,o)):console.error("\u627e\u4e0d\u5230\u53ef\u4ee5\u632a\u52a8\u7684\u7a7a\u4f4d")}else if(2==this._operateType){var l,u=this._operateLists[this._operateListIndex];if(o=-1,u)for(r=u.KebabsData,s=0;s<r.length;s++){var d;if((d=r[s]).condition==j.KebabCondition.normal&&(n=d.id)){o=s;break}}-1==o?console.error("???\u6ca1\u6709\u627e\u5230\u53ef\u4ee5\u79fb\u52a8\u7684\u70e4\u4e32\uff1f\uff1f\uff1f\uff1f"):(this.select_data={item:u,index:o},(l=this._getOneFreeEven([u]))?e=this._moveOperate(this.select_data,l.oven,l.index):console.error("???\u6ca1\u6709\u7a7a\u4f4d--\u552f\u4e00\u7684\u7a7a\u4f4d\u662f\u81ea\u5df1"))}}else e=!0,this.use_prop(1,!1);return e},t.prototype._checkDoMisTake=function(){x.default.Instance.isAuto&&(this._isMisTakeOperate||(this._isMisTakeOperate=!(Math.random()>=x.default.Instance.misRate),this._isMisTakeOperate&&x.default.Instance.resetMisTime()))},t.prototype._updateAutoOperate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n,o=0;if(1==this._operateType)if(2==e)o=100;else{var a=this._getOneEvenById(this._operateId,[this._aimEven]);a?(o=1,this.select_data={item:a.item,index:a.index}):console.error("???\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7684id",this._operateId)}else if(2==this._operateType)if(1==t)if(this._operateListIndex++,n=this._operateLists[this._operateListIndex]){for(var i=n.KebabsData,r=0;r<i.length;r++)if(i[r].id){o=1,this.select_data={item:n,index:r};break}}else o=100;else if((n=this._operateLists[this._operateListIndex])&&n){for(i=n.KebabsData,r=0;r<i.length;r++)if(i[r].id){o=1,this.select_data={item:n,index:r};break}this.select_data||console.error("\u6ca1\u6709\u627e\u5230\u53ef\u4ee5\u79fb\u52a8\u7684")}else console.error("\u6ca1\u6709\u627e\u5230\u53ef\u4ee5\u79fb\u52a8\u7684");else 0==this._operateType&&(o=1);return o},t.prototype._filtrateOperates=function(){for(var e=[],t=null,n=0,o=-1,a={},i={},r=[],c=[],s=[],l=0;l<this.useing_oven_tray.length;l++){var u=this.useing_oven_tray[l];if(null!=u&&0!=u.node.active&&u.OvenData.condition!=j.OvenCondition.cover){var d=!1,h=!1,p=0,f=u.KebabsData.length;u.OvenData.condition==j.OvenCondition.one_grid&&(p=1,f=2);for(var _=p;_<f;_++){var y=u.KebabsData[_],b=y.id;y.condition==j.KebabCondition.normal?b?(a[b]||(a[b]=0),a[b]+=1,i[b]||(i[b]=[]),i[b].push(u)):h=!0:y.condition==j.KebabCondition.frozen&&(d=!0)}h&&s.push(u),d||u.OvenData.condition==j.OvenCondition.one_grid?c.push(u):r.push(u)}}if(r.length<=0)return console.error("\u6bcf\u4e2a\u70e4\u7089\u90fd\u6709\u51b0\u51bb\u70e4\u4e32\uff0c\u6ca1\u6709\u80fd\u591f\u7ec4\u62103\u4e2a\u5408\u6210\u7684\u60c5\u51b5\u4e86??? \u53ea\u6709\u6b63\u5e38\u548c\u51b0\u51bb\u7684\u70e4\u4e32"),null;if(s.length<=0)return console.error("\u6ca1\u6709\u7a7a\u683c\u7684\u70e4\u7089\u6216\u8005\u70e4\u76d8"),null;e:for(var v in a)if(Object.prototype.hasOwnProperty.call(a,v)&&(N=a[v])>=3){var m=[],g=i[v];for(l=0;l<g.length;l++){var I=g[l];if(r.includes(I)){if(m.includes(I)){t=I,o=Number(v);break}m.push(I)}}t||(t=m[0],o=Number(v)),t?n=1:console.error("\u80fd\u591f\u4e09\u4e2a\u6d88\u9664\uff0c\u4f46\u662f\u627e\u4e0d\u5230\u4e00\u4e2a\u653e\u6ee1\u7684\u76d8\u5b50???");break e}if(0==n){var T={};for(l=0;l<9;l++)if(C=this.get_plate(l)){I=this.useing_oven_tray[l];var k=C.KebabsData;if(p=0,f=I.KebabsData.length,I.OvenData.condition==j.OvenCondition.cover)continue;I.OvenData.condition==j.OvenCondition.one_grid&&(p=1,f=2);for(var S=p;S<f;S++){var w=k[S];w.condition==j.KebabCondition.normal&&(b=w.id)&&(T[b]||(T[b]=[]),T[b].push(C))}}var O=[],F=!1;for(var v in T)if(Object.prototype.hasOwnProperty.call(T,v)){var B=T[v],x=a[v]?a[v]:0;if(B.length+x>=3){F=!0;var P=3-x;O=B.splice(0,P);break}}if(n=2,F){for(l=0;l<O.length;l++){var C=O[l];(I=this.useing_oven_tray[C.Index])&&!e.includes(I)&&e.push(I)}e=e.sort(function(e,t){for(var n=0,o=0,a=0;a<3;a++)e.KebabsData[a].id&&(n+=1),t.KebabsData[a].id&&(o+=1);return n-o})}else{var R=this.useing_oven_tray.length,N=1e4;for(l=0;l<R;l++)if(null!=(I=this.useing_oven_tray[l])&&0!=I.node.active&&I.OvenData.condition==j.OvenCondition.tray){var A=I.KebabsData,D=0;for(_=0;_<A.length;_++)(k=A[_]).id&&D++;D<=N&&(N=D,e[0]=I)}1e4==N&&(n=0)}}return 0==n?(console.error("\u70e4\u7089\u6ca1\u67093\u4e2a\u53ef\u6d88\u9664\uff0c\u5207\u6258\u76d8\u4e5f\u6ca1\u6709\u80fd\u591f\u632a\u7a7a\u66f4\u65b0"),null):{aimEven:t,operateId:o,operateType:n,operateEvenList:e}},t.prototype._moveOperate=function(e,t,n){var o=this;if(e&&e.item&&t&&t.KebabsData){if(t.KebabsData[n]&&t.KebabsData[n].id)return!1;this.select_data=e;var a=e.item,i=e.index;return a.node_kebabs[i].opacity=0,a.eff_select.active=!0,P.default.Instance.LoadSpriteFrame2("Bundle1UI","BarbecueStandUI/kebab/kebab_"+a.KebabsData[i].id,null,function(e,t){o.node_item.getComponent(cc.Sprite).spriteFrame=t;var n=a.node.convertToWorldSpaceAR(a.node_kebabs[i].getPosition()),r=o.node.convertToNodeSpaceAR(n);o.node_item.setPosition(r),o.node_item.active=!0}),this.scheduleOnce(function(){o.operate_succeed(t,n,!1)},.5),!0}},t.prototype._getOneFreeEven=function(e){void 0===e&&(e=[]);for(var t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(n&&!e.includes(n)&&null!=n&&0!=n.node.active&&n.OvenData.condition!=j.OvenCondition.video&&n.OvenData.condition!=j.OvenCondition.cover){var o=n.KebabsData,a=0,i=o.length;n.OvenData.condition==j.OvenCondition.one_grid&&(a=1,i=2);for(var r=a;r<i;r++)if(!o[r].id)return{oven:n,index:r}}}return null},t.prototype._getOneEvenById=function(e,t){void 0===t&&(t=[]);for(var n=0;n<this.useing_oven_tray.length;n++){var o=this.useing_oven_tray[n];if(o&&o.OvenData.condition!=j.OvenCondition.video&&o.OvenData.condition!=j.OvenCondition.cover&&o&&!t.includes(o))for(var a=o.KebabsData,i=0;i<a.length;i++){var r=a[i];if(r.condition==j.KebabCondition.normal&&r.id==e)return{item:o,index:i}}}return null},t.prototype._getOneEvenCanOperate=function(e){void 0===e&&(e=[]);var t=[].concat(this.useing_oven_tray);t=t.sort(function(){return Math.random()-.5});for(var n=0;n<t.length;n++){var o=t[n];if(o&&!e.includes(o)&&null!=o&&0!=o.node.active&&o.OvenData.condition!=j.OvenCondition.video&&o.OvenData.condition!=j.OvenCondition.cover)for(var a=o.KebabsData,i=0;i<a.length;i++){var r=a[i];if(r.condition==j.KebabCondition.normal){var c=r.id;if(c)return{oven:o,index:i,id:c}}}}return null},t.prototype._getOneFreeEvenAndNoCombine=function(e){if(!e)return null;var t=[].concat(this.useing_oven_tray);t=t.sort(function(){return Math.random()-.5});for(var n=0;n<t.length;n++){var o=t[n];if(o&&null!=o&&0!=o.node.active&&o.OvenData.condition!=j.OvenCondition.video&&o.OvenData.condition!=j.OvenCondition.cover){var a=o.KebabsData;if(o.OvenData.condition==j.OvenCondition.one_grid){if(!a[1].id)return{oven:o,index:1}}else{for(var i=-1,r=0;r<a.length;r++)0==a[r].id&&(i=r);if(-1!=i&&(a[0].id+a[1].id+a[2].id+e)/3!=e)return{oven:o,index:i}}}}return null},t.prototype._checkHasFrozen=function(){if(!this.node||!this.node.isValid)return null;var e=!1;e:for(var t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(null!=n&&0!=n.node.active&&n.OvenData.condition!=j.OvenCondition.video){var o=0,a=n.KebabsData.length;n.OvenData.condition==j.OvenCondition.one_grid&&(o=1,a=2);for(var i=o;i<a;i++){var r=n.KebabsData[i];if(r.id,r.condition==j.KebabCondition.frozen){e=!0;break e}}}}return e},t.prototype._checkIsCanCompount=function(){if(!this.node||!this.node.isValid)return null;for(var e=null,t=0,n=-1,o=[],a={},i={},r=[],c=[],s=[],l=0,u=0;u<this.useing_oven_tray.length;u++){var d=this.useing_oven_tray[u];if(null!=d&&0!=d.node.active)if(d.OvenData.condition!=j.OvenCondition.video){var h=!1,p=!1,f=0,_=d.KebabsData.length;d.OvenData.condition==j.OvenCondition.one_grid&&(f=1,_=2);for(var y=f;y<_;y++){var b=d.KebabsData[y],v=b.id;b.condition==j.KebabCondition.normal?v?(a[v]||(a[v]=0),a[v]+=1,i[v]||(i[v]=[]),i[v].push(d)):(p=!0,l++):b.condition==j.KebabCondition.frozen&&(h=!0)}p&&s.push(d),h||d.OvenData.condition==j.OvenCondition.one_grid?c.push(d):r.push(d)}else o.push(d)}if(r.length<=0)return console.error("\u6bcf\u4e2a\u70e4\u7089\u90fd\u6709\u51b0\u51bb\u70e4\u4e32\uff0c\u6ca1\u6709\u80fd\u591f\u7ec4\u62103\u4e2a\u5408\u6210\u7684\u60c5\u51b5\u4e86??? \u53ea\u6709\u6b63\u5e38\u548c\u51b0\u51bb\u7684\u70e4\u4e32"),null;if(s.length<=0)return console.error("\u6ca1\u6709\u7a7a\u683c\u7684\u70e4\u7089\u6216\u8005\u70e4\u76d8"),null;e:for(var m in a)if(Object.prototype.hasOwnProperty.call(a,m)&&a[m]>=3){var g=[],I=i[m];for(u=0;u<I.length;u++){var T=I[u];if(r.includes(T)){if(g.includes(T)){e=T,n=Number(m);break}g.push(T)}}e||(e=g[0],n=Number(m)),e?t=1:console.error("\u80fd\u591f\u4e09\u4e2a\u6d88\u9664\uff0c\u4f46\u662f\u627e\u4e0d\u5230\u4e00\u4e2a\u653e\u6ee1\u7684\u76d8\u5b50???");break e}return{aimEven:e,operate:t,operateId:n,freeNum:l,videoOvens:o}},t.prototype.getOneRoleSound=function(e,t){for(var n=[].concat(e).sort(function(){return Math.random()-.5}),o=null,a=0;a<n.length;a++){var i=n[a],r=M.default.Instance.getVoiceConfigById(i);if(r&&(t?r[t]&&(o={index:e.indexOf(i),roleId:i,voice:r[t]}):o={roleId:i}),o)break}return o},t.prototype.doRoleVoicePlay=function(e,t,n){return void 0===n&&(n=!1),u(this,void 0,void 0,function(){var o,a,i,r=this;return d(this,function(){return Object.values(this._voiceLists).length>0&&"man_2_15"!=e&&"woman_1_15"!=e?[2]:(o=this.guest_queue[t],(a=o.getComponent(B.default))?(o.zIndex=cc.macro.MAX_ZINDEX,o.posIndex=t,i=a.GuestCountId,a.addPlayVoice({voice:e,guestId:i,cb:function(e,t){M.default.Instance.showTalkSpine(t),r._showVoiceSpeek(e,t)},finishCb:function(){}},function(e){if(e){var t=e.GuestCountId;if(delete r._voiceLists[t],t==r._compountGuestId){r.guest_queue.splice(0,1),r.guest_queue_ids.shift(),r.guest_move(!0,!1);for(var n=0;n<r.guest_queue.length;n++)cc.tween(r.guest_queue[n]).to(.4,{x:120*n}).start(),r.guest_queue[n].zIndex=100-120*n}}if(r._compountGuestId=-1,console.log("this._isGameOver==========",r._isGameOver),r._isGameOver&&r._recoverNum)for(n=0;n<r.guest_queue.length;n++){var o=r.guest_queue[n];if(o&&o.active){var a=o.getComponent(B.default);a&&a.leave()}}})&&(this._voiceLists[i]||(this._voiceLists[i]=[]),this._voiceLists[i].push(e),n&&-1==this._compountGuestId&&(a.NeedMove=!0,this._compountGuestId=i))):console.error("-------\uff1f\uff1f\u6ca1\u6709\u811a\u672c\uff1f"),[2])})})},t.prototype.checkCompoundPlaySound=function(e,t,n){if(e&&!(e.length<0)){var o=null,a=[e[0]],i=M.default.Instance.turnFoodIdToType(n);return i&&(o=this.getOneRoleSound(a,i)),o||(i=t<.5?j.VoiceType.taste:j.VoiceType.efficient,o=this.getOneRoleSound(a,i)),!(!o||!o.voice||(this._playVoiceCount=this._compoundCount,this.doRoleVoicePlay(o.voice,o.index,!0),0))}},t.prototype.checkOperateSound=function(e){if(0==this._compountOCount){if(this._noOperateTime+=e,this._noOperateTime>10){this._compountOCount=2,this._noOperateTime=0;var t=[].concat(this.guest_queue_ids),n=this.getOneRoleSound(t,j.VoiceType.urge);n&&this.doRoleVoicePlay(n.voice,n.index)}}else this.resetOpenrateTime()},t.prototype.reduceOperateCompountCount=function(e){this._compountOCount-=e,this._compountOCount<=0&&(this._compountOCount=0)},t.prototype.resetOpenrateTime=function(){this._noOperateTime=0},t.prototype.checkNoCompountSound=function(){var e=null,t=this._checkIsCanCompount();return t&&1!=t.operate&&t.freeNum<=2&&(e=t.videoOvens.length?this.getOneRoleSound(this.guest_queue_ids,j.VoiceType.oven):this.getOneRoleSound(this.guest_queue_ids,j.VoiceType.prop)),!(!e||!e.voice||(this.doRoleVoicePlay(e.voice,e.index),0))},t.prototype.checkTimeSound=function(e,t){if(e<40&&t>=40){var n=this.getOneRoleSound(this.guest_queue_ids,j.VoiceType.time);return n&&this.doRoleVoicePlay(n.voice,n.index),!0}return!1},t.prototype.checkFrozenSound=function(e){if(0==this._frozenCount){if(this._frozenTime+=e,this._frozenTime>5&&(this._frozenTime=0,this._checkHasFrozen())){this._frozenCount=2;var t=this.getOneRoleSound(this.guest_queue_ids,j.VoiceType.thaw);t&&this.doRoleVoicePlay(t.voice,t.index)}}else this.resetFrozenTime()},t.prototype.reduceFrozenCount=function(e){this._frozenCount-=e,this._frozenCount<=0&&(this._frozenCount=0)},t.prototype.resetFrozenTime=function(){this._frozenTime=0},t.prototype._gameOver=function(e,t){var n=this;if(void 0===t&&(t=!1),!this._isGameOver||t){console.error("_gameOver",e),this.GameStop(!0),this.IsGameOver=!0;var o=0,a={};for(var i in this._propUseData)this._propUseData[i]&&(o+=this._propUseData[i],a["prop"+i]=this._propUseData[i]);var r=R.default.Instance.curNum/R.default.Instance.totalNum,c=!1;1==e?(c=!0,R.default.Instance.updateWinNum(),z.default.Instance.OpenUI(H.default,z.UIOrder.Window_2,e,this)):this._recoverNum?(c=!0,z.default.Instance.OpenUI(H.default,z.UIOrder.Window_2,e,this)):this.scheduleOnce(function(){z.default.Instance.OpenUI(W.default,z.UIOrder.Window_2,e,n)},5),c&&L.default.Instance.reportEndStage(this._day,e,o,this._recoverSucNum,{label:"difficult_"+this._difficultLevel,progress:Math.floor(100*r)/100,keyItemUseList:a})}},t.prototype._showEndNode=function(e){this.endNode.active=e,this.restartBtn.active=this._recoverNum>0,this.recoverBtn.active=this._recoverNum<=0},t.prototype._updateProgress=function(){var e=R.default.Instance.totalNum,t=R.default.Instance.curNum/e;t=Math.floor(100*t),this.label_bar.string=t+"%"},t.bundleName=j.BundleName.Bundle1Pre_Challange,t.prefabUrl="BarbecueChallangePre",t.className="BarbecueChallangeInterface",l([X(cc.Prefab)],t.prototype,"oven_item",void 0),l([X(cc.Prefab)],t.prototype,"tray_item",void 0),l([X(cc.Prefab)],t.prototype,"plate_item",void 0),l([X(cc.Prefab)],t.prototype,"special_order_item",void 0),l([X(cc.Prefab)],t.prototype,"eff_kebabs_item",void 0),l([X(cc.Prefab)],t.prototype,"eff_frozen_tiem",void 0),l([X(cc.Prefab)],t.prototype,"eff_tinfoil_item",void 0),l([X(cc.Prefab)],t.prototype,"eff_compound_item",void 0),l([X(cc.Prefab)],t.prototype,"eff_jinbi",void 0),l([X(cc.Prefab)],t.prototype,"eff_congrats",void 0),l([X(cc.Prefab)],t.prototype,"eff_smoke",void 0),l([X(cc.Node)],t.prototype,"bg_1",void 0),l([X(cc.Node)],t.prototype,"bg_2",void 0),l([X(sp.Skeleton)],t.prototype,"spine_bg",void 0),l([X(cc.Node)],t.prototype,"btn_stop",void 0),l([X(cc.Label)],t.prototype,"label_score",void 0),l([X(cc.Label)],t.prototype,"label_time",void 0),l([X(cc.Animation)],t.prototype,"ani_time",void 0),l([X(cc.Node)],t.prototype,"bar_score",void 0),l([X(cc.Label)],t.prototype,"label_lv",void 0),l([X(cc.Node)],t.prototype,"group_oven_plate",void 0),l([X(cc.Node)],t.prototype,"group_kebabs",void 0),l([X(cc.Animation)],t.prototype,"icon_pan",void 0),l([X(cc.Node)],t.prototype,"node_item",void 0),l([X(cc.Node)],t.prototype,"group_eff",void 0),l([X(cc.Node)],t.prototype,"group_tips",void 0),l([X(cc.Node)],t.prototype,"group_guest",void 0),l([X(cc.Animation)],t.prototype,"ani_group_order",void 0),l([X(cc.Sprite)],t.prototype,"bar_order",void 0),l([X(cc.Label)],t.prototype,"label_time2",void 0),l([X(cc.Node)],t.prototype,"layout_order",void 0),l([X(cc.Node)],t.prototype,"btn_video",void 0),l([X(cc.Animation)],t.prototype,"ani_double_hit",void 0),l([X(cc.Label)],t.prototype,"label_double_hit",void 0),l([X(cc.Label)],t.prototype,"label_double_hit2",void 0),l([X(cc.Node)],t.prototype,"bar_double_hit",void 0),l([X(cc.Animation)],t.prototype,"order_tips",void 0),l([X(cc.Node)],t.prototype,"icon_finger",void 0),l([X(cc.Animation)],t.prototype,"ani_finger",void 0),l([X(cc.Label)],t.prototype,"label_finger",void 0),l([X(cc.Node)],t.prototype,"eff_huoyan",void 0),l([X(sp.Skeleton)],t.prototype,"spine_tips",void 0),l([X(cc.Node)],t.prototype,"icon_bar",void 0),l([X(cc.Label)],t.prototype,"label_bar",void 0),l([X(cc.Label)],t.prototype,"label_speek",void 0),l([X(cc.RichText)],t.prototype,"tips_prop",void 0),l([X(cc.Animation)],t.prototype,"ani_kaishiyingye",void 0),l([X(cc.Animation)],t.prototype,"ani_nandutisheng",void 0),l([X(cc.Animation)],t.prototype,"ani_shijianbuzu",void 0),l([X(cc.Node)],t.prototype,"btn_begin",void 0),l([X(cc.Node)],t.prototype,"btn_down",void 0),l([X(cc.Node)],t.prototype,"btn_add",void 0),l([X(cc.Node)],t.prototype,"btn_sub",void 0),l([X(cc.Node)],t.prototype,"btn_next",void 0),l([X(cc.Node)],t.prototype,"loseBtn",void 0),l([X(V.default)],t.prototype,"btn_prop",void 0),l([X(cc.Node)],t.prototype,"btn_tips",void 0),l([X(cc.Node)],t.prototype,"pack_mask",void 0),l([X(K.default)],t.prototype,"moreClickUtil",void 0),l([X(cc.Node)],t.prototype,"noTimeGameNode",void 0),l([X(cc.Node)],t.prototype,"endNode",void 0),l([X(cc.Node)],t.prototype,"homeBtn",void 0),l([X(cc.Node)],t.prototype,"restartBtn",void 0),l([X(cc.Node)],t.prototype,"recoverBtn",void 0),l([X(cc.Node)],t.prototype,"bottom",void 0),l([X(cc.Node)],t.prototype,"icon_3",void 0),l([X(cc.Node)],t.prototype,"GM",void 0),l([X(cc.EditBox)],t.prototype,"editbox",void 0),l([X(cc.Node)],t.prototype,"sureBtn",void 0),n=l([q],t)}(h.default);i.default=Q,cc._RF.pop(),cc._RF.pop()},{}],BarbecueChallangeListItem:[function(e,t,n){"use strict";cc._RF.push(t,"27d9ascGfFF6q+zE5BKqhGS","BarbecueChallangeListItem");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"2247fR508xGCI83dhCGU0yo","BarbecueChallangeListItem");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t}return c(t,e),Object.defineProperty(t.prototype,"BarbecueId",{get:function(){return this._barbecueId},enumerable:!1,configurable:!0}),t.prototype.initItem=function(){this.checkState()},t.prototype.checkState=function(){this.showUnlock()},t.prototype.showUnlock=function(){},t.prototype.showLock=function(){},s([d(cc.Sprite)],t.prototype,"icon",void 0),s([u],t)}(cc.Component);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],BarbecueChallangeOverInterface:[function(e,t,n){"use strict";cc._RF.push(t,"5f933y8jBRCWbymk6GoSlpd","BarbecueChallangeOverInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"a65dfGJ9NlEmLbqQGcuB4m5","BarbecueChallangeOverInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("ShopAwardInterface"),h=o("DayChallangeManager"),p=o("GameManger"),f=o("ItemManager"),_=o("SdkManager"),y=o("SoundManager"),b=o("StoragerManager"),v=o("TypeManager"),m=o("UIManager"),g=cc._decorator,I=g.ccclass,T=g.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.goodItem=null,t.homeBtn=null,t.winPanel=null,t.backBtn=null,t.failPanel=null,t.againBtn=null,t.challangeNumLabel=null,t.freeLabel=null,t.bestScore=null,t.bestScoreLabel=null,t.mask=null,t.point=null,t.progressLabel=null,t.rewardList=null,t.goodItemList=null,t._btnLock=!0,t._state=0,t._rewardInfo=null,t._newRewardIndexs=[],t._hasGet=!1,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.homeBtn.on(cc.Node.EventType.TOUCH_END,this._homeBtnClick,this),this.againBtn.on(cc.Node.EventType.TOUCH_END,this._againBtnClick,this),this.backBtn.on(cc.Node.EventType.TOUCH_END,this._backBtnClick,this)},t.prototype.onUIDisable=function(){this.homeBtn.off(cc.Node.EventType.TOUCH_END,this._homeBtnClick,this),this.againBtn.off(cc.Node.EventType.TOUCH_END,this._againBtnClick,this),this.backBtn.off(cc.Node.EventType.TOUCH_END,this._backBtnClick,this)},t.prototype._homeBtnClick=function(){this._btnLock||(cc.systemEvent.emit(v.DistributedEvent.backHome,this._state),this.closeView())},t.prototype._againBtnClick=function(){var e=this;this._btnLock||_.default.Instance.ShareOrVideo(_.ShareLoc.daily_challenge,function(){cc.systemEvent.emit(v.DistributedEvent.challangeGameRestart),e.closeView()})},t.prototype._backBtnClick=function(){this._btnLock||(cc.systemEvent.emit(v.DistributedEvent.backHome,this._state),this.closeView())},t.prototype.onInit=function(e){this._state=e[0]},t.prototype.onUIStart=function(){this.ani_popup.play("ani_tongyongtanchuang_open"),this._initView()},t.prototype._initView=function(){this.winPanel.active=1==this._state,this.failPanel.active=0==this._state,this.point.active=!1,this.bestScore.active=!1;var e=h.default.Instance.bestProgress,t=h.default.Instance.curNum/h.default.Instance.totalNum;1==this._state&&(y.default.Instance.PlaySound("g127_victory"),t=1),b.default.Instance.bgIds.includes(2)?this._hasGet=!0:h.default.Instance.isAllGetKebabReward()&&(b.default.Instance.addBg(2),b.default.Instance.addTable(2));var n=e>t?e:t;if(this._rewardInfo=this._setRewardList(e,n),this._setProgress(t,n),this._rewardInfo){for(var o=0;o<this._rewardInfo.length;o++){var a=this._rewardInfo[o];a&&("gold"==a.type?b.default.Instance.GoldNum+=a.value:"star"==a.type?(b.default.Instance.starNum+=a.value,p.default.Instance.BarbecueStar+=a.value):"kebabs"==a.type&&(b.default.Instance.addUnlockKebab(a.value),b.default.Instance.addNewUnlockKebab(a.value)))}h.default.Instance.isAllGetKebabReward()&&(b.default.Instance.addBg(2),b.default.Instance.addTable(2))}this.challangeNumLabel.string=h.default.Instance.failNum+"";var i=h.default.Instance.freeNum-h.default.Instance.useFreeNum;this.freeLabel.string="\u4eca\u65e5\u514d\u8d39"+i+"/"+h.default.Instance.freeNum+"\u6b21",n=Math.floor(100*n)/100,h.default.Instance.updateRateNum(n),b.default.Instance.AutoSyncData(!1,!0)},t.prototype._setProgress=function(e,t){var n,o,a,i=this,r=0,c=0;c=e<=.4?Math.floor(e/.4*210):210+(e-.4)/.6*450,(c=Math.floor(c))>180&&(r=-35),n=-330+c+r,this.mask.width=0,this.point.x=n,a=t<=.4?Math.floor(t/.4*210):210+(t-.4)/.6*450,r=(c=Math.floor(c))>180?-35:0,o=-330+a,this.bestScore.x=o+r,this.progressLabel.string=Math.floor(100*e)+"%",this.bestScoreLabel.string=Math.floor(100*t)+"%";var s=c/300,l=0;cc.tween(this.mask).to(s,{width:c},{progress:function(e,t,n,o){var a=n,r=e+(t-e)*o;if(i.node&&i.node.isValid){var c=-1,s=null;a<210&&r>=210?(c=0,y.default.Instance.PlaySound("g127_victory_star1")):a<360&&r>=360?(c=1,y.default.Instance.PlaySound("g127_victory_star1")):a<510&&r>=510?(c=2,y.default.Instance.PlaySound("g127_victory_star1")):a<660&&r>=660&&(c=3,y.default.Instance.PlaySound("g127_victory_star1"),i._hasGet||h.default.Instance.isAllGetKebabReward()&&m.default.Instance.OpenUI(d.default,m.UIOrder.Window_2,[{type:"midAutumn",value:1}],"\u4e2d\u79cb\u76ae\u80a4\u5956\u52b1"));var u=i.rewardList.children[c],p=null,f=null;u&&(p=u.getChildByName("unlock"),f=u.getComponent(cc.Animation)),i._newRewardIndexs.includes(c)?(s=cc.instantiate(i.goodItem),f&&f.play(),p&&(p.active=!0)):p&&(p.active=!1),s&&(i._setGoodItem(s,l,c),l++)}return r}}).call(function(){i._btnLock=!1,i.point&&i.bestScore&&(i.point.active=!0,i.bestScore.active=!0)}).start()},t.prototype._setRewardList=function(e,t){for(var n=null,o=h.default.Instance.dayConfigKey,a=h.default.Instance.getRewardListByDay(o),i=h.default.Instance.rewardRates,r=0;r<i.length;r++){var c=i[r],s=this.rewardList.children[r];if(s){var l=a[r];if(l){var u=s.getChildByName("get"),d=s.getChildByName("gou"),p=s.getChildByName("icon"),_=s.getChildByName("unlock"),y=s.getChildByName("numLabel").getComponent(cc.Label);y.string=l[1],"kebabs"==l[0]&&(y.string=""),f.default.Instance.setItemSp2(l[0],p,null,l[1]),e>=c?(d.active=!0,u.active=!1,d.setScale(1,1),_.active=!1):t>=c&&(n||(n=[]),n.push({type:l[0],value:l[1]}),this._newRewardIndexs.push(r))}else console.error("\u5956\u52b1\u4e0d\u5b58\u5728",r)}else console.error("child \u4e0d\u5b58\u5728",r)}return n},t.prototype._setGoodItem=function(e,t,n){if(this._rewardInfo){var o=this._rewardInfo[t];if(e&&e.isValid&&o){this.goodItemList.addChild(e),e.active=!0,e.setPosition(0,0,0);var a=o.type,i=o.value,r=1;"star"==a?r=1.3:"kebabs"==a&&(r=.8),f.default.Instance.setItemSp2(a,e.children[0],r,i),f.default.Instance.setItemSpBg(a,e),e.children[1].getComponent(cc.Label).string="kebabs"==a?"":"x"+i;var c=e.getComponent(cc.Animation);3==n?c.play("ani_zhongqiugooditemunlock_final",0):c.play("ani_zhongqiugooditemunlock",0)}}},t.prototype._showRewardUI=function(){this._btnLock=!1,this._rewardInfo&&m.default.Instance.OpenUI(d.default,m.UIOrder.Window_2,this._rewardInfo,"\u6bcf\u65e5\u6311\u6218\u5956\u52b1")},t.prototype.closeView=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),m.default.Instance.DestroyUI(n))},t.bundleName=v.BundleName.Bundle1Pre_Challange,t.prefabUrl="BarbecueChallangeOverPre",t.className="BarbecueChallangeOverInterface",l([T(cc.Animation)],t.prototype,"ani_popup",void 0),l([T(cc.Node)],t.prototype,"goodItem",void 0),l([T(cc.Node)],t.prototype,"homeBtn",void 0),l([T(cc.Node)],t.prototype,"winPanel",void 0),l([T(cc.Node)],t.prototype,"backBtn",void 0),l([T(cc.Node)],t.prototype,"failPanel",void 0),l([T(cc.Node)],t.prototype,"againBtn",void 0),l([T(cc.Label)],t.prototype,"challangeNumLabel",void 0),l([T(cc.Label)],t.prototype,"freeLabel",void 0),l([T(cc.Node)],t.prototype,"bestScore",void 0),l([T(cc.Label)],t.prototype,"bestScoreLabel",void 0),l([T(cc.Node)],t.prototype,"mask",void 0),l([T(cc.Node)],t.prototype,"point",void 0),l([T(cc.Label)],t.prototype,"progressLabel",void 0),l([T(cc.Node)],t.prototype,"rewardList",void 0),l([T(cc.Node)],t.prototype,"goodItemList",void 0),n=l([I],t)}(u.default);i.default=k,cc._RF.pop(),cc._RF.pop()},{}],BarbecueChallangePropItem:[function(e,t,n){"use strict";cc._RF.push(t,"945a2xQWhtNJ5I2PmyF3TAz","BarbecueChallangePropItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"c3f7ejwILVA7ITnzco3JafN","BarbecueChallangePropItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("StoragerManager"),h=cc._decorator,p=h.ccclass,f=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.icon=null,t.point_red=null,t.point_green=null,t.label_prop=null,t.label_unlock=null,t.label_name=null,t.prop_id=0,t}return s(t,e),t.prototype.draw=function(){switch(this.prop_id){case 1:this.label_name.string="\u6253\u5305";break;case 2:this.label_name.string="\u6253\u4e71";break;case 3:this.label_name.string="\u89e3\u51bb"}},t.prototype.init=function(){this.label_name.node.active=!0,this.label_unlock.node.active=!1,u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_"+(10+this.prop_id),this.icon),this.Refresh()},t.prototype.Refresh=function(){var e=d.default.Instance.BarbecueProp["prop_"+this.prop_id];null==e||e<=0?(this.point_red.active=!0,this.point_green.active=!1):(this.point_red.active=!1,this.point_green.active=!0,this.label_prop.string=""+e)},l([f(cc.Animation)],t.prototype,"ani",void 0),l([f(cc.Node)],t.prototype,"icon",void 0),l([f(cc.Node)],t.prototype,"point_red",void 0),l([f(cc.Node)],t.prototype,"point_green",void 0),l([f(cc.Label)],t.prototype,"label_prop",void 0),l([f(cc.Label)],t.prototype,"label_unlock",void 0),l([f(cc.Label)],t.prototype,"label_name",void 0),l([f],t.prototype,"prop_id",void 0),l([p],t)}(cc.Component);i.default=_,cc._RF.pop(),cc._RF.pop()},{}],BarbecueChallangeRecoverInterface:[function(e,t,n){"use strict";cc._RF.push(t,"58310pzKYJAkb79lCah1oKB","BarbecueChallangeRecoverInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"447eaDiulpC4pp8MnOpmHPP","BarbecueChallangeRecoverInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("BarbecueReturnInterface"),h=o("GameManger"),p=o("SdkManager"),f=o("TypeManager"),_=o("UIManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_return=null,t.btn_close=null,t.recoverBtn=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.recoverBtn.on(cc.Node.EventType.TOUCH_END,this.resurgence,this),this.btn_return.y+=h.default.Instance.ScreenAdaptive},t.prototype.onInit=function(e){this.ts=e[0],this.ani_popup.play("ani_tongyongtanchuang_open")},t.prototype.return=function(){_.default.Instance.OpenUI(d.default,_.UIOrder.Window_2,3),_.default.Instance.DestroyUI(n)},t.prototype.resurgence=function(){p.default.Instance.ShareOrVideo(p.ShareLoc.daily_challenge_revive,function(){cc.systemEvent.emit(f.DistributedEvent.challangeGameRecover,!0),_.default.Instance.DestroyUI(n)})},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){_.default.Instance.DestroyUI(n),cc.systemEvent.emit(f.DistributedEvent.challangeGameRecover,!1)},.3))},t.bundleName=f.BundleName.Bundle1Pre_Challange,t.prefabUrl="BarbecueChallangeRecoverPre",t.className="BarbecueChallangeRecoverInterface",l([v(cc.Animation)],t.prototype,"ani_popup",void 0),l([v(cc.Node)],t.prototype,"btn_return",void 0),l([v(cc.Node)],t.prototype,"btn_close",void 0),l([v(cc.Node)],t.prototype,"recoverBtn",void 0),n=l([b],t)}(u.default);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],BarbecueDifficultyInterface:[function(e,t,n){"use strict";cc._RF.push(t,"2b8f00v9bNHlqvW/ZfWI8EC","BarbecueDifficultyInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"1872agTOI5N5qbbto6uOe84","BarbecueDifficultyInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("AutoManager"),p=o("GameManger"),f=o("SoundManager"),_=cc._decorator,y=_.ccclass,b=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.label_lv=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(e){var t=this;this.ts=e[0],this.call_back=e[1],f.default.Instance.PlaySound("hard_pop_open");var n=p.default.Instance.getRealLevel(this.ts.Lv);this.label_lv.string="\u7b2c"+n+"\u5173",this.label_lv.node.parent.children[1].active=!1,this.scheduleOnce(function(){t.label_lv.node.parent.children[1].active=!0},.5),h.default.Instance.isAuto&&this.scheduleOnce(function(){t.close()},h.default.Instance.panelWaitTime)},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.call_back&&this.call_back(),this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){d.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueResurgencePre/BarbecueDifficultyPre",t.className="BarbecueDifficultyInterface",l([b(cc.Animation)],t.prototype,"ani_popup",void 0),l([b(cc.Node)],t.prototype,"btn_close",void 0),l([b(cc.Label)],t.prototype,"label_lv",void 0),n=l([y],t)}(u.default);i.default=v,cc._RF.pop(),cc._RF.pop()},{}],BarbecueExplainInterface:[function(e,t,n){"use strict";cc._RF.push(t,"c5eb3Dxe+lHWKWzdd3gvSo8","BarbecueExplainInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"9aa69N8GjlGmZKgMf2Utv82","BarbecueExplainInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("UIManager"),f=o("BundleManger"),_=o("GameGuideInterface"),y=o("GameManger"),b=o("BarbecueStandInterface"),v=o("SdkManager"),m=o("SoundManager"),g=cc._decorator,I=g.ccclass,T=g.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.icon_tips=null,t.label_tips=null,t.btn_ok=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_ok.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(e){var t=this;switch(m.default.Instance.PlaySound("book_pop_open"),this.type=e[0],e[0]){case 1:this.label_tips.string="<b>\u5ba2\u4eba\u9700\u8981\u94c1\u677f\u70e7\u98ce\u5473\uff0c\u5219\u9700\u8981\u5728\n<color=#BF491F>\u94c1\u677f\u70e7\u70e4\u7089</color>\u91cc\u5b8c\u6210\u5bf9\u5e94\u8ba2\u5355\u54e6</b>";break;case 2:this.label_tips.string="<b>\u88ab<color=#BF491F>\u51b0\u51bb\u7684\u70e4\u4e32</color>\u65e0\u6cd5\u6d88\u9664\u548c\u79fb\u52a8\uff0c\n\u5b8c\u62103\u6b21\u6d88\u9664\u5373\u53ef\u878d\u5316\u51b0\u5757</b>";break;case 3:this.label_tips.string="<b><color=#BF491F>\u6cb9\u7eb8\u5305\u88c5</color></b>\u7684\u70e4\u4e32\u5728\u6446\u4e0a\u70e4\u7089\u65f6\n\u624d\u4f1a\u62c6\u5f00\u5305\u88c5\u54e6";break;case 4:this.label_tips.string="<b>\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u5b8c\u6210\u5ba2\u4eba\u7684\n<color=#BF491F>\u52a0\u6025\u8ba2\u5355</color></b>";break;case 5:this.label_tips.string="<b>\u6210\u529f\u6d88\u9664\u70e4\u7089\u8ba2\u5355\u4e0a\u7684\u70e4\u4e32\u5373\u53ef\n<color=#BF491F>\u89e3\u9501\u65b0\u70e4\u7089</color></b>";break;case 6:this.label_tips.string="<b>\u5c06<color=#BF491F>3\u4e2a\u76f8\u540c</color>\u7684\u70e4\u4e32\u653e\u7f6e\u5728\u540c\u4e00\n\u70e4\u7089\u4e0a\u5373\u53ef\u6d88\u9664</b>";break;case 7:this.label_tips.string="<b>\u5f53<color=#BF491F>\u70e4\u7089\u7a7a\u95f2</color> \u65f6\uff0c\u70e4\u76d8\u4e0a\u7684\u70e4\u4e32\n\u4f1a\u81ea\u52a8\u6446\u653e\u5230\u70e4\u7089\u4e0a</b>";break;case 8:this.label_tips.string="<b><color=#BF491F>3\u4e2a\u76f8\u540c</color>\u7684\u70e4\u4e32\u653e\u5728\u76d2\u5b50\u91cc\u5373\u53ef\u6253\n\u5305\uff0c\u6253\u5305\u597d\u7684\u76d2\u5b50\u4f1a\u9001\u8d70\u54e6</b>";break;case 9:this.label_tips.string="\u53ea\u80fd\u5b58\u653e<b><color=#BF491F>1\u6839\u70e4\u4e32</color>\u4e14\u65e0\u6cd5\u518d\u4e0a\u9762\n\u6d88\u9664</b>"}this.found_ani(e[0]),f.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueExplainUI/ui/text_"+e[0],this.icon_tips),this.ani_popup.play("ani_tongyongtanchuang_open"),6!=e[0]&&(this.btn_ok.active=!1,cc.tween(this).delay(2).call(function(){t.btn_ok.active=!0}).start())},t.prototype.found_ani=function(e){return u(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return[4,f.default.Instance.LoadPrefab("BarbecueExplainPre/explain"+e+"_item","Bundle1Pre")];case 1:return t=n.sent(),cc.instantiate(t).setParent(this.node.children[1]),[2]}})})},t.prototype.onFrameEvent=function(){},t.prototype.close=function(){var e=this;1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){if(p.default.Instance.DestroyUI(n),6==e.type)y.default.Instance.GudieStep=100,p.default.Instance.OpenUI(_.default,p.UIOrder.Window_3),v.default.Instance.reportUserGuide(3);else{var t=p.default.Instance.GetUI(b.default);t&&t.OpeningTips()}},.3),7==this.type&&v.default.Instance.reportUserGuide(12))},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueExplainPre/BarbecueExplainPre",t.className="BarbecueExplainInterface",l([T(cc.Animation)],t.prototype,"ani_popup",void 0),l([T(cc.Node)],t.prototype,"icon_tips",void 0),l([T(cc.RichText)],t.prototype,"label_tips",void 0),l([T(cc.Node)],t.prototype,"btn_ok",void 0),n=l([I],t)}(h.default);i.default=k,cc._RF.pop(),cc._RF.pop()},{}],BarbecueFreePropInterface:[function(e,t,n){"use strict";cc._RF.push(t,"5b7e80m9whK3p0/UXf142cY","BarbecueFreePropInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"de48eWM3nBMcZgo6Ly3RpyO","BarbecueFreePropInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("BundleManger"),p=o("GameManger"),f=o("SdkManager"),_=o("TypeManager"),y=o("SoundManager"),b=cc._decorator,v=b.ccclass,m=b.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.bar_2=null,t.icon_prop=null,t.btn_video=null,t.label_bar=null,t.labek_tips=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_video.on(cc.Node.EventType.TOUCH_END,this.video,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(e){switch(y.default.Instance.PlaySound("book_pop_open"),this.prop_id=e[0],this.ts=e[1],this.prop_id){case 1:this.labek_tips.string="<b><color=#61583B>\u4f7f\u7528</c><color=#BF491F>\u6253\u5305\u9053\u5177</color><color=#61583B>\u968f\u673a\u6d88\u9664\u516d\u4e2a\u76f8\u540c\u7684\u70e7\u70e4</c>";break;case 2:this.labek_tips.string="<b><color=#61583B>\u4f7f\u7528</c><color=#BF491F>\u6253\u4e71\u9053\u5177</color><color=#61583B>\u91cd\u65b0\u6574\u7406\u70e7\u70e4\u6392\u5e03</c>";break;case 3:this.labek_tips.string="<b><color=#61583B>\u4f7f\u7528</c><color=#BF491F>\u89e3\u51bb\u9053\u5177</color><color=#61583B>\u878d\u5316\u51b0\u5757</c>"}h.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_"+(10+this.prop_id),this.icon_prop),this.ani_popup.play("ani_tongyongtanchuang_open"),this.label_bar.string="\u5df2\u5b8c\u6210 "+3*this.ts.compound_num+"/"+this.ts.kebabs_max,this.bar_2.width=Math.floor(924*this.ts.compound_num/this.ts.kebabs_max),3*this.ts.compound_num==this.ts.kebabs_max&&this.close()},t.prototype.video=function(){var e=this;f.default.Instance.ShareOrVideo(f.ShareLoc.stale_mate,function(){e.ts.use_prop(e.prop_id,!0),e.close()})},t.prototype.close=function(){var e=this;1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){if(p.default.Instance.isYuTinAB){var t=e.ts.getOneRoleSound(e.ts.guest_queue_ids,_.VoiceType.prop);t&&t.voice&&e.ts.doRoleVoicePlay(t.voice,t.index)}d.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueResurgencePre/BarbecueFreePropPre",t.className="BarbecueFreePropInterface",l([m(cc.Animation)],t.prototype,"ani_popup",void 0),l([m(cc.Node)],t.prototype,"btn_close",void 0),l([m(cc.Node)],t.prototype,"bar_2",void 0),l([m(cc.Node)],t.prototype,"icon_prop",void 0),l([m(cc.Node)],t.prototype,"btn_video",void 0),l([m(cc.Label)],t.prototype,"label_bar",void 0),l([m(cc.RichText)],t.prototype,"labek_tips",void 0),n=l([v],t)}(u.default);i.default=g,cc._RF.pop(),cc._RF.pop()},{}],BarbecueLvInterface:[function(e,t,n){"use strict";cc._RF.push(t,"dda2btHB3BNI7KAbea7M4AN","BarbecueLvInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"23c7dQBc5FLaKG2dUDh2hvD","BarbecueLvInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("StoragerManager"),p=o("lv_tiem"),f=o("GameManger"),_=cc._decorator,y=_.ccclass,b=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t.ani_popup=null,t.btn_close=null,t.btn_close2=null,t.group_page=null,t.icon_select=null,t.page_1=null,t.page_2=null,t.edit_box=null,t.btn_yes=null,t.label_value=null,t.item1_array=[],t.item2_array=[],t.value=1,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_close2.on(cc.Node.EventType.TOUCH_END,this.close,this);for(var e=0;e<this.group_page.childrenCount;e++)this.group_page.children[e].on(cc.Node.EventType.TOUCH_END,this.change_page.bind(this,e+1));this.page_1.parent.on(cc.Node.EventType.TOUCH_START,this.touch_start,this,!0),this.page_1.parent.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move,this,!0),this.page_1.parent.on(cc.Node.EventType.TOUCH_END,this.touch_end,this,!0),this.page_1.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.touch_end,this,!0),this.edit_box.node.on("text-changed",this.editbox,this),this.btn_yes.on(cc.Node.EventType.TOUCH_END,this.yes,this),this.btn_close.y+=f.default.Instance.ScreenAdaptive},t.prototype.onInit=function(){this.max_page=Math.floor(f.default.Instance.BarbecueMaxLv/12),f.default.Instance.BarbecueMaxLv%12!=0&&this.max_page++;var e=h.default.Instance.BarbecueLv.length;this.now_page=Math.floor(e/12)+1,this.now_page>this.max_page&&(this.now_page=this.max_page),0==this.item1_array.length&&this.found_page(this.now_page,1),0==this.item2_array.length&&this.found_page(2,2),this.now_page>this.group_page.childrenCount?this.icon_select.x=this.group_page.children[this.group_page.childrenCount-1].x:this.icon_select.x=this.group_page.children[this.now_page-1].x,this.label_value.string="\u5f53\u524d\u6d4b\u8bd5\u7ec4"+f.default.Instance.ABTestInfo["test_gift_package:test_gift_package_2"]},t.prototype.change_page=function(e){var t=this;e!=this.now_page&&(1==this.page_1.active?(this.now_page_node=this.page_1,this.next_page_node=this.page_2):(this.now_page_node=this.page_2,this.next_page_node=this.page_1),this.draw_page(e,this.next_page_node),e>this.now_page?this.next_page_node.x=700:this.next_page_node.x=-700,this.next_page_node.active=!0,cc.tween(this.next_page_node).to(.2,{x:0}).start(),cc.tween(this.now_page_node).by(.2,{x:0-this.next_page_node.x}).call(function(){t.now_page_node.active=!1}).start(),this.now_page=e,this.now_page>this.group_page.childrenCount?this.icon_select.x=this.group_page.children[this.group_page.childrenCount-1].x:this.icon_select.x=this.group_page.children[this.now_page-1].x)},t.prototype.touch_start=function(){1==this.page_1.active?(this.now_page_node=this.page_1,this.next_page_node=this.page_2):(this.now_page_node=this.page_2,this.next_page_node=this.page_1),this.next_page=null,this.next_page_node.x=800,this.next_page_node.active=!0,this.move_dis=0},t.prototype.touch_move=function(e){var t=e.getDelta();this.now_page_node.x+=t.x,this.move_dis+=Math.abs(t.x),1==this.now_page&&this.now_page_node.x>0?this.now_page_node.x=0:this.now_page>=this.max_page&&this.now_page_node.x<0?this.now_page_node.x=0:this.now_page_node.x>0?(this.next_page!=this.now_page-1&&(this.next_page=this.now_page-1,this.draw_page(this.next_page,this.next_page_node)),this.next_page_node.x=this.now_page_node.x-700):(this.next_page!=this.now_page+1&&(this.next_page=this.now_page+1,this.draw_page(this.next_page,this.next_page_node)),this.next_page_node.x=this.now_page_node.x+700)},t.prototype.touch_end=function(){var e=this;Math.abs(this.now_page_node.x)<200?(cc.tween(this.now_page_node).to(.1,{x:0}).start(),cc.tween(this.next_page_node).by(.1,{x:0-this.now_page_node.x}).call(function(){e.next_page_node.active=!1}).start()):(this.now_page=this.next_page,cc.tween(this.next_page_node).to(.2,{x:0}).start(),cc.tween(this.now_page_node).by(.2,{x:0-this.next_page_node.x}).call(function(){e.now_page_node.active=!1}).start(),this.now_page>this.group_page.childrenCount?this.icon_select.x=this.group_page.children[this.group_page.childrenCount-1].x:this.icon_select.x=this.group_page.children[this.now_page-1].x)},t.prototype.found_page=function(e,t){var n,o,a=12*(e-1)+1;switch(t){case 1:n=this.item1_array,o=this.page_1;break;case 2:n=this.item2_array,o=this.page_2}for(var i=0;i<12;i++){var r=cc.instantiate(this.item);r.setParent(o),n[i]=r.getComponent(p.default),n[i].Init(this),n[i].Refresh(a+i)}},t.prototype.draw_page=function(e,t){var n,o=12*(e-1)+1;switch(t.name){case"page_1":n=this.item1_array;break;case"page_2":n=this.item2_array}for(var a=0;a<n.length;a++)n[a].Refresh(o+a)},t.prototype.editbox=function(e){this.value=Number(e.string),(1==isNaN(this.value)||this.value<=1)&&(this.value=1)},t.prototype.yes=function(){f.default.Instance.ABTestInfo["test_gift_package:test_gift_package_2"]=this.value,this.label_value.string="\u5f53\u524d\u6d4b\u8bd5\u7ec4"+f.default.Instance.ABTestInfo["test_gift_package:test_gift_package_2"]},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_BarbecueLvPre_close"),this.scheduleOnce(function(){d.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueLvPre/BarbecueLvPre",t.className="BarbecueLvInterface",l([b(cc.Prefab)],t.prototype,"item",void 0),l([b(cc.Animation)],t.prototype,"ani_popup",void 0),l([b(cc.Node)],t.prototype,"btn_close",void 0),l([b(cc.Node)],t.prototype,"btn_close2",void 0),l([b(cc.Node)],t.prototype,"group_page",void 0),l([b(cc.Node)],t.prototype,"icon_select",void 0),l([b(cc.Node)],t.prototype,"page_1",void 0),l([b(cc.Node)],t.prototype,"page_2",void 0),l([b(cc.EditBox)],t.prototype,"edit_box",void 0),l([b(cc.Node)],t.prototype,"btn_yes",void 0),l([b(cc.Label)],t.prototype,"label_value",void 0),n=l([y],t)}(u.default);i.default=v,cc._RF.pop(),cc._RF.pop()},{}],BarbecueOvenInterface:[function(e,t,n){"use strict";cc._RF.push(t,"cf51fQ4ol1BQ5UPpwuq5Z4r","BarbecueOvenInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"2cbaccx8ctFV7/POrFKX8WA","BarbecueOvenInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("SdkManager"),p=o("TypeManager"),f=o("GameManger"),_=o("SoundManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.bar_2=null,t.label_bar=null,t.btn_video=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_video.on(cc.Node.EventType.TOUCH_END,this.video,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close.bind(this,!1),this)},t.prototype.onInit=function(e){this.ts=e[0],_.default.Instance.PlaySound("book_pop_open"),this.ani_popup.play("ani_tongyongtanchuang_open"),this.label_bar.string="\u5df2\u5b8c\u6210 "+3*this.ts.compound_num+"/"+this.ts.kebabs_max,this.bar_2.width=Math.floor(924*this.ts.compound_num/this.ts.kebabs_max)},t.prototype.video=function(){var e=this;h.default.Instance.ShareOrVideo(h.ShareLoc.advertising_oven,function(){try{for(var t=0;t<e.ts.useing_oven_tray.length;t++){var n=e.ts.useing_oven_tray[t];if(null!=n&&0!=n.node.active&&n.OvenData.condition==p.OvenCondition.video){n.Unlock();break}}}catch(o){console.error("\u89c6\u9891\u70e4\u7089\u5f39\u7a97\u62a5\u9519",o)}e.close(!0)})},t.prototype.close=function(e){var t=this;1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){if(f.default.Instance.isYuTinAB){var e=t.ts.getOneRoleSound(t.ts.guest_queue_ids,p.VoiceType.oven);e&&e.voice&&t.ts.doRoleVoicePlay(e.voice,e.index)}d.default.Instance.DestroyUI(n)},.3),0==e&&this.ts.TipsVideoOven())},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueResurgencePre/BarbecueOvenPre",t.className="BarbecueOvenInterface",l([v(cc.Animation)],t.prototype,"ani_popup",void 0),l([v(cc.Node)],t.prototype,"btn_close",void 0),l([v(cc.Node)],t.prototype,"bar_2",void 0),l([v(cc.Label)],t.prototype,"label_bar",void 0),l([v(cc.Node)],t.prototype,"btn_video",void 0),n=l([b],t)}(u.default);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],BarbecueOverInterface:[function(e,t,n){"use strict";cc._RF.push(t,"bbda4MA6ItKKozPTt3GJVqu","BarbecueOverInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"42e06iN5S5FB50fVBb4+lp7","BarbecueOverInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("BarbecueStandInterface"),f=o("UIManager"),_=o("StoragerManager"),y=o("TypeManager"),b=o("InfoManager"),v=o("GameManger"),m=o("PoolManager"),g=o("SoundManager"),I=o("SdkManager"),T=o("GameGuideInterface"),k=o("AddPowerInterface"),S=o("LevelPackInterface"),w=o("NewcomerPackPreInterface"),O=o("FunctionManager"),F=o("AutoManager"),B=o("InterstitialAdManager"),x=o("WinActivityManager"),P=o("WinActivityInterface"),C=cc._decorator,R=C.ccclass,N=C.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.btn_return=null,t.grou_win=null,t.star=[],t.star_lizi=[],t.award=[],t.btn_next=null,t.label_lv=null,t.label_score=null,t.btn_newcomer1=null,t.btn_newcomer2=null,t.label_time=null,t.grou_fail=null,t.btn_again=null,t.winActivity=null,t.timeLabel=null,t.oldLabel=null,t.newLabel=null,t.btn_winActivity=null,t.btn_combo_recover=null,t._tempLevel=0,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.btn_winActivity.on(cc.Node.EventType.TOUCH_END,this._winActivityBtnClick,this),this.btn_combo_recover.on(cc.Node.EventType.TOUCH_END,this._comboRecoverClick,this)},t.prototype.onUIDisable=function(){this.btn_winActivity.off(cc.Node.EventType.TOUCH_END,this._winActivityBtnClick,this),this.btn_combo_recover.off(cc.Node.EventType.TOUCH_END,this._comboRecoverClick,this)},t.prototype.onUIStart=function(){var e=this;this.btn_return.on(cc.Node.EventType.TOUCH_END,this.return,this),this.btn_next.on(cc.Node.EventType.TOUCH_END,this.next,this),this.btn_again.on(cc.Node.EventType.TOUCH_END,this.again,this),this.btn_return.y+=v.default.Instance.ScreenAdaptive,this.btn_newcomer1.on(cc.Node.EventType.TOUCH_END,this.click_newcomer1,this),this.btn_newcomer2.on(cc.Node.EventType.TOUCH_END,this.click_newcomer2,this),this.schedule(this.time,1),this.ani.on(cc.Animation.EventType.FINISHED,function(){e.ani.play("ani_OverWin_idle")})},t.prototype.onInit=function(e){var t=this;switch(this.ts=e[1],this.ts.is_over=!0,e[0]){case!0:var n=v.default.Instance.getRealLevel(this.ts.Lv);this.label_lv.string="\u7b2c"+n+"\u5173",this.score=0,cc.tween(this).to(1.5,{score:this.ts.Score},{onUpdate:function(){t.label_score.string!=""+Math.ceil(t.score)&&(t.label_score.string=""+Math.ceil(t.score))}}).start();var o=0;if(this.ts.barbecue_lv_data&&this.ts.barbecue_lv_data.star_rating)for(var a=0;a<this.ts.barbecue_lv_data.star_rating.length;a++){var i=this.ts.barbecue_lv_data.star_rating[a];this.ts.Score>=i?(o++,this.star[a].active=!0,this.star_lizi[a].opacity=255):(this.star[a].active=!1,this.star_lizi[a].opacity=0)}this.grou_win.active=!0,this.grou_fail.active=!1,this.award_gold=200+5*Math.round((this.ts.Lv-1)/5);var r=_.default.Instance.BarbecueLv[this.ts.Lv-1];if(null==r){_.default.Instance.BarbecueLv[this.ts.Lv-1]=o,v.default.Instance.BarbecueStar+=o,cc.systemEvent.emit(y.DistributedEvent.lv),cc.systemEvent.emit(y.DistributedEvent.illustration);var c=4;v.default.Instance.isJump36AB&&(c=7),this.ts.Lv==c&&1!=_.default.Instance.Record[y.RecordType.gudie_game]&&cc.tween(this).delay(2).call(function(){v.default.Instance.GudieStep=41,f.default.Instance.OpenUI(T.default,f.UIOrder.Window_3)}).start(),cc.systemEvent.emit(y.DistributedEvent.task)}else o>r&&(v.default.Instance.BarbecueStar+=o-r,_.default.Instance.BarbecueLv[this.ts.Lv-1]=o);this.award[1].children[1].getComponent(cc.Label).string="x"+this.award_gold,_.default.Instance.addGoldNumWithout(this.award_gold),cc.tween(this).delay(2).call(function(){t.award_eff()}).start(),g.default.Instance.PlaySound("g127_victory"),I.default.Instance.reportEndStage(this.ts.Lv,1,o),2==this.ts.Lv&&I.default.Instance.reportUserGuide(22),this.judge_newcomer(),B.default.Instance.checkNewUserHalfScreen(),B.default.Instance.checkOldUserHalfScreen();break;case!1:this.grou_win.active=!1,this.grou_fail.active=!0,g.default.Instance.PlaySound("g127_fail"),I.default.Instance.reportEndStage(this.ts.Lv,0),2==this.ts.Lv&&I.default.Instance.reportUserGuide(24)}1==this.ts.Lv&&I.default.Instance.reportUserGuide(9),F.default.Instance.isAuto&&this.scheduleOnce(function(){e[0]?t.next():t.again()},F.default.Instance.panelWaitTime),v.default.Instance.isWinActivity?this._checkActitvity(e[0]):(this.winActivity.active=!1,this.award[2].active=!1),_.default.Instance.AutoSyncData(!1,!0)},t.prototype._checkActitvity=function(e){return void 0===e&&(e=!1),u(this,void 0,void 0,function(){var t,n,o,a,i,r,c,s,l,u,h;return d(this,function(){return this.btn_combo_recover.active=!1,this.award[2].active=!1,t=x.default.Instance.checkIsUnlock(),n=_.default.Instance.comboLevel,o=n,this.winActivity.active=t,this.winActivity.y+=v.default.Instance.ScreenAdaptive,e?(o=n+1>=x.default.Instance.maxLevel?x.default.Instance.maxLevel:n+1,this.ts.Lv==x.default.Instance.unLockLevel&&(o=1,x.default.Instance.initActivity(),b.default.Instance.isDaren||(v.default.Instance.GudieStep=1e3,f.default.Instance.OpenUI(T.default,f.UIOrder.Window_3)))):(o=n-2<=1?1:n-2)!=n&&(this.btn_combo_recover.active=!0),this._tempLevel=n,t&&(a=o!=n,this.ts.Lv==x.default.Instance.unLockLevel&&(a=!1),i=this.winActivity.getChildByName("fish_1"),r=this.winActivity.getChildByName("fish_2"),c=this.winActivity.getChildByName("jiantou"),i&&(i.active=a),r&&(r.active=a),c&&(c.active=a),_.default.Instance.comboLevel=o,s=x.default.Instance.scores[o-1]?x.default.Instance.scores[o-1]:0,l=x.default.Instance.scores[n-1]?x.default.Instance.scores[n-1]:0,this.oldLabel.string=l+"",this.newLabel.string=s+"",e&&(u=n-1,h=x.default.Instance.scores[u]?x.default.Instance.scores[u]:0,this.ts.Lv!=x.default.Instance.unLockLevel&&(this.award[2].active=t,_.default.Instance.winActivityScore+=h,_.default.Instance.sysWinActivityData()),this.award[2].children[1].getComponent(cc.Label).string="x"+h),this.timeLabel.string="\u5269\u4f59"+x.default.Instance.AcitivityDay+"\u5929"),this.winActivity.active=t,[2]})})},t.prototype.award_eff=function(){var e=this,t=this.award[0].convertToWorldSpaceAR(cc.v2(0,0)),n=this.node.parent.convertToNodeSpaceAR(t),o=this.node.getChildByName("gold_item"),a=this.node.getChildByName("power_item"),i=this.btn_winActivity;m.default.Instance.PlayCurrencyEffects2(2,n,cc.v2(-170,520+v.default.Instance.ScreenAdaptive),function(){cc.systemEvent.emit(y.DistributedEvent.gold_num,e.award_gold),o&&o.children&&o.children[3]&&(o.children[3].active=!0)});var r=this.award[1].convertToWorldSpaceAR(cc.v2(0,0)),c=this.node.parent.convertToNodeSpaceAR(r);if(m.default.Instance.PlayCurrencyEffects2(1,c,cc.v2(20,580+v.default.Instance.ScreenAdaptive),function(){a&&a.children&&a.children[3]&&(a.children[3].active=!0),_.default.Instance.BarbecuePower+=1}),v.default.Instance.isWinActivity&&x.default.Instance.checkIsUnlock()&&_.default.Instance.BarbecueLv.length!=x.default.Instance.unLockLevel){this.winActivity.convertToWorldSpaceAR(cc.v2(0,0));var s=this.award[2].convertToWorldSpaceAR(cc.v2(0,0)),l=this.node.parent.convertToNodeSpaceAR(s);m.default.Instance.PlayCurrencyEffects2(4,l,cc.v2(-312,436+v.default.Instance.ScreenAdaptive),function(){i&&i.children&&i.children[3]&&(i.children[3].active=!0)})}},t.prototype.return=function(){cc.systemEvent.emit(y.DistributedEvent.backHome),41==v.default.Instance.GudieStep&&(v.default.Instance.GudieStep=30),f.default.Instance.DestroyUI(p.default),this.close(),1==this.ts.Lv?I.default.Instance.reportUserGuide(11):1==this.ts.Lv&&I.default.Instance.reportUserGuide(27)},t.prototype.next=function(){F.default.Instance.isAuto?_.default.Instance.BarbecuePower&&_.default.Instance.BarbecuePower--:_.default.Instance.BarbecuePower--,this.ts.Lv++,v.default.Instance.isJump36AB&&(this.ts.Lv=v.default.Instance.jumpABLevel()),this.ts.Begin(),this.close(),2==this.ts.Lv?I.default.Instance.reportUserGuide(10):3==this.ts.Lv&&I.default.Instance.reportUserGuide(25)},t.prototype.again=function(){if(F.default.Instance.isAuto)_.default.Instance.BarbecuePower&&_.default.Instance.BarbecuePower--;else{if(_.default.Instance.BarbecuePower<=0)return f.default.Instance.OpenUI(k.default,f.UIOrder.Window_2),b.default.Instance.TsInitial.ShowTips("\u4f53\u529b\u4e0d\u8db3");_.default.Instance.BarbecuePower--}this.ts.Begin(!0),this.close(),2==this.ts.Lv&&I.default.Instance.reportUserGuide(26)},t.prototype.time=function(){null!=this.count_down&&(this.count_down--,this.count_down<=0&&(this.count_down=3600),this.label_time.string=""+O.default.Instance.TimecFormat(this.count_down))},t.prototype.judge_newcomer=function(){var e=this;this.btn_newcomer1.active=!1,this.btn_newcomer2.active=!1,this.count_down=null,cc.tween(this).delay(2).call(function(){return u(e,void 0,void 0,function(){return d(this,function(){return 0==_.default.Instance.Record[y.RecordType.newcomer_package1]&&(this.btn_newcomer1.setScale(0),this.btn_newcomer1.active=!0,cc.tween(this.btn_newcomer1).to(.5,{scale:1}).start()),[2]})})}).start()},t.prototype.click_newcomer1=function(){f.default.Instance.OpenUI(S.default,f.UIOrder.Window_2,3)},t.prototype.click_newcomer2=function(){f.default.Instance.OpenUI(w.default,f.UIOrder.Window_2)},t.prototype._winActivityBtnClick=function(){1e3==v.default.Instance.GudieStep&&(v.default.Instance.GudieStep=1001),f.default.Instance.OpenUI(P.default,f.UIOrder.Window_2)},t.prototype._comboRecoverClick=function(){var e=this,t=_.default.Instance.comboLevel+2;t>=x.default.Instance.maxLevel&&(t=x.default.Instance.maxLevel),I.default.Instance.ShareOrVideo(I.ShareLoc.recover_winning,function(){if(e.btn_combo_recover&&e.btn_combo_recover.isValid){e.btn_combo_recover.active=!1;var t=x.default.Instance.scores[e._tempLevel-1]?x.default.Instance.scores[e._tempLevel-1]:0,n=x.default.Instance.scores[_.default.Instance.comboLevel-1]?x.default.Instance.scores[_.default.Instance.comboLevel-1]:0;e.oldLabel.string=n+"",e.newLabel.string=t+""}e.winActivity&&e.winActivity.getComponent(cc.Animation).play(),_.default.Instance.comboLevel=e._tempLevel?e._tempLevel:0})},t.prototype.close=function(){f.default.Instance.DestroyUI(n)},t.prototype.playStar=function(e){this.grou_win.active&&e<=this.star.length&&this.star[e-1].active&&g.default.Instance.PlaySound("g127_victory_star"+e)},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueOverPre/BarbecueOverPre",t.className="BarbecueOverInterface",l([N(cc.Animation)],t.prototype,"ani",void 0),l([N(cc.Node)],t.prototype,"btn_return",void 0),l([N(cc.Node)],t.prototype,"grou_win",void 0),l([N(cc.Node)],t.prototype,"star",void 0),l([N(cc.Node)],t.prototype,"star_lizi",void 0),l([N(cc.Node)],t.prototype,"award",void 0),l([N(cc.Node)],t.prototype,"btn_next",void 0),l([N(cc.Label)],t.prototype,"label_lv",void 0),l([N(cc.Label)],t.prototype,"label_score",void 0),l([N(cc.Node)],t.prototype,"btn_newcomer1",void 0),l([N(cc.Node)],t.prototype,"btn_newcomer2",void 0),l([N(cc.Label)],t.prototype,"label_time",void 0),l([N(cc.Node)],t.prototype,"grou_fail",void 0),l([N(cc.Node)],t.prototype,"btn_again",void 0),l([N(cc.Node)],t.prototype,"winActivity",void 0),l([N(cc.Label)],t.prototype,"timeLabel",void 0),l([N(cc.Label)],t.prototype,"oldLabel",void 0),l([N(cc.Label)],t.prototype,"newLabel",void 0),l([N(cc.Node)],t.prototype,"btn_winActivity",void 0),l([N(cc.Node)],t.prototype,"btn_combo_recover",void 0),n=l([R],t)}(h.default);i.default=A,cc._RF.pop(),cc._RF.pop()},{}],BarbecuePropInterface:[function(e,t,n){"use strict";cc._RF.push(t,"52023xnxftAuoMGOFjlJfSF","BarbecuePropInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"67330DH1m1ENLp9eZuNgdcG","BarbecuePropInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("StoragerManager"),p=o("InfoManager"),f=o("BundleManger"),_=o("SdkManager"),y=o("PoolManager"),b=o("SoundManager"),v=cc._decorator,m=v.ccclass,g=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.icon_tips=null,t.btn_close=null,t.icon_prop=null,t.btn_buy=null,t.labek_price=null,t.btn_video=null,t.btn_get=null,t.labek_tips=null,t._closeCb=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_get.on(cc.Node.EventType.TOUCH_END,this.get,this),this.btn_video.on(cc.Node.EventType.TOUCH_END,this.video,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(e){switch(this.prop_id=e[0],this.ts=e[2],this._closeCb=e[3],b.default.Instance.PlaySound("book_pop_open"),this.prop_id){case 1:this.price=1e3,f.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueResurgenceUI/text_8",this.icon_tips),this.labek_tips.string="<b><color=#61583B>\u968f\u673a\u6253\u5305</c><color=#BF491F>\u516d\u4e2a</color><color=#61583B>\u76f8\u540c\u7684\u70e7\u70e4</c>";break;case 2:this.price=1e3,f.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueResurgenceUI/text_7",this.icon_tips),this.labek_tips.string="<b><color=#61583B>\u91cd\u65b0\u968f\u673a</c><color=#BF491F>\u6240\u6709</color><color=#61583B>\u70e7\u70e4</c>";break;case 3:this.price=1e3,f.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueResurgenceUI/text_6",this.icon_tips),this.labek_tips.string="<b><color=#61583B>\u878d\u5316\u73b0\u573a</c><color=#BF491F>\u6240\u6709</color><color=#61583B>\u51b0\u51bb\u7684\u70e7\u70e4</c>"}this.labek_price.string=""+this.price,1==e[1]?(this.btn_get.active=!0,this.btn_buy.active=!1,this.btn_video.active=!1,this.node.children[1].active=!1):(this.btn_get.active=!1,this.btn_buy.active=!1,this.btn_video.active=!0,this.node.children[1].active=!0),f.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_"+(10+this.prop_id),this.icon_prop),this.ani_popup.play("ani_tongyongtanchuang_open")},t.prototype.buy=function(){if(h.default.Instance.GoldNum<this.price)return p.default.Instance.TsInitial.ShowTips("\u91d1\u5e01\u4e0d\u8db3");h.default.Instance.GoldNum-=this.price,this.award(),this.close()},t.prototype.get=function(){this.award(),this.close()},t.prototype.video=function(){var e=this,t=function(){e.award(),e.ts.GameDelay(),e.close()};switch(this.prop_id){case 1:_.default.Instance.ShareOrVideo(_.ShareLoc.pick_up,t);break;case 2:_.default.Instance.ShareOrVideo(_.ShareLoc.mess_up,t);break;case 3:_.default.Instance.ShareOrVideo(_.ShareLoc.physical_strength,t)}},t.prototype.award=function(){null==h.default.Instance.BarbecueProp["prop_"+this.prop_id]?h.default.Instance.BarbecueProp["prop_"+this.prop_id]=1:h.default.Instance.BarbecueProp["prop_"+this.prop_id]++,y.default.Instance.PropEffects(this.prop_id,this.ts.btn_prop[this.prop_id-1]),h.default.Instance.AutoSyncData()},t.prototype.close=function(){var e=this;1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){if(1==e.btn_get.active)switch(e.ts.Lv){case 5:case 10:case 15:case 20:case 25:case 30:case 35:case 40:case 45:case 50:case 55:case 60:cc.tween(e).delay(1.5).call(function(){e.ts.OpeningTips(),d.default.Instance.DestroyUI(n)}).start();break;default:e.ts.OpeningTips(),d.default.Instance.DestroyUI(n)}else d.default.Instance.DestroyUI(n);e._closeCb&&e._closeCb()},.3))},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueResurgencePre/BarbecuePropPre",t.className="BarbecuePropInterface",l([g(cc.Animation)],t.prototype,"ani_popup",void 0),l([g(cc.Node)],t.prototype,"icon_tips",void 0),l([g(cc.Node)],t.prototype,"btn_close",void 0),l([g(cc.Node)],t.prototype,"icon_prop",void 0),l([g(cc.Node)],t.prototype,"btn_buy",void 0),l([g(cc.Label)],t.prototype,"labek_price",void 0),l([g(cc.Node)],t.prototype,"btn_video",void 0),l([g(cc.Node)],t.prototype,"btn_get",void 0),l([g(cc.RichText)],t.prototype,"labek_tips",void 0),n=l([m],t)}(u.default);i.default=I,cc._RF.pop(),cc._RF.pop()},{}],BarbecueResurgenceInterface:[function(e,t,n){"use strict";cc._RF.push(t,"8cba7wQuIhOcYpufNRhRxX+","BarbecueResurgenceInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"dad9cQ2v3NPH5CWy0c0QKHT","BarbecueResurgenceInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("BarbecueOverInterface"),p=o("BarbecueReturnInterface"),f=o("GameManger"),_=o("SdkManager"),y=o("AutoManager"),b=o("SoundManager"),v=cc._decorator,m=v.ccclass,g=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.label_tips=null,t.btn_return=null,t.btn_close=null,t.btn_resurgence=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_return.on(cc.Node.EventType.TOUCH_END,this.return,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_resurgence.on(cc.Node.EventType.TOUCH_END,this.resurgence,this),this.btn_return.y+=f.default.Instance.ScreenAdaptive},t.prototype.onInit=function(e){var t=this;switch(this.ts=e[0],this.ani_popup.play("ani_tongyongtanchuang_open"),b.default.Instance.PlaySound("book_pop_open"),e[1]){case 1:this.label_tips.string="\u8ba2\u5355\u8d85\u65f6\u4e86\uff0c\u8981\u4e0d\n\u8ba9\u5ba2\u4eba\u518d\u52a0\u65f6\u7b49\u7b49\u5427";break;case 2:this.label_tips.string="\u4e00\u65f6\u5931\u8bef\n\u662f\u5426\u52a0\u65f6\u590d\u6d3b?"}y.default.Instance.isAuto&&this.scheduleOnce(function(){t.resurgence()},y.default.Instance.panelWaitTime)},t.prototype.return=function(){d.default.Instance.OpenUI(p.default,d.UIOrder.Window_2,3)},t.prototype.resurgence=function(){var e=this,t=function(){e.ts.Resurgence(),d.default.Instance.DestroyUI(n)};y.default.Instance.isAuto?t():_.default.Instance.ShareOrVideo(_.ShareLoc.revive_gence,t)},t.prototype.close=function(){var e=this;1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){d.default.Instance.OpenUI(h.default,d.UIOrder.Window_2,!1,e.ts),d.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueResurgencePre/BarbecueResurgencePre",t.className="BarbecueResurgenceInterface",l([g(cc.Animation)],t.prototype,"ani_popup",void 0),l([g(cc.Label)],t.prototype,"label_tips",void 0),l([g(cc.Node)],t.prototype,"btn_return",void 0),l([g(cc.Node)],t.prototype,"btn_close",void 0),l([g(cc.Node)],t.prototype,"btn_resurgence",void 0),n=l([m],t)}(u.default);i.default=I,cc._RF.pop(),cc._RF.pop()},{}],BarbecueReturnInterface:[function(e,t,n){"use strict";cc._RF.push(t,"02965dPSVpHLoAR2kzTcnp/","BarbecueReturnInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"f14a0z6cQNHvJvBfxRFNIqF","BarbecueReturnInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("BarbecueStandInterface"),h=o("UIManager"),p=o("BarbecueOverInterface"),f=o("BarbecueResurgenceInterface"),_=o("SettingInterface"),y=o("TypeManager"),b=o("WinActivityManager"),v=o("GameManger"),m=o("StoragerManager"),g=o("SoundManager"),I=cc._decorator,T=I.ccclass,k=I.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_return=null,t.btn_close=null,t.descLabel=null,t.ani_fishchange=null,t.oldLabel=null,t.newLabel=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_return.on(cc.Node.EventType.TOUCH_END,this.return,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(e){if(this.type=e[0],this.ani_popup.play("ani_tongyongtanchuang_open"),g.default.Instance.PlaySound("book_pop_open"),v.default.Instance.gameType==y.GameType.challange);else if(v.default.Instance.isWinActivity&&b.default.Instance.checkIsUnlock()){var t=m.default.Instance.comboLevel,n=m.default.Instance.comboLevel;if((n=t-2<=1?1:t-2)!=t){var o=b.default.Instance.scores[n-1]?b.default.Instance.scores[n-1]:0,a=b.default.Instance.scores[t-1]?b.default.Instance.scores[t-1]:0;this.oldLabel.string=a+"",this.newLabel.string=o+"",this.descLabel.string="\u73b0\u5728\u9000\u51fa\n\u5c06\u964d\u4f4e\u70e4\u9c7c\u5927\u5e08\u7684\u6863\u4f4d",this.ani_fishchange.active=!0,this.descLabel.node.setPosition(0,90)}}},t.prototype.return=function(){switch(this.type){case 1:h.default.Instance.DestroyUI(_.default),h.default.Instance.GetUI(d.default);break;case 2:h.default.Instance.DestroyUI(p.default);break;case 3:h.default.Instance.DestroyUI(f.default)}cc.systemEvent.emit(y.DistributedEvent.backHome,y.PanelEnum.set),h.default.Instance.DestroyUI(d.default),this.close()},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){h.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueResurgencePre/BarbecueReturnPre",t.className="BarbecueReturnInterface",l([k(cc.Animation)],t.prototype,"ani_popup",void 0),l([k(cc.Node)],t.prototype,"btn_return",void 0),l([k(cc.Node)],t.prototype,"btn_close",void 0),l([k(cc.Label)],t.prototype,"descLabel",void 0),l([k(cc.Node)],t.prototype,"ani_fishchange",void 0),l([k(cc.Label)],t.prototype,"oldLabel",void 0),l([k(cc.Label)],t.prototype,"newLabel",void 0),n=l([T],t)}(u.default);i.default=S,cc._RF.pop(),cc._RF.pop()},{}],BarbecueStandInterface:[function(e,t,n){"use strict";cc._RF.push(t,"00604CnYmVMgriIF/lIdqnU","BarbecueStandInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"30425hKldJF16JOv8CLOOhy","BarbecueStandInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("BundleManger"),f=o("DataManager"),_=o("FunctionManager"),y=o("GameManger"),b=o("InfoManager"),v=o("TypeManager"),m=o("barbecue_plate_item"),g=o("barbecue_oven_item"),I=o("UIManager"),T=o("BarbecueOverInterface"),k=o("StoragerManager"),S=o("PoolManager"),w=o("SettingInterface"),O=o("BarbecueResurgenceInterface"),F=o("eff_kebabs_item"),B=o("BarbecuePropInterface"),x=o("eff_frozen_tiem"),P=o("eff_tinfoil_item"),C=o("eff_compound_item"),R=o("BarbecueBase"),N=o("barbecue_tray_item"),A=o("SoundManager"),D=o("BarbecueExplainInterface"),U=o("MainInterface"),M=o("GameInterface"),L=o("BarbecueFreePropInterface"),E=o("SdkManager"),G=o("GameGuideInterface"),j=o("btn_prop_item"),z=o("BarbecueDifficultyInterface"),K=o("BarbecueOvenInterface"),H=o("LevelPackInterface"),W=o("AutoManager"),V=o("moreClickUtil"),J=o("RoleSoundManager"),q=o("gameGuestItem"),X=o("SkinManager"),Y=cc._decorator,Z=Y.ccclass,Q=Y.property,$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.oven_item=null,t.tray_item=null,t.plate_item=null,t.special_order_item=null,t.eff_kebabs_item=null,t.eff_frozen_tiem=null,t.eff_tinfoil_item=null,t.eff_compound_item=null,t.eff_jinbi=null,t.eff_congrats=null,t.eff_smoke=null,t.bg_1=null,t.bg_2=null,t.spine_bg=null,t.btn_stop=null,t.label_score=null,t.label_time=null,t.ani_time=null,t.bar_score=null,t.label_lv=null,t.group_oven_plate=null,t.group_kebabs=null,t.icon_pan=null,t.node_item=null,t.group_eff=null,t.group_tips=null,t.group_guest=null,t.ani_group_order=null,t.bar_order=null,t.label_time2=null,t.layout_order=null,t.btn_video=null,t.ani_double_hit=null,t.label_double_hit=null,t.label_double_hit2=null,t.bar_double_hit=null,t.order_tips=null,t.icon_finger=null,t.ani_finger=null,t.label_finger=null,t.eff_huoyan=null,t.spine_tips=null,t.icon_bar=null,t.label_bar=null,t.label_speek=null,t.tips_prop=null,t.ani_kaishiyingye=null,t.ani_nandutisheng=null,t.ani_shijianbuzu=null,t.btn_begin=null,t.btn_down=null,t.btn_add=null,t.btn_sub=null,t.btn_next=null,t.btn_prop=[],t.btn_tips=null,t.pack_mask=null,t.moreClickUtil=null,t.noTimeGameNode=null,t.kebabs_move_speed=4e3,t.compound_pos=[cc.v2(-10,410),cc.v2(30,400),cc.v2(65,395)],t.useing_oven_tray=[],t.kebabs_max=10,t._isGameOver=!1,t.special_order_array=[],t.tray_correlation=[[9,6,3,0],[10,7,4,1],[11,8,5,2]],t._animTipData=[],t.vacate_tips_finish=!1,t.bottom=null,t.icon_3=null,t._isCanAutoChange=!0,t.compound_kebabs=[],t.speek_str=["\u60f3\u5403\u70e7\u70e4\u4e86","\u771f\u9999\u554a","\u8c22\u8c22\u8001\u677f","\u770b\u7740\u5c31\u597d\u5403","\u4e0b\u6b21\u8fd8\u6765"],t.guest_id_array=[1,2,3,4,5,6,7,9,10,11,12,15,16,17,18,19,20,21,22,23,24,25,26,27,29,30,31],t.n1=.15,t.n2=.3,t.kind1=.5,t.kind2=.3,t.oven_array=[],t.plate_array=[],t.tray_array=[],t.eff_kebabs_array=[],t.eff_frozen_array=[],t.eff_tinfoil_array=[],t.eff_flame_array=[],t.eff_compound_array=[],t.pos_jinbi=[cc.v2(-240,380),cc.v2(-120,450),cc.v2(-180,470),cc.v2(-290,350),cc.v2(-130,370)],t.eff_jinbi_array=[],t.eff_congrats_array=[],t.eff_smoke_array=[],t._guestCountID=0,t.guest_array=[],t._operateLists=[],t._aimEven=null,t._operateId=null,t._operateType=null,t._operateListIndex=0,t._isMisTakeOperate=!1,t._autoTime=1e6,t._curAutoTime=0,t._autoState=1,t._voiceLists={},t._compountGuestId=-1,t._waitMoveGuset=[],t._compoundCount=0,t._playVoiceCount=0,t._noOperateTime=0,t._compountOCount=0,t._frozenTime=0,t._frozenCount=0,t}return s(t,e),t.prototype.onUIStart=function(){var e=this;J.default.Instance.nowTime=0,y.default.Instance.inGame=!0,y.default.Instance.TsGame&&y.default.Instance.TsGame.node&&y.default.Instance.TsGame.node.isValid&&(y.default.Instance.TsGame.node.active=!1),b.default.Instance.isDaren&&this.moreClickUtil.init(function(){e._isCanAutoChange&&(e._isCanAutoChange=!1,e.scheduleOnce(function(){e._isCanAutoChange=!0},2),W.default.Instance.isAuto=!W.default.Instance.isAuto,console.error("AutoManager.Instance.isAuto",W.default.Instance.isAuto),W.default.Instance.isAuto&&e._beginAuto())}),this.random_value(3,[12,12,12],!0),this.node.on(cc.Node.EventType.TOUCH_START,function(){if(null==e.game_stop&&(e.GameStop(!1),e.compound_tips_time=5,e.reset_vacate_time(!0),e.resetOpenrateTime(),e.resetFrozenTime()),1==e.finger_tips_type){e.icon_finger.active=!1;for(var t=0;t<e._animTipData.length;t++){var n=e._animTipData[t];n&&n.ts&&n.ts.KebabShake(n.index,!1)}}A.default.Instance.PlaySound("g127_click")},this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){1!=e.finger_tips_type&&3!=e.finger_tips_type||(e.icon_finger.active=!1)}),this.node.on(cc.Node.EventType.TOUCH_END,function(){1!=e.finger_tips_type&&3!=e.finger_tips_type||(e.icon_finger.active=!1)}),this.btn_stop.on(cc.Node.EventType.TOUCH_END,this.open_setting,this),this.btn_video.on(cc.Node.EventType.TOUCH_END,this.video,this);for(var t=0;t<this.btn_prop.length;t++)this.btn_prop[t].node.on(cc.Node.EventType.TOUCH_END,this.use_prop.bind(this,this.btn_prop[t].prop_id,!1));this.btn_begin.on(cc.Node.EventType.TOUCH_END,this.Begin,this),this.btn_down.on(cc.Node.EventType.TOUCH_END,this.down,this),this.btn_add.on(cc.Node.EventType.TOUCH_END,this.change_lv.bind(this,1)),this.btn_sub.on(cc.Node.EventType.TOUCH_END,this.change_lv.bind(this,-1)),this.btn_tips.on(cc.Node.EventType.TOUCH_END,this.amendment,this),this.btn_next.on(cc.Node.EventType.TOUCH_END,this.next,this),this.spine_tips.setCompleteListener(this.animation_listener1.bind(this)),this.schedule(this.second,1),this.btn_stop.parent.y+=y.default.Instance.ScreenAdaptive-this.node.y,A.default.Instance.PlayLoop("bustling",!1,"bustling"),A.default.Instance.playmusic("g127_backgroundmusic");var n=LWGSDK.isAdWhiteList();console.log("\u7528\u6237\u767d\u540d\u5355===",n),1==n&&this.label_time.node.on(cc.Node.EventType.TOUCH_END,this.open_gm,this),this.btn_down.active=!1,this.btn_add.active=!1,this.btn_sub.active=!1,this.btn_tips.active=!1,this.btn_begin.active=!1,this.btn_next.active=!1,this.node.y-=.5*y.default.Instance.ScreenAdaptive,this.bg_1.y+=.5*y.default.Instance.ScreenAdaptive;var o=0;.5*y.default.Instance.ScreenAdaptive>=40&&(o=.5*y.default.Instance.ScreenAdaptive-40),o=o||0,this.bottom.y-=o,null==k.default.Instance.Record[v.RecordType.game_explain1]&&(E.default.Instance.GetReady("second_start"),p.default.Instance.LoadPrefab("GamePre/GamePre","Bundle2Pre").then(function(){E.default.Instance.GetReady("second_end")})),W.default.Instance.initManager()},t.prototype.animation_listener1=function(e){switch(e.animation.name){case"appear":this.spine_tips.setAnimation(0,"idle",!0)}},t.prototype.onDestroy=function(){y.default.Instance.inGame=!0;var e=k.default.Instance.musicVolume;A.default.Instance.setMusicVolume(e),y.default.Instance.ScenceArea==v.ScenceArea.doorway&&A.default.Instance.PlayLoop("bustling",!0,"bustling"),A.default.Instance.playmusic("BGM"),null==k.default.Instance.Record[v.RecordType.gudie_game]&&(y.default.Instance.GudieStep=200,I.default.Instance.OpenUI(G.default,I.UIOrder.Window_3));var t=I.default.Instance.GetUI(U.default);t&&1==_.default.Instance.JudgeFacilityBuy()&&(t.btn_facility.children[0].active=!0),I.default.Instance.GetUI(M.default)?y.default.Instance.TsGame&&y.default.Instance.TsGame.node&&y.default.Instance.TsGame.node.isValid&&(y.default.Instance.TsGame.node.active=!0):(I.default.Instance.OpenUI(U.default,I.UIOrder.Window_1),I.default.Instance.OpenUI(M.default,I.UIOrder.Interface_1),b.default.Instance.TsInitial.login.active=!0)},t.prototype.onInit=function(e){this.lv=e[0];for(var t=0;t<this.btn_prop.length;t++)this.btn_prop[t].draw();this.Begin()},t.prototype.onUpdate=function(e){if(J.default.Instance.updateVoiceTime(e),this.prop_cooling>=0&&(this.prop_cooling-=e),this.tray_cooling>=0&&(this.tray_cooling-=e),this.touch_pos)if(_.default.Instance.Distance(this.touch_pos,this.node_item.getPosition())>4e3*e){var t=_.default.Instance.Direction(this.touch_pos,this.node_item.getPosition());this.node_item.x-=4e3*t.x*e,this.node_item.y-=4e3*t.y*e}else this.node_item.setPosition(this.touch_pos),this.touch_pos=null;this.gm_time>0&&(this.gm_time-=e,this.gm_time<=0&&(this.gm_num=null)),W.default.Instance.isAuto&&(this._isMisTakeOperate&&(this._isMisTakeOperate=W.default.Instance.updateMisTime(e)),this._updateAutoTime(e))},t.prototype.open_gm=function(){null==this.gm_num?(this.gm_num=1,this.gm_time=1):this.gm_num++,this.gm_num<2||(this.gm_num=null,this.gm_time=null,this.btn_down.active=!this.btn_down.active,this.btn_add.active=!this.btn_add.active,this.btn_sub.active=!this.btn_sub.active,this.btn_tips.active=!this.btn_tips.active,this.btn_begin.active=!this.btn_begin.active,this.btn_next.active=!this.btn_next.active)},t.prototype.Begin=function(e){return void 0===e&&(e=!1),u(this,void 0,void 0,function(){var t,n,o,a,i,r,c,s,l,u,h=this;return d(this,function(d){switch(d.label){case 0:return y.default.Instance.isNoTimeGame&&(this.noTimeGameNode.active=!1,this.label_score.node.setPosition(0,5)),this._isGameOver=!1,this._voiceLists={},this._compoundCount=0,this._playVoiceCount=0,this._compountOCount=0,this._noOperateTime=0,this._frozenTime=0,this._frozenCount=0,this._compountGuestId=-1,this._waitMoveGuset=[],this.is_over=!1,(t=this.lv)>y.default.Instance.BarbecueMaxLv&&(t=y.default.Instance.BarbecueMaxLv-30+(t-y.default.Instance.BarbecueMaxLv)%30),console.log("\u5f53\u524d\u5173\u5361="+this.lv+"====\u5b9e\u9645\u5173\u5361"+t+"==============="),this.score=0,this.compound_num=0,this.game_stop=null,this.compound_tips_time=null,this.reset_vacate_time(!1),this.resetOpenrateTime(),this.resetFrozenTime(),this.special_order_execute=null,this.barbecue_lv_data=f.default.Instance.BarbecueLvConfig["lv_"+t],this.tray_plate={},this.useing_oven_tray=[],this.prop_cooling=-10,this.eff_smoke_time=5,this.guest_queue=[],this.guest_queue_ids=[],this.finger_tips_type=null,n=y.default.Instance.getRealLevel(this.lv),this.label_lv.string="\u7b2c"+n+"\u5173",this.label_score.string=""+this.score,this.bar_score.width=0,this.ani_group_order.node.active=!1,this.node_item.active=!1,this.ani_double_hit.node.active=!1,this.icon_pan.node.setPosition(500,400),this.icon_finger.active=!1,this.eff_huoyan.active=!1,this.spine_tips.node.active=!1,this.tips_prop.node.parent.active=!1,this.count_down=this.barbecue_lv_data.count_down,y.default.Instance.isLevel3Time30&&7==this.lv?this.count_down-=30:y.default.Instance.isLevel3Time60&&7==this.lv&&(this.count_down-=60),y.default.Instance.isNewConfigAB&&y.default.Instance.LevelABConfig.includes(t)?[4,p.default.Instance.LoadJson2("Bundle1Pre","JsonAB/lv_"+t)]:[3,2];case 1:return o=d.sent(),[3,6];case 2:return[8,10,12].includes(t)&&y.default.Instance.LvConfig?(console.log("1====","Json/lv_"+t+"_1"),[4,p.default.Instance.LoadJson2("Bundle1Pre","Json/lv_"+t+"_1")]):[3,4];case 3:return o=d.sent(),[3,6];case 4:return[4,p.default.Instance.LoadJson2("Bundle1Pre","Json/lv_"+t)];case 5:o=d.sent(),d.label=6;case 6:if(null==o?1==e?this.render_barbecue(JSON.parse(this.barbecue2_data),4):this.found_barbecue_data(t):(this.BarbecueLvData=o,console.log("\u5173\u5361\u8bfb\u8868\u6570\u636e========="+t,o),this.render_barbecue(o,2)),this.count_down>60?this.label_time.node.color=cc.Color.RED.fromHEX("#FEFFE1"):this.label_time.node.color=cc.Color.RED,this.label_time.string=""+_.default.Instance.TimecFormat(this.count_down),this.show_speek(!1),this.label_speek.node.parent.active=!1,this.ani_kaishiyingye.node.active=!1,this.ani_nandutisheng.node.active=!1,this.ani_shijianbuzu.node.active=!1,this.pack_mask.active=!1,W.default.Instance.isAuto||1==this.open_explain()&&this.OpeningTips(),this.init_prop(),E.default.Instance.reportEnterStage(this.lv),a=null,y.default.Instance.isYuTinAB&&(J.default.Instance.isFinishFisrt||(i=J.default.Instance.getIpConfigById(y.default.Instance.province))&&i.role&&this.guest_id_array.includes(i.role)&&(a=i.role)),this.guest_move(!0,!0,a),this.guest_move(!0),this.guest_move(!0),1==y.default.Instance.NightControl?(p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/bg_2_night",this.bg_2),this.spine_bg.setAnimation(0,"night",!0)):(p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/bg_2",this.bg_2),this.spine_bg.setAnimation(0,"day",!0)),r=X.default.Instance.getBgUrl(k.default.Instance.curBg),c=X.default.Instance.getTableUrl(k.default.Instance.curTable),r&&p.default.Instance.LoadSpriteFrame(r.bundle,r.url,this.bg_1),c&&p.default.Instance.LoadSpriteFrame(c.bundle,c.url,this.icon_3),s=3,y.default.Instance.isJump36AB&&(s=7),this.lv==s&&null==k.default.Instance.Record[v.RecordType.newcomer_package1]&&(k.default.Instance.Record[v.RecordType.newcomer_package1]=!1,W.default.Instance.isAuto||((l=I.default.Instance.GetUI(U.default))&&l.judge_newcomer(),y.default.Instance.ShowLevelPackInterface++,I.default.Instance.OpenUI(H.default,I.UIOrder.Window_3,3,this)),k.default.Instance.AutoSyncData()),1==e&&!W.default.Instance.isAuto)for(u=0;u<o.oven_data.length;u++)if(o.oven_data[u].condition==v.OvenCondition.video){cc.tween(this).delay(2).call(function(){y.default.Instance.ShowLevelPackInterface++,I.default.Instance.OpenUI(H.default,I.UIOrder.Window_3,1,h)}).start();break}return W.default.Instance.isAuto&&(this.game_stop=!1,this._beginAuto()),I.default.Instance.DestroyUI(K.default),[2]}})})},t.prototype.OpeningTips=function(){var e=this;this.lv%5==0?I.default.Instance.OpenUI(z.default,I.UIOrder.Window_2,this,function(){e.ani_nandutisheng.node.active=!0,e.ani_nandutisheng.play(),e.eff_huoyan.active=!0,e.spine_tips.node.active=!0,e.spine_tips.setAnimation(0,"appear",!1)}):(this.ani_kaishiyingye.node.active=!0,this.ani_kaishiyingye.play())},t.prototype.HelpPack=function(){for(var e,t=this,n=0;n<this.useing_oven_tray.length;n++){var o=this.useing_oven_tray[n];if(null!=o&&0!=o.node.active&&o.OvenData.condition==v.OvenCondition.video){e=o;break}}e&&(this.pack_mask.setPosition(e.node.getPosition()),this.pack_mask.children[0].x=-this.pack_mask.x,this.pack_mask.children[0].y=-this.pack_mask.y,this.pack_mask.opacity=0,this.pack_mask.active=!0,cc.tween(this.pack_mask).to(.5,{opacity:255}).delay(2).to(.5,{opacity:0}).call(function(){t.pack_mask.active=!1}).start(),cc.tween(this).delay(1).call(function(){e.Unlock()}).start())},t.prototype.init_prop=function(){for(var e=0;e<this.btn_prop.length;e++)this.btn_prop[e].init(this.lv)},t.prototype.use_prop=function(e,t){var n=this;if(this.resetOpenrateTime(),this.resetFrozenTime(),0==t&&(this.prop_cooling>0||this.tray_cooling>0))return b.default.Instance.TsInitial.ShowTips("\u8bf7\u6162\u70b9");var o=this.btn_prop[e-1];if(1!=o.label_unlock.node.active||0!=t){var a,i=k.default.Instance.BarbecueProp["prop_"+e];if((null==i||i<=0)&&0==t&&!W.default.Instance.isAuto)return this.GameStop(!0),void I.default.Instance.OpenUI(B.default,I.UIOrder.Window_2,e,!1,this,function(){n.GameStop(!1)});switch(this.select_data&&(this.select_data.item.node_kebabs[this.select_data.index].opacity=255,this.node_item.active=!1,this.select_data=null),this.icon_finger.active=!1,this.prop_cooling=2,e){case 1:if(!(a=this.prop_compound())&&W.default.Instance.isAuto)return console.error("\u9053\u5177\u4f7f\u7528\u4e0d\u6210\u529f\uff1f\uff1f\uff1f"),void this.Begin();cc.tween(this).delay(.35).call(function(){0==n.game_stop&&(n.prop_compound(),n.prop_cooling=1)}).start();break;case 2:a=!0,this.prop_reset2();break;case 3:a=this.prop_torch()}1==a&&0==t&&(this.reset_compound_tips(),k.default.Instance.BarbecueProp["prop_"+e]&&k.default.Instance.BarbecueProp["prop_"+e]--,o.Refresh(),k.default.Instance.AutoSyncData()),this.tips_prop.node.parent.active=!1}else b.default.Instance.TsInitial.ShowTips("\u9053\u5177\u672a\u89e3\u9501")},t.prototype.prop_compound=function(){1==y.default.Instance.GudieStep&&(y.default.Instance.GudieStep=30);var e=this.get_prop1_compound();if(null==e)return b.default.Instance.TsInitial.ShowTips("\u6ca1\u6709\u53ef\u4ee5\u5408\u6210\u7684\u70e4\u4e32"),!1;for(var t=0;t<e.length;t++){var n=e[t];null!=n.ts&&null!=n.ts.node_frozen&&null!=n.ts.node_frozen[n.index]&&(n.ts.node_frozen[n.index].node.active=!1,n.ts.node_frozen[n.index]=null)}var o=e[0].ts.KebabsData[e[0].index].id;return this.monitor_compound(o,e,!0),this.amendment(),!0},t.prototype.prop_reset2=function(e){var t=this;void 0===e&&(e=!0),this.prop_cooling=1;for(var n=[],o=0,a=0;a<this.useing_oven_tray.length;a++)if(null!=(_=this.useing_oven_tray[a])&&0!=_.node.active)for(var i=0;i<_.KebabsData.length;i++)if((s=_.KebabsData[i]).id>0)n.push(s.id);else switch(_.OvenData.condition){case v.OvenCondition.cover:case v.OvenCondition.video:break;case v.OvenCondition.one_grid:1==i&&o++;break;default:o++}for(i=0;i<this.plate_array.length;i++){var r=this.plate_array[i];if(0!=r.node.active&&0!=r.Useing)for(var c=0;c<r.KebabsData.length;c++){var s;(s=r.KebabsData[c]).id>0&&n.push(s.id)}}for(var l in this.tray_plate){var u=this.tray_plate[l];for(a=0;a<u.length;a++)u[a].id>0&&n.push(u[a].id)}if(0==n.length)return!1;if(console.log("\u70e4\u7089\u7a7a\u4f4d====",o),o<3){var d=n[Math.floor(Math.random()*n.length)];for(a=0;a<3;a++){var h=n.indexOf(d);h>=0?n.splice(h,1):console.error("\u5220\u9664\u70e4\u4e32\u5931\u8d25------\u70e4\u4e32\u6b8b\u7f3a")}var p=void 0;for(a=4;a<this.useing_oven_tray.length;a++)if(null!=(_=this.useing_oven_tray[a])&&0!=_.node.active){p=_;break}this.compound_eff(d,[{ts:p,key:null,index:0},{ts:p,key:null,index:1},{ts:p,key:null,index:2}],!1,!0)}n.sort(function(){return Math.random()-.5});var f=0;if(1==e){for(a=0;a<this.useing_oven_tray.length;a++){var _;null!=(_=this.useing_oven_tray[a])&&0!=_.node.active&&_.ani_kebabs.play("ani_daluan1")}f=.5}cc.tween(this).delay(f).call(function(){for(var e in t.tray_plate)for(var a=t.tray_plate[e],i=[],r=0;r<a.length;r++)if(a[r].id>0){var c=0;if(2==i.length&&i[0]==i[1])for(;n[c]==i[0];)if(null==n[++c]){c=0;break}i.push(n[c]),a[r].id=n[c],n.splice(c,1)}for(var s=0;s<t.plate_array.length;s++){var l=t.plate_array[s];if(0!=l.node.active&&0!=l.Useing){i=[];for(var u=0;u<l.KebabsData.length;u++)if((p=l.KebabsData[u]).id>0){if(c=0,2==i.length&&i[0]==i[1])for(;n[c]==i[0];)if(null==n[++c]){c=0;break}i.push(n[c]),l.ChangeKebabs(u,n[c],p.condition),n.splice(c,1)}}}var d=0;o<3&&(d=3);var h=!1;for(r=0;r<t.useing_oven_tray.length;r++)if(null!=(f=t.useing_oven_tray[r])&&0!=f.node.active)for(i=[],s=0;s<f.KebabsData.length;s++){var p;if((p=f.KebabsData[s]).id>0)if(n.length>0){if(c=0,2==i.length&&i[0]==i[1])for(;n[c]==i[0];)if(null==n[++c]){c=0,h=!0,console.error("\u70e4\u7089"+f.Index+"\u7684\u4e09\u4e2a\u70e4\u4e32\u76f8\u540c====================");break}2==i.length&&d>0?(f.ChangeKebabs(s,0,v.KebabCondition.normal),d--):(i.push(n[c]),f.ChangeKebabs(s,n[c],p.condition),n.splice(c,1))}else f.ChangeKebabs(s,0,v.KebabCondition.normal),console.error("\u70e4\u7089"+f.Index+",\u5e8f\u53f7"+s+"\u70e4\u4e32\u5e93\u6ca1\u70e4\u4e32\u4e86")}if(1==h)t.prop_reset2(!1);else{for(r=0;r<t.useing_oven_tray.length;r++){var f;null!=(f=t.useing_oven_tray[r])&&0!=f.node.active&&f.ani_kebabs.play("ani_daluan2")}t.amendment()}}).start()},t.prototype.prop_torch=function(){var e=this;21==y.default.Instance.GudieStep&&(y.default.Instance.GudieStep=30);for(var t=!1,n=function(n){var a=o.useing_oven_tray[n];if(null==a||0==a.node.active)return"continue";for(var i=!1,r=function(e){if(a.KebabsData[e].condition==v.KebabCondition.frozen){var n=e;o.PlayEffFlame(a.Index,2,n),o.scheduleOnce(function(){null==a.node_frozen[n]?console.error("\u62a5\u9519\uff0c\u878d\u5316\u9053\u5177\u51b0\u51bb\u8282\u70b9"):(a.node_frozen[n].Thaw(),a.node_frozen[n]=null,a.KebabsData[n].condition=v.KebabCondition.normal)},.5),i=!0,t=!0}},c=0;c<a.KebabsData.length;c++)r(c);1==i&&o.scheduleOnce(function(){e.JudgeOvenKebabs(a,!1,"\u9053\u5177-\u878d\u5316\u51b0\u51bb\u70e4\u4e32")},.6)},o=this,a=0;a<this.useing_oven_tray.length;a++)n(a);return 0==t?b.default.Instance.TsInitial.ShowTips("\u573a\u4e0a\u6ca1\u6709\u53ef\u4ee5\u878d\u5316\u7684\u51b0\u51bb\u70e4\u4e32"):(A.default.Instance.PlaySound("g127_torch"),cc.tween(this).delay(.5).call(function(){A.default.Instance.PlaySound("g127_thaw")}).start()),t},t.prototype.fill_oven=function(e){var t=this.get_plate(e.Index);if(null!=t){for(var n=this.kebabs_max-3*this.compound_num,o=0;o<t.KebabsData.length;o++){var a=t.KebabsData[o];0!=a.id&&(n<10?e.ChangeKebabs(o,a.id,v.KebabCondition.normal):e.ChangeKebabs(o,a.id,a.condition))}switch(console.log("\u70e4\u7089"+e.Index+"\u586b\u5145\u70e4\u4e32"),e.ani_kebabs.play(),cc.tween(this).delay(.3).call(function(){A.default.Instance.PlaySound("g127_plating")}).start(),this.recycle_plate(t,"\u70e4\u76d8\u586b\u5145\u70e4\u7089"),this.reset_vacate_time(!0),e.OvenData.condition){case v.OvenCondition.hot:case v.OvenCondition.normal:var i=e.node.getPosition();i.y+=90,this.PlayEffSmoke(i)}}},t.prototype.fill_tray=function(e,t){for(var n,o,a,i,r=0;r<this.tray_correlation.length;r++)if((o=this.tray_correlation[r].indexOf(e.Index))>=0){n=this.tray_correlation[r],a="tray_plate_"+r,i="tray_plate_"+r;break}if(null==this.tray_plate[i]||0==this.tray_plate[a].length)for(var c in i=null,this.tray_plate)if(c!=i&&this.tray_plate[c].length>0){i=c;break}for(e.Hide(t),r=o+1;r<n.length;r++){var s=this.useing_oven_tray[n[r]];if(null==s)break;s.Move(n[r-1],"\u586b\u5145\u6258\u76d8-\u65e7\u6258\u76d8\u4e0b\u843d"),this.useing_oven_tray[n[r-1]]=s,this.useing_oven_tray[n[r]]=null}if(null!=i){var l=void 0;switch(a){case"tray_plate_0":l=cc.v2(-225,480);break;case"tray_plate_1":l=cc.v2(0,480);break;case"tray_plate_2":l=cc.v2(225,480)}var u=this.tray_plate[i].splice(0,3);if(this.kebabs_max-3*this.compound_num<10)for(r=0;r<u.length;r++)u[r].condition=v.KebabCondition.normal;this.found_tray(n[n.length-1],u,l,"\u586b\u5145\u6258\u76d8-\u751f\u6210\u65b0\u6258\u76d8")}this.reset_vacate_time(!0)},t.prototype.recycle_plate=function(e){if(0!=e.Useing){e.Useing=!1,e.KebabsData[0].id==e.KebabsData[1].id&&e.KebabsData[1].id==e.KebabsData[2].id&&0==e.KebabsData[2].id||(e.node_kebabs[0].active=!1,e.node_kebabs[1].active=!1,e.node_kebabs[2].active=!1),cc.tween(e.node).to(.5,{opacity:0}).call(function(){e.node.active=!1,e.node.opacity=255}).start();var t=this.get_plate(e.Index);t&&t.ShowKebabs(!0)}},t.prototype.operate_succeed=function(e,t,n){var o=this;if(101==y.default.Instance.GudieStep&&1!=e.Index)return y.default.Instance.GudieStep=100,void this.operate_fail();if(W.default.Instance.isAuto&&(!this.select_data||!this.select_data.item))return this._autoState=3,void console.error("???\u8fd9\u91cc\u600e\u4e48\u6ca1\u6709\u9009\u62e9\u7684");if(this.select_data){var a=this.select_data,i=a.item.KebabsData[a.index].id;a.item.ChangeKebabs(a.index,0,v.KebabCondition.normal),e.ChangeKebabs(t,i,v.KebabCondition.normal,!1),console.log("\u70e4\u4e32"+i+"\u79fb\u52a8\u6210\u529f\uff1a\u4ece\u7089\u5b50"+a.item.Index+"\u4f4d\u7f6e"+a.index+"\u79fb\u52a8\u5230\u7089\u5b50"+e.Index+"\u4f4d\u7f6e"+t+"\uff0c\u662f\u62d6\u62fd"+n);var r=0,c=0;if(e.Index!=a.item.Index?e.Index>a.item.Index?(r=this.JudgeOvenKebabs(a.item,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u51fa\u53bb"),c=this.JudgeOvenKebabs(e,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u8fc7\u6765")):(c=this.JudgeOvenKebabs(e,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u8fc7\u6765"),r=this.JudgeOvenKebabs(a.item,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u51fa\u53bb")):r=this.JudgeOvenKebabs(a.item,!1,"\u73a9\u5bb6\u64cd\u4f5c\u70e4\u4e32\u79fb\u52a8\u51fa\u53bb"),W.default.Instance.isAuto){this._autoState=3;var s=this._updateAutoOperate(c,r);s?100==s&&(this._aimEven=null,this._operateLists=[],this._operateListIndex=0):this._autoState=0}this.amendment(),this.next_pos=null,this.select_data=null,e.eff_select.active=!1,a.item.eff_select.active=!1,this.node_item.getComponent(cc.Sprite).spriteFrame=null,this.node_item.active=!1;var l,u=e.node.convertToWorldSpaceAR(e.node_kebabs[t].getPosition()),d=this.group_eff.convertToNodeSpaceAR(u),h=this.get_eff_kebab();if(0==n){var p=a.item.node.convertToWorldSpaceAR(a.item.node_kebabs[a.index].getPosition());l=this.group_eff.convertToNodeSpaceAR(p)}else l=this.node_item.getPosition();var f=h.Init(i,l,d,this.kebabs_move_speed);this.scheduleOnce(function(){e.RefreshKebabs(t)},f),101==y.default.Instance.GudieStep&&(y.default.Instance.GudieStep=102),A.default.Instance.PlaySound("g127_drop"),cc.Tween.stopAllByTag(10),cc.tween(this).tag(10).delay(5).call(function(){o.judge_prop_tips("\u6210\u529f\u79fb\u52a8\u70e4\u4e32")}).start()}},t.prototype.operate_fail=function(){if(null!=this.next_pos&&(this.next_pos.ts.node_kebabs[this.next_pos.index].active=!1,console.error("\u70e4\u4e32\u79fb\u52a8\u5931\u8d25\uff1a\u610f\u5916\u51fa\u73b0\u9884\u5224\u4f4d\u7f6e\u70e4\u7089"+this.next_pos.ts.Index+"\u4f4d\u7f6e"+this.next_pos.index+"\uff0c\u9690\u85cf"),this.next_pos=null),null!=this.select_data){var e=this.select_data;this.select_data=null;var t=this.node_item.getPosition(),n=e.item.node.convertToWorldSpaceAR(e.item.node_kebabs[e.index].getPosition()),o=this.group_eff.convertToNodeSpaceAR(n),a=this.get_eff_kebab().Init(e.item.KebabsData[e.index].id,t,o,this.kebabs_move_speed);e.item.eff_select.active=!1,this.node_item.getComponent(cc.Sprite).spriteFrame=null,this.node_item.active=!1,this.scheduleOnce(function(){e.item.node_kebabs[e.index].opacity=255,e.item.node_kebabs[e.index].active=!0},a),console.log("\u70e4\u4e32\u79fb\u52a8\u5931\u8d25\uff1a\u539f\u6765\u70e4\u7089"+e.item.Index+"\u4f4d\u7f6e"+e.index+"\u6062\u590d\uff0c\u52a8\u753b\u8017\u65f6"+a),101==y.default.Instance.GudieStep&&(y.default.Instance.GudieStep=100)}},t.prototype.compound_eff=function(e,t,n,o){var a=this;if(0==o&&t[0].ts.OvenData.condition==v.OvenCondition.tray);else{if(this.compound_kebabs.length>0){for(var i=0;i<this.compound_kebabs.length;i++)this.compound_kebabs[i].node.active=!1;this.compound_kebabs=[]}var r=0,c=void 0;if(null!=t[1].ts){var s=t[1].ts.node.convertToWorldSpaceAR(t[1].ts.node_kebabs[t[1].index].getPosition());c=this.group_eff.convertToNodeSpaceAR(s)}else o=!0;for(i=0;i<t.length;i++){var l=void 0;if(t[i].ts){var u=t[i].ts.node.convertToWorldSpaceAR(t[i].ts.node_kebabs[t[i].index].getPosition());l=this.group_eff.convertToNodeSpaceAR(u)}else l=cc.v2(0,800);var d=this.get_eff_kebab(),h=d.Init2(e,l,c,this.compound_pos[i],2e3,o);this.compound_kebabs.push(d),r<h&&(r=h)}y.default.Instance.isYuTinAB||null==this.special_order_execute&&this.guest_move(!1),0==n&&(this.icon_pan.play("ani_icon_pan_in"),cc.Tween.stopAllByTag(11),cc.tween(this).tag(11).delay(r+.5).call(function(){cc.tween(a.icon_pan.node).to(.4,{opacity:0}).call(function(){a.icon_pan.node.x=600,a.icon_pan.node.opacity=255}).start();for(var e=0;e<a.compound_kebabs.length;e++)a.compound_kebabs[e].Hide3();a.compound_kebabs=[]}).start())}var p=this.double_hit(e);if(0==o){S.default.Instance.Label3Effect(p,t[0].ts.node.getPosition(),this.group_eff);var f=t[0].ts.node.getPosition();this.PlayEffCompound(f);var _=this.double_hit_num;for(0==_&&(_=1),_>3&&(_=3),i=0;i<_;i++)cc.tween(this).delay(.3*i).call(function(){a.PlayEffCongrats(f)}).start()}else S.default.Instance.Label3Effect(p,this.btn_prop[0].node.getPosition(),this.group_eff);if(y.default.Instance.isYuTinAB){if(!J.default.Instance.isFinishFisrt){J.default.Instance.isFinishFisrt=!0;var b=this.bar_double_hit.width/170;this.checkCompoundPlaySound(this.guest_queue_ids,b,null)}this.guest_move(!1)}},t.prototype.double_hit=function(e){var t=this;if(0==this.ani_double_hit.node.active)this._compoundCount=0,this._playVoiceCount=0,this.double_hit_num=0,this.ani_double_hit.node.opacity=0;else if(this.double_hit_num++,this.ani_double_hit.node.opacity=255,y.default.Instance.isYuTinAB){var n=!1;if(this._compoundCount++,-1==this._compountGuestId&&(this._playVoiceCount?(this._compoundCount-4)%3==0&&(n=!0):this._compoundCount>=4&&(n=!0)),n){var o=this.bar_double_hit.width/170;this.checkCompoundPlaySound([].concat(this.guest_queue_ids),o,e)}}A.default.Instance.PlaySound("combo_"+Math.min(this.double_hit_num+1,13)),this.bar_double_hit.width=170,this.label_double_hit.string="x"+this.double_hit_num,this.label_double_hit2.string="x"+this.double_hit_num,this.ani_double_hit.node.active=!0,cc.Tween.stopAllByTarget(this.bar_double_hit),cc.tween(this.bar_double_hit).to(Math.max(10-.2*this.double_hit_num,1),{width:0}).call(function(){t.ani_double_hit.node.active=!1}).start();var a=60+20*this.double_hit_num;this.score+=a,this.label_score.string=""+this.score;for(var i=[80,80,70],r=[],c=this.barbecue_lv_data.star_rating[this.barbecue_lv_data.star_rating.length-1],s=0;s<this.barbecue_lv_data.star_rating.length;s++){var l=this.barbecue_lv_data.star_rating[s];0==s?r.push(l):r.push(l-this.barbecue_lv_data.star_rating[s-1])}if(this.score>=c)this.bar_score.width=230;else{var u=0;for(s=0;s<this.barbecue_lv_data.star_rating.length;s++){if(l=this.barbecue_lv_data.star_rating[s],!(this.score>l)){var d=i[s]/r[s],h=0;s>0&&(h=this.barbecue_lv_data.star_rating[s-1]),u+=d*(this.score-h);break}u+=i[s]}this.bar_score.width=u}0==this.double_hit_num||this.ani_double_hit.play();var p=this.double_hit_num>5?5:this.double_hit_num;return cc.tween(this).delay(.2).call(function(){if(t.double_hit_num>0)for(var e=0;e<p;e++)t.PlayEffJinbi(e)}).start(),a},t.prototype.draw_special_order=function(){var e=this;this.special_order_time=this.special_order_execute.time,this.label_time2.string=""+_.default.Instance.TimecFormat(this.special_order_execute.time),this.bar_order.fillRange=1,this.special_order_execute.time>40?p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/bar_5",this.bar_order.node):p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/bar_6",this.bar_order.node);for(var t=0;t<this.special_order_execute.kebab_data.length;t++){var n=this.special_order_array[t];null==n&&((n=cc.instantiate(this.special_order_item)).setParent(this.layout_order),this.special_order_array[t]=n),1==this.special_order_execute.hot[t]?p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_17",n):p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_bg7",n),this.special_order_execute.kebab_data[t]<0?n.children[1].active=!0:n.children[1].active=!1,n.children[2].opacity=0,n.active=!0,p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+Math.abs(this.special_order_execute.kebab_data[t]),n.children[0])}if(this.special_order_array.length>this.special_order_execute.kebab_data.length)for(t=this.special_order_execute.kebab_data.length;t<this.special_order_array.length;t++)this.special_order_array[t].active=!1;this.ani_group_order.node.active=!0,this.order_tips.play("ani_order_tips_in"),cc.tween(this).delay(3).call(function(){e.order_tips.play("ani_order_tips_out")}).start(),A.default.Instance.PlaySound("g127_order")},t.prototype.video=function(){var e=this;E.default.Instance.ShareOrVideo(E.ShareLoc.skip_order,function(){e.special_order_execute=null,e.ani_group_order.node.active=!1,e.GameDelay()})},t.prototype.reset_compound_tips=function(){if(this.compound_tips_time=5,null!=this.compound_tips_data){for(var e=0;e<this.compound_tips_data.length;e++){var t=this.compound_tips_data[e];t.ts.KebabShake(t.index,!1)}this.compound_tips_data=null}},t.prototype.broken_frozen=function(){for(var e=0;e<this.useing_oven_tray.length;e++){var t=this.useing_oven_tray[e];null!=t&&0!=t.node.active&&t.Brokenfrozen()}},t.prototype.guest_move=function(e,t,n){var o,a=this;switch(void 0===t&&(t=!0),void 0===n&&(n=null),e){case!0:if(this.kebabs_max/3-this.compound_num<3)return;(o=this.get_guest()).active=!0,o.setPosition(500,300);var i=Math.floor(Math.random()*this.guest_id_array.length),r=this.guest_id_array[i];if(n)r=n;else if(y.default.Instance.isYuTinAB){for(var c=0,s=0,l=0;l<this.guest_queue_ids.length;l++){var u=this.guest_queue_ids[l];J.default.Instance.womanIds.includes(u)&&s++,J.default.Instance.manIds.includes(u)&&c++}s<=0?(i=Math.floor(Math.random()*J.default.Instance.womanIds.length),r=J.default.Instance.womanIds[i]):c<=0&&(i=Math.floor(Math.random()*J.default.Instance.manIds.length),r=J.default.Instance.manIds[i])}p.default.Instance.LoadSkeletonData("guest_spine","guest_"+r,o,"standby_1",!0),this.guest_queue.push(o),this.guest_queue_ids.push(r),o.guestId=r;var d=this.guest_queue.length;if(o.zIndex=100-120*(d-1),t)for(l=0;l<this.guest_queue.length;l++)cc.tween(this.guest_queue[l]).to(.4,{x:120*l}).start(),this.guest_queue[l].zIndex=100-120*l;break;default:var h=(o=this.guest_queue[0]).getComponent(q.default);if(h.GuestCountId,-1!=this._compountGuestId);else{if(y.default.Instance.isYuTinAB){var f=o.getComponent(q.default);f?f.IsCanMove&&f.leave():cc.tween(o).to(.6*3,{x:-500}).call(function(){o.active=!1}).start()}else h.leave();for(this.guest_queue.splice(0,1),this.guest_queue_ids.shift(),l=0;l<this.guest_queue.length;l++)cc.tween(this.guest_queue[l]).to(.4,{x:120*l}).start(),this.guest_queue[l].zIndex=100-120*l;this.guest_move(!0),this.show_speek(!1),cc.tween(this).delay(.5).call(function(){null==a.special_order_execute&&a.show_speek(!0)}).start()}}},t.prototype.show_speek=function(e){var t=this;if(!y.default.Instance.isYuTinAB){switch(e){case!0:var n=Math.floor(Math.random()*this.speek_str.length);this.label_speek.string=this.speek_str[n],cc.tween(this).tag(12).delay(2).call(function(){t.label_speek.node.parent.active=!1}).start();break;default:cc.Tween.stopAllByTag(12)}this.label_speek.node.parent.active=e}},t.prototype._showVoiceSpeek=function(e,t){var n=this;if(t&&t.isValid){cc.Tween.stopAllByTarget(this.label_speek.node);var o=J.default.Instance.getWordsById(e);if(o&&o.words){var a=t.posIndex;a=a||0;var i=[{x:210,scaleX:1},{x:-90,scaleX:-1},{x:12,scaleX:-1}];this.label_speek.node.parent.active=!0,this.label_speek.string=o.words;var r=i[a]?i[a].x:0,c=i[a]?i[a].scaleX:1;this.label_speek.node.parent.setPosition(r,460),this.label_speek.node.parent.setScale(c,1),this.label_speek.node.setScale(c,1),cc.tween(this.label_speek.node).delay(J.default.Instance.talkTime).call(function(){n.label_speek.node.parent.active=!1}).start()}}else console.error("\u5df2\u7ecf\u4e0d\u53ef\u7528")},t.prototype.reset_vacate_time=function(e){cc.Tween.stopAllByTarget(this.ani_finger.node.parent),0==e||this.vacate_tips_finish?this.vacate_tips_time=-1:this.lv<10?this.vacate_tips_time=8:this.vacate_tips_time=15},t.prototype.TipsVideoOven=function(){if(!W.default.Instance.isAuto){console.log("=============\u63d0\u793a\u89c6\u9891\u70e4\u7089");for(var e=0;e<this.useing_oven_tray.length;e++){var t=this.useing_oven_tray[e];if(null!=t&&0!=t.node.active&&t.OvenData.condition==v.OvenCondition.video){console.log("=============\u63d0\u793a\u89c6\u9891\u70e4\u7089222",t.Index),this.icon_finger.setPosition(t.node.getPosition()),this.label_finger.string="\u65e0\u6cd5\u6d88\u9664\u5566\uff0c\u89e3\u9501\u65b0\u70e4\n\u7089\u8bd5\u8bd5\u5427",this.icon_finger.active=!0,this.ani_finger.node.parent.setPosition(0,0),this.ani_finger.play("ani_finger_zhiyin2"),this.label_finger.node.parent.setPosition(-1*t.node.x,-160),this.finger_tips_type=2;break}}}},t.prototype.second=function(){if(1!=this.game_stop&&null!=this.game_stop){var e=this.count_down;if(y.default.Instance.isNoTimeGame||this.count_down--,this.count_down<0?(this.GameStop(!0),I.default.Instance.OpenUI(O.default,I.UIOrder.Window_2,this,2)):this.label_time.string=""+_.default.Instance.TimecFormat(this.count_down),40==this.count_down&&(this.ani_shijianbuzu.node.active=!0,this.ani_shijianbuzu.play()),60==this.count_down&&(this.label_time.node.color=cc.Color.RED),this.count_down<=30&&this.ani_time.play(),this.special_order_execute&&(this.special_order_execute.time--,this.special_order_execute.time<0?(this.GameStop(!0),I.default.Instance.OpenUI(O.default,I.UIOrder.Window_2,this,1)):(this.label_time2.string=""+_.default.Instance.TimecFormat(this.special_order_execute.time),this.bar_order.fillRange=this.special_order_execute.time/this.special_order_time,40==this.special_order_execute.time&&(this.ani_shijianbuzu.node.active=!0,this.ani_shijianbuzu.play(),p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/bar_6",this.bar_order.node)))),this.compound_tips_time>0&&(this.compound_tips_time--,this.compound_tips_time<=0&&(this.compound_tips_data=this.get_oven_compound(),null!=this.compound_tips_data)))for(var t=0;t<this.compound_tips_data.length;t++){var n=this.compound_tips_data[t];n.ts.KebabShake(n.index,!0)}if(this.vacate_tips_time>0&&(this.vacate_tips_time--,this.vacate_tips_time<=0&&this.judge_oven_vacancy()),this.eff_smoke_time>0&&(this.eff_smoke_time--,this.eff_smoke_time<=0)){this.eff_smoke_time=5;var o=[];for(t=0;t<this.useing_oven_tray.length;t++){var a=this.useing_oven_tray[t];if(null!=a&&0!=a.node.active)switch(a.OvenData.condition){case v.OvenCondition.hot:case v.OvenCondition.normal:o.push(a)}}if(o.length>0){var i=o[Math.floor(Math.random()*o.length)].node.getPosition();i.y+=90,this.PlayEffSmoke(i)}}y.default.Instance.isYuTinAB&&(this.checkOperateSound(1),this.checkFrozenSound(1),this.checkTimeSound(this.count_down,e))}},t.prototype.monitor_compound=function(e,t,n){for(var o="\u51c6\u5907\u5408\u6210\u70e4\u4e32"+e+"\u6570\u636e\uff1a",a=0;a<t.length;a++)(i=t[a]).ts?1==i.ts.Type?o+="\u70e4\u7089"+i.ts.Index+"\u4f4d\u7f6e"+i.index+"\u70e4\u4e32"+i.ts.KebabsData[i.index].id+"\uff1b":o+="\u70e4\u76d8"+i.ts.Index+"\u4f4d\u7f6e"+i.index+"\u70e4\u4e32"+i.ts.KebabsData[i.index].id+"\uff1b":o+="\u865a\u62df\u6258\u76d8"+i.key+"\u4f4d\u7f6e"+i.index+"\u70e4\u4e32"+this.tray_plate[i.key][i.index].id+"\uff1b";for(console.log(o),a=0;a<t.length;a++){var i;(i=t[a]).ts?(i.ts.KebabsData[i.index].condition==v.KebabCondition.tinfoil&&(i.ts.node_tinfoil[i.index].node.active=!1,i.ts.node_tinfoil[i.index]=null),i.ts.ChangeKebabs(i.index,0,v.KebabCondition.normal)):i.key&&(this.tray_plate[i.key][i.index].id=0,this.tray_plate[i.key][i.index].condition=v.KebabCondition.normal)}if(this.broken_frozen(),console.log("\u5408\u6210\u70e4\u4e32"+e+",\u6709\u4f7f\u7528\u6253\u5305\u9053\u5177"+n),0==n){var r=t[0].ts;this.JudgeOvenKebabs(r,!0,"\u5408\u6210\u70e4\u4e32"+e+"-\u672a\u4f7f\u7528\u6253\u5305\u9053\u5177")}else{var c=[];for(a=0;a<t.length;a++)if(t[a].ts&&2==t[a].ts.Type){var s=t[a].ts,l="plate_"+s.Index+"_"+s.StackNum;if(!(c.indexOf(l)<0))continue;c.push(l),s.KebabsData[0].id==s.KebabsData[1].id&&s.KebabsData[1].id==s.KebabsData[2].id&&0==s.KebabsData[2].id&&this.recycle_plate(s,"\u5408\u6210\u70e4\u4e32"+e+"-\u4f7f\u7528\u6253\u5305\u9053\u5177-\u70e4\u76d8\u65e0\u70e4\u4e32")}for(a=0;a<t.length;a++)if(t[a].key){if(l="tray_"+t[a].key,!(c.indexOf(l)<0))continue;c.push(l);for(var u=t[a].key,d=this.tray_plate[u].length-1;d>=0;d-=3)0==this.tray_plate[u][d].id&&0==this.tray_plate[u][d-1].id&&0==this.tray_plate[u][d-2].id&&(console.log("\u6e05\u7406\u6389\u865a\u62df\u6258\u76d8"+u+"\u7a7a\u76d8\u5b50"+(d-2)+"-"+d),this.tray_plate[u].splice(d-2,3))}for(a=0;a<t.length;a++)if(t[a].ts&&1==t[a].ts.Type){var h=t[a].ts;if(l="oven_"+h.Index,!(c.indexOf(l)<0))continue;c.push(l),this.JudgeOvenKebabs(h,!1,"\u5408\u6210\u70e4\u4e32"+e+"-\u4f7f\u7528\u6253\u5305\u9053\u5177")}}this.compound_num++;var p=!1;if(y.default.Instance.isYuTinAB&&(this.reduceFrozenCount(1),this.reduceOperateCompountCount(1)),this.compound_eff(e,t,p,n),null!=this.special_order_execute){var f=this.special_order_execute.kebab_data.indexOf(e);f>=0&&(this.special_order_execute.kebab_data[f]=-1*Math.abs(this.special_order_execute.kebab_data[f]),this.special_order_array[f].children[1].active=!0,this.special_order_array[f].children[1].getComponent(cc.Animation).play(),p=!0),this.judge_special_order()}else if(1==this.ani_group_order.node.active&&(this.ani_group_order.node.active=!1),!b.default.Instance.isDaren&&this.special_order_pool.length>0&&3*this.compound_num>=this.special_order_pool[0][0]){var _=this.get_special_order(this.special_order_pool[0][1],this.special_order_pool[0][3]);null!=_&&(this.special_order_execute={time:this.special_order_pool[0][2],kebab_data:_.kebab_data,hot:_.hot},this.draw_special_order()),this.special_order_pool.splice(0,1)}if(this.icon_bar.width=Math.floor(387*this.compound_num/this.kebabs_max),3*this.compound_num==this.kebabs_max&&this.GameStop(!0),1==this.lv)this.compound_num<=5&&E.default.Instance.reportUserGuide(3+this.compound_num);else if(2==this.lv)switch(this.compound_num){case 1:E.default.Instance.reportUserGuide(13);break;case 2:E.default.Instance.reportUserGuide(14);break;case 3:E.default.Instance.reportUserGuide(15);break;case 5:E.default.Instance.reportUserGuide(16);break;case 7:E.default.Instance.reportUserGuide(17);break;case 10:E.default.Instance.reportUserGuide(18);break;case 13:E.default.Instance.reportUserGuide(19);break;case 15:E.default.Instance.reportUserGuide(20);break;case 17:E.default.Instance.reportUserGuide(21)}for(this.reset_vacate_time(!0),this.judge_over(),W.default.Instance.isAuto&&this._checkDoMisTake(),a=0;a<this.useing_oven_tray.length;a++){var m=this.useing_oven_tray[a];null!=m&&0!=m.node.active&&m.OvenData.condition==v.OvenCondition.cover&&m.monitor_compound(e)}},t.prototype.JudgeOvenKebabs=function(e,t){var n=0,o=e.KebabsData[0].id;switch(e.KebabsData[0].condition==v.KebabCondition.normal&&e.KebabsData[1].condition==v.KebabCondition.normal&&e.KebabsData[2].condition==v.KebabCondition.normal&&e.KebabsData[0].id==e.KebabsData[1].id&&e.KebabsData[1].id==e.KebabsData[2].id&&(n=0==o?1:2),n){case 1:e.OvenData.condition==v.OvenCondition.tray?this.fill_tray(e,t):this.fill_oven(e);break;case 2:var a=[{ts:e,index:0},{ts:e,index:1},{ts:e,index:2}];this.monitor_compound(o,a,!1)}return n},t.prototype.judge_prop_tips=function(){if(!W.default.Instance.isAuto&&1!=this.is_over){for(var e=0,t=3,n=0;n<this.useing_oven_tray.length;n++)if(null!=(l=this.useing_oven_tray[n])&&0!=l.node.active&&l.OvenData.condition!=v.OvenCondition.video&&l.OvenData.condition!=v.OvenCondition.cover)if(l.OvenData.condition!=v.OvenCondition.one_grid)for(var o=0;o<3;o++)0==l.KebabsData[o].id&&e++;else 0==l.KebabsData[1].id&&e++,3==t&&null!=this.get_plate(l.Index)&&(t=1);var a=this.get_oven_compound();if(this.tips_prop.node.parent.active=!1,null==a&&e<t||0==e){var i=!1;for(n=0;n<this.useing_oven_tray.length;n++)if(null!=(l=this.useing_oven_tray[n])&&0!=l.node.active&&l.OvenData.condition==v.OvenCondition.video){i=!0;break}i?I.default.Instance.OpenUI(K.default,I.UIOrder.Window_2,this):1==this.btn_prop[0].label_unlock.node.active&&1==this.btn_prop[1].label_unlock.node.active?(this.use_prop(2,!0),b.default.Instance.TsInitial.ShowTips("\u5c40\u9762\u65e0\u6cd5\u6d88\u9664\uff0c\u5df2\u91cd\u65b0\u6446\u76d8")):0==this.btn_prop[0].label_unlock.node.active?(r=k.default.Instance.BarbecueProp.prop_1)&&r>0?(this.tips_prop.string="<b><color=#C03B0C>\u65e0\u6cd5\u6d88\u9664\u5566</c><color=#3D2218>\n\u8bd5\u8bd5\u6253\u5305\u5427</color>",this.tips_prop.node.parent.x=this.btn_prop[0].node.x,this.tips_prop.node.parent.active=!0):W.default.Instance.isAuto||I.default.Instance.OpenUI(L.default,I.UIOrder.Window_2,1,this):0==this.btn_prop[1].label_unlock.node.active&&((r=k.default.Instance.BarbecueProp.prop_2)&&r>0?(this.tips_prop.string="<b><color=#C03B0C>\u65e0\u6cd5\u6d88\u9664\u5566</c><color=#3D2218>\n\u8bd5\u8bd5\u6253\u4e71\u5427</color>",this.tips_prop.node.parent.x=this.btn_prop[1].node.x,this.tips_prop.node.parent.active=!0):W.default.Instance.isAuto||I.default.Instance.OpenUI(L.default,I.UIOrder.Window_2,2,this)),this.reset_compound_tips(),this.reset_vacate_time(!1)}else if(null==a){var r,c=0,s=0;for(n=0;n<this.useing_oven_tray.length;n++){var l;if(null!=(l=this.useing_oven_tray[n])&&0!=l.node.active){var u=this.get_plate(l.Index),d=!1;for(o=0;o<l.KebabsData.length;o++){var h=l.KebabsData[o];if(h&&0!=h.id&&h.condition==v.KebabCondition.frozen){d=!0,s++;break}}null!=u&&0==d&&c++}}s>0&&0==c&&((r=k.default.Instance.BarbecueProp.prop_3)&&r>0?(this.tips_prop.string="<b><color=#C03B0C>\u65e0\u6cd5\u6d88\u9664\u5566</c><color=#3D2218>\n\u8bd5\u8bd5\u89e3\u51bb\u5427</color>",this.tips_prop.node.parent.x=this.btn_prop[2].node.x,this.tips_prop.node.parent.active=!0):W.default.Instance.isAuto||I.default.Instance.OpenUI(L.default,I.UIOrder.Window_2,3,this))}}},t.prototype.judge_oven_vacancy=function(){var e=this;if(this.compound_tips_data=this.get_oven_compound(),null==this.compound_tips_data){for(var t,n,o={},a={},i={},r=0;r<9;r++)if((F=this.useing_oven_tray[r])&&0!=F.Useing&&F.OvenData.condition!=v.OvenCondition.video&&F.OvenData.condition!=v.OvenCondition.cover&&(null!=(l=this.get_plate(r))||F.OvenData.condition==v.OvenCondition.tray)){for(var c=0,s=0;s<F.KebabsData.length;s++)(x=F.KebabsData[s]).id>0&&(c++,x.condition==v.KebabCondition.normal&&(i[x.id]?i[x.id]++:i[x.id]=1,a[x.id]||(a[x.id]=[]),a[x.id].push(F)));null==o[""+c]?o[""+c]=[F]:o[""+c].push(F)}for(r=0;r<9;r++){var l;if((F=this.useing_oven_tray[r])&&0!=F.Useing&&F.OvenData.condition!=v.OvenCondition.video&&F.OvenData.condition!=v.OvenCondition.cover&&null!=(l=this.get_plate(r)))for(s=0;s<l.KebabsData.length;s++){var u=l.KebabsData[s];u.id>0&&u.condition==v.KebabCondition.normal&&(i[u.id]?i[u.id]++:i[u.id]=1,a[u.id]||(a[u.id]=[]),a[u.id].push(l))}}var d=[],h=null,p=-1;if(Object.keys(i).length){var f=[];for(var b in i)i[b]&&i[b]>=3&&f.push(b);f.length&&(h=f[Math.floor(Math.random()*f.length)])}if(h){var g=a[h];if(g&&g.length)e:for(r=0;r<g.length;r++){var I=g[r];if(I&&I.KebabsData)for(s=0;s<I.KebabsData.length;s++){var T=I.KebabsData[s].id;if(T==h&&(d.push({ts:I,key:T,index:s}),-1==p&&I instanceof m.default&&(p=I.Index),3==d.length))break e}}}if(y.default.Instance.gameTip&&this.Lv<=14&&d&&3==d.length)for(this._animTipData=d,r=0;r<d.length;r++)(x=d[r]).ts.KebabShake(x.index,!0);if(-1!=p){var k=this.useing_oven_tray[p];if(k)for(t={oven:k,index:0},s=0;s<k.KebabsData.length;s++)if((x=k.KebabsData[s]).id>0){t.index=s;break}}if(!t)for(var S=1;S<4;S++){var w=o[""+S];if(null!=w&&0!=w.length){for(t={oven:w[0],index:0},s=0;s<w[0].KebabsData.length;s++)if((x=w[0].KebabsData[s]).id>0){t.index=s;break}break}}if(null!=t){var O=1e4;for(r=0;r<9;r++){var F;if((F=this.useing_oven_tray[r])&&0!=F.Useing&&F.OvenData.condition!=v.OvenCondition.video&&F.OvenData.condition!=v.OvenCondition.cover&&t.oven.Index!=F.Index){var B=_.default.Instance.Distance(t.oven.node.getPosition(),F.node.getPosition());if(!(B>O))for(s=0;s<F.KebabsData.length;s++){var x;if(0==(x=F.KebabsData[s]).id){n={oven:F,index:s},O=B;break}}}}n&&n.oven&&(W.default.Instance.isAuto||(this.lv>10&&(this.vacate_tips_finish=!0),this.icon_finger.active=!0,this.ani_finger.stop(),this.icon_finger.setPosition(0,0),this.label_finger.node.parent.setPosition(0,0),this.label_finger.string="\u5c06\u70e4\u4e32\u79fb\u5230\u5176\u4ed6\u7a7a\u95f2\u70e4\u76d8\n\u4f7f\u76d8\u91cc\u70e4\u4e32\u6446\u4e0a\u70e4\u7089",cc.tween(this.ani_finger.node.parent).repeatForever(cc.tween().call(function(){e.ani_finger.play("ani_finger_zhiyin3"),e.ani_finger.node.parent.setPosition(t.oven.node.x+50*(t.index-1),t.oven.node.y)}).delay(1).to(O/500,{x:n.oven.node.x+50*(n.index-1),y:n.oven.node.y}).call(function(){e.ani_finger.play("ani_finger_zhiyin4")}).delay(1)).start(),this.finger_tips_type=3,cc.tween(this).delay(3).call(function(){e.finger_tips_type=1}).start()))}}},t.prototype.judge_special_order=function(){if(null==this.special_order_execute)return console.error("\u5224\u65ad\u7279\u6b8a\u8ba2\u5355\u5b8c\u6210\u51fa\u9519");for(var e=!0,t=0;t<this.special_order_execute.kebab_data.length;t++)if(this.special_order_execute.kebab_data[t]>0){e=!1;break}1==e&&(this.special_order_execute=null,this.ani_group_order.node.active=!1,y.default.Instance.isYuTinAB||this.guest_move(!0))},t.prototype.judge_over=function(){for(var e=0,t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(null!=n&&0!=n.node.active)for(var o=0;o<n.KebabsData.length;o++)0!=n.KebabsData[o].id&&e++}for(t=0;t<this.plate_array.length;t++){var a=this.plate_array[t];if(0!=a.node.active&&0!=a.Useing)for(o=0;o<a.KebabsData.length;o++)0!=a.KebabsData[o].id&&e++}for(var i in this.tray_plate){var r=this.tray_plate[i];for(t=0;t<r.length;t++)0!=r[t].id&&e++}var c,s=this.kebabs_max-e;if(this.label_bar.string=s+"/"+this.kebabs_max,e<3){if(this._isGameOver=!0,-1==this._compountGuestId)for(t=0;t<this.guest_queue.length;t++){var l=this.guest_queue[t];if(l&&l.active){var u=l.getComponent(q.default);u&&u.leave()}}this.label_bar.string=this.kebabs_max+"/"+this.kebabs_max,this.GameStop(!0),null!=this.special_order_execute&&(this.special_order_execute=null,this.ani_group_order.node.active=!1),I.default.Instance.OpenUI(T.default,I.UIOrder.Window_2,!0,this),c=!0}else c=!1;return console.log("\u5f53\u524d\u70e4\u4e32\u6570\u91cf"+e+"\uff0c\u5224\u65ad\u6e38\u620f\u7ed3\u675f\uff1a"+c),c},t.prototype.touch_start=function(e){var t=this;if(!(W.default.Instance.isAuto||this.prop_cooling>0)){this.reset_vacate_time(!0),this.reset_compound_tips(),this.resetOpenrateTime(),this.resetFrozenTime();var n=e.getCurrentTarget(),o=n.getComponent(R.default);switch(o.OvenData.condition){case v.OvenCondition.video:return void this.operate_fail();case v.OvenCondition.cover:return this.operate_fail(),void b.default.Instance.TsInitial.ShowTips("\u6d88\u9664\u70e4\u4e32"+f.default.Instance.KebabsConfig[o.OvenData.value-1].name+"\u624d\u80fd\u89e3\u9501\u54e6")}this.move_dis=0,this.touch_pos=null;var a,i=n.width/3,r=n.convertToNodeSpaceAR(e.getLocation());if(a=r.x<-.5*i?0:r.x<.5*i?1:2,o.OvenData.condition==v.OvenCondition.one_grid&&(a=1),null!=this.select_data){if(0!=o.KebabsData[a].id)if(this.select_data.item.Index==o.Index&&this.select_data.index==a)a=null;else if(a=null,o.OvenData.condition!=v.OvenCondition.one_grid)for(var c=0;c<o.KebabsData.length;c++)if(0==o.KebabsData[c].id){a=c;break}if(null==a)return void this.operate_fail();0==o.KebabsData[a].id&&(1==o.Useing?this.operate_succeed(o,a,!1):this.operate_fail())}else{if(0==o.KebabsData[a].id)switch(a){case 0:a=1;break;case 1:a=r.x<0?0:2;break;case 2:a=1}if(o.RefreshKebabs(a),0!=o.KebabsData[a].id){if(o.KebabsData[a].condition==v.KebabCondition.frozen)return void b.default.Instance.TsInitial.ShowTips("\u51b0\u51bb\u70e4\u4e32");this.select_data={item:o,index:a},o.node_kebabs[a].opacity=0,o.eff_select.active=!0,p.default.Instance.LoadSpriteFrame2("Bundle1UI","BarbecueStandUI/kebab/kebab_"+o.KebabsData[a].id,null,function(e,n){t.node_item.getComponent(cc.Sprite).spriteFrame=n;var i=o.node.convertToWorldSpaceAR(o.node_kebabs[a].getPosition()),r=t.node.convertToNodeSpaceAR(i);t.node_item.setPosition(r),t.node_item.active=!0}),100==y.default.Instance.GudieStep&&(y.default.Instance.GudieStep=101),this.next_pos=null}}}},t.prototype.touch_move=function(e){if(!W.default.Instance.isAuto&&null!=this.select_data){var t=e.getDelta();if(this.move_dis+=_.default.Instance.Distance(cc.v2(0,0),t),!(this.move_dis<15)){var n=this.node.convertToNodeSpaceAR(e.getLocation());n.y-=(b.default.Instance.ScreenSize.height-1334)/2,this.touch_pos=cc.v2(n.x,n.y+70);var o=this.get_touch_oven(cc.v2(n.x,n.y));if(null!=this.next_pos&&null!=o&&this.next_pos.ts.Index==o.ts.Index&&this.next_pos.index==o.index);else if(null!=this.next_pos&&((a=this.next_pos.ts.node_kebabs[this.next_pos.index]).active=!1,this.next_pos.ts.eff_select.active=!1),null!=o){var a,i=this.select_data.item.KebabsData[this.select_data.index].id;(a=o.ts.node_kebabs[o.index]).opacity=150,a.active=!0,p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+i,a),o.ts.eff_select.active=!0}this.next_pos=o}}},t.prototype.touch_end=function(e){if(!W.default.Instance.isAuto&&null!=this.select_data)if(this.reset_vacate_time(!0),this.reset_compound_tips(),this.resetOpenrateTime(),this.resetFrozenTime(),this.move_dis<30)101==y.default.Instance.GudieStep&&(y.default.Instance.GudieStep=100,this.operate_fail());else{this.next_pos&&(this.next_pos.ts.node_kebabs[this.next_pos.index].active=!1);var t=this.node.convertToNodeSpaceAR(e.getLocation());t.y-=(b.default.Instance.ScreenSize.height-1334)/2;var n=this.get_touch_oven(cc.v2(t.x,t.y));if(null!=n)if(this.select_data.item.Index!=n.ts.Index||this.select_data.index!=n.index)if(0!=n.ts.Useing){switch(n.ts.OvenData.condition){case v.OvenCondition.video:return this.operate_fail(),void b.default.Instance.TsInitial.ShowTips("\u770b\u89c6\u9891\u624d\u80fd\u89e3\u9501\u54e6");case v.OvenCondition.cover:return this.operate_fail(),void b.default.Instance.TsInitial.ShowTips("\u6d88\u9664\u70e4\u4e32"+f.default.Instance.KebabsConfig[n.ts.OvenData.value-1].name+"\u624d\u80fd\u89e3\u9501\u54e6")}this.operate_succeed(n.ts,n.index,!0)}else this.operate_fail();else this.operate_fail();else this.operate_fail()}},t.prototype.get_touch_oven=function(e){for(var t,n=0;n<this.useing_oven_tray.length;n++){var o=this.useing_oven_tray[n];if(null!=o&&0!=o.node.active&&o.OvenData.condition!=v.OvenCondition.video&&o.OvenData.condition!=v.OvenCondition.cover){var a=this.node.convertToWorldSpaceAR(e),i=o.node.convertToNodeSpaceAR(a);if(!(Math.abs(i.x)>o.node.width*o.node.scale/2||Math.abs(i.y)>o.node.height*o.node.scale/2)){var r=void 0;if(o.OvenData.condition==v.OvenCondition.one_grid)r=1;else{var c=o.node.convertToNodeSpaceAR(a),s=o.node.width/3;r=c.x<-.5*s?0:c.x<.5*s?1:2}if(0==o.KebabsData[r].id||this.select_data.item.Index==o.Index&&this.select_data.index==r)t={ts:o,key:null,index:r};else if(o.OvenData.condition!=v.OvenCondition.one_grid)for(var l=0;l<o.KebabsData.length;l++)if(0==o.KebabsData[l].id||this.select_data.item.Index==o.Index&&this.select_data.index==l){t={ts:o,key:null,index:l};break}break}}}return t},t.prototype.get_oven_compound=function(){for(var e,t={},n=0;n<this.useing_oven_tray.length;n++){var o=this.useing_oven_tray[n];if(null!=o&&0!=o.node.active&&o.OvenData.condition!=v.OvenCondition.cover)for(var a=0;a<o.KebabsData.length;a++)(r=o.KebabsData[a]).condition==v.KebabCondition.normal&&0!=r.id&&(null==t[""+r.id]&&(t[""+r.id]=[]),t[""+r.id].push({ts:o,key:null,index:a}))}for(var i in t){var r;if((r=t[i]).length>=3){e=r.splice(0,3);break}}return e},t.prototype.get_prop1_compound=function(){var e={};try{for(var t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(null!=n&&0!=n.node.active)for(var o=0;o<n.KebabsData.length;o++)0!=(c=n.KebabsData[o]).id&&(null==e[""+c.id]&&(e[""+c.id]=[]),e[""+c.id].push({ts:n,key:null,index:o}))}var a=[];for(var i in e)switch((c=e[i]).length){case 1:a.push(Number(i));break;case 2:a.unshift(Number(i));break;default:return c.splice(0,3)}for(t=0;t<this.plate_array.length;t++){var r=this.plate_array[t];if(0!=r.node.active&&0!=r.Useing)for(o=0;o<r.KebabsData.length;o++)0!=(c=r.KebabsData[o]).id&&null!=e[""+c.id]&&e[""+c.id].push({ts:r,key:null,index:o})}for(var i in this.tray_plate)if(s=this.tray_plate[i])for(t=0;t<s.length;t++){var c;0!=(c=s[t]).id&&null!=e[""+c.id]&&e[""+c.id].push({ts:null,key:i,index:t})}for(t=0;t<a.length;t++){var s;if((s=e[""+a[t]]).length>=3)return s.splice(0,3)}console.error("\u6ca1\u6709\u53ef\u4ee5\u5408\u6210\u7684\u70e4\u4e32\uff0c\u70e4\u7089\u4e0a\u6709\u70e4\u4e32",a)}catch(p){}return null},t.prototype.get_special_order=function(e,t){for(var n={},o=0;o<12;o++){var a=this.get_plate(o);null!=a&&(n[""+o]=a.StackNum)}for(var i=this.BarbecueLvData.order_select,r=this.get_special_order2(i,n,"\u7279\u6b8a\u8ba2\u5355\u62bd\u53d6\u70e4\u4e32");r.length<e&&i<10;)i++,r=this.get_special_order2(i,n,"\u7279\u6b8a\u8ba2\u5355\u62bd\u53d6\u70e4\u4e32");if(console.log("\u7279\u6b8a\u8ba2\u5355\u9700\u8981\u70e4\u4e32"+e+"\u4e2a,\u968f\u673a\u6c60"+r),r.length<e)return null;var c=[];for(o=0;o<e;o++){var s=Math.floor(Math.random()*r.length);c.push(r[s]),r.splice(s,1)}var l=[];for(o=0;o<c.length;o++)o<t?l.push(!0):l.push(!1);return l.sort(function(){return Math.random()-.5}),{kebab_data:c,hot:l}},t.prototype.get_special_order2=function(e,t,n){for(var o={},a=0;a<this.useing_oven_tray.length;a++)if(null!=(r=this.useing_oven_tray[a])&&0!=r.node.active&&r.OvenData.condition!=v.OvenCondition.cover)for(var i=0;i<r.KebabsData.length;i++)0!=(s=r.KebabsData[i]).id&&(null==o[""+s.id]?o[""+s.id]=1:o[""+s.id]++);for(a=0;a<this.plate_array.length;a++){var r,c=this.plate_array[a];if(0!=c.node.active&&0!=c.Useing&&!((r=this.useing_oven_tray[c.Index])&&r.OvenData.condition==v.OvenCondition.cover||t[""+c.Index]-c.StackNum>=e))for(i=0;i<c.KebabsData.length;i++){var s;0!=(s=c.KebabsData[i]).id&&(null==o[""+s.id]?o[""+s.id]=1:o[""+s.id]++)}}var l=[];for(var u in o)o[u]>=3&&l.push(Number(u));return console.log("\u70e4\u7089+\u524d"+e+"\u5c42\u76d8\u5b50\u4e2d\u5168\u90e8\u70e4\u4e32",o),console.log("\u89e6\u53d1\u70b9:"+n+"\uff0c\u83b7\u53d6\u70e4\u7089+\u524d"+e+"\u5c42\u76d8\u5b50\u4e2d\u53ef\u4ee5\u5408\u6210\u7684\u70e4\u4e32"+l),l},t.prototype.get_plate=function(e,t){for(var n,o=0;o<this.plate_array.length;o++){var a=this.plate_array[o];if(0!=a.node.active&&a.Index==e&&0!=a.Useing)if(t){if(a.StackNum==t)return a}else(null==n||a.StackNum>n.StackNum)&&(n=a)}return n},t.prototype.get_oven_kebabs=function(){for(var e=[],t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(null!=n&&0!=n.node.active)for(var o=0;o<n.KebabsData.length;o++){var a=n.KebabsData[o];0!=a.id&&e.indexOf(a.id)<0&&e.push(a.id)}}return e},t.prototype.get_kebabs_max=function(){for(var e=0,t=0;t<this.BarbecueLvData.kebab_data.length;t++){var n=this.BarbecueLvData.kebab_data[t];null!=n&&n.id>0&&e++}for(var o in this.BarbecueLvData.plate_data){var a=this.BarbecueLvData.plate_data[o];for(t=0;t<a.length;t++)a[t].id>0&&e++}return e},t.prototype.found_barbecue_data=function(e){this.log_record="",this.ok=!0;var t=f.default.Instance.BarbecueLogicConfig["lv_"+e];if(_.default.Instance.UnlockKebabsNum(t.Inn_Lv)<t.Food_species)return b.default.Instance.TsInitial.ShowTips("\u53ef\u6e32\u67d3\u98df\u7269\u79cd\u7c7b\u4e0d\u8db3!!!!!");f.default.Instance.BarbecueLvConfig["lv_"+e],this.BarbecueLvData={oven_data:[],kebab_data:[],plate_data:{},count_down:this.barbecue_lv_data.count_down,star_rating:this.barbecue_lv_data.star_rating,special_order:[],order_select:this.barbecue_lv_data.order_select};for(var n=[],o=[],a=[],i={},r=[],c=Array.from({length:t.Food_species},function(e,t){return t+1}),s=Math.floor(t.Elimination/3/t.Food_species),l=0;l<t.Elimination/3;l++)if(l<t.Food_species*s)a.push(l%t.Food_species+1,l%t.Food_species+1,l%t.Food_species+1);else{var u=Math.floor(Math.random()*c.length);a.push(c[u],c[u],c[u]),c.splice(u,1)}for(console.log("\u6240\u6709\u70e4\u4e32\u6570\u636e\u957f\u5ea6"+a.length+",\u5185\u5bb9"+a),this.log_record+="\u6240\u6709\u70e4\u4e32\u6570\u636e\u957f\u5ea6"+a.length+",\u5185\u5bb9"+a+"\n",l=0;l<a.length;l++)null==i[""+a[l]]?i[""+a[l]]=1:i[""+a[l]]++;for(var d in i)r.push({id:Number(d),num:i[d]});r.sort(function(e,t){return t.num-e.num}),console.log("\u6392\u5e8f\u540e\u70e4\u4e32====",r);var h=Math.floor(t.Food_species*this.kind1),p=Math.floor(t.Food_species*this.kind2);for(l=0;l<r.length;l++){var y=r[l];u=void 0,null==n[u=l<h?0:l<h+p?1:2]&&(n[u]=[]);for(var m=0;m<y.num;m++)n[u].push(y.id)}for(l=n.length-1;l>=0;l--)null!=n[l]&&0!=n[l].length||(n.splice(l,1),console.error("\u70e4\u4e32\u603b\u5e93\u62a5\u9519==index="+l+"=\u7684\u6279\u6b21\u6ca1\u6709\u70e4\u4e32="));for(l=0;l<n.length;l++)o.push(n[l].filter(function(e,t,n){return n.indexOf(e)===t}));console.log("\u70e4\u4e32\u603b\u5e93========",JSON.stringify(n)),console.log("\u70e4\u4e32\u6279\u6b21\u7684\u79cd\u7c7b========",JSON.stringify(o)),this.kebabs_kind=o,a=n[0],n.splice(0,1),a.sort(function(){return Math.random()-.5});var g=a.filter(function(e,t,n){return n.indexOf(e)===t}),I=[],T=[];for(l=0;l<t.Initial_species;l++)if(u=Math.floor(Math.random()*g.length),I.push(g[u]),g.splice(u,1),0==g.length){console.error("\u7b2c\u4e00\u6279\u6b21\u70e4\u4e32\u79cd\u7c7b\u5c0f\u4e8e\u70e4\u7089\u4e0a\u70e4\u4e32\u79cd\u7c7b========");break}console.log("\u521d\u59cb\u70e4\u7089\u4e0a\u70e4\u4e32\u79cd\u7c7b "+I.length+"\u4e2a\uff0c\u5185\u5bb9 "+I),this.log_record+="\u521d\u59cb\u70e4\u7089\u4e0a\u70e4\u4e32\u79cd\u7c7b "+I.length+"\u4e2a\uff0c\u5185\u5bb9 "+I+"\n";var k={};for(l=0;l<t.Initial_num;l++){var S=void 0;if(l<t.Initial_species)k[S=I[l]]=1;else{var w=Math.floor(Math.random()*I.length);k[S=I[w]]++,3==k[S]&&I.splice(w,1)}(u=a.indexOf(S))>=0?(T.push(S),a.splice(u,1)):(this.ok=!1,console.error("\u70e4\u7089\u62bd\u53d6\u70e4\u4e32"+S+"\u4e0d\u5b58\u5728"),this.log_record+="\u62a5\u9519==\u70e4\u7089\u62bd\u53d6\u70e4\u4e32"+S+"\u4e0d\u5b58\u5728 "+I+"\n")}var O=0,F={},B=0;for(l=0;l<t.Oven_state.length;l++){var x={condition:null,value:0};switch(t.Oven_state[l]){case 0:break;case 1:x.condition=v.OvenCondition.normal,O+=1,F[""+l]=1;break;case 2:x.condition=v.OvenCondition.video;break;case 3:x.condition=v.OvenCondition.cover,x.value=0,O+=1,F[""+l]=1;break;case 4:x.condition=v.OvenCondition.hot,O+=1,F[""+l]=1;break;case 5:x.condition=v.OvenCondition.one_grid,B++;break;case 6:x.condition=v.OvenCondition.tray,O+=1,F[""+l]=1}this.BarbecueLvData.oven_data.push(x)}console.log("\u53ef\u7528\u7089\u5b50"+O+"\u4e2a\uff0c\u9700\u8981\u968f\u673a\u7684\u70e4\u4e32\u6570\u91cf"+(T.length-O-B)),this.log_record+="\u53ef\u7528\u7089\u5b50"+O+"\u4e2a\uff0c\u9700\u8981\u968f\u673a\u7684\u70e4\u4e32\u6570\u91cf"+(T.length-O-B)+"\n";var P=Object.keys(F);for(l=0;l<T.length-O-B;l++)F[""+P[u=Math.floor(Math.random()*P.length)]]++,F[""+P[u]]>=3&&P.splice(u,1);var C=0;for(var d in F)C+=F[d];for(console.log("\u70e4\u7089\u4e0a\u70e4\u4e32\u6570\u91cf===="+C+",\u5185\u5bb9"+JSON.stringify(F)),this.log_record+="\u70e4\u7089\u4e0a\u70e4\u4e32\u6570\u91cf===="+C+",\u5185\u5bb9"+JSON.stringify(F)+"\n",console.log("\u521d\u59cb\u70e4\u7089\u4e0a\u70e4\u4e32\u957f\u5ea6"+T.length+",\u5185\u5bb9"+JSON.stringify(T)),this.log_record+="\u521d\u59cb\u70e4\u7089\u4e0a\u70e4\u4e32\u957f\u5ea6"+T.length+",\u5185\u5bb9"+JSON.stringify(T)+"\n",l=0;l<t.Oven_state.length;l++)switch(this.BarbecueLvData.oven_data[l].condition){case v.OvenCondition.normal:case v.OvenCondition.cover:case v.OvenCondition.hot:case v.OvenCondition.tray:for(var R=this.random_value(F[""+l],T,!0),N=0;N<3;N++)null==R[N]?R[N]=0:(u=T.indexOf(R[N]))>=0&&T.splice(u,1);console.log("\u666e\u901a\u7089\u5b50"+l+"\u62bd\u53d6"+F[""+l]+"\u4e2a\u70e4\u4e32,\u7089\u5b50\u70e4\u4e32\u6c60\u5269\u4f59"+T.length+",\u62bd\u53d6\u7684\u70e4\u4e32"+JSON.stringify(R)),this.log_record+="\u666e\u901a\u7089\u5b50"+l+"\u62bd\u53d6"+F[""+l]+"\u4e2a\u70e4\u4e32,\u7089\u5b50\u70e4\u4e32\u6c60\u5269\u4f59"+T.length+",\u62bd\u53d6\u7684\u70e4\u4e32"+JSON.stringify(R)+"\n",R.sort(function(){return Math.random()-.5});var A={id:R[0],condition:v.KebabCondition.normal},D={id:R[1],condition:v.KebabCondition.normal},U={id:R[2],condition:v.KebabCondition.normal};this.BarbecueLvData.kebab_data.push(A,D,U);break;case v.OvenCondition.one_grid:var M={id:0,condition:v.KebabCondition.normal},L={id:T[0],condition:v.KebabCondition.normal},E={id:0,condition:v.KebabCondition.normal};this.BarbecueLvData.kebab_data.push(M,L,E),T.splice(0,1),console.log("\u5f02\u5f62\u7089\u5b50"+l+"\u62bd\u53d61\u4e2a\u70e4\u4e32,\u7089\u5b50\u70e4\u4e32\u6c60\u5269\u4f59"+T.length+",\u62bd\u53d6\u7684\u70e4\u4e32"+T[0]),this.log_record+="\u5f02\u5f62\u7089\u5b50"+l+"\u62bd\u53d61\u4e2a\u70e4\u4e32,\u7089\u5b50\u70e4\u4e32\u6c60\u5269\u4f59"+T.length+",\u62bd\u53d6\u7684\u70e4\u4e32"+T[0]+"\n";break;case v.OvenCondition.video:var G={id:0,condition:v.KebabCondition.normal},j={id:0,condition:v.KebabCondition.normal},z={id:0,condition:v.KebabCondition.normal};this.BarbecueLvData.kebab_data.push(G,j,z);break;default:this.BarbecueLvData.kebab_data.push(null,null,null)}console.log("=============\u7089\u5b50\u6b8b\u7559\u70e4\u4e32",T),this.log_record+="=============\u7089\u5b50\u6b8b\u7559\u70e4\u4e32"+JSON.stringify(T)+"\n",T.length>0&&(this.ok=!1);var K=Math.floor(t.Same_food/2);t.PlateType_num[1]<K&&(K=t.PlateType_num[1]);var H=t.Same_food-K;t.PlateType_num[2]<H&&(K+=H-t.PlateType_num[2],H=t.PlateType_num[2]);var W=[],V=[],J=[];console.log("\u76d8\u5b50\u70e4\u4e32\u6c60\u6570\u636e\u957f\u5ea6"+a.length+"\uff0c\u5185\u5bb9"+a),this.log_record+="\u76d8\u5b50\u70e4\u4e32\u6c60\u6570\u636e\u957f\u5ea6"+a.length+"\uff0c\u5185\u5bb9"+a+"\n";var q=0,X=0;for(l=0;l<t.Plate.length;l++)t.Plate[l]>0&&(q+=t.Plate[l]);for(l=2;l>=0;l--){var Y=t.PlateType_num[l];for(m=0;m<Y;m++){var Z=void 0;switch(++X>q*this.n1&&1==n.length?(console.error("\u70e4\u4e32\u603b\u5e93\u70e4\u4e32\u7b2c\u4e8c\u6279\u6ce8\u5165\uff0c\u5f53\u524d\u70e4\u4e32\u7ec4\u6570\u91cf",a.length),a=a.concat(n[0]),n.splice(0,1),a.sort(function(){return Math.random()-.5})):X>q*this.n2&&1==n.length?(console.error("\u70e4\u4e32\u603b\u5e93\u70e4\u4e32\u7b2c\u4e09\u6279\u6ce8\u5165\uff0c\u5f53\u524d\u70e4\u4e32\u7ec4\u6570\u91cf",a.length),a=a.concat(n[0]),n.splice(0,1),a.sort(function(){return Math.random()-.5})):a.length<5&&n.length>0&&(a=a.concat(n[0]),n.splice(0,1),console.error("\u70e4\u4e32\u603b\u5e93\u70e4\u4e32\u6ce8\u5165\u5230\u53ef\u9009\u70e4\u4e32\u7ec4\u4e2d"),a.sort(function(){return Math.random()-.5})),l){case 0:Z=this.random_value(1,a,!1);break;case 1:K>0?(Z=this.random_value(2,a,!0),K--):Z=this.random_value(2,a,!1);break;case 2:H>0?(Z=this.random_value(3,a,!0),H--):Z=this.random_value(3,a,!1)}Z.sort(function(){return Math.random()-.5});var Q={id:Z[0],condition:v.KebabCondition.normal,value:0},$={id:Z[1],condition:v.KebabCondition.normal,value:0},ee={id:Z[2],condition:v.KebabCondition.normal,value:0},te={id:0,condition:v.KebabCondition.normal,value:0},ne={id:0,condition:v.KebabCondition.normal,value:0};switch(l){case 0:W.push(Q,te,ne);break;case 1:V.push(Q,$,te);break;case 2:J.push(Q,$,ee)}for(var oe=0;oe<Z.length;oe++)(u=a.indexOf(Z[oe]))>=0?a.splice(u,1):(this.ok=!1,console.error("\u968f\u673a\u76d8\u5b50\u6570\u636e\u62a5\u9519,\u5f53\u524d\u957f\u5ea6"+a.length+"=========\u62ff\u5230\u6ca1\u6709\u4e0b\u6807\u7684\u5143\u7d20"+Z[oe]+"\u4e86,"+JSON.stringify(a)),this.log_record+="\u62a5\u9519==\u968f\u673a\u76d8\u5b50\u6570\u636e\u62a5\u9519,\u5f53\u524d\u957f\u5ea6"+a.length+"=========\u62ff\u5230\u6ca1\u6709\u4e0b\u6807\u7684\u5143\u7d20"+Z[oe]+"\u4e86,"+JSON.stringify(a)+"\n");console.log("\u76d8\u5b50\u62bd\u53d6\u70e4\u4e32\u6570\u636e"+Z+",\u76d8\u5b50\u70e4\u4e32\u6c60\u5269\u4f59\u6570\u91cf"+a.length),this.log_record+="\u76d8\u5b50\u62bd\u53d6\u70e4\u4e32\u6570\u636e"+Z+",\u76d8\u5b50\u70e4\u4e32\u6c60\u5269\u4f59\u6570\u91cf"+a.length+"\n"}}for(console.log("=============\u603b\u70e4\u4e32\u6b8b\u7559",a),this.log_record+="=============\u603b\u70e4\u4e32\u6b8b\u7559"+JSON.stringify(a)+"\n",a.length>0&&(this.ok=!1),l=0;l<this.BarbecueLvData.oven_data.length;l++)if((x=this.BarbecueLvData.oven_data[l]).condition==v.OvenCondition.one_grid)for(this.BarbecueLvData.plate_data["plate_"+l]=[],m=0;m<t.Plate[l];m++){var ae=void 0;for(oe=0;oe<3;oe++)W[oe].id>0&&(ae=W[oe]);this.BarbecueLvData.plate_data["plate_"+l].push({id:0,condition:v.KebabCondition.normal},ae,{id:0,condition:v.KebabCondition.normal}),W.splice(0,3)}for(X=0,m=0;m<10;m++)for(l=0;l<t.Plate.length;l++)if(this.BarbecueLvData.oven_data[l].condition!=v.OvenCondition.one_grid&&null!=this.BarbecueLvData.oven_data[l].condition&&(null==this.BarbecueLvData.plate_data["plate_"+l]&&(this.BarbecueLvData.plate_data["plate_"+l]=[]),!(t.Plate[l]<m+1))){var ie=void 0;switch(this.random_value2(W.length,V.length,J.length,t.PlateType_weight)){case 1:ie=W;break;case 2:ie=V;break;case 3:ie=J}var re=[];if(0==m)re.push(this.BarbecueLvData.kebab_data[3*l].id),re.push(this.BarbecueLvData.kebab_data[3*l+1].id),re.push(this.BarbecueLvData.kebab_data[3*l+2].id);else if(1==m){var ce=this.BarbecueLvData.plate_data["plate_"+l].length;re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-1].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-2].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-3].id)}else ce=this.BarbecueLvData.plate_data["plate_"+l].length,re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-1].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-2].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-3].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-4].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-5].id),re.push(this.BarbecueLvData.plate_data["plate_"+l][ce-6].id);u=void 0,u=++X<q*this.n1?0:X<q*this.n2?1:2;var se=this.random_value3(ie,re,u);(Ie=[ie[se],ie[se+1],ie[se+2]]).sort(function(){return Math.random()-.5}),this.BarbecueLvData.plate_data["plate_"+l].push(Ie[0],Ie[1],Ie[2]),ie.splice(se,3)}for(var d in this.BarbecueLvData.plate_data)this.BarbecueLvData.plate_data[d].reverse();for(var le=t.Tinfoil,ue=t.Ice,de=Object.keys(this.BarbecueLvData.plate_data);le+ue>0;){if(le>0){var he=de[Math.floor(Math.random()*de.length)],pe=this.BarbecueLvData.plate_data[he],fe=Math.floor(666*Math.random())%(pe.length/3),_e=Math.floor(3*Math.random());if(pe.length>0)for(m=0;m<3;m++){var ye=(m+_e)%3;if((Ie=pe[3*fe+ye]).id>0&&Ie.condition==v.KebabCondition.normal){this.BarbecueLvData.plate_data[he][3*fe+ye].condition=v.KebabCondition.tinfoil,le--;break}}}if(ue>0){var be=de[Math.floor(666*Math.random())%de.length],ve=this.BarbecueLvData.plate_data[be],me=Math.floor(Math.random()*(ve.length/3)+3),ge=Math.floor(3*Math.random());if(3*me<ve.length)for(m=0;m<3;m++){var Ie,Te=(m+ge)%3;if((Ie=ve[3*me+Te]).id>0&&Ie.condition==v.KebabCondition.normal){this.BarbecueLvData.plate_data[be][3*me+Te].condition=v.KebabCondition.frozen,ue--;break}}}}t.OrderOne.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderOne)),t.OrderTwo.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderTwo)),t.OrderThree.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderThree)),t.OrderFour.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderFour)),t.OrderFive.length>0&&this.BarbecueLvData.special_order.push([].concat(t.OrderFive)),0==this.ok?(console.error("\u91cd\u65b0\u521b\u5efa\u70e4\u7089\u6570\u636e========="),this.found_barbecue_data(e)):(this.render_barbecue(this.BarbecueLvData,3),this.oven_cover_random(),this.barbecue2_data=JSON.stringify(this.BarbecueLvData),console.log("\u5173\u5361\u65b0\u5efa\u6570\u636e========="+e,this.BarbecueLvData),this.log_record+="\u5173\u5361\u65b0\u5efa\u6570\u636e========="+e+this.barbecue2_data+"\n")},t.prototype.random_value3=function(e,t,n){for(var o=t.length-1;o>=0;o--)0==t[o]&&t.splice(o,1);var a=[];for(o=0;o<e.length;o+=3){for(var i=0,r=0;r<3;r++)0!=(l=e[o+r]).id&&(this.kebabs_kind[2]&&this.kebabs_kind[2].indexOf(l.id)>=0?i=2:this.kebabs_kind[1]&&this.kebabs_kind[1].indexOf(l.id)>=0&&i<1&&(i=1));i<=n&&a.push(o)}console.log("\u603b\u6570"+e.length+"\u5f53\u524d\u6279\u6b21"+n+"\u53ef\u7528\u76d8\u5b50\u70b9",a);var c=[];for(o=0;o<a.length;o++){var s=!0;for(r=0;r<3;r++){var l;if(0!=(l=e[a[o]+r]).id&&t.indexOf(l.id)>=0){s=!1;break}}1==s&&c.push(a[o])}if(0==c.length)return console.log("\u4f4e\u4f18\u5148\u7ea7\u7684\u70e4\u4e32"+JSON.stringify(t)+",\u76d8\u5b50\u6570\u636e"+e.length+",\u6ca1\u6709\u7b26\u5408\u8981\u6c42\u7684"),0;var u=Math.floor(Math.random()*c.length);return console.log("\u4f4e\u4f18\u5148\u7ea7\u7684\u70e4\u4e32"+JSON.stringify(t)+",\u76d8\u5b50\u6570\u636e"+e.length+"\uff0c\u7b26\u5408\u8981\u6c42\u7684\u8d77\u59cb\u4e0b\u6807"+c[u]),c[u]},t.prototype.random_value2=function(e,t,n,o){var a=[];e>0&&a.push({value:1,weight:o[0]}),t>0&&a.push({value:2,weight:o[1]}),n>0&&a.push({value:3,weight:o[1]});for(var i=0,r=0;r<a.length;r++)i+=a[r].weight;for(var c=9999*Math.random()%i,s=0;s<a.length;s++){var l=a[s];if((c-=l.weight)<=0)return l.value}this.ok=!1,console.error("\u76d8\u5b50\u968f\u673a\u6743\u91cd\u5931\u8d25======================"),this.log_record+="\u62a5\u9519==\u76d8\u5b50\u968f\u673a\u6743\u91cd\u5931\u8d25======================\n"},t.prototype.random_value=function(e,t,n){for(var o=t.length,a=JSON.stringify(t),i={},r=[],c=[],s=[],l=0;l<t.length;l++){var u=t[l];null==i[""+u]?(i[""+u]=1,s.push(u)):i[""+u]++}for(var d in i)1==i[d]?r.push(Number(d)):c.push(Number(d));var h=[];if(1==n&&e>1){if(0==c.length)console.error("\u6ca1\u6709\u76f8\u540c\u7684\u5143\u7d20\u4e86===\u88ab\u8feb\u62bd\u53d6\u4e0d\u540c\u5143\u7d20"),this.log_record+="\u62a5\u9519==\u6ca1\u6709\u76f8\u540c\u7684\u5143\u7d20\u4e86===\u88ab\u8feb\u62bd\u53d6\u4e0d\u540c\u5143\u7d20\n",h.push(r[0],r[1]),r.splice(0,2);else{var p=Math.floor(Math.random()*c.length);h.push(c[p],c[p]),c.splice(p,1)}3==e&&(0==r.length?(p=Math.floor(Math.random()*c.length),h.push(c[p])):(p=Math.floor(Math.random()*r.length),h.push(r[p])))}else for(l=0;l<e;l++)s.length>0?(p=Math.floor(Math.random()*s.length),h.push(s[p]),s.splice(p,1)):c.length>0?(p=Math.floor(Math.random()*c.length),h.push(c[p]),c.splice(p,1),console.error("\u6ca1\u6709\u4e0d\u76f8\u540c\u7684\u5143\u7d20\u4e86===\u88ab\u8feb\u62bd\u53d6\u76f8\u540c\u5143\u7d20"),this.log_record+="\u62a5\u9519==\u6ca1\u6709\u4e0d\u76f8\u540c\u7684\u5143\u7d20\u4e86===\u88ab\u8feb\u62bd\u53d6\u76f8\u540c\u5143\u7d20\n"):(this.ok=!1,console.error("\u62bd\u53d6\u4e09\u4e2a\u4e0d\u540c\u5143\u7d20\u51fa\u95ee\u9898\u4e86\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f"),this.log_record+="\u62a5\u9519==\u62bd\u53d6\u4e09\u4e2a\u4e0d\u540c\u5143\u7d20\u51fa\u95ee\u9898\u4e86\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\n");return console.log("\u539f\u6570\u7ec4\u957f\u5ea6"+o+"\u5185\u5bb9"+a+"\uff0c\n\u62bd\u53d6"+e+"\u4e2a\u5143\u7d20,\u53ef\u4ee5\u76f8\u540c:"+n+",\u5185\u5bb9"+JSON.stringify(h)),this.log_record+="\u539f\u6570\u7ec4\u957f\u5ea6"+o+"\u5185\u5bb9"+a+"\uff0c\n\u62bd\u53d6"+e+"\u4e2a\u5143\u7d20,\u53ef\u4ee5\u76f8\u540c:"+n+",\u5185\u5bb9"+JSON.stringify(h)+"\n",h},t.prototype.oven_cover_random=function(){for(var e={},t=0;t<12;t++){var n=this.get_plate(t);null!=n&&(e[""+t]=n.StackNum)}for(var o=this.BarbecueLvData.order_select,a=this.get_special_order2(o,e,"\u9505\u76d6\u70e4\u7089\u89e3\u9501\u70e4\u4e32");0==a.length;)o++,a=this.get_special_order2(o,e,"\u9505\u76d6\u70e4\u7089\u89e3\u9501\u70e4\u4e32");for(console.log("\u9505\u76d6\u70e4\u7089+\u76d8\u5b50\u8303\u56f4"+o+",\u53ef\u7528\u70e4\u4e32\u6c60"+a),this.log_record+="\u9505\u76d6\u70e4\u7089+\u76d8\u5b50\u8303\u56f4"+o+",\u53ef\u7528\u70e4\u4e32\u6c60"+a+"\n",t=0;t<this.BarbecueLvData.oven_data.length;t++){var i=this.BarbecueLvData.oven_data[t];if(null!=i&&i.condition==v.OvenCondition.cover){var r=Math.floor(Math.random()*a.length);this.BarbecueLvData.oven_data[t].value=a[r],console.log("\u9505\u76d6\u70e4\u7089"+t+"\u968f\u673a\u4e0b\u6807"+r+"\uff0cid\u4e3a"+a[r]),this.log_record+="\u9505\u76d6\u70e4\u7089"+t+"\u968f\u673a\u4e0b\u6807"+r+"\uff0cid\u4e3a"+a[r]+"\n";var c=this.useing_oven_tray[t];c&&(c.OvenData.value=a[r]),p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+a[r],this.useing_oven_tray[t].cover_kebabs)}}},t.prototype.render_barbecue=function(e,t){this.reset_pool();for(var n=f.default.Instance.getUnlockKebabsNum(),o=[].concat(k.default.Instance.selectKebabs),a=[],i=0;i<e.kebab_data.length;i++)(p=e.kebab_data[i])&&(a.includes(p.id)||a.push(p.id));if(e.plate_data)for(var r in e.plate_data){var c=e.plate_data[r];for(i=0;i<c.length;i++)(p=c[i])&&(a.includes(p.id)||a.push(p.id))}a.length>=n?(console.error("\u89e3\u9501\u70e4\u4e32\u79cd\u7c7b\u8d85\u8fc7\u914d\u7f6e",a.length,n),n=a.length):console.error("\u89e3\u9501\u70e4\u4e32\u79cd\u7c7b\u6ca1\u8d85\u8fc7\u914d\u7f6e",a.length,n);var s=Array.from({length:n},function(e,t){return t+1});if(3!=t&&s.sort(function(){return Math.random()-.5}),o.length>0)for(i=0;i<s.length&&o[i];i++)s[i]=o[i];for(s.unshift(0),console.log("\u6e32\u67d3\u70e4\u4e32\u6c60\u6570\u636e========="+s.length,s),this.log_record+="\u6e32\u67d3\u70e4\u4e32\u6c60\u6570\u636e========="+JSON.stringify(s)+"\n",i=0;i<e.oven_data.length;i++)if(null!=e.oven_data[i].condition){var l=3*i,u={id:s[e.kebab_data[l].id],condition:e.kebab_data[l].condition},d={id:s[e.kebab_data[l+1].id],condition:e.kebab_data[l+1].condition},h={id:s[e.kebab_data[l+2].id],condition:e.kebab_data[l+2].condition};switch(e.oven_data[i].condition){case v.OvenCondition.tray:this.found_tray(i,[u,d,h],null,"=====");break;default:this.found_oven(i,[u,d,h],{condition:e.oven_data[i].condition,value:s[e.oven_data[i].value]})}}for(var r in e.plate_data){var p=e.plate_data[r],_=Number(r.split("_")[1]);if(e.oven_data[_].condition==v.OvenCondition.tray){var y=void 0;for(i=0;i<this.tray_correlation.length;i++)this.tray_correlation[i].indexOf(_)>=0&&(y="tray_plate_"+i);for(null==this.tray_plate[y]&&(this.tray_plate[y]=[]),i=0;i<p.length;i++)u={id:s[p[i].id],condition:p[i].condition},this.tray_plate[y].push(u)}else for(i=0;i<p.length/3;i++)u={id:s[p[l=3*i].id],condition:p[l].condition},d={id:s[p[l+1].id],condition:p[l+1].condition},h={id:s[p[l+2].id],condition:p[l+2].condition},this.found_plate(_,[u,d,h])}for(this.special_order_pool=[],i=0;i<e.special_order.length;i++)this.special_order_pool.push([].concat([].concat(e.special_order[i])));1!=t&&(this.kebabs_max=this.get_kebabs_max(),this.icon_bar.width=0,this.label_bar.string="0/"+this.kebabs_max)},t.prototype.found_oven=function(e,t,n){for(var o,a=0;a<this.oven_array.length;a++){var i;if(0==(i=this.oven_array[a]).node.active){o=i;break}}null==o&&((i=cc.instantiate(this.oven_item)).setParent(this.group_oven_plate),(o=i.getComponent(g.default)).ts=this,this.oven_array.push(o),i.on(cc.Node.EventType.TOUCH_START,this.touch_start,this),i.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move,this),i.on(cc.Node.EventType.TOUCH_END,this.touch_end,this),i.on(cc.Node.EventType.TOUCH_CANCEL,this.touch_end,this)),this.useing_oven_tray[e]=o,o.Init(e,t,n)},t.prototype.found_plate=function(e,t){if(t[0].id==t[1].id&&t[1].id==t[2].id&&0==t[2].id)return b.default.Instance.TsInitial.ShowTips("\u51fa\u73b0\u7a7a\u76d8\u5b50"+e+",\u8bf7\u67e5\u627e"),console.error("\u521b\u5efa\u7a7a\u76d8\u5b50==============",e);for(var n,o=[],a=0;a<this.plate_array.length;a++){var i=this.plate_array[a];0!=i.node.active?i.Index==e&&o.push(i):null==n&&(n=i)}if(o.length>0&&o[o.length-1].ShowKebabs(!1),null==n){var r=cc.instantiate(this.plate_item);r.setParent(this.group_oven_plate),n=r.getComponent(m.default),this.plate_array.push(n),n.ts=this}n.Init(e,t,o.length)},t.prototype.found_tray=function(e,t,n,o){for(var a,i=0;i<this.tray_array.length;i++){var r=this.tray_array[i];if(0==r.node.active){null==a&&(a=r);break}}if(null==a){var c=cc.instantiate(this.tray_item);c.setParent(this.group_oven_plate),(a=c.getComponent(N.default)).ts=this,this.tray_array.push(a),c.on(cc.Node.EventType.TOUCH_START,this.touch_start,this),c.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move,this),c.on(cc.Node.EventType.TOUCH_END,this.touch_end,this),c.on(cc.Node.EventType.TOUCH_CANCEL,this.touch_end,this)}this.useing_oven_tray[e]=a,null==n?a.Init(e,t):a.Init2(e,t,n,o)},t.prototype.change_lv=function(e){this.lv+=e;var t=y.default.Instance.getRealLevel(this.lv);this.label_lv.string="\u7b2c"+t+"\u5173"},t.prototype.next=function(){return this.score=1e4,this.GameStop(!0),null!=this.special_order_execute?I.default.Instance.OpenUI(T.default,I.UIOrder.Window_2,!1,this):I.default.Instance.OpenUI(T.default,I.UIOrder.Window_2,!0,this),!0},t.prototype.amendment=function(){for(var e={},t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(null!=n&&0!=n.node.active)for(var o=0;o<n.KebabsData.length;o++)0!=(c=n.KebabsData[o]).id&&(null==e[""+c.id]?e[""+c.id]=1:e[""+c.id]++)}for(t=0;t<this.plate_array.length;t++){var a=this.plate_array[t];if(0!=a.node.active&&0!=a.Useing)for(o=0;o<a.KebabsData.length;o++)0!=(c=a.KebabsData[o]).id&&(null==e[""+c.id]?e[""+c.id]=1:e[""+c.id]++)}for(var i in this.tray_plate){var r=this.tray_plate[i];for(t=0;t<r.length;t++){var c;0!=(c=r[t]).id&&(null==e[""+c.id]?e[""+c.id]=1:e[""+c.id]++)}}for(var i in console.error("\u70e4\u4e32\u64cd\u4f5c\u7ed3\u675f\uff0c\u5f00\u59cb\u68c0\u6d4b\u6570\u636e\u635f\u574f"),e)(r=e[i])%3!=0&&console.error("\u70e4\u4e32"+i+"\u6570\u91cf"+r+"\u65e0\u6cd5\u5b8c\u5168\u6d88\u9664")},t.prototype.down=function(){null!=this.barbecue2_data&&(this.saveForBrowser(this.barbecue2_data,"lv_"+this.lv,"application/json"),this.saveForBrowser(this.log_record,"log_record_"+this.lv,"text/plain"))},t.prototype.saveForBrowser=function(e,t,n){if(cc.sys.isBrowser){console.log("\u6d4f\u89c8\u5668");var o=new Blob([e],{type:n}),a=document.createElement("a");a.download=t,a.innerHTML="Download File",null!=window.webkitURL?a.href=window.webkitURL.createObjectURL(o):(a.href=window.URL.createObjectURL(o),a.style.display="none",document.body.appendChild(a)),a.click()}},t.prototype.level_archive=function(){for(var e={count_down:this.count_down,star_rating:this.barbecue_lv_data.star_rating,oven_data:[],kebab_data:[],plate_data:{},special_order:this.special_order_pool,order_select:this.barbecue_lv_data.order_select},t=0;t<9;t++){var n=this.useing_oven_tray[t];if(null==n||0==n.node.active)e.oven_data[t]={value:0,condition:null},e.kebab_data[3*t]=null,e.kebab_data[3*t+1]=null,e.kebab_data[3*t+2]=null;else{e.oven_data[t]={value:n.OvenData.value,condition:n.OvenData.condition};for(var o=0;o<n.KebabsData.length;o++)e.kebab_data[3*t+o]={id:n.KebabsData[o].id,condition:n.KebabsData[o].condition}}}var a={};for(t=0;t<9;t++)if(null!=(i=this.get_plate(t)))for(e.plate_data["plate_"+t]=[],a["plate_"+t]=i.StackNum,o=0;o<i.KebabsData.length;o++)e.plate_data["plate_"+t].push({id:i.KebabsData[o].id,condition:i.KebabsData[o].condition});for(t=0;t<this.plate_array.length;t++){var i;if(0!=(i=this.plate_array[t]).node.active&&0!=i.Useing&&a["plate_"+i.Index]!=i.StackNum)for(o=i.KebabsData.length-1;o>=0;o--)e.plate_data["plate_"+i.Index].unshift({id:i.KebabsData[o].id,condition:i.KebabsData[o].condition})}for(var r in this.tray_plate){var c=void 0;switch(r){case"tray_plate_0":c=0;break;case"tray_plate_1":c=1;break;case"tray_plate_2":c=2}for(e.plate_data["plate_"+c]=[],t=0;t<this.tray_plate[r].length;t++){var s=this.tray_plate[r][t];e.plate_data["plate_"+c].push({id:s.id,condition:s.condition})}}k.default.Instance.Barbecue={data:e,lv:this.lv,kebabs_max:this.kebabs_max,compound_num:this.compound_num,special_order_execute:this.special_order_execute}},t.prototype.open_setting=function(){var e=k.default.Instance.BarbecueLv;if(e&&0==e.length)return b.default.Instance.TsInitial.ShowTips("\u5148\u7ee7\u7eed\u5b8c\u6210\u70e7\u70e4\u4efb\u52a1\u5427");this.GameStop(!0),I.default.Instance.OpenUI(w.default,I.UIOrder.Window_2,this)},t.prototype.GameDelay=function(){this.count_down<90&&(this.count_down=90,this.label_time.string=""+_.default.Instance.TimecFormat(this.count_down),this.label_time.node.color=cc.Color.RED.fromHEX("#FEFFE1")),this.special_order_execute&&this.special_order_execute.time<60&&(this.special_order_execute.time=60,this.label_time2.string=this.special_order_execute.time+"s"),this.GameStop(!1)},t.prototype.Resurgence=function(){this.count_down<=0&&(this.count_down=120,this.label_time.string=""+_.default.Instance.TimecFormat(this.count_down),this.label_time.node.color=cc.Color.RED.fromHEX("#FEFFE1")),this.special_order_execute&&this.special_order_execute.time<=0&&(this.special_order_execute.time=120,this.label_time2.string=this.special_order_execute.time+"s"),2==this.Lv&&E.default.Instance.reportUserGuide(23),this.GameStop(!1)},t.prototype.GameStop=function(e){if(this.game_stop=e,0!=this.ani_double_hit.node.active)switch(this.game_stop){case!0:this.bar_double_hit.pauseAllActions();break;case!1:this.bar_double_hit.resumeAllActions()}},t.prototype.open_explain=function(){8==this.Lv&&1!=k.default.Instance.Record[v.RecordType.game_explain8]&&(k.default.Instance.Record[v.RecordType.game_explain8]=!0,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,8));var e=f.default.Instance.BarbecueLogicConfig["lv_"+this.lv];if(null==e)return!0;var t=e.Introduce,n=!0;if(t&&1!=k.default.Instance.Record[t]){switch(k.default.Instance.Record[t]=!0,t){case v.RecordType.game_explain1:n=!1,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,6);break;case v.RecordType.game_explain2:n=!1,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,5);break;case v.RecordType.game_explain3:n=!1,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,4);break;case v.RecordType.game_explain4:n=!1,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,3);break;case v.RecordType.game_explain5:n=!1,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,2);break;case v.RecordType.game_explain6:n=!1,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,1);break;case v.RecordType.game_explain7:n=!1,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,7);break;case v.RecordType.game_explain8:n=!1,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,8);break;case v.RecordType.game_explain9:n=!1,I.default.Instance.OpenUI(D.default,I.UIOrder.Window_2,9);break;case v.RecordType.guide_prop1:n=!1,I.default.Instance.OpenUI(B.default,I.UIOrder.Window_2,1,!0,this);break;case v.RecordType.guide_prop2:n=!1,I.default.Instance.OpenUI(B.default,I.UIOrder.Window_2,2,!0,this);break;case v.RecordType.guide_prop3:n=!1,I.default.Instance.OpenUI(B.default,I.UIOrder.Window_2,3,!0,this)}k.default.Instance.AutoSyncData()}return n},t.prototype.get_eff_kebab=function(){for(var e,t=0;t<this.eff_kebabs_array.length;t++){var n=this.eff_kebabs_array[t];if(0==n.node.active){e=n;break}}if(null==e){var o=cc.instantiate(this.eff_kebabs_item);o.setParent(this.group_eff),e=o.getComponent(F.default),this.eff_kebabs_array.push(e)}return e},t.prototype.GetEffFrozen=function(e){for(var t,n=0;n<this.eff_frozen_array.length;n++){var o=this.eff_frozen_array[n];if(0==o.node.active){t=o;break}}return null==t&&(t=cc.instantiate(this.eff_frozen_tiem).getComponent(x.default),this.eff_frozen_array.push(t),console.log("\u65b0\u5efa\u51b0\u51bb\u8282\u70b9,\u603b\u957f\u5ea6",this.eff_frozen_array.length)),t.node.setParent(e),t.node.setPosition(0,0),t.node.angle=0,t},t.prototype.GetEffTinfoil=function(e){for(var t,n=0;n<this.eff_tinfoil_array.length;n++){var o=this.eff_tinfoil_array[n];if(0==o.node.active){t=o;break}}return null==t&&(t=cc.instantiate(this.eff_tinfoil_item).getComponent(P.default),this.eff_tinfoil_array.push(t),console.log("\u65b0\u5efa\u9521\u7eb8\u8282\u70b9,\u603b\u957f\u5ea6",this.eff_tinfoil_array.length)),t.node.setParent(e),t.node.setPosition(0,0),t.node.angle=0,t},t.prototype.PlayEffFlame=function(e,t,n){for(var o,a=0;a<this.eff_flame_array.length;a++){var i=this.eff_flame_array[a];if(0==i.active){o=i;break}}if(null==o){(o=new cc.Node("eff_flame")).setParent(this.group_eff);var r=o.addComponent(sp.Skeleton);this.eff_flame_array.push(o),r.loop=!1,r.premultipliedAlpha=!1,r.setCompleteListener(function(){o.active=!1})}switch(o.active=!0,t){case 1:o.x=e%3*240-240+10,o.y=210-270*Math.floor(e/3)-100,p.default.Instance.LoadSkeletonData("Bundle1UI","spine/ignite_1",o,"animation",!1);break;case 2:o.x=e%3*240-240-60+60*n+30,o.y=210-270*Math.floor(e/3)+10,p.default.Instance.LoadSkeletonData("Bundle1UI","spine/ignite_2",o,"animation",!1)}},t.prototype.PlayEffCompound=function(e){for(var t,n=0;n<this.eff_compound_array.length;n++){var o=this.eff_compound_array[n];if(0==o.node.active){t=o;break}}if(null==t){var a=cc.instantiate(this.eff_compound_item);a.setParent(this.group_eff),t=a.getComponent(C.default),this.eff_compound_array.push(t)}t.Init(e)},t.prototype.PlayEffJinbi=function(e){for(var t,n=0;n<this.eff_jinbi_array.length;n++){var o=this.eff_jinbi_array[n];if(0==o.active){t=o;break}}null==t&&((t=cc.instantiate(this.eff_jinbi)).setParent(this.group_tips),this.eff_jinbi_array.push(t)),t.setPosition(-180,420),t.active=!0;var a=this.pos_jinbi[e];cc.tween(t).to(.2,{x:a.x,y:a.y}).delay(.4).to(.3,{x:-60,y:600+y.default.Instance.ScreenAdaptive}).call(function(){t.active=!1}).start()},t.prototype.PlayEffCongrats=function(e){for(var t,n=0;n<this.eff_congrats_array.length;n++){var o=this.eff_congrats_array[n];if(0==o.node.parent.active){t=o;break}}if(null==t){var a=cc.instantiate(this.eff_congrats);a.setParent(this.group_tips),t=a.children[0].getComponent(cc.Animation),this.eff_congrats_array.push(t),t.on(cc.Animation.EventType.FINISHED,function(){t.node.parent.active=!1})}var i=Math.floor(100*Math.random())%7+1;p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/zi"+(30+i),t.node.children[0]),t.node.parent.setPosition(e),t.node.parent.active=!0,e.x<0?t.play("ani_dianzan_right"):t.play("ani_dianzan")},t.prototype.PlayEffSmoke=function(e){for(var t,n=0;n<this.eff_smoke_array.length;n++){var o=this.eff_smoke_array[n];if(0==o.node.active){t=o;break}}if(null==t){var a=cc.instantiate(this.eff_smoke);a.setParent(this.group_tips),t=a.getComponent(cc.Animation),this.eff_smoke_array.push(t),t.on(cc.Animation.EventType.FINISHED,function(){t.node.active=!1})}t.node.setPosition(e),t.node.active=!0,t.play()},t.prototype.get_guest=function(){for(var e,t=0;t<this.guest_array.length;t++){var n=this.guest_array[t];if(0==n.active){e=n;break}}e||((e=new cc.Node).setParent(this.group_guest),e.setScale(2),e.scaleX=-2,e.addComponent(sp.Skeleton).premultipliedAlpha=!1,this.guest_array.push(e));var o=e.getComponent(q.default);return o||(o=e.addComponent(q.default)),o.init(this._guestCountID++),e},t.prototype.reset_pool=function(){for(var e=0;e<this.guest_array.length;e++){var t=this.guest_array[e];if(1==t.active){var n=t.getComponent(q.default);n&&n.reset()}this.guest_array[e].active=!1}for(e=0;e<this.eff_congrats_array.length;e++)this.eff_congrats_array[e].node.parent.active=!1;for(e=0;e<this.eff_smoke_array.length;e++)this.eff_smoke_array[e].node.active=!1;for(e=0;e<this.eff_kebabs_array.length;e++)this.eff_kebabs_array[e].node.active=!1;for(e=0;e<this.eff_frozen_array.length;e++)this.eff_frozen_array[e].node.active=!1;for(e=0;e<this.eff_tinfoil_array.length;e++)this.eff_tinfoil_array[e].node.active=!1;for(e=0;e<this.eff_flame_array.length;e++)this.eff_flame_array[e].active=!1;for(e=0;e<this.eff_compound_array.length;e++)this.eff_compound_array[e].node.active=!1;for(e=0;e<this.plate_array.length;e++)this.plate_array[e].Useing=!1,this.plate_array[e].node.active=!1;for(e=0;e<this.oven_array.length;e++)this.oven_array[e].node.active=!1,this.oven_array[e].ani_kebabs.node.active=!1;for(e=0;e<this.tray_array.length;e++)this.tray_array[e].Useing=!1,this.tray_array[e].node.active=!1},Object.defineProperty(t.prototype,"Lv",{get:function(){return this.lv},set:function(e){this.lv=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Score",{get:function(){return this.score},enumerable:!1,configurable:!0}),t.prototype.restoreAuto=function(){},t.prototype._updateAutoTime=function(e){W.default.Instance.isAuto&&(this.game_stop||2!=this._autoState&&(this._curAutoTime+=e,1==this._autoState?this._curAutoTime>=this._autoTime&&(this._curAutoTime=0,this._autoTime=1e8,this._autoState=2,this._doAutoOperate()?0==this._operateType&&(this._autoState=3):(console.log("-------------------\u64cd\u4f5c\u4e0d\u6210\u529f\uff0c\u7528\u9053\u5177"),this._isMisTakeOperate?(this._operateType=0,this.use_prop(1,!1),this._autoState=3):(this._operateType=0,this._doAutoOperate(),this._autoState=3))):3==this._autoState?this._beginAuto():0==this._autoState&&this._curAutoTime>=5&&this._beginAuto()))},t.prototype._beginAuto=function(){W.default.Instance.isAuto&&(this._initAutoOperate(),this._updateAutoOperate(0,0),this._autoTime=W.default.Instance.getOperateTime(),this._curAutoTime=0,this._autoState=1)},t.prototype._initAutoOperate=function(){this._autoState=0,this._autoTime=1e5,this._curAutoTime=0,this._operateListIndex=0,this._operateLists=[],this._aimEven=null,this._operateId=0,this._operateType=0;var e=this._filtrateOperates();e&&(this._operateType=e.operateType,this._aimEven=e.aimEven,this._operateId=e.operateId,this._operateLists=e.operateEvenList)},t.prototype._doAutoOperate=function(){var e=!1;if(this._isMisTakeOperate){var t=this._getOneEvenCanOperate();if(t){var n=t.id,o=t.index,a=t.oven,i=this._getOneFreeEvenAndNoCombine(n);i&&(this.select_data={item:a,index:o},e=this._moveOperate(this.select_data,i.oven,i.index))}return console.error("\u80e1\u4e71\u64cd\u4f5c"),e}if(this._operateType){if(1==this._operateType){if(!this._aimEven)return console.error("\u6d88\u9664\u4e3a\u4ec0\u4e48\u6ca1\u6709\u79fb\u52a8\u7684\u76ee\u6807\u5730"),e;for(var r=this._aimEven.KebabsData,c=(o=-1,[]),s=0;s<r.length;s++){if(!(n=(d=r[s]).id)){o=s;break}n!=this._operateId&&d.condition==v.KebabCondition.normal&&c.push(s)}-1==o?c.length>0?(this.select_data={item:this._aimEven,index:c[0]},(l=this._getOneFreeEven([this._aimEven]))?e=this._moveOperate(this.select_data,l.oven,l.index):console.error("\u627e\u4e0d\u5230\u53ef\u4ee5\u632a\u52a8\u7684\u7a7a\u4f4d")):console.error("\u627e\u4e0d\u5230\u53ef\u4ee5\u632a\u52a8\u7684\u7a7a\u4f4d"):(l=this._getOneEvenById(this._operateId,[this._aimEven]))?(this.select_data={item:l.item,index:l.index},e=this._moveOperate(this.select_data,this._aimEven,o)):console.error("\u627e\u4e0d\u5230\u53ef\u4ee5\u632a\u52a8\u7684\u7a7a\u4f4d")}else if(2==this._operateType){var l,u=this._operateLists[this._operateListIndex];if(o=-1,u)for(r=u.KebabsData,s=0;s<r.length;s++){var d;if((d=r[s]).condition==v.KebabCondition.normal&&(n=d.id)){o=s;break}}-1==o?console.error("???\u6ca1\u6709\u627e\u5230\u53ef\u4ee5\u79fb\u52a8\u7684\u70e4\u4e32\uff1f\uff1f\uff1f\uff1f"):(this.select_data={item:u,index:o},(l=this._getOneFreeEven([u]))?e=this._moveOperate(this.select_data,l.oven,l.index):console.error("???\u6ca1\u6709\u7a7a\u4f4d--\u552f\u4e00\u7684\u7a7a\u4f4d\u662f\u81ea\u5df1"))}}else e=!0,this.use_prop(1,!1);return e},t.prototype._checkDoMisTake=function(){W.default.Instance.isAuto&&(this._isMisTakeOperate||(this._isMisTakeOperate=!(Math.random()>=W.default.Instance.misRate),this._isMisTakeOperate&&W.default.Instance.resetMisTime()))},t.prototype._updateAutoOperate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n,o=0;if(1==this._operateType)if(2==e)o=100;else{var a=this._getOneEvenById(this._operateId,[this._aimEven]);a?(o=1,this.select_data={item:a.item,index:a.index}):console.error("???\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7684id",this._operateId)}else if(2==this._operateType)if(1==t)if(this._operateListIndex++,n=this._operateLists[this._operateListIndex]){for(var i=n.KebabsData,r=0;r<i.length;r++)if(i[r].id){o=1,this.select_data={item:n,index:r};break}}else o=100;else if((n=this._operateLists[this._operateListIndex])&&n){for(i=n.KebabsData,r=0;r<i.length;r++)if(i[r].id){o=1,this.select_data={item:n,index:r};break}this.select_data||console.error("\u6ca1\u6709\u627e\u5230\u53ef\u4ee5\u79fb\u52a8\u7684")}else console.error("\u6ca1\u6709\u627e\u5230\u53ef\u4ee5\u79fb\u52a8\u7684");else 0==this._operateType&&(o=1);return o},t.prototype._filtrateOperates=function(){for(var e=[],t=null,n=0,o=-1,a={},i={},r=[],c=[],s=[],l=0;l<this.useing_oven_tray.length;l++){var u=this.useing_oven_tray[l];if(null!=u&&0!=u.node.active){var d=!1,h=!1,p=0,f=u.KebabsData.length;u.OvenData.condition==v.OvenCondition.one_grid&&(p=1,f=2);for(var _=p;_<f;_++){var y=u.KebabsData[_],b=y.id;y.condition==v.KebabCondition.normal?b?(a[b]||(a[b]=0),a[b]+=1,i[b]||(i[b]=[]),i[b].push(u)):h=!0:y.condition==v.KebabCondition.frozen&&(d=!0)}h&&s.push(u),d||u.OvenData.condition==v.OvenCondition.one_grid?c.push(u):r.push(u)}}if(r.length<=0)return console.error("\u6bcf\u4e2a\u70e4\u7089\u90fd\u6709\u51b0\u51bb\u70e4\u4e32\uff0c\u6ca1\u6709\u80fd\u591f\u7ec4\u62103\u4e2a\u5408\u6210\u7684\u60c5\u51b5\u4e86??? \u53ea\u6709\u6b63\u5e38\u548c\u51b0\u51bb\u7684\u70e4\u4e32"),null;if(s.length<=0)return console.error("\u6ca1\u6709\u7a7a\u683c\u7684\u70e4\u7089\u6216\u8005\u70e4\u76d8"),null;e:for(var m in a)if(Object.prototype.hasOwnProperty.call(a,m)&&(A=a[m])>=3){var g=[],I=i[m];for(l=0;l<I.length;l++){var T=I[l];if(r.includes(T)){if(g.includes(T)){t=T,o=Number(m);break}g.push(T)}}t||(t=g[0],o=Number(m)),t?n=1:console.error("\u80fd\u591f\u4e09\u4e2a\u6d88\u9664\uff0c\u4f46\u662f\u627e\u4e0d\u5230\u4e00\u4e2a\u653e\u6ee1\u7684\u76d8\u5b50???");break e}if(0==n){var k={};for(l=0;l<9;l++)if(R=this.get_plate(l)){T=this.useing_oven_tray[l];var S=R.KebabsData;p=0,f=T.KebabsData.length,T.OvenData.condition==v.OvenCondition.one_grid&&(p=1,f=2);for(var w=p;w<f;w++){var O=S[w];O.condition==v.KebabCondition.normal&&(b=O.id)&&(k[b]||(k[b]=[]),k[b].push(R))}}var F=[],B=!1;for(var m in k)if(Object.prototype.hasOwnProperty.call(k,m)){var x=k[m],P=a[m]?a[m]:0;if(x.length+P>=3){B=!0;var C=3-P;F=x.splice(0,C);break}}if(n=2,B){for(l=0;l<F.length;l++){var R=F[l];(T=this.useing_oven_tray[R.Index])&&!e.includes(T)&&e.push(T)}e=e.sort(function(e,t){for(var n=0,o=0,a=0;a<3;a++)e.KebabsData[a].id&&(n+=1),t.KebabsData[a].id&&(o+=1);return n-o})}else{var N=this.useing_oven_tray.length,A=1e4;for(l=0;l<N;l++)if(null!=(T=this.useing_oven_tray[l])&&0!=T.node.active&&T.OvenData.condition==v.OvenCondition.tray){var D=T.KebabsData,U=0;for(_=0;_<D.length;_++)(S=D[_]).id&&U++;U<=A&&(A=U,e[0]=T)}1e4==A&&(n=0)}}return 0==n?(console.error("\u70e4\u7089\u6ca1\u67093\u4e2a\u53ef\u6d88\u9664\uff0c\u5207\u6258\u76d8\u4e5f\u6ca1\u6709\u80fd\u591f\u632a\u7a7a\u66f4\u65b0"),null):{aimEven:t,operateId:o,operateType:n,operateEvenList:e}},t.prototype._moveOperate=function(e,t,n){var o=this;if(e&&e.item&&t&&t.KebabsData){if(t.KebabsData[n]&&t.KebabsData[n].id)return console.error("====\u79fb\u52a8\u8fc7\u53bb\u7684\u4f4d\u7f6e\u7528\u70e4\u4e32",t.Index,t.KebabsData[n].id),!1;this.select_data=e;var a=e.item,i=e.index;return a.node_kebabs[i].opacity=0,a.eff_select.active=!0,p.default.Instance.LoadSpriteFrame2("Bundle1UI","BarbecueStandUI/kebab/kebab_"+a.KebabsData[i].id,null,function(e,t){o.node_item.getComponent(cc.Sprite).spriteFrame=t;var n=a.node.convertToWorldSpaceAR(a.node_kebabs[i].getPosition()),r=o.node.convertToNodeSpaceAR(n);o.node_item.setPosition(r),o.node_item.active=!0}),this.scheduleOnce(function(){o.operate_succeed(t,n,!1)},.5),!0}},t.prototype._getOneFreeEven=function(e){void 0===e&&(e=[]);for(var t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(n&&!e.includes(n)&&null!=n&&0!=n.node.active&&n.OvenData.condition!=v.OvenCondition.video&&n.OvenData.condition!=v.OvenCondition.cover){var o=n.KebabsData,a=0,i=o.length;n.OvenData.condition==v.OvenCondition.one_grid&&(a=1,i=2);for(var r=a;r<i;r++)if(!o[r].id)return{oven:n,index:r}}}return null},t.prototype._getOneEvenById=function(e,t){void 0===t&&(t=[]);for(var n=0;n<this.useing_oven_tray.length;n++){var o=this.useing_oven_tray[n];if(o&&o.OvenData.condition!=v.OvenCondition.video&&o.OvenData.condition!=v.OvenCondition.cover&&o&&!t.includes(o))for(var a=o.KebabsData,i=0;i<a.length;i++){var r=a[i];if(r.condition==v.KebabCondition.normal&&r.id==e)return{item:o,index:i}}}return null},t.prototype._getOneEvenCanOperate=function(e){void 0===e&&(e=[]);var t=[].concat(this.useing_oven_tray);t=t.sort(function(){return Math.random()-.5});for(var n=0;n<t.length;n++){var o=t[n];if(o&&!e.includes(o)&&null!=o&&0!=o.node.active&&o.OvenData.condition!=v.OvenCondition.video&&o.OvenData.condition!=v.OvenCondition.cover)for(var a=o.KebabsData,i=0;i<a.length;i++){var r=a[i];if(r.condition==v.KebabCondition.normal){var c=r.id;if(c)return{oven:o,index:i,id:c}}}}return null},t.prototype._getOneFreeEvenAndNoCombine=function(e){if(!e)return null;var t=[].concat(this.useing_oven_tray);t=t.sort(function(){return Math.random()-.5});for(var n=0;n<t.length;n++){var o=t[n];if(o&&null!=o&&0!=o.node.active&&o.OvenData.condition!=v.OvenCondition.video&&o.OvenData.condition!=v.OvenCondition.cover){var a=o.KebabsData;if(o.OvenData.condition==v.OvenCondition.one_grid){if(!a[1].id)return{oven:o,index:1}}else{for(var i=-1,r=0;r<a.length;r++)0==a[r].id&&(i=r);if(-1!=i&&(a[0].id+a[1].id+a[2].id+e)/3!=e)return{oven:o,index:i}}}}return null},t.prototype._checkHasFrozen=function(){if(!this.node||!this.node.isValid)return null;var e=!1;e:for(var t=0;t<this.useing_oven_tray.length;t++){var n=this.useing_oven_tray[t];if(null!=n&&0!=n.node.active&&n.OvenData.condition!=v.OvenCondition.video){var o=0,a=n.KebabsData.length;n.OvenData.condition==v.OvenCondition.one_grid&&(o=1,a=2);for(var i=o;i<a;i++){var r=n.KebabsData[i];if(r.id,r.condition==v.KebabCondition.frozen){e=!0;break e}}}}return e},t.prototype._checkIsCanCompount=function(){if(!this.node||!this.node.isValid)return null;for(var e=null,t=0,n=-1,o=[],a={},i={},r=[],c=[],s=[],l=0,u=0;u<this.useing_oven_tray.length;u++){var d=this.useing_oven_tray[u];if(null!=d&&0!=d.node.active)if(d.OvenData.condition!=v.OvenCondition.video){var h=!1,p=!1,f=0,_=d.KebabsData.length;d.OvenData.condition==v.OvenCondition.one_grid&&(f=1,_=2);for(var y=f;y<_;y++){var b=d.KebabsData[y],m=b.id;b.condition==v.KebabCondition.normal?m?(a[m]||(a[m]=0),a[m]+=1,i[m]||(i[m]=[]),i[m].push(d)):(p=!0,l++):b.condition==v.KebabCondition.frozen&&(h=!0)}p&&s.push(d),h||d.OvenData.condition==v.OvenCondition.one_grid?c.push(d):r.push(d)}else o.push(d)}if(r.length<=0)return console.error("\u6bcf\u4e2a\u70e4\u7089\u90fd\u6709\u51b0\u51bb\u70e4\u4e32\uff0c\u6ca1\u6709\u80fd\u591f\u7ec4\u62103\u4e2a\u5408\u6210\u7684\u60c5\u51b5\u4e86??? \u53ea\u6709\u6b63\u5e38\u548c\u51b0\u51bb\u7684\u70e4\u4e32"),null;if(s.length<=0)return console.error("\u6ca1\u6709\u7a7a\u683c\u7684\u70e4\u7089\u6216\u8005\u70e4\u76d8"),null;e:for(var g in a)if(Object.prototype.hasOwnProperty.call(a,g)&&a[g]>=3){var I=[],T=i[g];for(u=0;u<T.length;u++){var k=T[u];if(r.includes(k)){if(I.includes(k)){e=k,n=Number(g);break}I.push(k)}}e||(e=I[0],n=Number(g)),e?t=1:console.error("\u80fd\u591f\u4e09\u4e2a\u6d88\u9664\uff0c\u4f46\u662f\u627e\u4e0d\u5230\u4e00\u4e2a\u653e\u6ee1\u7684\u76d8\u5b50???");break e}return{aimEven:e,operate:t,operateId:n,freeNum:l,videoOvens:o}},t.prototype.getOneRoleSound=function(e,t){for(var n=[].concat(e).sort(function(){return Math.random()-.5}),o=null,a=0;a<n.length;a++){var i=n[a],r=J.default.Instance.getVoiceConfigById(i);if(r&&(t?r[t]&&(o={index:e.indexOf(i),roleId:i,voice:r[t]}):o={roleId:i}),o)break}return o},t.prototype.doRoleVoicePlay=function(e,t,n){return void 0===n&&(n=!1),u(this,void 0,void 0,function(){var o,a,i,r=this;return d(this,function(){return Object.values(this._voiceLists).length>0&&"man_2_15"!=e&&"woman_1_15"!=e?[2]:(o=this.guest_queue[t],(a=o.getComponent(q.default))?(o.zIndex=cc.macro.MAX_ZINDEX,o.posIndex=t,i=a.GuestCountId,a.addPlayVoice({voice:e,guestId:i,cb:function(e,t){J.default.Instance.showTalkSpine(t),r._showVoiceSpeek(e,t)},finishCb:function(){}},function(e){if(e){var t=e.GuestCountId;if(delete r._voiceLists[t],t==r._compountGuestId&&!r._isGameOver){r.guest_queue.splice(0,1),r.guest_queue_ids.shift(),r.guest_move(!0,!1);for(var n=0;n<r.guest_queue.length;n++)cc.tween(r.guest_queue[n]).to(.4,{x:120*n}).start(),r.guest_queue[n].zIndex=100-120*n}}if(r._compountGuestId=-1,console.log("this._isGameOver==========",r._isGameOver),r._isGameOver)for(n=0;n<r.guest_queue.length;n++){var o=r.guest_queue[n];if(o&&o.active){var a=o.getComponent(q.default);a&&a.leave()}}})&&(this._voiceLists[i]||(this._voiceLists[i]=[]),this._voiceLists[i].push(e),n&&-1==this._compountGuestId&&(a.NeedMove=!0,this._compountGuestId=i))):console.error("-------\uff1f\uff1f\u6ca1\u6709\u811a\u672c\uff1f"),[2])})})},t.prototype.checkCompoundPlaySound=function(e,t,n){if(e&&!(e.length<0)){var o=null,a=[e[0]],i=J.default.Instance.turnFoodIdToType(n);return i&&(o=this.getOneRoleSound(a,i)),o||(i=t<.5?v.VoiceType.taste:v.VoiceType.efficient,o=this.getOneRoleSound(a,i)),!(!o||!o.voice||(this._playVoiceCount=this._compoundCount,this.doRoleVoicePlay(o.voice,o.index,!0),0))}},t.prototype.checkOperateSound=function(e){if(0==this._compountOCount){if(this._noOperateTime+=e,this._noOperateTime>10){this._compountOCount=2,this._noOperateTime=0;var t=[].concat(this.guest_queue_ids),n=this.getOneRoleSound(t,v.VoiceType.urge);n&&this.doRoleVoicePlay(n.voice,n.index)}}else this.resetOpenrateTime()},t.prototype.reduceOperateCompountCount=function(e){this._compountOCount-=e,this._compountOCount<=0&&(this._compountOCount=0)},t.prototype.resetOpenrateTime=function(){this._noOperateTime=0},t.prototype.checkNoCompountSound=function(){var e=null,t=this._checkIsCanCompount();return t&&1!=t.operate&&t.freeNum<=2&&(e=t.videoOvens.length?this.getOneRoleSound(this.guest_queue_ids,v.VoiceType.oven):this.getOneRoleSound(this.guest_queue_ids,v.VoiceType.prop)),!(!e||!e.voice||(this.doRoleVoicePlay(e.voice,e.index),0))},t.prototype.checkTimeSound=function(e,t){if(e<40&&t>=40){var n=this.getOneRoleSound(this.guest_queue_ids,v.VoiceType.time);return n&&this.doRoleVoicePlay(n.voice,n.index),!0}return!1},t.prototype.checkFrozenSound=function(e){if(0==this._frozenCount){if(this._frozenTime+=e,this._frozenTime>5&&(this._frozenTime=0,this._checkHasFrozen())){this._frozenCount=2;var t=this.getOneRoleSound(this.guest_queue_ids,v.VoiceType.thaw);t&&this.doRoleVoicePlay(t.voice,t.index)}}else this.resetFrozenTime()},t.prototype.reduceFrozenCount=function(e){this._frozenCount-=e,this._frozenCount<=0&&(this._frozenCount=0)},t.prototype.resetFrozenTime=function(){this._frozenTime=0},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueStandPre/BarbecueStandPre",t.className="BarbecueStandInterface",l([Q(cc.Prefab)],t.prototype,"oven_item",void 0),l([Q(cc.Prefab)],t.prototype,"tray_item",void 0),l([Q(cc.Prefab)],t.prototype,"plate_item",void 0),l([Q(cc.Prefab)],t.prototype,"special_order_item",void 0),l([Q(cc.Prefab)],t.prototype,"eff_kebabs_item",void 0),l([Q(cc.Prefab)],t.prototype,"eff_frozen_tiem",void 0),l([Q(cc.Prefab)],t.prototype,"eff_tinfoil_item",void 0),l([Q(cc.Prefab)],t.prototype,"eff_compound_item",void 0),l([Q(cc.Prefab)],t.prototype,"eff_jinbi",void 0),l([Q(cc.Prefab)],t.prototype,"eff_congrats",void 0),l([Q(cc.Prefab)],t.prototype,"eff_smoke",void 0),l([Q(cc.Node)],t.prototype,"bg_1",void 0),l([Q(cc.Node)],t.prototype,"bg_2",void 0),l([Q(sp.Skeleton)],t.prototype,"spine_bg",void 0),l([Q(cc.Node)],t.prototype,"btn_stop",void 0),l([Q(cc.Label)],t.prototype,"label_score",void 0),l([Q(cc.Label)],t.prototype,"label_time",void 0),l([Q(cc.Animation)],t.prototype,"ani_time",void 0),l([Q(cc.Node)],t.prototype,"bar_score",void 0),l([Q(cc.Label)],t.prototype,"label_lv",void 0),l([Q(cc.Node)],t.prototype,"group_oven_plate",void 0),l([Q(cc.Node)],t.prototype,"group_kebabs",void 0),l([Q(cc.Animation)],t.prototype,"icon_pan",void 0),l([Q(cc.Node)],t.prototype,"node_item",void 0),l([Q(cc.Node)],t.prototype,"group_eff",void 0),l([Q(cc.Node)],t.prototype,"group_tips",void 0),l([Q(cc.Node)],t.prototype,"group_guest",void 0),l([Q(cc.Animation)],t.prototype,"ani_group_order",void 0),l([Q(cc.Sprite)],t.prototype,"bar_order",void 0),l([Q(cc.Label)],t.prototype,"label_time2",void 0),l([Q(cc.Node)],t.prototype,"layout_order",void 0),l([Q(cc.Node)],t.prototype,"btn_video",void 0),l([Q(cc.Animation)],t.prototype,"ani_double_hit",void 0),l([Q(cc.Label)],t.prototype,"label_double_hit",void 0),l([Q(cc.Label)],t.prototype,"label_double_hit2",void 0),l([Q(cc.Node)],t.prototype,"bar_double_hit",void 0),l([Q(cc.Animation)],t.prototype,"order_tips",void 0),l([Q(cc.Node)],t.prototype,"icon_finger",void 0),l([Q(cc.Animation)],t.prototype,"ani_finger",void 0),l([Q(cc.Label)],t.prototype,"label_finger",void 0),l([Q(cc.Node)],t.prototype,"eff_huoyan",void 0),l([Q(sp.Skeleton)],t.prototype,"spine_tips",void 0),l([Q(cc.Node)],t.prototype,"icon_bar",void 0),l([Q(cc.Label)],t.prototype,"label_bar",void 0),l([Q(cc.Label)],t.prototype,"label_speek",void 0),l([Q(cc.RichText)],t.prototype,"tips_prop",void 0),l([Q(cc.Animation)],t.prototype,"ani_kaishiyingye",void 0),l([Q(cc.Animation)],t.prototype,"ani_nandutisheng",void 0),l([Q(cc.Animation)],t.prototype,"ani_shijianbuzu",void 0),l([Q(cc.Node)],t.prototype,"btn_begin",void 0),l([Q(cc.Node)],t.prototype,"btn_down",void 0),l([Q(cc.Node)],t.prototype,"btn_add",void 0),l([Q(cc.Node)],t.prototype,"btn_sub",void 0),l([Q(cc.Node)],t.prototype,"btn_next",void 0),l([Q(j.default)],t.prototype,"btn_prop",void 0),l([Q(cc.Node)],t.prototype,"btn_tips",void 0),l([Q(cc.Node)],t.prototype,"pack_mask",void 0),l([Q(V.default)],t.prototype,"moreClickUtil",void 0),l([Q(cc.Node)],t.prototype,"noTimeGameNode",void 0),l([Q(cc.Node)],t.prototype,"bottom",void 0),l([Q(cc.Node)],t.prototype,"icon_3",void 0),l([Z],t)}(h.default);i.default=$,cc._RF.pop(),cc._RF.pop()},{}],BundleManger:[function(e,t,n){"use strict";cc._RF.push(t,"740b2Jk/3tBi7FG4MJz6RXV","BundleManger");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"f41d2E6X95KmoBE/IlMcciX","BundleManger");var r=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c},c=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},s=function(e,t){var n,o,a,r,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":i(Symbol))&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,d=(l.property,function(){function e(){this.BundleDeps={},this.spriteframe_asserts={},this.prefab_asserts={},this.skeletondata_asserts={},this.audioclip_asserts={},this.audioclip_asserts2={}}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),e.prototype.PromiseAll=function(e,t){var n=this;return void 0===t&&(t=1),new Promise(function(o){if(null!=e&&0!=e.length){for(var a=[],i=0;i<e.length;i++){a.indexOf(e[i])<0&&null==cc.assetManager.getBundle(e[i])&&a.push(e[i]);var r=n.BundleDeps[e[i]];if(r&&r.deps.length>0)for(var l=0;l<r.deps.length;l++)a.indexOf(r.deps[l])<0&&null==cc.assetManager.getBundle(r.deps[l])&&a.push(r.deps[l])}if(0!=a.length){var u=[];for(i=0;i<a.length;i++)u.push(n.LoadBundle(a[i]));Promise.all(u).then(function(a){return c(n,void 0,void 0,function(){var n,i,r;return s(this,function(c){switch(c.label){case 0:for(n=!0,i=0;i<a.length;i++)if(0==a[i]){n=!1;break}return 1!=n?[3,1]:(o(!0),[3,5]);case 1:return t>0?[4,this.delayed()]:[3,4];case 2:return c.sent(),r=o,[4,this.PromiseAll(e,t-1)];case 3:return r.apply(void 0,[c.sent()]),[3,5];case 4:o(!1),c.label=5;case 5:return[2]}})})})}else o(!0)}else o(!0)})},e.prototype.LoadBundle=function(e){var t=this;return new Promise(function(n){return c(t,void 0,void 0,function(){return s(this,function(){return cc.assetManager.loadBundle(e,function(t){t?(console.warn("\u52a0\u8f7dbundle=="+e+"\u5931\u8d25",t),n(!1)):n(!0)}),[2]})})})},e.prototype.delayed=function(){return new Promise(function(e){setTimeout(function(){e()},1e3)})},e.prototype.LoadSpriteFrame=function(e,t,n,o){return void 0===o&&(o=!1),c(this,void 0,void 0,function(){var a,i;return s(this,function(r){switch(r.label){case 0:return null==(a=n.getComponent(cc.Sprite))?[2]:1!=o?[3,2]:[4,this.spriteframe_network(t)];case 1:return i=r.sent(),[3,4];case 2:return[4,this.spriteframe_bundle(e,t)];case 3:i=r.sent(),r.label=4;case 4:return null==i?[2]:a?(a.spriteFrame=i,[2]):[2]}})})},e.prototype.spriteframe_bundle=function(e,n){var o=this;return new Promise(function(a){return c(o,void 0,void 0,function(){var o,i=this;return s(this,function(r){switch(r.label){case 0:return null==this.spriteframe_asserts[n]?[3,1]:(a(this.spriteframe_asserts[n]),[3,4]);case 1:return null!=(o=cc.assetManager.getBundle(e))?[3,3]:[4,t.Instance.PromiseAll([e])];case 2:r.sent(),o=cc.assetManager.getBundle(e),r.label=3;case 3:if(null==o)return a(null),[2];o.load(n,cc.SpriteFrame,function(t,o){t?(console.error(e,"\u56fe\u7247\u8d44\u6e90",n,"\u62a5\u9519",t),a(null)):(i.spriteframe_asserts[n]=o,a(o))}),r.label=4;case 4:return[2]}})})})},e.prototype.LoadSpriteFrame2=function(e,t,n,o){return c(this,void 0,void 0,function(){var a;return s(this,function(i){switch(i.label){case 0:return[4,this.spriteframe_bundle(e,t)];case 1:return a=i.sent(),o(n,a),[2]}})})},e.prototype.spriteframe_network=function(e){return new Promise(function(t){cc.loader.load({url:e,type:"png"},function(n,o){n&&(console.error("\u7f51\u7edc\u52a0\u8f7d\u56fe\u7247\u5931\u8d25",e),t(null));var a=new cc.SpriteFrame(o);t(a)})})},e.prototype.LoadPrefab=function(e,t){var n=this;return new Promise(function(o){return c(n,void 0,void 0,function(){var n,a=this;return s(this,function(i){switch(i.label){case 0:return null==this.prefab_asserts[e]?[3,1]:(o(this.prefab_asserts[e]),[3,4]);case 1:return null!=(n=cc.assetManager.getBundle(t))?[3,3]:[4,this.PromiseAll([t])];case 2:i.sent(),n=cc.assetManager.getBundle(t),i.label=3;case 3:if(null==n)return o(null),[2];n.load(e,cc.Prefab,function(n,i){n?(console.error(t,"\u9884\u5236\u4f53\u8d44\u6e90",e,"\u62a5\u9519",n),o(null)):(a.prefab_asserts[e]=i,o(i))}),i.label=4;case 4:return[2]}})})})},e.prototype.LoadSkeletonData=function(e,t,n,o,a,i){return c(this,void 0,void 0,function(){var r,c;return s(this,function(s){switch(s.label){case 0:return r=n.getComponent(sp.Skeleton),[4,this.skeletondata_bundle(t,e)];case 1:return null==(c=s.sent())?[2]:(r.skeletonData=c,null!=o&&r.setAnimation(0,o,a),null!=i&&r.setSkin(i),[2])}})})},e.prototype.LoadRoleSpine=function(e,t,n,o){return c(this,void 0,void 0,function(){var a;return s(this,function(i){switch(i.label){case 0:return[4,this.skeletondata_bundle(t,e)];case 1:return null==(a=i.sent())?[2]:(n.skeletonData=a,o(),[2])}})})},e.prototype.skeletondata_bundle=function(e,t){var n=this;return new Promise(function(o){return c(n,void 0,void 0,function(){var n,a=this;return s(this,function(i){switch(i.label){case 0:return null==this.skeletondata_asserts[e]?[3,1]:(o(this.skeletondata_asserts[e]),[3,4]);case 1:return null!=(n=cc.assetManager.getBundle(t))?[3,3]:[4,this.PromiseAll([t])];case 2:i.sent(),n=cc.assetManager.getBundle(t),i.label=3;case 3:if(null==n)return o(null),[2];n.load(e,sp.SkeletonData,function(n,i){n?(console.error(t,"\u52a8\u753b\u8d44\u6e90",e,"\u62a5\u9519",n),o(null)):(a.skeletondata_asserts[e]=i,o(i))}),i.label=4;case 4:return[2]}})})})},e.prototype.LoadJson=function(e){return new Promise(function(t){cc.resources.load(e,cc.JsonAsset,function(e,n){e?(console.error("\u672c\u5730\u52a0\u8f7djson\u5931\u8d25"),t(null)):t(n.json)})})},e.prototype.LoadJson2=function(e,t){var n=this;return new Promise(function(o){return c(n,void 0,void 0,function(){var n;return s(this,function(a){switch(a.label){case 0:return null!=(n=cc.assetManager.getBundle(e))?[3,2]:[4,this.PromiseAll([e])];case 1:a.sent(),n=cc.assetManager.getBundle(e),a.label=2;case 2:return null==n?(o(null),[2]):(n.load(t,function(n,a){n?(console.error(e,"json\u914d\u7f6e",t,"\u62a5\u9519",n),o(null)):o(a.json)}),[2])}})})})},e.prototype.LoadVersion=function(){try{return new Promise(function(e){cc.resources.load("lw_version",cc.JsonAsset,function(t,n){t?(console.error("\u672c\u5730======\u52a0\u8f7djson\u5931\u8d25"),e("0.0.0")):e(n.json.version)})})}catch(e){return console.log("\u62a5\u9519\u4e86",e),"0.0.0"}},e.prototype.LoadBundleDeps=function(){var e=this;return new Promise(function(t){return c(e,void 0,void 0,function(){var e,n,o=this;return s(this,function(a){switch(a.label){case 0:console.log("\u5f00\u59cb\u52a0\u8f7d\u52a0\u8f7dbundle\u4f9d\u8d56"),a.label=1;case 1:return a.trys.push([1,2,,5]),cc.resources.load("bundle_deps",cc.JsonAsset,function(e,n){return n=n?n.json:null,c(o,void 0,void 0,function(){var o;return s(this,function(a){switch(a.label){case 0:return e?(console.error("\u52a0\u8f7dbundle\u4f9d\u8d56\u5931\u8d25",e),[4,this.delayed()]):[3,3];case 1:return a.sent(),o=t,[4,this.LoadBundleDeps()];case 2:return o.apply(void 0,[a.sent()]),[3,4];case 3:console.log("\u52a0\u8f7dbundle\u4f9d\u8d56\u6210\u529f"),t(n),a.label=4;case 4:return[2]}})})}),[3,5];case 2:return e=a.sent(),console.error("\u52a0\u8f7dbundle\u4f9d\u8d56\u5931\u8d25try catch",e),[4,this.delayed()];case 3:return a.sent(),n=t,[4,this.LoadBundleDeps()];case 4:return n.apply(void 0,[a.sent()]),[3,5];case 5:return[2]}})})})},e.prototype.LoadAudioClip=function(e){var t=this;return new Promise(function(n){return c(t,void 0,void 0,function(){var t,o=this;return s(this,function(a){switch(a.label){case 0:return null!=this.audioclip_asserts[e]?[3,3]:null!=this.audioclip_asserts2[e]?(n(null),[2]):(this.audioclip_asserts2[e]=!0,null!=(t=cc.assetManager.getBundle("BundleSound"))?[3,2]:[4,this.PromiseAll(["BundleSound"])]);case 1:a.sent(),t=cc.assetManager.getBundle("BundleSound"),a.label=2;case 2:return null==t?(n(null),[2]):(t.load(e,cc.AudioClip,function(t,a){t?(console.error("\u97f3\u9891\u5931\u8d25",t),n(null)):(o.audioclip_asserts[e]=a,n(a))}),[3,4]);case 3:n(this.audioclip_asserts[e]),a.label=4;case 4:return[2]}})})})},e.prototype.loadBundleRes=function(e,t,n,o){var a=this;return new Promise(function(i){return c(a,void 0,void 0,function(){var a;return s(this,function(r){switch(r.label){case 0:return[4,this.LoadBundle2(e)];case 1:return null==(a=r.sent())?(i(null),[2]):(a.load(t,n,function(e,t){e?(console.error("err",e),o&&o(null),i(null)):(o&&o(t),i(t))}),[2])}})})})},e.prototype.LoadBundle2=function(e){return new Promise(function(t){var n=cc.assetManager.getBundle(e);n?t(n):cc.assetManager.loadBundle(e,function(e,n){t(e?null:n)})})},e._instance=null,t=r([u],e)}());a.default=d,cc._RF.pop(),cc._RF.pop()},{}],ButtonEffect:[function(e,t,n){"use strict";cc._RF.push(t,"9c2f77b349LsJD6guACRBlv","ButtonEffect");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"6906fW/XtFM/78OIxYnwQzq","ButtonEffect");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("SoundManager"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.change=!0,t}return s(t,e),t.prototype.start=function(){1==this.change?this.transition=cc.Button.Transition.SCALE:this.transition=cc.Button.Transition.NONE,this.node.on(cc.Node.EventType.TOUCH_START,this._down,this)},t.prototype._down=function(){u.default.Instance.PlaySound("g127_click")},l([p()],t.prototype,"change",void 0),l([h],t)}(cc.Button);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],CollectGiftsInterface:[function(e,t,n){"use strict";cc._RF.push(t,"45358mpY0lIf6440jd7chbW","CollectGiftsInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"ade89tjhclIc72B98VRl8nX","CollectGiftsInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("ShopAwardInterface"),h=o("SoundManager"),p=o("StoragerManager"),f=o("TypeManager"),_=o("UIManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.btn_go=null,t.btn_award=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_go.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_award.on(cc.Node.EventType.TOUCH_END,this.award,this)},t.prototype.onInit=function(e){this.ts=e[0],0==p.default.Instance.Record[f.RecordType.collect_gift]?(this.btn_go.active=!1,this.btn_award.active=!0):(this.btn_go.active=!0,this.btn_award.active=!1),h.default.Instance.PlaySound("book_pop_open")},t.prototype.award=function(){null==p.default.Instance.BarbecueProp.prop_1?p.default.Instance.BarbecueProp.prop_1=1:p.default.Instance.BarbecueProp.prop_1++,null==p.default.Instance.BarbecueProp.prop_2?p.default.Instance.BarbecueProp.prop_2=1:p.default.Instance.BarbecueProp.prop_2++,p.default.Instance.Record[f.RecordType.collect_gift]=!0,p.default.Instance.AutoSyncData(!1,!0),this.ts.btn_gift.active=!1,this.ts.rightBtnLayout.updateLayout(),this.close(),_.default.Instance.OpenUI(d.default,_.UIOrder.Window_2,[{type:"prop_1",value:1},{type:"prop_2",value:1}],"\u9080\u8bf7\u6709\u793c")},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){_.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle7Pre",t.prefabUrl="PlatformPre/CollectGiftsPre",t.className="CollectGiftsInterface",l([v(cc.Animation)],t.prototype,"ani_popup",void 0),l([v(cc.Node)],t.prototype,"btn_close",void 0),l([v(cc.Node)],t.prototype,"btn_go",void 0),l([v(cc.Node)],t.prototype,"btn_award",void 0),n=l([b],t)}(u.default);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],DataManager:[function(e,t,n){"use strict";cc._RF.push(t,"bb009AhyF5JCZzPGPJHYFmf","DataManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"11d28jxBCtMUYmHir17Xfxv","DataManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var s=o("FunctionManager"),l=o("GameManger"),u=o("StoragerManager"),d=o("TypeManager"),h=cc._decorator,p=h.ccclass,f=(h.property,function(){function e(){var e,t,n,o,a,i;this.KebabsConfigObject={},this.KebabsConfig_Source={},this.bgConfig=[],this.tableConfig=[],this.DoorwayStoolPos=[cc.v2(475,-112),cc.v2(554,-112),cc.v2(630,-112),cc.v2(505,-165),cc.v2(582,-165),cc.v2(657,-165)],this.SecondStool=[cc.v2(109,-442),cc.v2(109,-530),cc.v2(205,-442),cc.v2(205,-530),cc.v2(304,-442),cc.v2(304,-530)],this.third_floor_stool=[cc.v2(-35,680),cc.v2(70,680),cc.v2(175,680),cc.v2(280,680),cc.v2(30,590),cc.v2(135,590),cc.v2(240,590),cc.v2(345,590)],this.third_drifting_queue=[cc.v2(540,610),cc.v2(540,540),cc.v2(540,460),cc.v2(620,440),cc.v2(690,390)],this.SideData={stool:[cc.v2(100,52),cc.v2(15,52),cc.v2(-75,52),cc.v2(-190,-42),cc.v2(-75,-127),cc.v2(15,-127),cc.v2(100,-127),cc.v2(210,-40)],main_course:[cc.v2(-35,30),cc.v2(40,30)],second_course:[cc.v2(-75,40),cc.v2(5,40),cc.v2(80,40),cc.v2(-75,10),cc.v2(5,10),cc.v2(80,10)],rice:[cc.v2(80,60),cc.v2(5,60),cc.v2(-70,60),cc.v2(-105,25),cc.v2(-70,-10),cc.v2(5,-10),cc.v2(80,-10),cc.v2(105,25)]},this.CircleData={stool:[cc.v2(103,53),cc.v2(9,80),cc.v2(-80,55),cc.v2(-160,-30),cc.v2(-90,-125),cc.v2(10,-150),cc.v2(110,-120),cc.v2(175,-40)],main_course:[cc.v2(-27,30),cc.v2(27,30)],second_course:[cc.v2(50,55),cc.v2(0,70),cc.v2(-50,55),cc.v2(-50,5),cc.v2(0,-5),cc.v2(50,5)],rice:[cc.v2(65,75),cc.v2(0,95),cc.v2(-65,75),cc.v2(-90,25),cc.v2(-65,-20),cc.v2(0,-35),cc.v2(65,-20),cc.v2(90,25)]},this.GuestTalkData=((e={}).queue_up=["\u4eba\u53ef\u771f\u591a\u554a","\u6392\u5230\u7b2c\u51e0\u4e2a\u4e86","\u4e0a\u6b21\u6392\u4e86\u534a\u4e2a\u65f6\u8fb0\uff0c\u4eca\u5929\u5e94\u8be5\u597d\u70b9...","\u597d\u997f\u554a\uff0c\u5565\u65f6\u5019\u80fd\u5403\u4e0a\u996d","\u8fd9\u91cc\u4ec0\u4e48\u65f6\u5019\u5f00\u4e86\u5bb6\u5ba2\u6808\uff1f"],e.move_3=["\u62db\u724c\u83dc\u770b\u8d77\u6765\u4e0d\u9519","\u7b49\u4f1a\u5403\u70b9\u5565","\u5927\u53a8\u624b\u827a\u4e0d\u9519\uff0c\u53ef\u4ee5\u5e38\u6765","\u6c5f\u5357\u771f\u662f\u5bcc\u8d35\u8ff7\u4eba\u773c\u554a~","\u4ec0\u4e48\u65f6\u5019\u6765\u5403\u4e00\u987f"],e.wait_order_food=["\u5403\u7684\u8fd8\u633a\u591a","\u9694\u58c1\u684c\u7684\u83dc\u770b\u8d77\u6765\u4e0d\u9519","\u4e0a\u6b21\u554a\u4f1f\u8bf4\u8fd9\u9053\u83dc\u597d\u5403","\u4e0a\u6b21\u70b9\u7684\u83dc\u90fd\u5403\u4e0d\u5b8c","\u6211\u8981\u5403\u6d77\u9c9c"],e.wait_food=["\u597d\u997f\u554a","\u600e\u4e48\u8fd8\u4e0d\u4e0a\u83dc","\u9694\u58c1\u7684\u83dc\u90fd\u4e0a\u4e86","\u534a\u906e\u9762\u79bb\u8fd9\u591a\u8fdc\uff1f","\u6628\u5929\u5df7\u53e3\u7684\u4e24\u5bb6\u4eba\u6253\u8d77\u6765\u4e86","\u4eca\u5e74\u8d76\u8003\u7684\u8003\u9898\u662f\u4ec0\u4e48\u5462","\u7b2c\u4e00\u6b21\u5403\u8fd9\u5bb6\uff0c\u4e0d\u77e5\u9053\u597d\u4e0d\u597d\u5403","\u542c\u8bf4\u8fd9\u91cc\u80fd\u5403\u4e0a\u5bab\u5ef7\u5fa1\u5bb4","\u9694\u58c1\u684c\u95fb\u8d77\u6765\u597d\u9999"],e.food=["\u771f\u9999\u554a","\u8fd9\u4e2a\u770b\u8d77\u6765\u4e0d\u9519","\u591a\u5403\u70b9\uff0c\u592a\u7626\u4e86","\u8fd9\u9053\u83dc\u597d\u5403","\u5403\u5b8c\u53ef\u4ee5\u5230\u9694\u58c1\u8336\u94fa\u8bd5\u8bd5\u6c5f\u5357\u70b9\u8336","\u8fd8\u662f\u6c38\u5b89\u697c\u7684\u6bd4\u8f83\u597d\u5403","\u8fd9\u4e2a\u6c41\u62cc\u996d\u771f\u7684\u4e00\u7edd","\u8fd9\u4e2a\u5473\u9053\uff0c\u662f\u6211\u8001\u6bcd\u4eb2\u7684\u624b\u827a","\u4eca\u671d\u6709\u9152\u4eca\u671d\u9189\uff01","\u5e72\u676f\uff01","\u8fd9\u9053\u83dc\u5c45\u7136\u5728\u95ea\u95ea\u53d1\u5149\uff01","\u4eba\u751f\u5f97\u610f\u9700\u5c3d\u6b22\uff01"],e.move_4=["\u5927\u53a8\u624b\u827a\u4e0d\u9519\uff0c\u53ef\u4ee5\u5e38\u6765","\u8d70\u4e86\u8d70\u4e86","\u4e0b\u6b21\u53eb\u4e0a\u9694\u58c1\u8001\u738b\u4e00\u8d77\u6765","\u5403\u8fd9\u4e00\u987f\u597d\u8d35\u554a","\u4ef7\u683c\u8fd8\u633a\u5b9e\u60e0","\u996d\u540e\u767e\u6b65\u8d70\uff0c\u6d3b\u5230\u4e5d\u5341\u4e5d","\u638c\u67dc\u4e0b\u6b21\u8fd8\u6765\u5149\u987e","\u6253\u6742\u5c0f\u4e8c\u6a21\u6837\u8fd8\u633a\u6807\u81f4","\u53e3\u5473\u9f50\u5168\uff0c\u4e0b\u6b21\u53eb\u4e0d\u5403\u8fa3\u7684\u670b\u53cb\u6765","\u4eca\u665a\u8fd8\u6765\u8fd9\u91cc\u5403"],e),this.FacilityOrder=((t={})[d.ScenceArea.doorway]=[d.FacilityType.outdoor_wall,d.FacilityType.queue_stool,d.FacilityType.outdoor_decorate1,d.FacilityType.snack_platform,d.FacilityType.sunshade,d.FacilityType.outdoor_ground],t[d.ScenceArea.first_canteen]=[d.FacilityType.door,d.FacilityType.counter,d.FacilityType.counter_decorate1,d.FacilityType.counter_decorate2,d.FacilityType.counter_decorate3,d.FacilityType.wine_cabinet,d.FacilityType.display_board,d.FacilityType.door_decorate,d.FacilityType.table_1,d.FacilityType.table_2,d.FacilityType.table_3,d.FacilityType.table_4,d.FacilityType.condiment_area,d.FacilityType.stairs_decorate,d.FacilityType.hall_ground,d.FacilityType.hall_wall],t[d.ScenceArea.first_kitchen]=[d.FacilityType.vegetable_rack1,d.FacilityType.vegetable_rack2,d.FacilityType.hearth,d.FacilityType.chopping_board,d.FacilityType.serving_board,d.FacilityType.scullery,d.FacilityType.kitchen_ground,d.FacilityType.kitchen_wall],t[d.ScenceArea.first_room1]=[d.FacilityType.room1_cabinet,d.FacilityType.room1_decorate1,d.FacilityType.room1_decorate2,d.FacilityType.room1_tabel,d.FacilityType.room1_sofa,d.FacilityType.room1_wall,d.FacilityType.room1_ground],t[d.ScenceArea.first_room2]=[d.FacilityType.room2_cabinet,d.FacilityType.room2_decorate1,d.FacilityType.room2_decorate2,d.FacilityType.room2_tabel,d.FacilityType.room2_sofa,d.FacilityType.room2_wall,d.FacilityType.room2_ground],t[d.ScenceArea.first_room3]=[d.FacilityType.room3_cabinet,d.FacilityType.room3_decorate1,d.FacilityType.room3_decorate2,d.FacilityType.room3_tabel,d.FacilityType.room3_sofa,d.FacilityType.room3_wall,d.FacilityType.room3_ground],t[d.ScenceArea.backyard]=[d.FacilityType.backyard_pool,d.FacilityType.backyard_land1,d.FacilityType.backyard_desk,d.FacilityType.backyard_land2,d.FacilityType.backyard_land3,d.FacilityType.backyard_land4,d.FacilityType.backyard_rail,d.FacilityType.backyard_bonsai,d.FacilityType.backyard_decorate1,d.FacilityType.backyard_decorate2,d.FacilityType.backyard_ground,d.FacilityType.backyard_background],t[d.ScenceArea.escort]=[d.FacilityType.escort_door,d.FacilityType.escort_desk,d.FacilityType.escort_ground,d.FacilityType.escort_flowerpot,d.FacilityType.escort_box,d.FacilityType.escort_cargo,d.FacilityType.escort_lawn1,d.FacilityType.escort_lawn2,d.FacilityType.escort_quiver,d.FacilityType.escort_stone,d.FacilityType.escort_flagging,d.FacilityType.escort_dumbbell1,d.FacilityType.escort_dumbbell2,d.FacilityType.escort_bonsai,d.FacilityType.escort_shelf,d.FacilityType.escort_barbell,d.FacilityType.escort_deadman,d.FacilityType.escort_rail,d.FacilityType.escort_carriage,d.FacilityType.escort_board],t[d.ScenceArea.exhibition]=[d.FacilityType.exhibition_exhibits1,d.FacilityType.exhibition_booth11,d.FacilityType.exhibition_exhibits2,d.FacilityType.exhibition_booth10,d.FacilityType.exhibition_exhibits3,d.FacilityType.exhibition_booth12,d.FacilityType.exhibition_exhibits4,d.FacilityType.exhibition_booth13,d.FacilityType.exhibition_exhibits5,d.FacilityType.exhibition_booth7,d.FacilityType.exhibition_exhibits6,d.FacilityType.exhibition_exhibits7,d.FacilityType.exhibition_exhibits8,d.FacilityType.exhibition_exhibits9,d.FacilityType.exhibition_booth3,d.FacilityType.exhibition_exhibits10,d.FacilityType.exhibition_exhibits11,d.FacilityType.exhibition_exhibits12,d.FacilityType.exhibition_booth6,d.FacilityType.exhibition_exhibits13,d.FacilityType.exhibition_exhibits14,d.FacilityType.exhibition_booth5,d.FacilityType.exhibition_exhibits15,d.FacilityType.exhibition_exhibits16,d.FacilityType.exhibition_exhibits17,d.FacilityType.exhibition_exhibits18,d.FacilityType.exhibition_booth4,d.FacilityType.exhibition_exhibits19,d.FacilityType.exhibition_booth9,d.FacilityType.exhibition_exhibits20,d.FacilityType.exhibition_booth8,d.FacilityType.exhibition_exhibits21,d.FacilityType.exhibition_ground,d.FacilityType.exhibition_wall,d.FacilityType.exhibition_billboard,d.FacilityType.exhibition_screen,d.FacilityType.exhibition_counter,d.FacilityType.exhibition_book,d.FacilityType.exhibition_tickets,d.FacilityType.exhibition_lamp,d.FacilityType.exhibition_booth,d.FacilityType.exhibition_booth2,d.FacilityType.exhibition_booth14,d.FacilityType.exhibition_table,d.FacilityType.exhibition_table2,d.FacilityType.exhibition_shelf,d.FacilityType.exhibition_picture,d.FacilityType.exhibition_sugar,d.FacilityType.exhibition_picture2,d.FacilityType.exhibition_fan,d.FacilityType.exhibition_shelf2,d.FacilityType.exhibition_cucurbit,d.FacilityType.exhibition_picture3,d.FacilityType.exhibition_basket,d.FacilityType.exhibition_wallet,d.FacilityType.exhibition_vase,d.FacilityType.exhibition_vase2,d.FacilityType.exhibition_lamp2,d.FacilityType.exhibition_screen2,d.FacilityType.exhibition_candelabrum,d.FacilityType.exhibition_picture4,d.FacilityType.exhibition_bonsai,d.FacilityType.exhibition_washbasin,d.FacilityType.exhibition_chronometer,d.FacilityType.exhibition_counter2,d.FacilityType.exhibition_gate,d.FacilityType.exhibition_cabinet,d.FacilityType.exhibition_cabinet2,d.FacilityType.exhibition_table3,d.FacilityType.exhibition_shelf3,d.FacilityType.exhibition_jade],t[d.ScenceArea.parking]=[d.FacilityType.park_sedan_1,d.FacilityType.park_sedan_2,d.FacilityType.park_sedan_3,d.FacilityType.park_sedan_4,d.FacilityType.park_sedan_5,d.FacilityType.park_ground_1,d.FacilityType.park_ground_2,d.FacilityType.park_ground_3,d.FacilityType.park_ground_4,d.FacilityType.park_ground_5,d.FacilityType.park_decorate1,d.FacilityType.park_decorate2,d.FacilityType.park_plant],t[d.ScenceArea.second_room1]=[d.FacilityType.second_floor_counter,d.FacilityType.second_floor_counter_wall,d.FacilityType.second_floor_ground1,d.FacilityType.second_floor_decorate1,d.FacilityType.second_floor_decorate2,d.FacilityType.second_floor_stool,d.FacilityType.second_floor_bed1,d.FacilityType.second_floor_tea1,d.FacilityType.second_floor_wall1,d.FacilityType.second_floor_ground2,d.FacilityType.second_floor_carpet1,d.FacilityType.second_floor_screen1,d.FacilityType.second_floor_vase1,d.FacilityType.second_floor_lantern1],t[d.ScenceArea.second_room2]=[d.FacilityType.second_floor_bed2,d.FacilityType.second_floor_pool,d.FacilityType.second_floor_wall2,d.FacilityType.second_floor_ground3,d.FacilityType.second_floor_screen2,d.FacilityType.second_floor_door,d.FacilityType.second_floor_vase2,d.FacilityType.second_floor_desk1,d.FacilityType.second_floor_lantern2,d.FacilityType.second_floor_tea2],t[d.ScenceArea.second_canteen]=[d.FacilityType.second_floor_fabrication,d.FacilityType.second_floor_steamer,d.FacilityType.second_floor_cabinet,d.FacilityType.second_floor_stove,d.FacilityType.second_floor_wall3,d.FacilityType.second_floor_ground4,d.FacilityType.second_floor_table1,d.FacilityType.second_floor_table2],t[d.ScenceArea.third_canteen]=[d.FacilityType.third_floor_counter,d.FacilityType.third_floor_divination,d.FacilityType.third_floor_ground3,d.FacilityType.third_floor_screen2,d.FacilityType.third_floor_screen3,d.FacilityType.third_floor_decorate1,d.FacilityType.third_floor_decorate2,d.FacilityType.third_floor_decorate3,d.FacilityType.third_floor_decorate4,d.FacilityType.third_floor_decorate5,d.FacilityType.third_floor_plant,d.FacilityType.third_floor_platform,d.FacilityType.third_floor_desk1,d.FacilityType.third_floor_shelf,d.FacilityType.third_floor_bridge,d.FacilityType.third_floor_spring,d.FacilityType.third_floor_drifting,d.FacilityType.third_floor_pavilion,d.FacilityType.third_film_screen,d.FacilityType.third_floor_desk2,d.FacilityType.third_film_stool,d.FacilityType.third_floor_decorate6,d.FacilityType.third_floor_decorate7],t[d.ScenceArea.third_room1]=[d.FacilityType.third_floor_ground1,d.FacilityType.third_floor_wall1,d.FacilityType.third_floor_bed,d.FacilityType.third_floor_stool2,d.FacilityType.third_floor_stone,d.FacilityType.third_floor_decorate8,d.FacilityType.third_floor_decorate9,d.FacilityType.third_floor_room],t[d.ScenceArea.third_room2]=[d.FacilityType.third_floor_ground2,d.FacilityType.third_floor_wall2,d.FacilityType.third_floor_table1,d.FacilityType.third_floor_table2,d.FacilityType.third_floor_decorate10,d.FacilityType.third_floor_decorate11],t),this.FacilityDefault=[d.FacilityType.queue_stool,d.FacilityType.outdoor_decorate1,d.FacilityType.backyard_pool,d.FacilityType.backyard_desk,d.FacilityType.backyard_land1,d.FacilityType.backyard_land2,d.FacilityType.backyard_land3,d.FacilityType.backyard_land4,d.FacilityType.chopping_board,d.FacilityType.serving_board,d.FacilityType.scullery],this.FacilityBasics=[d.FacilityType.door,d.FacilityType.outdoor_ground,d.FacilityType.outdoor_wall,d.FacilityType.backyard_ground,d.FacilityType.backyard_background,d.FacilityType.backyard_pool,d.FacilityType.hall_ground,d.FacilityType.hall_wall,d.FacilityType.kitchen_ground,d.FacilityType.kitchen_wall,d.FacilityType.room1_ground,d.FacilityType.room2_ground,d.FacilityType.room3_ground,d.FacilityType.room1_wall,d.FacilityType.room2_wall,d.FacilityType.room3_wall,d.FacilityType.second_floor_counter_wall,d.FacilityType.second_floor_ground1,d.FacilityType.second_floor_wall1,d.FacilityType.second_floor_ground2,d.FacilityType.second_floor_wall2,d.FacilityType.second_floor_ground3,d.FacilityType.second_floor_wall3,d.FacilityType.second_floor_ground4,d.FacilityType.third_floor_drifting,d.FacilityType.third_floor_plant,d.FacilityType.third_floor_bridge,d.FacilityType.third_floor_spring,d.FacilityType.third_floor_desk1,d.FacilityType.third_floor_shelf,d.FacilityType.third_floor_divination,d.FacilityType.third_floor_ground1,d.FacilityType.third_floor_ground2,d.FacilityType.third_floor_ground3,d.FacilityType.third_floor_wall1,d.FacilityType.third_floor_wall2,d.FacilityType.park_ground_1,d.FacilityType.park_ground_2,d.FacilityType.park_ground_3,d.FacilityType.park_ground_4,d.FacilityType.park_ground_5,d.FacilityType.escort_door,d.FacilityType.escort_ground,d.FacilityType.exhibition_ground,d.FacilityType.exhibition_wall],this.FacilityUnlockOrder=[{are:d.ScenceArea.doorway,index:0},{are:d.ScenceArea.first_canteen,index:0},{are:d.ScenceArea.first_kitchen,index:0},{are:d.ScenceArea.first_room1,index:0},{are:d.ScenceArea.first_canteen,index:1},{are:d.ScenceArea.first_kitchen,index:1},{are:d.ScenceArea.first_room2,index:0},{are:d.ScenceArea.backyard,index:0},{are:d.ScenceArea.first_room3,index:0},{are:d.ScenceArea.doorway,index:1},{are:d.ScenceArea.first_canteen,index:2},{are:d.ScenceArea.first_kitchen,index:2},{are:d.ScenceArea.first_room1,index:1},{are:d.ScenceArea.first_room2,index:1},{are:d.ScenceArea.first_room3,index:1},{are:d.ScenceArea.escort,index:0},{are:d.ScenceArea.first_canteen,index:3},{are:d.ScenceArea.first_kitchen,index:3},{are:d.ScenceArea.first_room1,index:2},{are:d.ScenceArea.first_room2,index:2},{are:d.ScenceArea.first_room3,index:2},{are:d.ScenceArea.parking,index:0},{are:d.ScenceArea.second_room1,index:0},{are:d.ScenceArea.second_room2,index:0},{are:d.ScenceArea.second_canteen,index:0},{are:d.ScenceArea.exhibition,index:0},{are:d.ScenceArea.doorway,index:2},{are:d.ScenceArea.backyard,index:1},{are:d.ScenceArea.first_canteen,index:4},{are:d.ScenceArea.first_kitchen,index:4},{are:d.ScenceArea.first_room1,index:3},{are:d.ScenceArea.first_room2,index:3},{are:d.ScenceArea.first_room3,index:3},{are:d.ScenceArea.parking,index:1},{are:d.ScenceArea.second_room1,index:1},{are:d.ScenceArea.second_room2,index:1},{are:d.ScenceArea.second_canteen,index:1},{are:d.ScenceArea.third_canteen,index:0},{are:d.ScenceArea.third_room1,index:0},{are:d.ScenceArea.third_room2,index:0},{are:d.ScenceArea.first_room1,index:4},{are:d.ScenceArea.first_room2,index:4},{are:d.ScenceArea.first_room3,index:4},{are:d.ScenceArea.doorway,index:3},{are:d.ScenceArea.escort,index:1},{are:d.ScenceArea.first_canteen,index:5},{are:d.ScenceArea.first_kitchen,index:5},{are:d.ScenceArea.first_room1,index:5},{are:d.ScenceArea.first_room2,index:5},{are:d.ScenceArea.first_room3,index:5},{are:d.ScenceArea.third_canteen,index:1},{are:d.ScenceArea.third_room1,index:1},{are:d.ScenceArea.third_room2,index:1},{are:d.ScenceArea.backyard,index:2},{are:d.ScenceArea.parking,index:2},{are:d.ScenceArea.exhibition,index:1},{are:d.ScenceArea.doorway,index:4},{are:d.ScenceArea.first_canteen,index:6},{are:d.ScenceArea.first_kitchen,index:6},{are:d.ScenceArea.first_room1,index:6},{are:d.ScenceArea.first_room2,index:6},{are:d.ScenceArea.first_room3,index:6},{are:d.ScenceArea.second_room1,index:2},{are:d.ScenceArea.second_room2,index:2},{are:d.ScenceArea.second_canteen,index:2},{are:d.ScenceArea.third_canteen,index:2},{are:d.ScenceArea.third_room1,index:2},{are:d.ScenceArea.third_room2,index:2}],this.DiningTablePos1=[cc.v2(-735,255),cc.v2(-630,255),cc.v2(-735,175),cc.v2(-630,175)],this.DiningTablePos2=[cc.v2(-700,-210),cc.v2(-700,-145),cc.v2(-700,-85),cc.v2(-700,-25),cc.v2(-700,40),cc.v2(-700,100)],this.FoodTablePos=[cc.v2(-1055,-100),cc.v2(-1055,-180)],this.DiningTablePos3=[cc.v2(-605,-199),cc.v2(-605,-107.5),cc.v2(-605,-21),cc.v2(-605,65)],this.StaffPath=((n={}).staff_1=null,n),this.StaffData=((o={}).staff_1=null,o),this.StaffWorkDuration=140,this.StaffWorkIncrease=6,this.StaffResetDuration=60,this.StaffResetLower=6,this.StaffStandPos=((a={}).staff_1=cc.v2(20,3),a.staff_2=cc.v2(18,6),a.staff_3=cc.v2(9,4),a.staff_4=cc.v2(6,7),a.staff_5=cc.v2(9,4),a.staff_9=cc.v2(12,15),a.staff_10=cc.v2(21,22),a.staff_11=cc.v2(33,13),a.staff_28=cc.v2(24,24),a.staff_104=cc.v2(37,24),a.staff_105=cc.v2(15,30),a.staff_106=cc.v2(40,14),a),this.ExhibitionCleanPos=[cc.v2(26,27),cc.v2(22,27),cc.v2(31,21),cc.v2(31,17),cc.v2(24,22),cc.v2(16,14),cc.v2(8,15),cc.v2(8,15),cc.v2(8,15),cc.v2(2,14),cc.v2(16,19),cc.v2(16,19),cc.v2(8,21),cc.v2(1,20),cc.v2(8,27),cc.v2(8,27),cc.v2(8,27),cc.v2(14,27),cc.v2(17,22),cc.v2(17,17),cc.v2(24,11)],this.StaffWorkTime=15,this.GrideSize=50,this.FirstFloorOrigin=cc.v2(-1125,475),this.FirstFloorData=[],this.FirstFloorJson=[],this.FirstFloorSize=cc.size(45,26),this.SecondFloorOrigin=cc.v2(-1175,925),this.SecondFloorData=[],this.SecondFloorJson=[],this.SecondFloorSize=cc.size(47,37),this.ExhibitionOrigin=cc.v2(-1072,825),this.ExhibitionData=[],this.ExhibitionJson=[],this.ExhibitionSize=cc.size(43,33),this.TablePos=((i={}).table_1=cc.v2(18,8),i.table_2=cc.v2(24,8),i.table_3=cc.v2(18,14),i.table_4=cc.v2(24,14),i.room1_tabel=cc.v2(34,2),i.room2_tabel=cc.v2(34,10),i.room3_tabel=cc.v2(34,20),i.second_floor_table1=cc.v2(35,15),i.second_floor_table2=cc.v2(35,23),i.second_floor_bed1=cc.v2(27,15),i.second_floor_bed2=cc.v2(5,18),i),this.EscortQueueData=[cc.v2(-270,-490),cc.v2(-210,-490),cc.v2(-150,-460),cc.v2(-130,-395),cc.v2(-130,-330),cc.v2(-130,-265),cc.v2(-130,-200)],this.ExhibitionPath=[[cc.v2(240,-550)],[cc.v2(30,-550)],[cc.v2(-80,-550),cc.v2(-80,-370),cc.v2(525,-370),cc.v2(520,-250)],[cc.v2(520,-40)],[cc.v2(520,30),cc.v2(90,30)],[cc.v2(-270,160)],[cc.v2(-270,230),cc.v2(-530,230)],[cc.v2(-640,230)],[cc.v2(-780,230)],[cc.v2(-950,230),cc.v2(-950,70)],[cc.v2(-460,-80)],[cc.v2(-460,-240)],[cc.v2(-700,-280)],[cc.v2(-790,-280),cc.v2(-790,30),cc.v2(-990,30),cc.v2(-990,-200)],[cc.v2(-990,-510),cc.v2(-690,-510)],[cc.v2(-550,-510)],[cc.v2(-450,-510)],[cc.v2(-320,-510)],[cc.v2(-220,-510),cc.v2(-220,-250)],[cc.v2(-220,-50)],[cc.v2(-220,250),cc.v2(160,250)],[cc.v2(550,80)]]}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t.instance||(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),e.prototype.getKebabsConfigById=function(e){return this.KebabsConfigObject&&this.KebabsConfigObject[e]},e.prototype.getKebabsConfigBySource=function(e){return this.KebabsConfig_Source&&this.KebabsConfig_Source[e]},e.prototype.checkKebabIsUnlock=function(e){var t=this.getKebabsConfigById(e),n=!1;return t&&(t.Source==d.KebabsSource.midAutumn?n=u.default.Instance.unlockKebabs.includes(e):t.Source==d.KebabsSource.common&&e<=s.default.Instance.UnlockKebabsNum()&&(n=!0)),n},e.prototype.getUnlockKebabsNum=function(){return s.default.Instance.UnlockKebabsNum()+u.default.Instance.unlockKebabs.length},e.prototype.getIsMoreUnlockKabab=function(){return this.getUnlockKebabsNum()>20},e.prototype.hasNewSkin=function(){var e=s.default.Instance.UnlockKebabsNum(),t=!1;return(u.default.Instance.newUnlockKebab.length>0||u.default.Instance.newBg.length>0||u.default.Instance.newTable.length>0)&&(t=!0),t||u.default.Instance.oldKebakNum<e&&(t=!0),t},e.prototype.MapInit=function(){for(var e=0;e<t.instance.FirstFloorSize.width;e++){this.FirstFloorData[e]=[];for(var n=0;n<t.instance.FirstFloorSize.height;n++)this.FirstFloorData[e][n]=this.FirstFloorJson[n*t.instance.FirstFloorSize.width+e]}for(e=0;e<t.Instance.FirstFloorData.length;e++)for(n=0;n<t.Instance.FirstFloorData[e].length;n++)switch(t.Instance.FirstFloorData[e][n]){case 2:l.default.Instance.FirstFloorAStar.setWalkable(e,n,!1)}for(e=0;e<t.instance.SecondFloorSize.width;e++)for(this.SecondFloorData[e]=[],n=0;n<t.instance.SecondFloorSize.height;n++)this.SecondFloorData[e][n]=this.SecondFloorJson[n*t.instance.SecondFloorSize.width+e];for(e=0;e<t.Instance.SecondFloorData.length;e++)for(n=0;n<t.Instance.SecondFloorData[e].length;n++)switch(t.Instance.SecondFloorData[e][n]){case 2:l.default.Instance.SecondFloorAStar.setWalkable(e,n,!1)}for(e=0;e<t.instance.ExhibitionSize.width;e++)for(this.ExhibitionData[e]=[],n=0;n<t.instance.ExhibitionSize.height;n++)this.ExhibitionData[e][n]=this.ExhibitionJson[n*t.instance.ExhibitionSize.width+e];for(e=0;e<t.Instance.ExhibitionData.length;e++)for(n=0;n<t.Instance.ExhibitionData[e].length;n++)switch(t.Instance.ExhibitionData[e][n]){case 2:l.default.Instance.ExhibitionAStar.setWalkable(e,n,!1)}},t=c([p],e)}());i.default=f,cc._RF.pop(),cc._RF.pop()},{}],DayChallangeManager:[function(e,t,n){"use strict";cc._RF.push(t,"4d70dw278pJyrOUNBzBRD9n","DayChallangeManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"f4bbdBMtGBFi6A5GuJ49wzj","DayChallangeManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},s=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},l=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var u=o("Util"),d=o("BundleManger"),h=o("GameManger"),p=o("StoragerManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(){function e(){this.inDetailPanel=!1,this.kebabReward=[62,63,64,65,66,67,68],this._rewardConfig={},this._rewardConfig_day={},this.testday=0,this.testLevel=0,this.unlockLevel=29,this.freeNum=1,this.rewardRates=[.4,.6,.8,1],this.totalNum=0,this.curNum=0,this.pos={1:cc.v3(0,-143,0),2:cc.v3(0,-300,0),3:cc.v3(0,-143,0),4:cc.v3(0,-300,0),5:cc.v3(0,-143,0),6:cc.v3(0,-390,0),7:cc.v3(0,-270,0)}}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t.instance||(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),e.prototype.isAllGetKebabReward=function(){for(var e=!0,n=0;n<t.Instance.kebabReward.length;n++){var o=t.Instance.kebabReward[n];if(!p.default.Instance.unlockKebabs.includes(o)){e=!1;break}}return e},Object.defineProperty(e.prototype,"rewardConfig",{get:function(){return this._rewardConfig},enumerable:!1,configurable:!0}),e.prototype.dayLevelToKey=function(e,t){return 36+3*(e-1)+(3-t)},e.prototype.getRewardById=function(e){return this.rewardConfig&&this.rewardConfig[e]},e.prototype.getRewardListByDay=function(e){var t=[];if(this._rewardConfig_day&&this._rewardConfig_day[e]){for(var n=this._rewardConfig_day[e],o=[],a=0;a<this.kebabReward.length;a++){var i=this.kebabReward[a];p.default.Instance.unlockKebabs.includes(i)||o.push(i)}var r=-1;o.length>0&&(r=o[Math.floor(Math.random()*o.length)]),t=-1!=r?[n.Reaward1,n.Reaward2,n.Reaward3,["kebabs",r]]:[n.Reaward1,n.Reaward2,n.Reaward3,["gold",500]]}return t},e.prototype.init=function(){var e=this;return new Promise(function(t){return s(e,void 0,void 0,function(){var e,n,o,a,i;return l(this,function(r){switch(r.label){case 0:return[4,d.default.Instance.LoadJson("challange_reward")];case 1:if(e=r.sent())for(n=e.reward,o=n.length,a=0;a<o;a++)i=n[a],this._rewardConfig[i.id]=i,this._rewardConfig_day[i.date]=i;return t(),[2]}})})})},Object.defineProperty(e.prototype,"useFreeNum",{get:function(){var e=0;return p.default.Instance.dayChallage&&p.default.Instance.dayChallage.freeNum&&(e=p.default.Instance.dayChallage.freeNum),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"difficultLevel",{get:function(){if(this.testLevel)return this.testLevel;var e=0;p.default.Instance.dayChallage&&p.default.Instance.dayChallage.failNum&&(e=p.default.Instance.dayChallage.failNum-1);var t=3;return e?e>=2&&e<4?t=2:e>=4&&(t=1):t=3,t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dayConfigKey",{get:function(){if(this.testday)return this.testday;var e=h.default.Instance.LoginTime;return p.default.Instance.dayChallage&&p.default.Instance.dayChallage.dayTime&&(e=p.default.Instance.dayChallage.dayTime),u.default.getDayByTime(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"winNum",{get:function(){var e=0;return p.default.Instance.dayChallage&&p.default.Instance.dayChallage.winNum&&(e=p.default.Instance.dayChallage.winNum),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failNum",{get:function(){var e=0;return p.default.Instance.dayChallage&&p.default.Instance.dayChallage.failNum&&(e=p.default.Instance.dayChallage.failNum),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bestProgress",{get:function(){var e=0;return p.default.Instance.dayChallage&&p.default.Instance.dayChallage.rate&&(e=p.default.Instance.dayChallage.rate),e},enumerable:!1,configurable:!0}),e.prototype.updateWinNum=function(e){void 0===e&&(e=1),p.default.Instance.dayChallage.winNum+=e},e.prototype.updateFailNum=function(e){void 0===e&&(e=1),p.default.Instance.dayChallage.failNum+=e},e.prototype.updateFreeNum=function(e){void 0===e&&(e=1),p.default.Instance.dayChallage.freeNum+=e},e.prototype.updateRateNum=function(e){var t=0;p.default.Instance.dayChallage&&p.default.Instance.dayChallage.rate&&(t=p.default.Instance.dayChallage.rate),e>=t&&(p.default.Instance.dayChallage.rate=e)},t=c([_],e)}());i.default=y,cc._RF.pop(),cc._RF.pop()},{}],FacilityInterface:[function(e,t,n){"use strict";cc._RF.push(t,"210c7kahwxDF4WySqlTuc85","FacilityInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"1c887dqrFpCnqw3Bk3ASFbU","FacilityInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("BarbecueLvInterface"),h=o("BundleManger"),p=o("DataManager"),f=o("FunctionManager"),_=o("GameManger"),y=o("InfoManager"),b=o("PoolManager"),v=o("StoragerManager"),m=o("TypeManager"),g=o("UIManager"),I=o("List"),T=o("facility_array_item2"),k=cc._decorator,S=k.ccclass,w=k.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.container=null,t.label_area=null,t.btn_close=null,t.btn_show_hide=null,t.btn_outdoor=null,t.btn_first_floor=null,t.btn_second_floor=null,t.btn_third_floor=null,t.btn_exhibition=null,t.btn_escort=null,t.btn_backyard=null,t.btn_doorway=null,t.btn_parking=null,t.btn_first_kitchen=null,t.btn_first_canteen=null,t.btn_first_room1=null,t.btn_first_room2=null,t.btn_first_room3=null,t.btn_second_canteen=null,t.btn_second_room1=null,t.btn_second_room2=null,t.btn_third_canteen=null,t.btn_third_room1=null,t.btn_third_room2=null,t.List=null,t.scroll_view_item=null,t.group_condition=null,t.label_condition=null,t.label_condition2=null,t.btn_unlock=null,t.label_unlock=null,t.btn_color=[new cc.Color(165,146,130,255),new cc.Color(149,118,58,255),new cc.Color(178,162,110,255),new cc.Color(255,251,250,255)],t.area_btn={},t.facility_tips=[],t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.bg.on(cc.Node.EventType.TOUCH_END,this.click_close,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.click_close,this),this.btn_show_hide.on(cc.Node.EventType.TOUCH_END,this.show_hide,this),this.btn_outdoor.on(cc.Node.EventType.TOUCH_END,this.change_scence.bind(this,m.GameScence.outdoor_scence,!0),this),this.btn_first_floor.on(cc.Node.EventType.TOUCH_END,this.change_scence.bind(this,m.GameScence.first_floor_scence,!0),this),this.btn_second_floor.on(cc.Node.EventType.TOUCH_END,this.change_scence.bind(this,m.GameScence.second_floor_scence,!0),this),this.btn_third_floor.on(cc.Node.EventType.TOUCH_END,this.change_scence.bind(this,m.GameScence.third_floor_scence,!0),this),this.btn_parking.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.parking),this),this.btn_doorway.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.doorway),this),this.btn_backyard.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.backyard),this),this.btn_escort.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.escort),this),this.btn_exhibition.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.exhibition),this),this.btn_first_kitchen.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.first_kitchen),this),this.btn_first_canteen.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.first_canteen),this),this.btn_first_room1.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.first_room1),this),this.btn_first_room2.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.first_room2),this),this.btn_first_room3.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.first_room3),this),this.btn_second_canteen.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.second_canteen),this),this.btn_second_room1.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.second_room1),this),this.btn_second_room2.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.second_room2),this),this.btn_third_canteen.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.third_canteen),this),this.btn_third_room1.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.third_room1),this),this.btn_third_room2.on(cc.Node.EventType.TOUCH_END,this.change_area.bind(this,m.ScenceArea.third_room2),this),this.scroll_view_item.node.on(cc.Node.EventType.TOUCH_START,this.touch_start,this,!0),this.scroll_view_item.node.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move,this,!0),this.btn_unlock.on(cc.Node.EventType.TOUCH_END,this.click_unlock,this),this.label_condition2.node.on(cc.Node.EventType.TOUCH_END,this.click_go2,this)},t.prototype.onUIDisable=function(){_.default.Instance.FacilityScroll[this.area]=this.scroll_view_item.content.y},t.prototype.onInit=function(e){var t=this;if(this.show_btn=!0,this.show_hide(),this.area_btn[m.ScenceArea.doorway]=this.btn_doorway,this.area_btn[m.ScenceArea.exhibition]=this.btn_exhibition,this.area_btn[m.ScenceArea.escort]=this.btn_escort,this.area_btn[m.ScenceArea.backyard]=this.btn_backyard,this.area_btn[m.ScenceArea.parking]=this.btn_parking,this.area_btn[m.ScenceArea.first_kitchen]=this.btn_first_kitchen,this.area_btn[m.ScenceArea.first_canteen]=this.btn_first_canteen,this.area_btn[m.ScenceArea.first_room1]=this.btn_first_room1,this.area_btn[m.ScenceArea.first_room2]=this.btn_first_room2,this.area_btn[m.ScenceArea.first_room3]=this.btn_first_room3,this.area_btn[m.ScenceArea.second_canteen]=this.btn_second_canteen,this.area_btn[m.ScenceArea.second_room1]=this.btn_second_room1,this.area_btn[m.ScenceArea.second_room2]=this.btn_second_room2,this.area_btn[m.ScenceArea.third_canteen]=this.btn_third_canteen,this.area_btn[m.ScenceArea.third_room1]=this.btn_third_room1,this.area_btn[m.ScenceArea.third_room2]=this.btn_third_room2,200==_.default.Instance.GudieStep)_.default.Instance.GudieStep++,this.scroll_view_item.enabled=!1,this.scheduleOnce(function(){t.DesignatedSpot(m.FacilityType.outdoor_wall,!0)});else if(e[0])this.change_area(e[0]);else if(e[1])this.assign_facility_type=e[1],this.assign_facility_index=e[2],this.scheduleOnce(function(){t.DesignatedSpot(e[1],!0)});else{var n=void 0,o=1e3;for(var a in p.default.Instance.ScenceData){var i=v.default.Instance.AreaUnlock[a];null!=i&&1==i.unlock||p.default.Instance.ScenceData[a].facility_unlock[0]<o&&(o=p.default.Instance.ScenceData[a].facility_unlock[0],n=a)}var r=f.default.Instance.JudgeAreaUnlock(n);o<_.default.Instance.BarbecueStar&&1==r&&this.show_hide(),this.change_area(_.default.Instance.ScenceArea)}this.container.y=-this.container.height;var c=this.container.height-y.default.Instance.ScreenSize.height/2;cc.tween(this.container).to(.3,{y:c}).start(),this.area_red(),302==_.default.Instance.GudieStep&&_.default.Instance.GudieStep++},t.prototype.svs=function(){if(this.area==_.default.Instance.ScenceArea)switch(this.area){case m.ScenceArea.first_kitchen:case m.ScenceArea.second_room2:cc.tween(_.default.Instance.GameController.room).to(.2,{scale:1,x:750,y:0}).start();break;case m.ScenceArea.first_canteen:case m.ScenceArea.second_room1:cc.tween(_.default.Instance.GameController.room).to(.2,{scale:1,x:0,y:0}).start();break;case m.ScenceArea.first_room1:case m.ScenceArea.first_room2:case m.ScenceArea.first_room3:case m.ScenceArea.second_canteen:cc.tween(_.default.Instance.GameController.room).to(.2,{scale:1,x:-750,y:0}).start();break;case m.ScenceArea.doorway:cc.tween(_.default.Instance.GameController.room).to(.2,{scale:1,x:-320,y:0}).start();break;case m.ScenceArea.parking:case m.ScenceArea.backyard:case m.ScenceArea.escort:case m.ScenceArea.exhibition:cc.tween(_.default.Instance.GameController.room).to(.2,{scale:1,x:0,y:0}).start();break;case m.ScenceArea.third_canteen:case m.ScenceArea.third_room1:case m.ScenceArea.third_room2:cc.tween(_.default.Instance.GameController.room).to(.2,{scale:1,x:0,y:0}).start();break;default:cc.tween(_.default.Instance.GameController.room).to(.2,{scale:1}).start()}},t.prototype.click_unlock=function(){var e=p.default.Instance.ScenceData[this.area],t=f.default.Instance.JudgeAreaUnlock(this.area);if(e.facility_unlock[0]>_.default.Instance.BarbecueStar||0==t?this.can_unlock=!1:this.can_unlock=!0,0==this.can_unlock)return y.default.Instance.TsInitial.ShowTips("\u89e3\u9501\u6761\u4ef6\u4e0d\u8db3");switch(v.default.Instance.AreaUnlock[this.area]={unlock:!0},this.area){case m.ScenceArea.parking:_.default.Instance.GameController.init_park(!0);break;case m.ScenceArea.backyard:_.default.Instance.GameController.init_backyard(!0);break;case m.ScenceArea.escort:_.default.Instance.GameController.init_escort(!0);break;case m.ScenceArea.exhibition:_.default.Instance.GameController.init_exhibition(!0);break;case m.ScenceArea.first_canteen:_.default.Instance.TsGame.group_canteen1.Unlock();break;case m.ScenceArea.first_kitchen:_.default.Instance.TsGame.group_kitchen.Unlock();break;case m.ScenceArea.first_room1:case m.ScenceArea.first_room2:case m.ScenceArea.first_room3:_.default.Instance.TsGame.group_canteen2.Unlock();break;case m.ScenceArea.second_canteen:case m.ScenceArea.second_room1:case m.ScenceArea.second_room2:null==_.default.Instance.TsGame.group_second_floor?(v.default.Instance.AreaUnlock[this.area]={unlock:!0},_.default.Instance.GameController.init_second_floor(this.area)):_.default.Instance.TsGame.group_second_floor.Unlock(this.area);break;case m.ScenceArea.third_canteen:case m.ScenceArea.third_room1:case m.ScenceArea.third_room2:null==_.default.Instance.TsGame.group_third_floor?(v.default.Instance.AreaUnlock[this.area]={unlock:!0},_.default.Instance.GameController.init_third_floor(this.area)):_.default.Instance.TsGame.group_third_floor.Unlock(this.area)}v.default.Instance.AutoSyncData(),cc.systemEvent.emit(m.DistributedEvent.facility_red),b.default.Instance.TipsCelebrate(3),this.close()},t.prototype.change_scence=function(e,t){if(this.scenec!=e){if(this.scenec){var n=void 0;switch(this.scenec){case m.GameScence.outdoor_scence:n=this.btn_outdoor;break;case m.GameScence.first_floor_scence:n=this.btn_first_floor;break;case m.GameScence.second_floor_scence:n=this.btn_second_floor;break;case m.GameScence.third_floor_scence:n=this.btn_third_floor}n.children[0].color=this.btn_color[0],n.height=55,h.default.Instance.LoadSpriteFrame("Bundle2UI","FacilityUI/btn_bg1",n)}var o;switch(e){case m.GameScence.outdoor_scence:o=this.btn_outdoor;break;case m.GameScence.first_floor_scence:o=this.btn_first_floor;break;case m.GameScence.second_floor_scence:o=this.btn_second_floor;break;case m.GameScence.third_floor_scence:o=this.btn_third_floor}switch(o.children[0].color=this.btn_color[1],o.height=70,h.default.Instance.LoadSpriteFrame("Bundle2UI","FacilityUI/btn_bg2",o),this.btn_backyard.active=!1,this.btn_doorway.active=!1,this.btn_parking.active=!1,this.btn_first_kitchen.active=!1,this.btn_first_canteen.active=!1,this.btn_escort.active=!1,this.btn_first_room1.active=!1,this.btn_first_room2.active=!1,this.btn_first_room3.active=!1,this.btn_second_canteen.active=!1,this.btn_second_room1.active=!1,this.btn_second_room2.active=!1,this.btn_third_canteen.active=!1,this.btn_third_room1.active=!1,this.btn_third_room2.active=!1,this.btn_exhibition.active=!1,e){case m.GameScence.outdoor_scence:this.btn_exhibition.active=!0,this.btn_escort.active=!0,this.btn_backyard.active=!0,this.btn_doorway.active=!0,this.btn_parking.active=!0;break;case m.GameScence.first_floor_scence:this.btn_first_kitchen.active=!0,this.btn_first_canteen.active=!0,this.btn_first_room1.active=!0,this.btn_first_room2.active=!0,this.btn_first_room3.active=!0;break;case m.GameScence.second_floor_scence:this.btn_second_canteen.active=!0,this.btn_second_room1.active=!0,this.btn_second_room2.active=!0;break;case m.GameScence.third_floor_scence:this.btn_third_canteen.active=!0,this.btn_third_room1.active=!0,this.btn_third_room2.active=!0}if(this.scenec=e,1==t){var a=void 0;switch(this.scenec){case m.GameScence.outdoor_scence:a=m.ScenceArea.doorway;break;case m.GameScence.first_floor_scence:a=m.ScenceArea.first_canteen;break;case m.GameScence.second_floor_scence:a=m.ScenceArea.second_canteen;break;case m.GameScence.third_floor_scence:a=m.ScenceArea.third_canteen}this.change_area(a)}}},t.prototype.change_area=function(e,t){var n;switch(_.default.Instance.CanUnlockArea.indexOf(e)>=0&&null==_.default.Instance.CanUnlockClikc[e]&&(_.default.Instance.CanUnlockClikc[e]=!0,this.area_btn[e].children[1].active=!1,this.scence_red(e),cc.systemEvent.emit(m.DistributedEvent.facility_red)),e){case m.ScenceArea.backyard:case m.ScenceArea.doorway:case m.ScenceArea.parking:case m.ScenceArea.escort:case m.ScenceArea.exhibition:n=m.GameScence.outdoor_scence;break;case m.ScenceArea.first_kitchen:case m.ScenceArea.first_canteen:case m.ScenceArea.first_room1:case m.ScenceArea.first_room2:case m.ScenceArea.first_room3:n=m.GameScence.first_floor_scence;break;case m.ScenceArea.second_canteen:case m.ScenceArea.second_room1:case m.ScenceArea.second_room2:n=m.GameScence.second_floor_scence;break;case m.ScenceArea.third_canteen:case m.ScenceArea.third_room1:case m.ScenceArea.third_room2:n=m.GameScence.third_floor_scence}this.label_area.string=p.default.Instance.ScenceData[e].name;var o=v.default.Instance.AreaUnlock[e];if((o&&1==o.unlock||e==m.ScenceArea.first_canteen||e==m.ScenceArea.first_kitchen)&&_.default.Instance.GameController.SwitchingScence(e),this.change_scence(n,!1),this.area){var a=this.area_btn[this.area];a.children[0].color=this.btn_color[2],h.default.Instance.LoadSpriteFrame("Bundle2UI","FacilityUI/btn_bg3",a),_.default.Instance.FacilityScroll[this.area]=this.scroll_view_item.content.y}var i=this.area_btn[e];i.children[0].color=this.btn_color[3],h.default.Instance.LoadSpriteFrame("Bundle2UI","FacilityUI/btn_bg4",i),this.area=e,this.scroll_view_item.stopAutoScroll(),t&&t<1e9?this.scroll_view_item.content.y=t:_.default.Instance.FacilityScroll[e]>=0?this.scroll_view_item.content.y=_.default.Instance.FacilityScroll[e]:this.scroll_view_item.content.y=0;for(var r=[],c=[],s=0;s<p.default.Instance.FacilityOrder[this.area].length;s++){for(var l=p.default.Instance.FacilityOrder[this.area][s],u=p.default.Instance.Facility1Information[l],d=!1,y=v.default.Instance.Facility[l],b=0;b<u.data.length;b++){var g=f.default.Instance.JudegFacilityUnlock(l,b);if(y&&1==y.buy_record[b]&&(g=!1),1==g&&v.default.Instance.GoldNum>=u.unlock_price*(.5*b+1)){d=!0;break}}var I={type:l,lv:0,price:0};1==d?r.push(I):c.push(I)}this.faclity_array=[].concat(r).concat(c);var T=v.default.Instance.AreaUnlock[this.area];if(null==T||1!=T.unlock){this.List.numItems=0,this.label_unlock.string="\u65b0\u573a\u666f:"+p.default.Instance.ScenceData[e].name;var k=p.default.Instance.ScenceData[this.area];for(g=f.default.Instance.JudgeAreaUnlock(this.area),_.default.Instance.BarbecueStar>=k.facility_unlock[0]?this.label_condition.string="<b><color=#00ff00><u>"+_.default.Instance.BarbecueStar+"</u></c><color=#61583B>/"+k.facility_unlock[0]+"</color>":this.label_condition.string="<b><color=#BF491F><u>"+_.default.Instance.BarbecueStar+"</u></c><color=#61583B>/"+k.facility_unlock[0]+"</color>",s=0;s<p.default.Instance.FacilityUnlockOrder.length;s++){var S=p.default.Instance.FacilityUnlockOrder[s];if(0==S.index&&S.are==this.area){var w=p.default.Instance.FacilityUnlockOrder[s-1];this.label_condition2.string=1==g?"<b>\u89e3\u9501<color=#00ff00><u>"+p.default.Instance.ScenceData[w.are].name+"</u></c>\u6240\u6709\u53ef\u89e3\u9501\u8bbe\u65bd</b>":"<b>\u89e3\u9501<color=#BF491F><u>"+p.default.Instance.ScenceData[w.are].name+"</u></c>\u6240\u6709\u53ef\u89e3\u9501\u8bbe\u65bd</b>";break}}k.facility_unlock[0]>_.default.Instance.BarbecueStar||0==g?this.can_unlock=!1:this.can_unlock=!0,this.btn_unlock.parent.active=!0}else this.List.numItems=this.faclity_array.length,this.label_unlock.string="",this.btn_unlock.parent.active=!1},t.prototype.onListRender=function(e,t){var n=e.getComponent(T.default),o=this.faclity_array[t].type;n.Refresh(o)},t.prototype.DesignatedSpot=function(e,t){void 0===t&&(t=!1);var n=p.default.Instance.Facility1Information[e].location;this.change_area(n);for(var o=0,a=0;a<this.faclity_array.length;a++)if(this.faclity_array[a].type==e){o=a;break}var i=294*this.faclity_array.length+348-this.scroll_view_item.node.height;if(o>=0){var r=294*o+15;r>i&&(r=i),1==t?this.change_area(n,r):(this.scroll_view_item.scrollToOffset(cc.v2(0,r),0),this.List._onScrolling())}},t.prototype.show_hide=function(){switch(this.show_btn=!this.show_btn,this.show_btn){case!0:this.scroll_view_item.node.y=-252,this.scroll_view_item.node.height=348,this.scroll_view_item.node.children[0].height=348,this.btn_show_hide.scaleY=1,this.btn_outdoor.parent.active=!0,this.btn_unlock.parent.y=-260;break;case!1:this.scroll_view_item.node.y=-100,this.scroll_view_item.node.height=520,this.scroll_view_item.node.children[0].height=520,this.btn_show_hide.scaleY=-1,this.btn_outdoor.parent.active=!1,this.btn_unlock.parent.y=-170}},t.prototype.click_close=function(){var e=this,t=y.default.Instance.ScreenSize.height;cc.tween(this.container).to(.3,{y:-t/2-100}).call(function(){g.default.Instance.DestroyUI(n),e.svs()}).start()},t.prototype.close=function(){var e=y.default.Instance.ScreenSize.height;cc.tween(this.container).to(.3,{y:-e/2-100}).call(function(){g.default.Instance.DestroyUI(n)}).start()},t.prototype.touch_start=function(){this.move_dis=0},t.prototype.touch_move=function(e){this.move_dis+=Math.abs(e.getDeltaY())},Object.defineProperty(t.prototype,"MoveDis",{get:function(){return this.move_dis},enumerable:!1,configurable:!0}),t.prototype.area_red=function(){for(var e=0;e<_.default.Instance.CanUnlockArea.length;e++){var t=_.default.Instance.CanUnlockArea[e];switch(this.area_btn[t].children[1].active=!0,t){case m.ScenceArea.backyard:case m.ScenceArea.doorway:case m.ScenceArea.parking:case m.ScenceArea.escort:case m.ScenceArea.exhibition:this.btn_outdoor.children[1].active=!0;break;case m.ScenceArea.first_kitchen:case m.ScenceArea.first_canteen:case m.ScenceArea.first_room1:case m.ScenceArea.first_room2:case m.ScenceArea.first_room3:this.btn_first_floor.children[1].active=!0;break;case m.ScenceArea.second_canteen:case m.ScenceArea.second_room1:case m.ScenceArea.second_room2:this.btn_second_floor.children[1].active=!0;break;case m.ScenceArea.third_canteen:case m.ScenceArea.third_room1:case m.ScenceArea.third_room2:this.btn_third_floor.children[1].active=!0}}},t.prototype.scence_red=function(e){var t,n;switch(e){case m.ScenceArea.backyard:case m.ScenceArea.doorway:case m.ScenceArea.parking:case m.ScenceArea.escort:case m.ScenceArea.exhibition:t=[m.ScenceArea.backyard,m.ScenceArea.doorway,m.ScenceArea.parking,m.ScenceArea.escort,m.ScenceArea.exhibition],n=this.btn_outdoor;break;case m.ScenceArea.first_kitchen:case m.ScenceArea.first_canteen:case m.ScenceArea.first_room1:case m.ScenceArea.first_room2:case m.ScenceArea.first_room3:t=[m.ScenceArea.first_kitchen,m.ScenceArea.first_canteen,m.ScenceArea.first_room1,m.ScenceArea.first_room2,m.ScenceArea.first_room3],n=this.btn_first_floor;break;case m.ScenceArea.second_canteen:case m.ScenceArea.second_room1:case m.ScenceArea.second_room2:t=[m.ScenceArea.second_canteen,m.ScenceArea.second_room1,m.ScenceArea.second_room2],n=this.btn_second_floor;break;case m.ScenceArea.third_canteen:case m.ScenceArea.third_room1:case m.ScenceArea.third_room2:t=[m.ScenceArea.third_canteen,m.ScenceArea.third_room1,m.ScenceArea.third_room2],n=this.btn_third_floor}for(var o=!1,a=0;a<t.length;a++)if(1==this.area_btn[t[a]].children[1].active){o=!0;break}0==o&&(n.children[1].active=!1)},t.prototype.click_go=function(){g.default.Instance.OpenUI(d.default,g.UIOrder.Window_2),this.close()},t.prototype.click_go2=function(){for(var e=0;e<p.default.Instance.FacilityUnlockOrder.length;e++){var t=p.default.Instance.FacilityUnlockOrder[e];if(0==t.index&&t.are==this.area){this.change_area(p.default.Instance.FacilityUnlockOrder[e-1].are);break}}},t.bundleName="Bundle2Pre",t.prefabUrl="FacilityPre/FacilityPre",t.className="FacilityInterface",l([w(cc.Node)],t.prototype,"bg",void 0),l([w(cc.Node)],t.prototype,"container",void 0),l([w(cc.Label)],t.prototype,"label_area",void 0),l([w(cc.Node)],t.prototype,"btn_close",void 0),l([w(cc.Node)],t.prototype,"btn_show_hide",void 0),l([w(cc.Node)],t.prototype,"btn_outdoor",void 0),l([w(cc.Node)],t.prototype,"btn_first_floor",void 0),l([w(cc.Node)],t.prototype,"btn_second_floor",void 0),l([w(cc.Node)],t.prototype,"btn_third_floor",void 0),l([w(cc.Node)],t.prototype,"btn_exhibition",void 0),l([w(cc.Node)],t.prototype,"btn_escort",void 0),l([w(cc.Node)],t.prototype,"btn_backyard",void 0),l([w(cc.Node)],t.prototype,"btn_doorway",void 0),l([w(cc.Node)],t.prototype,"btn_parking",void 0),l([w(cc.Node)],t.prototype,"btn_first_kitchen",void 0),l([w(cc.Node)],t.prototype,"btn_first_canteen",void 0),l([w(cc.Node)],t.prototype,"btn_first_room1",void 0),l([w(cc.Node)],t.prototype,"btn_first_room2",void 0),l([w(cc.Node)],t.prototype,"btn_first_room3",void 0),l([w(cc.Node)],t.prototype,"btn_second_canteen",void 0),l([w(cc.Node)],t.prototype,"btn_second_room1",void 0),l([w(cc.Node)],t.prototype,"btn_second_room2",void 0),l([w(cc.Node)],t.prototype,"btn_third_canteen",void 0),l([w(cc.Node)],t.prototype,"btn_third_room1",void 0),l([w(cc.Node)],t.prototype,"btn_third_room2",void 0),l([w(I.default)],t.prototype,"List",void 0),l([w(cc.ScrollView)],t.prototype,"scroll_view_item",void 0),l([w(cc.Node)],t.prototype,"group_condition",void 0),l([w(cc.RichText)],t.prototype,"label_condition",void 0),l([w(cc.RichText)],t.prototype,"label_condition2",void 0),l([w(cc.Node)],t.prototype,"btn_unlock",void 0),l([w(cc.Label)],t.prototype,"label_unlock",void 0),n=l([S],t)}(u.default);i.default=O,cc._RF.pop(),cc._RF.pop()},{}],FacilityTipsInterface:[function(e,t,n){"use strict";cc._RF.push(t,"03880s5JBNBmK5s1nvKfI0Y","FacilityTipsInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"527e8AFDtZHRp94xWwPvBPU","FacilityTipsInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("SoundManager"),y=o("TypeManager"),b=o("UIManager"),v=cc._decorator,m=v.ccclass,g=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ts_ani=null,t.node_falilty=null,t.label_falilty=null,t.btn_ok=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_ok.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(e){switch(this.facility_type=e[0],this.facility_lv=e[1],this.facility_type){case y.FacilityType.room1_tabel:case y.FacilityType.room2_tabel:case y.FacilityType.room3_tabel:d.default.Instance.LoadSpriteFrame("BunldleFacility","res/table8_"+this.facility_lv,this.node_falilty);break;case y.FacilityType.second_floor_table1:case y.FacilityType.second_floor_table2:d.default.Instance.LoadSpriteFrame("BunldleFacility","res/second_floor_table_"+this.facility_lv,this.node_falilty);break;case y.FacilityType.park_sedan_1:case y.FacilityType.park_sedan_2:case y.FacilityType.park_sedan_3:case y.FacilityType.park_sedan_4:d.default.Instance.LoadSpriteFrame("BunldleFacility","res/park_sedan_1_"+this.facility_lv,this.node_falilty);break;default:d.default.Instance.LoadSpriteFrame("BunldleFacility","res/"+p.default.Instance.FacilityUrl(this.facility_type)+"_"+this.facility_lv,this.node_falilty)}this.label_falilty.string=""+h.default.Instance.Facility1Information[this.facility_type].data[this.facility_lv-1].name,this.ts_ani.play(),_.default.Instance.PlaySound("g127_congratulations")},t.prototype.close=function(){b.default.Instance.DestroyUI(n),cc.systemEvent.emit(y.DistributedEvent.change_facility,[this.facility_type],y.RefreshFacilityPath.unlock),201.5==f.default.Instance.GudieStep&&(f.default.Instance.GudieStep=201.6)},t.bundleName="Bundle2Pre",t.prefabUrl="FacilityPre/FacilityTipsPre",t.className="FacilityTipsInterface",l([g(cc.Animation)],t.prototype,"ts_ani",void 0),l([g(cc.Node)],t.prototype,"node_falilty",void 0),l([g(cc.Label)],t.prototype,"label_falilty",void 0),l([g(cc.Node)],t.prototype,"btn_ok",void 0),n=l([m],t)}(u.default);i.default=I,cc._RF.pop(),cc._RF.pop()},{}],Fireworks:[function(e,t,n){"use strict";cc._RF.push(t,"04f26jsHCxIDpajVADeUvsU","Fireworks");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"a7793mD5OdObq8OZbYAw4oA","Fireworks");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fireworks=[],t.xRange=[0,750],t.yRange=[0,300],t.duration=2,t.isOpen=!0,t._time=0,t}return c(t,e),t.prototype.update=function(e){this.isOpen&&(this._time+=e,this._time>this.duration&&(this._time=0,this.createFireworks()))},t.prototype.createFireworks=function(){for(var e=Math.floor(Math.random()*this.fireworks.length),t=null,n=0;n<this.node.childrenCount;n++){var o=this.node.children[n];if(o&&!o.active){t=o;break}}t||((t=cc.instantiate(this.fireworks[e])).parent=this.node),t.active=!0;var a=Math.random()*(this.xRange[1]-this.xRange[0])-375,i=Math.random()*(this.yRange[1]-this.yRange[0])-(this.yRange[1]+this.yRange[0])/2;t.setPosition(a,i),t.id=e+1;var r=t.children[0].getComponent(cc.Animation);r?r.play():console.error("\u6ca1\u6709\u52a8\u753b \u8bf7\u68c0\u67e5\u8d44\u6e90"),this.scheduleOnce(function(){t&&(t.active=!1)},5)},t.prototype.startFireworks=function(){this.isOpen=!0},t.prototype.stopFireworks=function(){this.isOpen=!1},s([d([cc.Prefab])],t.prototype,"fireworks",void 0),s([d({type:[cc.Integer]})],t.prototype,"xRange",void 0),s([d({type:[cc.Integer]})],t.prototype,"yRange",void 0),s([d],t.prototype,"duration",void 0),s([d],t.prototype,"isOpen",void 0),s([u],t)}(cc.Component);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],FunctionManager:[function(e,t,n){"use strict";cc._RF.push(t,"25127BDDO9PfLnAo7FH/xCv","FunctionManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"e73072cneBDXLzNMmJ4JRsP","FunctionManager");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GameManger"),d=o("DataManager"),h=o("StoragerManager"),p=o("TypeManager"),f=o("UIManager"),_=o("PoolManager"),y=o("InfoManager"),b=o("RoleSoundManager"),v=o("GameInterface"),m=o("VoiceLabelManager"),g=o("SoundManager"),I=cc._decorator,T=I.ccclass,k=(I.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return s(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!1,configurable:!0}),t.prototype.Distance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.prototype.Direction=function(e,t){return new cc.Vec2(t.x-e.x,t.y-e.y).normalize()},t.prototype.SubString=function(e,t){return t>e.length&&(t=e.length-1),e.substring(0,t)+"..."},t.prototype.Random=function(e,t){return Math.floor(Math.random()*(t-e)+e)},t.prototype.Choice=function(e){return e[this.Random(0,e.length)]},t.prototype.Choice2=function(e,t){if(0==e.length)return[];for(var n=[],o=0;o<t;o++){var a=Math.floor(Math.random()*e.length*2)%e.length;if(n.push(e[a]),e.splice(a,1),0==e.length)break}return n},t.prototype.GetFirstDigit=function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?parseInt(t.charAt(0)):parseInt(t.charAt(n+1))},t.prototype.DrawByWeights=function(e,t){void 0===t&&(t="weight");for(var n=0,o=0,a=Math.random(),i=[],r=0;r<e.length;r++)e[r][t]>0&&(n+=e[r][t],i.push(e[r]));for(a*=n,r=0;r<i.length;r++)if(a<=(o+=i[r][t]))return i[r];return null},t.prototype.TimecFormat=function(e,t){void 0===t&&(t=!1);var n=Math.floor(e/3600),o=Math.floor(e/60)%60,a=e%60;return(t?(n<10?0==n?"00":"0"+n:n)+":":"")+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)},t.prototype.TimecFormat2=function(e){var t=Math.floor(e/3600),n=Math.floor(e/60)%60,o="";return e>3600&&(o+=t+"\u6642"),e>60&&(o+=n+"\u5206"),o+(e%60+"\u79d2")},t.prototype.TimecFormat3=function(e){var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),o=Math.floor(e%3600/60),a=e%60,i="";return t>0&&(i+=t+"\u5929"),n>0&&(i+=(n<10?"0"+n:n)+":"),o>0&&(i+=(o<10?"0"+o:o)+":"),i+(a<10?"0"+a:a)},t.prototype.TimecFormat4=function(e){var t=Math.floor(e/3600),n=Math.floor(e/60)%60+60*t,o=e%60;return(n<10?"0"+n:n)+":"+(o<10?"0"+o:o)},t.prototype.ValueRound=function(e){return 1e3*Math.round(e/1e3)},t.prototype.FormattingMoney=function(e){return null==e&&(e=0),e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},t.prototype.FormattingMoney2=function(e){return Math.abs(e)<1e4?(Math.floor(10*e)/10).toString():Math.floor(e/1e4).toString()+"\u4e07"},t.prototype.FormattingMoney3=function(e){return null==e&&(e=0),Math.abs(e)<1e4?this.FormattingMoney(e):this.FormattingMoney(Math.floor(e/1e4))+"\u4e07"},t.prototype.GetFacilityIndex=function(e,t){switch(e){case p.FacilityType.third_floor_ground3:return;case p.FacilityType.hall_ground:case p.FacilityType.kitchen_ground:case p.FacilityType.outdoor_ground:case p.FacilityType.room1_ground:case p.FacilityType.room2_ground:case p.FacilityType.room3_ground:case p.FacilityType.second_floor_ground1:case p.FacilityType.second_floor_ground2:case p.FacilityType.second_floor_ground3:case p.FacilityType.second_floor_ground4:case p.FacilityType.escort_ground:case p.FacilityType.exhibition_ground:return 1;case p.FacilityType.outdoor_wall:case p.FacilityType.kitchen_wall:case p.FacilityType.hall_wall:case p.FacilityType.room1_wall:case p.FacilityType.third_floor_ground1:case p.FacilityType.third_floor_ground2:case p.FacilityType.third_floor_drifting:case p.FacilityType.third_floor_pavilion:case p.FacilityType.escort_door:case p.FacilityType.escort_lawn2:case p.FacilityType.escort_lawn2:case p.FacilityType.escort_flagging:case p.FacilityType.exhibition_wall:return 10;case p.FacilityType.serving_board:return 3e3-t.y-225;case p.FacilityType.counter_decorate1:case p.FacilityType.counter_decorate2:case p.FacilityType.counter_decorate3:return 2815;case p.FacilityType.backyard_decorate1:case p.FacilityType.backyard_decorate2:case p.FacilityType.backyard_ground:return 100;case p.FacilityType.backyard_background:return 110;case p.FacilityType.second_floor_decorate1:case p.FacilityType.second_floor_decorate2:return 3271;case p.FacilityType.third_floor_decorate1:case p.FacilityType.third_floor_decorate2:case p.FacilityType.third_floor_decorate3:return 2349;case p.FacilityType.third_floor_decorate4:case p.FacilityType.third_floor_decorate5:return 2347;case p.FacilityType.third_floor_divination:return 2758;case p.FacilityType.third_floor_stool2:case p.FacilityType.third_floor_decorate9:return 3421;case p.FacilityType.third_floor_spring:return 3627;case p.FacilityType.queue_stool:case p.FacilityType.second_floor_stool:return 3e3-Math.floor(t.y-15);case p.FacilityType.third_film_stool:return 3e3-Math.floor(t.y+15);case p.FacilityType.exhibition_book:case p.FacilityType.exhibition_tickets:return 3489;case p.FacilityType.exhibition_sugar:case p.FacilityType.exhibition_fan:case p.FacilityType.exhibition_shelf2:case p.FacilityType.exhibition_wallet:return 3216;case p.FacilityType.exhibition_cucurbit:return 3215;case p.FacilityType.exhibition_picture:case p.FacilityType.exhibition_picture2:return 3214;case p.FacilityType.exhibition_vase:case p.FacilityType.exhibition_vase2:return 2714;case p.FacilityType.exhibition_exhibits21:return 2698;case p.FacilityType.exhibition_exhibits1:case p.FacilityType.exhibition_exhibits2:return 3488;case p.FacilityType.exhibition_exhibits3:case p.FacilityType.exhibition_exhibits19:return 3312;case p.FacilityType.exhibition_exhibits4:case p.FacilityType.exhibition_exhibits20:return 3102;case p.FacilityType.exhibition_exhibits5:return 3234;case p.FacilityType.exhibition_exhibits7:case p.FacilityType.exhibition_exhibits8:case p.FacilityType.exhibition_exhibits9:return 2923;case p.FacilityType.exhibition_exhibits11:case p.FacilityType.exhibition_exhibits12:case p.FacilityType.exhibition_exhibits14:return 3286;case p.FacilityType.exhibition_exhibits15:case p.FacilityType.exhibition_exhibits16:case p.FacilityType.exhibition_exhibits17:return 3485;case p.FacilityType.exhibition_jade:return 2791;default:return 3e3-t.y}},t.prototype.GetFacilityPos=function(e,t){var n,o=t-1;switch(o<0&&(o=0),n=d.default.Instance.Facility1Information[e].data[o].coord,e){case p.FacilityType.queue_stool:return d.default.Instance.DoorwayStoolPos[1];case p.FacilityType.stairs_decorate:return cc.v2(n.x,n.y+100);case p.FacilityType.second_floor_stool:return cc.v2(d.default.Instance.SecondStool[3]);case p.FacilityType.third_film_stool:return d.default.Instance.third_floor_stool[3];case p.FacilityType.second_floor_lantern2:return cc.v2(cc.v2(n.x+298.5,n.y));case p.FacilityType.third_floor_screen3:return cc.v2(cc.v2(n.x+215,n.y));case p.FacilityType.third_floor_decorate9:return cc.v2(cc.v2(n.x+200,n.y));case p.FacilityType.third_floor_decorate10:return cc.v2(cc.v2(n.x+175,n.y));case p.FacilityType.escort_flagging:return cc.v2(cc.v2(n.x+188,n.y));case p.FacilityType.escort_bonsai:return cc.v2(cc.v2(n.x,n.y-123.5));case p.FacilityType.exhibition_bonsai:return cc.v2(cc.v2(n.x-198.5,n.y));case p.FacilityType.exhibition_lamp2:switch(t){case 1:return cc.v2(cc.v2(n.x-295,n.y));case 2:return cc.v2(cc.v2(n.x-247.5,n.y))}break;default:return n}},t.prototype.LockFaclity=function(e,t){if(null==u.default.Instance.GudieStep){var n,o;switch(e){case p.FacilityType.table_1:case p.FacilityType.table_2:case p.FacilityType.table_3:case p.FacilityType.table_4:case p.FacilityType.room1_tabel:case p.FacilityType.room2_tabel:case p.FacilityType.room3_tabel:case p.FacilityType.second_floor_table1:case p.FacilityType.second_floor_table2:if(null==(n=[u.default.Instance.TsGame.table10_array[e]])||null==n[0])return console.log("\u6ca1\u627e\u5230\u8bbe\u65bd",e);t==p.RefreshFacilityPath.upgrade&&n[0].White();break;case p.FacilityType.second_floor_tea1:case p.FacilityType.second_floor_tea2:if(null==(n=[u.default.Instance.TsGame.tea2_array[e]])||null==n[0])return console.log("\u6ca1\u627e\u5230\u8bbe\u65bd",e);t==p.RefreshFacilityPath.upgrade&&n[0].White();break;case p.FacilityType.second_floor_pool:if(null==(n=[u.default.Instance.TsGame.pool2_array[e]])||null==n[0])return console.log("\u6ca1\u627e\u5230\u8bbe\u65bd",e);t==p.RefreshFacilityPath.upgrade&&n[0].White();break;case p.FacilityType.second_floor_bed1:case p.FacilityType.second_floor_bed2:if(null==(n=[u.default.Instance.TsGame.bed2_array[e]])||null==n[0])return console.log("\u6ca1\u627e\u5230\u8bbe\u65bd",e);t==p.RefreshFacilityPath.upgrade&&n[0].White();break;case p.FacilityType.third_floor_table1:case p.FacilityType.third_floor_table2:if(null==(n=[u.default.Instance.TsGame.table_array[e]])||null==n[0])return console.log("\u6ca1\u627e\u5230\u8bbe\u65bd",e);t==p.RefreshFacilityPath.upgrade&&n[0].White();break;case p.FacilityType.park_sedan_1:case p.FacilityType.park_sedan_2:case p.FacilityType.park_sedan_3:case p.FacilityType.park_sedan_4:case p.FacilityType.park_sedan_5:if(null==(n=[u.default.Instance.TsGame.park_sedan_array[e]])||null==n[0])return console.log("\u6ca1\u627e\u5230\u8bbe\u65bd",e);break;default:if(null==(n=u.default.Instance.TsGame.NodeFacility[e])||null==n[0])return console.log("\u6ca1\u627e\u5230\u8bbe\u65bd",e);if(t==p.RefreshFacilityPath.upgrade)for(var a=0;a<n.length;a++)switch(_.default.Instance.PlaySmokeEffect(n[a].node,!0,!1,!1),d.default.Instance.Facility1Information[e].location){case p.ScenceArea.escort:case p.ScenceArea.exhibition:switch(e){case p.FacilityType.escort_ground:case p.FacilityType.exhibition_ground:break;default:n[a].ani.play("ani_facility3")}}}var i=this.GetFacilityPos(e,h.default.Instance.Facility[e].used_lv);switch(e){case p.FacilityType.queue_stool:case p.FacilityType.second_floor_stool:o=n[3].node.parent.convertToWorldSpaceAR(cc.v2(1.1*i.x,1.1*i.y));break;case p.FacilityType.park_sedan_1:case p.FacilityType.park_sedan_2:case p.FacilityType.park_sedan_3:case p.FacilityType.park_sedan_4:case p.FacilityType.park_sedan_5:var r=d.default.Instance.Facility1Information[e].data[0].coord;o=u.default.Instance.TsGame.group_park.container2.convertToWorldSpaceAR(cc.v2(1.1*r.x,1.1*r.y));break;default:o=n[0].node.parent.convertToWorldSpaceAR(cc.v2(1.1*i.x,1.1*i.y))}var c=u.default.Instance.GameController.room.convertToNodeSpaceAR(o);switch(e){case p.FacilityType.kitchen_wall:case p.FacilityType.kitchen_ground:case p.FacilityType.second_floor_wall2:case p.FacilityType.second_floor_ground3:return void cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1,x:750,y:0}).start();case p.FacilityType.room1_wall:case p.FacilityType.room2_wall:case p.FacilityType.room2_wall:case p.FacilityType.room1_ground:case p.FacilityType.room2_ground:case p.FacilityType.room3_ground:case p.FacilityType.second_floor_wall3:case p.FacilityType.second_floor_ground4:return void cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1,x:-750,y:0}).start();case p.FacilityType.outdoor_ground:case p.FacilityType.backyard_background:case p.FacilityType.backyard_ground:case p.FacilityType.hall_wall:case p.FacilityType.hall_ground:case p.FacilityType.second_floor_wall1:case p.FacilityType.third_floor_ground3:case p.FacilityType.escort_ground:case p.FacilityType.exhibition_ground:return void cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1,x:0,y:0}).start()}var s,l=d.default.Instance.Facility1Information[e];switch(l.location){case p.ScenceArea.doorway:case p.ScenceArea.parking:case p.ScenceArea.backyard:case p.ScenceArea.escort:case p.ScenceArea.exhibition:case p.ScenceArea.first_canteen:case p.ScenceArea.first_kitchen:case p.ScenceArea.first_room1:case p.ScenceArea.first_room2:case p.ScenceArea.first_room3:case p.ScenceArea.second_room2:case p.ScenceArea.second_room1:case p.ScenceArea.second_canteen:case p.ScenceArea.third_canteen:case p.ScenceArea.third_room1:case p.ScenceArea.third_room2:var f=void 0;switch(t){case p.RefreshFacilityPath.upgrade:f=n[0].node.height*n[0].node.anchorY+120;break;default:f=n[0].node.height*n[0].node.anchorY-120}cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1.1,x:-c.x,y:-c.y+f}).start()}switch(t){case p.RefreshFacilityPath.unlock_default:case p.RefreshFacilityPath.change:s=1;break;case p.RefreshFacilityPath.unlock:switch(d.default.Instance.Facility1Information[e].location){case p.ScenceArea.escort:case p.ScenceArea.exhibition:s=2.7;break;default:s=1}break;default:s=0}s>0&&(y.default.Instance.TsInitial.facility_shade.active=!0,cc.tween(this).delay(s).call(function(){switch(l.location){case p.ScenceArea.first_kitchen:case p.ScenceArea.second_room2:cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1,x:750,y:0}).start();break;case p.ScenceArea.first_canteen:case p.ScenceArea.second_room1:cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1,x:0,y:0}).start();break;case p.ScenceArea.first_room1:case p.ScenceArea.first_room2:case p.ScenceArea.first_room3:case p.ScenceArea.second_canteen:cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1,x:-750,y:0}).start();break;case p.ScenceArea.doorway:cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1,x:-320,y:0}).start();break;case p.ScenceArea.parking:case p.ScenceArea.backyard:case p.ScenceArea.third_canteen:case p.ScenceArea.third_room1:case p.ScenceArea.third_room2:case p.ScenceArea.exhibition:case p.ScenceArea.escort:cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1,x:0,y:0}).start();break;default:cc.tween(u.default.Instance.GameController.room).to(.2,{scale:1}).start()}}).delay(.5).call(function(){y.default.Instance.TsInitial.facility_shade.active=!1}).start())}},t.prototype.FacilityUrl=function(e){switch(e){case p.FacilityType.room1_tabel:case p.FacilityType.room2_tabel:case p.FacilityType.room3_tabel:return"room_tabel";case p.FacilityType.room1_sofa:case p.FacilityType.room2_sofa:case p.FacilityType.room3_sofa:return"room_sofa";case p.FacilityType.room1_cabinet:case p.FacilityType.room2_cabinet:case p.FacilityType.room3_cabinet:return"room_cabinet";case p.FacilityType.room1_decorate1:case p.FacilityType.room2_decorate1:case p.FacilityType.room3_decorate1:return"room_decorate1";case p.FacilityType.room1_decorate2:case p.FacilityType.room2_decorate2:case p.FacilityType.room3_decorate2:return"room_decorate2";case p.FacilityType.room1_ground:case p.FacilityType.room2_ground:case p.FacilityType.room3_ground:return"room_ground";case p.FacilityType.room3_wall:case p.FacilityType.room2_wall:return"room2_wall";case p.FacilityType.table_1:case p.FacilityType.table_2:case p.FacilityType.table_3:case p.FacilityType.table_4:return"table4";case p.FacilityType.second_floor_table1:case p.FacilityType.second_floor_table2:return"second_floor_talbe1";case p.FacilityType.second_floor_bed2:return"second_floor_bed2";case p.FacilityType.second_floor_tea2:return"second_floor_tea2";case p.FacilityType.backyard_land1:case p.FacilityType.backyard_land2:case p.FacilityType.backyard_land3:case p.FacilityType.backyard_land4:return"backyard_land";case p.FacilityType.third_floor_table1:case p.FacilityType.third_floor_table2:return"third_floor_table";case p.FacilityType.backyard_land1:case p.FacilityType.backyard_land2:case p.FacilityType.backyard_land3:case p.FacilityType.backyard_land4:return"backyard_land";case p.FacilityType.exhibition_booth:return"exhibition_booth6";case p.FacilityType.exhibition_booth2:case p.FacilityType.exhibition_booth14:return"exhibition_booth";case p.FacilityType.exhibition_booth3:case p.FacilityType.exhibition_booth4:return"exhibition_booth2";case p.FacilityType.exhibition_booth5:case p.FacilityType.exhibition_booth6:return"exhibition_booth3";case p.FacilityType.exhibition_booth7:return"exhibition_booth4";case p.FacilityType.exhibition_booth8:case p.FacilityType.exhibition_booth9:case p.FacilityType.exhibition_booth10:case p.FacilityType.exhibition_booth11:case p.FacilityType.exhibition_booth12:case p.FacilityType.exhibition_booth13:return"exhibition_booth5";case p.FacilityType.backyard_land1:case p.FacilityType.backyard_land2:case p.FacilityType.backyard_land3:case p.FacilityType.backyard_land4:return"backyard_land_1";default:return e}},t.prototype.FacilityUnlockNum=function(){var e=0;for(var t in h.default.Instance.Facility)for(var n=h.default.Instance.Facility[t],o=0;o<n.buy_record.length;o++)null!=n.buy_record[o]&&d.default.Instance.Facility1Information[t].data[o].unlock_path!=p.UnlockPath.default&&e++;return e},t.prototype.JudgeFacilityBuy=function(){for(var e in d.default.Instance.FacilityOrder){var t=h.default.Instance.AreaUnlock[e];if(null!=t&&1==t.unlock)for(var n=0;n<d.default.Instance.FacilityOrder[e].length;n++){var o=d.default.Instance.FacilityOrder[e][n],a=d.default.Instance.Facility1Information[o];if(0!=this.JudegFacilityUnlock(o,n)&&!(a.unlock_price*(.5*n+1)>h.default.Instance.GoldNum)){var i=h.default.Instance.Facility[o];if(null!=i)for(var r=0;r<a.data.length;r++)if(null==i.buy_record[r])return!0}}}return!1},t.prototype.JudgeNight=function(e){void 0===e&&(e=!1);var t,n=(new Date).getHours();(t=n<6||n>=19)!=u.default.Instance.NightControl&&(u.default.Instance.NightControl=t,cc.systemEvent.emit(p.DistributedEvent.day_night),cc.systemEvent.emit(p.DistributedEvent.change_facility,[p.FacilityType.outdoor_wall],p.RefreshFacilityPath.init))},t.prototype.JudgeGuestTeam=function(){u.default.Instance.GuestTeam=d.default.Instance.GuestTeam},t.prototype.JudgeCanUnlockArea=function(){for(var e in u.default.Instance.CanUnlockArea=[],d.default.Instance.ScenceData){var t=h.default.Instance.AreaUnlock[e];if(!t||1!=t.unlock){var n=d.default.Instance.ScenceData[e];0!=this.JudgeAreaUnlock(e)&&(u.default.Instance.BarbecueStar<n.facility_unlock[0]||1!=u.default.Instance.CanUnlockClikc[e]&&u.default.Instance.CanUnlockArea.push(e))}}},t.prototype.JudgeStaffUnlock=function(e){for(var t in d.default.Instance.StaffData)if(1!=h.default.Instance.Staff[t]){var n=d.default.Instance.StaffData[t];if(n.unlock_type==e){if(h.default.Instance.Staff[t]=!0,u.default.Instance.TsGame.AddStaff(n.id),u.default.Instance.isYuTinAB){var o=b.default.Instance.getStaffSound(n.id);if(o){g.default.Instance.playRoleVoice(o,!1);var a=f.default.Instance.GetUI(v.default);if(a){var i=a.node_staff[n.id];i&&(m.default.Instance.showTalk(i,o),b.default.Instance.showTalkSpine(i.spine.node))}}}h.default.Instance.AutoSyncData();break}}},t.prototype.TaskExtract=function(){for(var e=0;e<d.default.Instance.TaskArray.length;e++){var t=d.default.Instance.TaskArray[e],n=void 0;switch(t.task_type){case p.TaskType.area:case p.TaskType.shop:case p.TaskType.lv:n=t.task_type+"_"+t.value1;break;case p.TaskType.facility:n=t.task_type+"_"+t.value1+"_"+t.value2}if(1!=h.default.Instance.TaskRecord[n]){if(t.task_type==p.TaskType.lv){if(1==this.judge_task_repeat(n,p.TaskType.lv))continue}else if(1==this.judge_task_repeat(n))continue;return t.task_type==p.TaskType.lv&&(t.value1=h.default.Instance.BarbecueLv.length+1),t}}return console.error("\u4efb\u52a1\u6ca1\u6709\u4e86==========="),null},t.prototype.TaskOrder=function(){d.default.Instance.TaskArray=[];for(var e=2,t=0,n=0;n<d.default.Instance.FacilityUnlockOrder.length;n++){var o=d.default.Instance.FacilityUnlockOrder[n];0==o.index&&o.are!=p.ScenceArea.doorway&&(d.default.Instance.TaskArray.push({task_type:p.TaskType.area,award_gold:100,value1:o.are,value2:null}),++t%10==0&&d.default.Instance.TaskArray.push({task_type:p.TaskType.lv,award_gold:50,value1:1,value2:null}));for(var a=0;a<d.default.Instance.FacilityOrder[o.are].length;a++){var i=d.default.Instance.FacilityOrder[o.are][a],r=d.default.Instance.Facility1Information[i];r&&o.index<r.data.length&&(d.default.Instance.TaskArray.push({task_type:p.TaskType.facility,award_gold:25,value1:i,value2:o.index}),t++),t%10==0&&d.default.Instance.TaskArray.push({task_type:p.TaskType.lv,award_gold:50,value1:1,value2:null})}e<d.default.Instance.ShopUpgradeData.length&&(d.default.Instance.TaskArray.push({task_type:p.TaskType.shop,award_gold:100,value1:e,value2:null}),++t%10==0&&d.default.Instance.TaskArray.push({task_type:p.TaskType.lv,award_gold:50,value1:1,value2:null})),e++}},t.prototype.judge_task_repeat=function(e,t){for(var n=0;n<h.default.Instance.Tasking.length;n++){var o=h.default.Instance.Tasking[n],a=void 0;switch(o.task_type){case p.TaskType.facility:a=o.task_type+"_"+o.value1+"_"+o.value2;break;default:a=o.task_type+"_"+o.value1}if(o.task_type==t)return!0;if(e==a)return!0}return!1},t.prototype.JudgeAreaUnlock=function(e){for(var t=0;t<d.default.Instance.FacilityUnlockOrder.length;t++){var n=d.default.Instance.FacilityUnlockOrder[t];if(0==n.index&&n.are==e){if(0==t)return!0;if(n.are==p.ScenceArea.first_kitchen&&h.default.Instance.AreaUnlock[p.ScenceArea.first_canteen]&&1==h.default.Instance.AreaUnlock[p.ScenceArea.first_canteen].unlock)return!0;for(var o=d.default.Instance.FacilityUnlockOrder[t-1],a=0;a<d.default.Instance.FacilityOrder[o.are].length;a++){var i=d.default.Instance.FacilityOrder[o.are][a],r=h.default.Instance.Facility[i];if(!r||1!=r.buy_record[o.index])return!1}}}return!0},t.prototype.JudegFacilityUnlock=function(e,t){var n=d.default.Instance.Facility1Information[e],o=d.default.Instance.ScenceData[n.location].facility_unlock[t];if(u.default.Instance.BarbecueStar<o)return!1;for(var a=0;a<d.default.Instance.FacilityUnlockOrder.length;a++){var i=d.default.Instance.FacilityUnlockOrder[a];if(i.are==n.location&&i.index==t){if(0==a)return!0;for(var r=d.default.Instance.FacilityUnlockOrder[a-1],c=0;c<d.default.Instance.FacilityOrder[r.are].length;c++){var s=d.default.Instance.FacilityOrder[r.are][c];if(null!=d.default.Instance.Facility1Information[s].data[r.index]){var l=h.default.Instance.Facility[s];if(!l||1!=l.buy_record[r.index])return!1}}}}return!0},t.prototype.JudegFacilityUnlock2=function(e,t){for(var n=d.default.Instance.Facility1Information[e],o=0;o<d.default.Instance.FacilityUnlockOrder.length;o++){var a=d.default.Instance.FacilityUnlockOrder[o];if(a.are==n.location&&a.index==t){if(0==o)return!0;for(var i=d.default.Instance.FacilityUnlockOrder[o-1],r=0;r<d.default.Instance.FacilityOrder[i.are].length;r++){var c=d.default.Instance.FacilityOrder[i.are][r];if(null!=d.default.Instance.Facility1Information[c].data[i.index]){var s=h.default.Instance.Facility[c];if(!s||1!=s.buy_record[i.index])return!1}}}}return!0},t.prototype.GetCirclePoints=function(e,t,n,o){void 0===o&&(o=60);for(var a=[],i=Math.PI/180*Math.round(360/n),r=0;r<n;r++){var c=t.x+e*Math.sin(i*r),s=t.y+e*Math.cos(i*r);a.unshift(cc.v3(c+(Math.random()*o-o/2),s+(Math.random()*o-o/2),0))}return a},t.prototype.UnlockKebabsNum=function(e){e||(e=h.default.Instance.ShopLv);for(var t=20,n=0;n<d.default.Instance.ShopUpgradeData.length;n++){var o=d.default.Instance.ShopUpgradeData[n];if(e<n+1)break;o.add_kebabs>0&&(t+=o.add_kebabs)}return t},t._instance=null,n=l([T],t)}(cc.Component));i.default=k,cc._RF.pop(),cc._RF.pop()},{}],GMPanel:[function(e,t,n){"use strict";cc._RF.push(t,"7a63fhSa7dPhJ9qXWr1Mr+n","GMPanel");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"78cc0sRf5VOroIqRWErUELF","GMPanel");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("AutoManager"),h=o("StoragerManager"),p=o("UIManager"),f=o("BarbecueStandInterface"),_=o("SettingInterface"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeBtn=null,t.autoBtn=null,t.timeSlider=null,t.rateSlider=null,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.closeBtn.on(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this),this.autoBtn.on(cc.Node.EventType.TOUCH_END,this._autoBtnClick,this),this.timeSlider.node.on("slide",this._timeSliderEvent,this),this.rateSlider.node.on("slide",this._rateSliderEvent,this)},t.prototype.onUIDisable=function(){this.closeBtn.off(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this),this.autoBtn.off(cc.Node.EventType.TOUCH_END,this._autoBtnClick,this),this.timeSlider.node.off("slide",this._timeSliderEvent,this),this.rateSlider.node.off("slide",this._rateSliderEvent,this)},t.prototype._closeBtnClick=function(){this.closeView()},t.prototype._autoBtnClick=function(){d.default.Instance.isAuto=!0,h.default.Instance.BarbecuePower&&h.default.Instance.BarbecuePower--,p.default.Instance.DestroyUI(_.default),p.default.Instance.DestroyUI(n);var e=h.default.Instance.BarbecueLv.length+1;p.default.Instance.OpenUI(f.default,p.UIOrder.Window_1,e)},t.prototype._timeSliderEvent=function(e){var t=d.default.Instance.minTime,n=d.default.Instance.maxTime;d.default.Instance.misTime=Math.floor(t+cc.misc.clamp01(e.progress)*(n-t)),this.timeSlider.node.getChildByName("numLabel").getComponent(cc.Label).string="\u65f6\u95f4s\uff1a"+d.default.Instance.misTime},t.prototype._rateSliderEvent=function(e){d.default.Instance.misRate=cc.misc.clamp01(e.progress),this.rateSlider.node.getChildByName("numLabel").getComponent(cc.Label).string="\u6982\u7387%\uff1a"+Math.floor(100*d.default.Instance.misRate)},t.prototype.onUIStart=function(){this._initView();var e=(d.default.Instance.misTime-d.default.Instance.minTime)/(d.default.Instance.maxTime-d.default.Instance.minTime);d.default.Instance.misTime<=0&&(e=0),this.timeSlider.node.getChildByName("numLabel").getComponent(cc.Label).string="\u65f6\u95f4s\uff1a"+d.default.Instance.misTime,this.timeSlider.progress=e,this.rateSlider.progress=d.default.Instance.misRate,this.rateSlider.node.getChildByName("numLabel").getComponent(cc.Label).string="\u6982\u7387%\uff1a"+Math.floor(100*d.default.Instance.misRate)},t.prototype._initView=function(){},t.prototype.closeView=function(){p.default.Instance.DestroyUI(n)},t.bundleName="Bundle1Pre",t.prefabUrl="MainPre/GMPanel",t.className="GMPanel",l([v(cc.Node)],t.prototype,"closeBtn",void 0),l([v(cc.Node)],t.prototype,"autoBtn",void 0),l([v(cc.Slider)],t.prototype,"timeSlider",void 0),l([v(cc.Slider)],t.prototype,"rateSlider",void 0),n=l([b],t)}(u.default);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],GameCircleInterface:[function(e,t,n){"use strict";cc._RF.push(t,"481d5XRlwNOeqKQKN/Ai+D5","GameCircleInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"43fa80+td1KU6+LdgHqG203","GameCircleInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("InfoManager"),h=o("SoundManager"),p=o("UIManager"),f=cc._decorator,_=f.ccclass,y=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(){var e=wx.getSystemInfoSync(),t=d.default.Instance.ScreenSize,n=(t.height-1334)/2,o=230/t.width*e.screenWidth,a=(840+n)/t.height*e.screenHeight,i=cc.size(270/t.width*e.screenWidth,100/t.height*e.screenHeight);LWGSDK.createGameClubButton({type:"image",image:"https://static.361mogame.com/game-static/g127/wechat2/0.0.2/btn_1.png",icon:"white",left:o,top:a,width:i.width,height:i.height,color:"ffffff",textAlign:"center",fontSize:12,lineHeight:12}),h.default.Instance.PlaySound("book_pop_open")},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),LWGSDK.hideGameClubButton(),this.scheduleOnce(function(){p.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle7Pre",t.prefabUrl="PlatformPre/GameCirclePre",t.className="GameCircleInterface",l([y(cc.Animation)],t.prototype,"ani_popup",void 0),l([y(cc.Node)],t.prototype,"btn_close",void 0),n=l([_],t)}(u.default);i.default=b,cc._RF.pop(),cc._RF.pop()},{}],GameController:[function(e,t,n){"use strict";cc._RF.push(t,"18ec9d8me1GVLZpOj5fOzcv","GameController");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"c1eb6vWQdVHQbPGfGaE1y+L","GameController");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("bed2_item"),p=o("group_second_floor"),f=o("pool2_item"),_=o("tea2_item"),y=o("team21_item"),b=o("team22_item"),v=o("group_third_floor"),m=o("table4_item"),g=o("team31_item"),I=o("team32_item"),T=o("team33_item"),k=o("team34_item"),S=o("group_backyard"),w=o("group_park"),O=o("node_park_sedan"),F=o("group_escort"),B=o("group_exhibition"),x=o("team41_item"),P=o("dialogue_bubble_item"),C=o("node_dishes"),R=o("node_facility"),N=o("node_staff"),A=o("BundleManger"),D=o("DataManager"),U=o("FunctionManager"),M=o("GameManger"),L=o("InfoManager"),E=o("RoleSoundManager"),G=o("SoundManager"),j=o("StoragerManager"),z=o("TimePlayVoiceManager"),K=o("TypeManager"),H=o("UIManager"),W=o("VoiceLabelManager"),V=o("group_canteen1"),J=o("group_canteen2"),q=o("group_doorway"),X=o("group_kitchen"),Y=o("passerby_item"),Z=o("table_item"),Q=o("team11_item"),$=o("team12_item"),ee=o("FacilityInterface"),te=o("GameInterface"),ne=cc._decorator,oe=ne.ccclass,ae=ne.property,ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.furniture_icon=null,t.prefab_node_guest1=null,t.node_staff=null,t.prefab_dialogue_box=null,t.prefab_passerby=null,t.prefab_node_dishes=null,t.prefab_kitchen=null,t.prefab_canteen1=null,t.prefab_canteen2=null,t.prefab_table11=null,t.prefab_table12=null,t.prefab_second_floor=null,t.prefab_table21=null,t.node_tea2_item=null,t.node_bed2_item=null,t.node_pool2_item=null,t.prefab_third_floor=null,t.node_table4_item=null,t.prefab_escort=null,t.prefab_exhibition=null,t.prefab_backyard=null,t.prefab_park=null,t.node_park_sedan=null,t.room=null,t.group_doorway=null,t.group_kitchen=null,t.group_canteen1=null,t.group_canteen2=null,t.group_second_floor=null,t.group_third_floor=null,t.group_backyard=null,t.group_park=null,t.group_escort=null,t.group_exhibition=null,t.load_second=!1,t.load_third=!1,t.pool_node_guest11=[],t.pool_node_guest12=[],t.pool_node_guest21=[],t.pool_node_guest22=[],t.pool_node_guest31=[],t.pool_node_guest32=[],t.pool_node_guest33=[],t.pool_node_guest34=[],t.pool_node_guest41=[],t.pool_team11=[],t.pool_team12=[],t.pool_team21=[],t.pool_team22=[],t.pool_team31=[],t.pool_team32=[],t.pool_team33=[],t.pool_team34=[],t.pool_team41=[],t.dialogue_box_array=[],t.dialogue_box2_array=[],t.pool_node_dishes=[],t}return s(t,e),t.prototype.start=function(){this.room.on(cc.Node.EventType.TOUCH_START,this.touch_start,this),this.room.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move,this),this.room.on(cc.Node.EventType.TOUCH_END,this.touch_end,this)},t.prototype.Init=function(){for(var e in this.group_doorway.active=!0,this.group_kitchen=cc.instantiate(this.prefab_kitchen),this.group_kitchen.setParent(this.room),this.group_kitchen.active=!1,this.group_canteen2=cc.instantiate(this.prefab_canteen2),this.group_canteen2.setParent(this.room),this.group_canteen2.active=!1,this.group_canteen1=cc.instantiate(this.prefab_canteen1),this.group_canteen1.setParent(this.room),this.group_canteen1.active=!1,M.default.Instance.TsGame.group_doorway=this.group_doorway.getComponent(q.default),M.default.Instance.TsGame.group_canteen1=this.group_canteen1.getComponent(V.default),M.default.Instance.TsGame.group_canteen1.Init(),M.default.Instance.TsGame.group_canteen2=this.group_canteen2.getComponent(J.default),M.default.Instance.TsGame.group_canteen2.Init(),M.default.Instance.TsGame.group_kitchen=this.group_kitchen.getComponent(X.default),M.default.Instance.TsGame.group_kitchen.Init(),M.default.Instance.TsGame.facility_init2([K.ScenceArea.doorway,K.ScenceArea.first_canteen,K.ScenceArea.first_kitchen,K.ScenceArea.first_room1,K.ScenceArea.first_room2,K.ScenceArea.first_room3]),M.default.Instance.TsGame.staff_init([K.ScenceArea.doorway,K.ScenceArea.first_canteen,K.ScenceArea.first_kitchen,K.ScenceArea.first_room1,K.ScenceArea.first_room2,K.ScenceArea.first_room3]),this.SwitchingScence(K.ScenceArea.doorway),j.default.Instance.AreaUnlock)if(1==j.default.Instance.AreaUnlock[e].unlock)switch(e){case K.ScenceArea.second_canteen:case K.ScenceArea.first_room1:case K.ScenceArea.first_room2:this.init_second_floor();break;case K.ScenceArea.third_canteen:case K.ScenceArea.third_room1:case K.ScenceArea.third_room2:this.init_third_floor();break;case K.ScenceArea.backyard:this.init_backyard();break;case K.ScenceArea.parking:this.init_park();break;case K.ScenceArea.escort:this.init_escort();break;case K.ScenceArea.exhibition:this.init_exhibition()}},t.prototype.init_second_floor=function(e){return void 0===e&&(e=null),u(this,void 0,void 0,function(){var t,n,o,a,i;return d(this,function(r){switch(r.label){case 0:return 1==this.load_second?[2]:(this.load_second=!0,A.default.Instance.PromiseAll(["SecondFloor"]),t=this,[4,A.default.Instance.LoadPrefab("SecondFloorPre/group_second_floor","Bundle3Pre")]);case 1:return t.prefab_second_floor=r.sent(),n=this,[4,A.default.Instance.LoadPrefab("SecondFloorPre/node_table21","Bundle3Pre")];case 2:return n.prefab_table21=r.sent(),o=this,[4,A.default.Instance.LoadPrefab("SecondFloorPre/node_tea2_item","Bundle3Pre")];case 3:return o.node_tea2_item=r.sent(),a=this,[4,A.default.Instance.LoadPrefab("SecondFloorPre/node_bed2_item","Bundle3Pre")];case 4:return a.node_bed2_item=r.sent(),i=this,[4,A.default.Instance.LoadPrefab("SecondFloorPre/node_pool2_item","Bundle3Pre")];case 5:return i.node_pool2_item=r.sent(),this.group_second_floor=cc.instantiate(this.prefab_second_floor),this.group_second_floor.setParent(this.room),this.group_second_floor.active=!1,M.default.Instance.TsGame.group_second_floor=this.group_second_floor.getComponent(p.default),M.default.Instance.TsGame.group_second_floor.Init(),M.default.Instance.TsGame.facility_init2([K.ScenceArea.second_canteen,K.ScenceArea.second_room1,K.ScenceArea.second_room2]),M.default.Instance.TsGame.staff_init([K.ScenceArea.second_canteen,K.ScenceArea.second_room1,K.ScenceArea.second_room2]),null!=e&&this.SwitchingScence(e),[2]}})})},t.prototype.init_third_floor=function(e){return void 0===e&&(e=null),u(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return 1==this.load_third?[2]:(this.load_third=!0,A.default.Instance.PromiseAll(["ThirdFloor"]),t=this,[4,A.default.Instance.LoadPrefab("ThirdFloorPre/group_third_floor","Bundle4Pre")]);case 1:return t.prefab_third_floor=n.sent(),this.group_third_floor=cc.instantiate(this.prefab_third_floor),this.group_third_floor.setParent(this.room),this.group_third_floor.active=!1,M.default.Instance.TsGame.group_third_floor=this.group_third_floor.getComponent(v.default),M.default.Instance.TsGame.group_third_floor.Init(),M.default.Instance.TsGame.facility_init2([K.ScenceArea.third_room1,K.ScenceArea.third_room2,K.ScenceArea.third_canteen]),M.default.Instance.TsGame.staff_init([K.ScenceArea.third_room1,K.ScenceArea.third_room2,K.ScenceArea.third_canteen]),null!=e&&this.SwitchingScence(e),[2]}})})},t.prototype.init_backyard=function(e){return void 0===e&&(e=!1),u(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return A.default.Instance.PromiseAll(["Backyard"]),t=this,[4,A.default.Instance.LoadPrefab("Backyard/group_backyard","Bundle5Pre")];case 1:return t.prefab_backyard=n.sent(),this.group_backyard=cc.instantiate(this.prefab_backyard),this.group_backyard.active=!1,this.group_backyard.setParent(this.room),M.default.Instance.TsGame.group_backyard=this.group_backyard.getComponent(S.default),M.default.Instance.TsGame.group_backyard.Init(),M.default.Instance.TsGame.group_doorway.refresh_doorway_building(2),M.default.Instance.TsGame.facility_init2([K.ScenceArea.backyard]),M.default.Instance.TsGame.staff_init([K.ScenceArea.backyard]),1==e&&this.SwitchingScence(K.ScenceArea.backyard),[2]}})})},t.prototype.init_park=function(e){return void 0===e&&(e=!1),u(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return A.default.Instance.PromiseAll(["ParkUI"]),t=this,[4,A.default.Instance.LoadPrefab("Park/group_park","Bundle5Pre")];case 1:return t.prefab_park=n.sent(),this.group_park=cc.instantiate(this.prefab_park),this.group_park.active=!1,this.group_park.setParent(this.room),M.default.Instance.TsGame.group_park=this.group_park.getComponent(w.default),M.default.Instance.TsGame.group_park.Init(),M.default.Instance.TsGame.facility_init2([K.ScenceArea.parking]),M.default.Instance.TsGame.staff_init([K.ScenceArea.parking]),1==e&&this.SwitchingScence(K.ScenceArea.parking),[2]}})})},t.prototype.init_escort=function(e){return void 0===e&&(e=!1),u(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return A.default.Instance.PromiseAll(["EscortUI"]),t=this,[4,A.default.Instance.LoadPrefab("Escort/group_escort","Bundle6Pre")];case 1:return t.prefab_escort=n.sent(),this.group_escort=cc.instantiate(this.prefab_escort),this.group_escort.active=!1,this.group_escort.setParent(this.room),M.default.Instance.TsGame.group_escort=this.group_escort.getComponent(F.default),M.default.Instance.TsGame.group_escort.Init(),M.default.Instance.TsGame.group_doorway.refresh_doorway_building(3),M.default.Instance.TsGame.facility_init2([K.ScenceArea.escort]),M.default.Instance.TsGame.staff_init([K.ScenceArea.escort]),1==e&&this.SwitchingScence(K.ScenceArea.escort),[2]}})})},t.prototype.init_exhibition=function(e){return void 0===e&&(e=!1),u(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return A.default.Instance.PromiseAll(["ExhibitionUI"]),t=this,[4,A.default.Instance.LoadPrefab("Exhibition/group_exhibition","Bundle6Pre")];case 1:return t.prefab_exhibition=n.sent(),this.group_exhibition=cc.instantiate(this.prefab_exhibition),this.group_exhibition.active=!1,this.group_exhibition.setParent(this.room),M.default.Instance.TsGame.group_exhibition=this.group_exhibition.getComponent(B.default),M.default.Instance.TsGame.group_exhibition.Init(),M.default.Instance.TsGame.facility_init2([K.ScenceArea.exhibition]),M.default.Instance.TsGame.staff_init([K.ScenceArea.exhibition]),1==e&&this.SwitchingScence(K.ScenceArea.exhibition),[2]}})})},t.prototype.touch_start=function(e){this.touch_pos=this.node.convertToNodeSpaceAR(e.getLocation()),this.move_num=0,this.slide_x=0},t.prototype.touch_move=function(e){if(null==M.default.Instance.GudieStep){switch(M.default.Instance.ScenceArea){case K.ScenceArea.parking:case K.ScenceArea.backyard:case K.ScenceArea.escort:case K.ScenceArea.exhibition:case K.ScenceArea.third_canteen:case K.ScenceArea.third_room1:case K.ScenceArea.third_room2:return}var t=this.node.convertToNodeSpaceAR(e.getLocation()),n=t.x-this.touch_pos.x;switch(this.room.x+=n,this.slide_x+=n,M.default.Instance.ScenceArea){case K.ScenceArea.doorway:this.room.x>450?this.room.x=450:this.room.x<-600&&(this.room.x=-600),this.move_num+=Math.abs(n);break;case K.ScenceArea.first_kitchen:case K.ScenceArea.second_room2:this.slide_x<0&&(this.room.x=750+this.slide_x);break;case K.ScenceArea.first_canteen:case K.ScenceArea.second_room1:this.room.x=this.slide_x;break;case K.ScenceArea.first_room1:case K.ScenceArea.first_room2:case K.ScenceArea.first_room3:case K.ScenceArea.second_canteen:this.slide_x>0&&(this.room.x=-750+this.slide_x)}this.room.x>750?this.room.x=750:this.room.x<-750&&(this.room.x=-750),this.touch_pos=t}},t.prototype.touch_end=function(){var e=this;switch(this.touch_pos=null,M.default.Instance.ScenceArea){case K.ScenceArea.first_kitchen:this.room.x<600?cc.tween(this.room).to(.2,{x:0}).call(function(){e.SwitchingScence(K.ScenceArea.first_canteen)}).start():cc.tween(this.room).to(.2,{x:750}).start();break;case K.ScenceArea.first_canteen:this.room.x>150?cc.tween(this.room).to(.2,{x:750}).call(function(){e.SwitchingScence(K.ScenceArea.first_kitchen),M.default.Instance.TsGame.group_canteen1.slide_tips.active=!1}).start():this.room.x<-150?cc.tween(this.room).to(.2,{x:-750}).call(function(){e.SwitchingScence(K.ScenceArea.first_room1)}).start():cc.tween(this.room).to(.2,{x:0}).start();break;case K.ScenceArea.first_room1:case K.ScenceArea.first_room2:case K.ScenceArea.first_room3:this.room.x>-600?cc.tween(this.room).to(.2,{x:0}).call(function(){e.SwitchingScence(K.ScenceArea.first_canteen)}).start():cc.tween(this.room).to(.2,{x:-750}).start();break;case K.ScenceArea.second_room2:this.room.x<600?cc.tween(this.room).to(.2,{x:0}).call(function(){e.SwitchingScence(K.ScenceArea.second_room1)}).start():cc.tween(this.room).to(.2,{x:750}).start();break;case K.ScenceArea.second_room1:this.room.x>150?cc.tween(this.room).to(.2,{x:750}).call(function(){e.SwitchingScence(K.ScenceArea.second_room2)}).start():this.room.x<-150?cc.tween(this.room).to(.2,{x:-750}).call(function(){e.SwitchingScence(K.ScenceArea.second_canteen)}).start():cc.tween(this.room).to(.2,{x:0}).start();break;case K.ScenceArea.second_canteen:this.room.x>-600?cc.tween(this.room).to(.2,{x:0}).call(function(){e.SwitchingScence(K.ScenceArea.second_room1)}).start():cc.tween(this.room).to(.2,{x:-750}).start()}},t.prototype.SwitchingScence=function(e,t){switch(void 0===t&&(t=!1),e){case K.ScenceArea.third_room1:case K.ScenceArea.third_room2:case K.ScenceArea.third_canteen:if(null==this.group_third_floor){var n=U.default.Instance.JudgeAreaUnlock(e);return void(t&&1==n&&M.default.Instance.BarbecueStar>=D.default.Instance.ScenceData[e].facility_unlock[0]?H.default.Instance.OpenUI(ee.default,H.UIOrder.Window_2,e):L.default.Instance.TsInitial.ShowTips("\u4e09\u697c\u672a\u89e3\u9501"))}break;case K.ScenceArea.second_canteen:case K.ScenceArea.second_room1:case K.ScenceArea.second_room2:if(null==this.group_second_floor)return n=U.default.Instance.JudgeAreaUnlock(e),void(t&&1==n&&M.default.Instance.BarbecueStar>=D.default.Instance.ScenceData[e].facility_unlock[0]?H.default.Instance.OpenUI(ee.default,H.UIOrder.Window_2,e):L.default.Instance.TsInitial.ShowTips("\u4e8c\u697c\u672a\u89e3\u9501"));break;case K.ScenceArea.backyard:if(null==this.group_backyard)return n=U.default.Instance.JudgeAreaUnlock(e),void(t&&1==n&&M.default.Instance.BarbecueStar>=D.default.Instance.ScenceData[e].facility_unlock[0]?H.default.Instance.OpenUI(ee.default,H.UIOrder.Window_2,e):L.default.Instance.TsInitial.ShowTips("\u540e\u9662\u672a\u89e3\u9501"));break;case K.ScenceArea.parking:if(null==this.group_park)return n=U.default.Instance.JudgeAreaUnlock(e),void(t&&1==n&&M.default.Instance.BarbecueStar>=D.default.Instance.ScenceData[e].facility_unlock[0]?H.default.Instance.OpenUI(ee.default,H.UIOrder.Window_2,e):L.default.Instance.TsInitial.ShowTips("\u505c\u8f7f\u573a\u672a\u89e3\u9501"));break;case K.ScenceArea.escort:if(null==this.group_escort)return n=U.default.Instance.JudgeAreaUnlock(e),void(t&&1==n&&M.default.Instance.BarbecueStar>=D.default.Instance.ScenceData[e].facility_unlock[0]?H.default.Instance.OpenUI(ee.default,H.UIOrder.Window_2,e):L.default.Instance.TsInitial.ShowTips("\u9556\u5c40\u672a\u89e3\u9501"));break;case K.ScenceArea.exhibition:if(null==this.group_exhibition)return n=U.default.Instance.JudgeAreaUnlock(e),void(t&&1==n&&M.default.Instance.BarbecueStar>=D.default.Instance.ScenceData[e].facility_unlock[0]?H.default.Instance.OpenUI(ee.default,H.UIOrder.Window_2,e):L.default.Instance.TsInitial.ShowTips("\u5c55\u5385\u672a\u89e3\u9501"))}var o=M.default.Instance.ScenceArea;switch(M.default.Instance.ScenceArea=e,cc.systemEvent.emit(K.DistributedEvent.change_scence,e),cc.Tween.stopAllByTarget(this.room),this.group_doorway.active=!1,this.group_kitchen.active=!1,this.group_canteen1.active=!1,this.group_canteen2.active=!1,null!=this.group_second_floor&&(this.group_second_floor.active=!1),null!=this.group_third_floor&&(this.group_third_floor.active=!1),null!=this.group_park&&(this.group_park.active=!1),null!=this.group_backyard&&(this.group_backyard.active=!1),null!=this.group_escort&&(this.group_escort.active=!1),null!=this.group_exhibition&&(this.group_exhibition.active=!1),M.default.Instance.ScenceArea){case K.ScenceArea.doorway:this.group_doorway.active=!0,this.room.x=-320;break;case K.ScenceArea.backyard:this.group_backyard.active=!0,this.room.x=0;break;case K.ScenceArea.parking:this.group_park.active=!0,this.room.x=0;break;case K.ScenceArea.first_canteen:this.group_canteen1.active=!0,this.group_canteen2.active=!0,this.group_kitchen.active=!0,this.room.x=0;break;case K.ScenceArea.first_kitchen:this.group_canteen1.active=!0,this.group_canteen2.active=!0,this.group_kitchen.active=!0,this.room.x=750;break;case K.ScenceArea.first_room1:case K.ScenceArea.first_room2:case K.ScenceArea.first_room3:this.group_canteen1.active=!0,this.group_canteen2.active=!0,this.group_kitchen.active=!0,this.room.x=-750;break;case K.ScenceArea.second_room2:this.room.x=750,this.group_second_floor.active=!0;break;case K.ScenceArea.second_room1:this.room.x=0,this.group_second_floor.active=!0;break;case K.ScenceArea.second_canteen:this.room.x=-750,this.group_second_floor.active=!0;break;case K.ScenceArea.third_canteen:this.group_third_floor.active=!0,this.room.x=0;break;case K.ScenceArea.third_room1:case K.ScenceArea.third_room2:this.group_third_floor.active=!0,this.room.x=0,M.default.Instance.TsGame.group_third_floor.ts_map.map.x=750,M.default.Instance.TsGame.group_third_floor.ts_map.judge_boundary();break;case K.ScenceArea.escort:this.group_escort.active=!0,this.room.x=0;break;case K.ScenceArea.exhibition:this.group_exhibition.active=!0,this.room.x=0,M.default.Instance.TsGame.group_exhibition.ts_map.MapMove(cc.v2(3e3,0))}if(this.room.y=0,this.room.setScale(1),M.default.Instance.ScenceArea!=K.ScenceArea.first_kitchen?M.default.Instance.TsGame.group_kitchen.kitchen_sound(!1):M.default.Instance.TsGame.group_kitchen.kitchen_sound(!0),M.default.Instance.isYuTinAB&&o!=e){z.default.Instance.resetTime();for(var a=0;a<E.default.Instance.staffIds.length;a++){var i=E.default.Instance.staffIds[a],r=E.default.Instance.getStaffSound(i);if(r){var c=H.default.Instance.GetUI(te.default);if(c){var s=c.node_staff[i];if(s&&s.node&&s.spine&&s.spine.node&&s.spine.node.isValid){var l=s.node.convertToWorldSpaceAR(cc.Vec2.ZERO),u=this.node.convertToNodeSpaceAR(l);Math.abs(u.x)<=320&&(G.default.Instance.playRoleVoice(r,!1),E.default.Instance.showTalkSpine(s.spine.node),W.default.Instance.showTalk(s,r))}}}}M.default.Instance.TsGame&&((e!=K.ScenceArea.second_room1&&e!=K.ScenceArea.second_room2||o!=K.ScenceArea.second_room1&&o!=K.ScenceArea.second_room2)&&M.default.Instance.TsGame.playSleepSound(),M.default.Instance.TsGame.resetSceneGusetSound())}},t.prototype.MoveScence=function(){M.default.Instance.ScenceArea=K.ScenceArea.first_canteen,cc.tween(this.room).to(.5,{x:0}).start()},t.prototype.FoundTable11=function(){return cc.instantiate(this.prefab_table11).getComponent(Z.default)},t.prototype.FoundTable12=function(){return cc.instantiate(this.prefab_table12).getComponent(Z.default)},t.prototype.FoundTable21=function(){return cc.instantiate(this.prefab_table21).getComponent(Z.default)},t.prototype.FoundTea2=function(){return cc.instantiate(this.node_tea2_item).getComponent(_.default)},t.prototype.FoundBed2=function(){return cc.instantiate(this.node_bed2_item).getComponent(h.default)},t.prototype.FoundPool2=function(){return cc.instantiate(this.node_pool2_item).getComponent(f.default)},t.prototype.FoundTable5=function(){var e=this;return new Promise(function(t){return u(e,void 0,void 0,function(){var e,n,o;return d(this,function(a){switch(a.label){case 0:return null!=this.node_table4_item?[3,2]:(e=this,[4,A.default.Instance.LoadPrefab("ThirdFloorPre/node_table4_item","Bundle4Pre")]);case 1:e.node_table4_item=a.sent(),a.label=2;case 2:return n=cc.instantiate(this.node_table4_item),o=n.getComponent(m.default),t(o),[2]}})})})},t.prototype.FoundParkSedan=function(){var e=this;return new Promise(function(t){return u(e,void 0,void 0,function(){var e,n,o;return d(this,function(a){switch(a.label){case 0:return null!=this.node_park_sedan?[3,2]:(e=this,[4,A.default.Instance.LoadPrefab("Park/node_park_sedan","Bundle5Pre")]);case 1:e.node_park_sedan=a.sent(),a.label=2;case 2:return n=cc.instantiate(this.node_park_sedan),o=n.getComponent(O.default),t(o),[2]}})})})},t.prototype.FoundGuesr=function(e){var t,n,o;switch(e){case"guest11_item":o=this.pool_node_guest11;break;case"guest12_item":o=this.pool_node_guest12;break;case"guest21_item":o=this.pool_node_guest21;break;case"guest22_item":o=this.pool_node_guest22;break;case"guest31_item":o=this.pool_node_guest31;break;case"guest32_item":o=this.pool_node_guest32;break;case"guest33_item":o=this.pool_node_guest33;break;case"guest34_item":o=this.pool_node_guest34;break;case"guest41_item":o=this.pool_node_guest41}for(var a=0;a<o.length;a++){var i=o[a];if(0==i.active){t=i;break}}return null==t&&((t=cc.instantiate(this.prefab_node_guest1)).name="guest_"+o.length+" ",o.push(t)),null==(n=t.getComponent(e))&&((n=t.addComponent(e)).spine=t.getChildByName("spine").getComponent(sp.Skeleton),n.shadow=t.getChildByName("shadow")),n},t.prototype.FoundTeam=function(e){var t,n;switch(e){case"team_11":n=this.pool_team11;break;case"team_12":n=this.pool_team12;break;case"team_21":n=this.pool_team21;break;case"team_22":n=this.pool_team22;break;case"team_31":n=this.pool_team31;break;case"team_32":n=this.pool_team32;break;case"team_33":n=this.pool_team33;break;case"team_34":n=this.pool_team34;break;case"team_41":n=this.pool_team41}for(var o=0;o<n.length;o++){var a=n[o];if(0==a.Useing){t=a;break}}if(null==t){switch(e){case"team_11":t=new Q.default;break;case"team_12":t=new $.default;break;case"team_21":t=new y.default;break;case"team_22":t=new b.default;break;case"team_31":t=new g.default;break;case"team_32":t=new I.default;break;case"team_33":t=new T.default;break;case"team_34":t=new k.default;break;case"team_41":t=new x.default}n.push(t)}return t},t.prototype.FoundPasserby=function(){return cc.instantiate(this.prefab_passerby).getComponent(Y.default)},t.prototype.FoundStaff=function(){return cc.instantiate(this.node_staff).getComponent(N.default)},t.prototype.FoundFacility=function(){return cc.instantiate(this.furniture_icon).getComponent(R.default)},t.prototype.FoundDialogueBox=function(e){if(void 0===e&&(e=!1),!e)for(var t=0;t<this.dialogue_box_array.length;t++){var n=this.dialogue_box_array[t];if(0==n.node.active)return n}var o=cc.instantiate(this.prefab_dialogue_box);o.setParent(this.node);var a=o.getComponent(P.default);return this.dialogue_box_array.push(a),a},t.prototype.HideDialogueBox=function(){for(var e=0;e<this.dialogue_box_array.length;e++)1==this.dialogue_box_array[e].node.active&&this.dialogue_box_array[e].Hide()},t.prototype.FoundDialogueBox2=function(){for(var e=0;e<this.dialogue_box2_array.length;e++){var t=this.dialogue_box2_array[e];if(null!=t&&0==t.node.active)return t}var n=cc.instantiate(this.prefab_dialogue_box);n.setParent(this.node);var o=n.getComponent(P.default);return this.dialogue_box2_array.push(o),o},t.prototype.HideDialogueBox2=function(){for(var e=0;e<this.dialogue_box2_array.length;e++){var t=this.dialogue_box2_array[e];null!=t&&1==t.node.active&&t.Hide()}},t.prototype.FoundDishes=function(){for(var e,t=0;t<this.pool_node_dishes.length;t++){var n=this.pool_node_dishes[t];if(0==n.node.active){e=n;break}}return null==e&&(e=cc.instantiate(this.prefab_node_dishes).getComponent(C.default),this.pool_node_dishes.push(e)),e.node.opacity=255,e.node.active=!0,e},l([ae(cc.Prefab)],t.prototype,"furniture_icon",void 0),l([ae(cc.Prefab)],t.prototype,"prefab_node_guest1",void 0),l([ae(cc.Prefab)],t.prototype,"node_staff",void 0),l([ae(cc.Prefab)],t.prototype,"prefab_dialogue_box",void 0),l([ae(cc.Prefab)],t.prototype,"prefab_passerby",void 0),l([ae(cc.Prefab)],t.prototype,"prefab_node_dishes",void 0),l([ae(cc.Prefab)],t.prototype,"prefab_kitchen",void 0),l([ae(cc.Prefab)],t.prototype,"prefab_canteen1",void 0),l([ae(cc.Prefab)],t.prototype,"prefab_canteen2",void 0),l([ae(cc.Prefab)],t.prototype,"prefab_table11",void 0),l([ae(cc.Prefab)],t.prototype,"prefab_table12",void 0),l([ae(cc.Node)],t.prototype,"room",void 0),l([ae(cc.Node)],t.prototype,"group_doorway",void 0),l([oe],t)}(cc.Component);i.default=ie,cc._RF.pop(),cc._RF.pop()},{}],GameExplainInterface:[function(e,t,n){"use strict";cc._RF.push(t,"053fdXSt0JOEZQEX9D83HEz","GameExplainInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"beec6dH3JxFDLd9tvqnvoJh","GameExplainInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("GameManger"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_ok=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_ok.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(){cc.tween(this).delay(4.5).call(function(){207==h.default.Instance.GudieStep&&h.default.Instance.GudieStep++}).start()},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,d.default.Instance.DestroyUI(n),h.default.Instance.GudieStep=209)},t.bundleName="Bundle1Pre",t.prefabUrl="BarbecueExplainPre/GameExplainPre",t.className="GameExplainInterface",l([_(cc.Node)],t.prototype,"btn_ok",void 0),n=l([f],t)}(u.default);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],GameGuideInterface:[function(e,t,n){"use strict";cc._RF.push(t,"77789ZWDFxIzZoS9jojdgEz","GameGuideInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"e0cafB6J8RBdYvYg8GG06hI","GameGuideInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("TypeManager"),p=o("GameManger"),f=o("StoragerManager"),_=o("GameExplainInterface"),y=o("InfoManager"),b=o("BarbecueStandInterface"),v=o("MainInterface"),m=o("BarbecueOverInterface"),g=cc._decorator,I=g.ccclass,T=g.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon_mask=null,t.icon_finger=null,t.icon_finger2=null,t.label_tips=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){cc.systemEvent.on(h.DistributedEvent.gudie_step,this.monitor_step,this),this.icon_mask.children[0].on(cc.Node.EventType.TOUCH_END,this.click,this)},t.prototype.onInit=function(){this.offect=(y.default.Instance.ScreenSize.height-1334)/2,this.ts=d.default.Instance.GetUI(b.default),this.icon_finger.active=!1,this.icon_finger2.active=!1,this.label_tips.node.parent.active=!1,this.monitor_step()},t.prototype.monitor_step=function(){var e=this;switch(console.log("\u5f15\u5bfc\u6b65\u9aa4\u76d1\u542c==============",p.default.Instance.GudieStep),p.default.Instance.GudieStep){case 1:this.alter_mask(120,120,cc.v2(200,-585+this.ts.node.y),!0);break;case 11:this.alter_mask(120,120,cc.v2(0,-585+this.ts.node.y),!0);break;case 30:this.over();break;case 41:this.alter_mask(80,80,cc.v2(-310,584+p.default.Instance.ScreenAdaptive),!0);break;case 100:this.alter_mask(70,150,cc.v2(240,230+this.ts.node.y),!1),this.icon_finger2.active=!0,this.icon_finger2.y=230+this.ts.node.y,this.alter_tips("\u62d6\u62fd\u70e4\u4e32\u81f3\u5de6\u8fb9\u70e4\u7089\u6d88\u9664",cc.v2(90,0));break;case 101:this.alter_mask(70,150,cc.v2(-66,230+this.ts.node.y),!1);break;case 102:this.over();break;case 200:f.default.Instance.GoldNum<10&&(f.default.Instance.GoldNum=10),this.hide_show_btn(0),this.alter_mask(120,120,cc.v2(290,-550-p.default.Instance.ScreenAdaptive2),!0),this.alter_tips("\u65b0\u5e97\u5f00\u5f20\n\u88c5\u4fee\u4e00\u4e0b\u5e97\u94fa\u5427",cc.v2(220,-390-p.default.Instance.ScreenAdaptive2));break;case 201:this.alter_mask(160,80,cc.v2(-247,-390-this.offect),!0),this.alter_tips("\u83b7\u5f97\u7684\u91d1\u5e01\u53ef\u7528\u4e8e\n\u8d2d\u4e70\u5e97\u94fa\u8bbe\u65bd",cc.v2(35,-560)),this.label_tips.node.parent.active=!1,this.icon_finger.active=!1,cc.tween(this).delay(1).call(function(){e.label_tips.node.parent.active=!0,e.icon_finger.active=!0}).start();break;case 201.5:cc.Tween.stopAllByTarget(this),this.alter_mask(750,1800,cc.v2(0,0),!1),this.icon_finger.active=!1,this.label_tips.node.parent.active=!1,cc.tween(this).delay(1).call(function(){e.icon_finger.setPosition(0,-320),e.icon_finger.active=!0}).start(),f.default.Instance.Record[h.RecordType.gudie_game]=!0,f.default.Instance.AutoSyncData();break;case 201.6:this.icon_mask.opacity=0,this.alter_mask(0,0,cc.v2(0,0),!1),this.icon_finger.active=!1,this.label_tips.node.parent.active=!1,cc.tween(this).delay(2).call(function(){p.default.Instance.GudieStep=202}).start();break;case 202:this.icon_mask.opacity=150,f.default.Instance.AutoSyncData(!1),cc.Tween.stopAllByTarget(this),this.alter_mask(160,150,cc.v2(-275,580+p.default.Instance.ScreenAdaptive),!0),this.alter_tips("\u83b7\u5f97\u8db3\u591f\u591a\u7684\u661f\u661f\n\u5c31\u80fd\u63d0\u5347\u5e97\u94fa\u7b49\u7ea7",cc.v2(-40,420+p.default.Instance.ScreenAdaptive)),this.label_tips.node.parent.active=!1,this.icon_finger.active=!1,cc.tween(this).delay(1).call(function(){e.label_tips.node.parent.active=!0,e.icon_finger.active=!0}).start();break;case 203:this.alter_mask(500,120,cc.v2(0,130),!1),this.icon_finger.active=!1,this.alter_tips("\u8fd9\u91cc\u662f\u83b7\u5f97\u7684\u661f\u661f\u6570\u91cf\u548c\u5347\u7ea7\u76ee\u6807\n\u4f60\u5df2\u7ecf\u6ee1\u8db3\u5347\u7ea7\u76ee\u6807\u5566\n\u5feb\u53bb\u5347\u7ea7\u5e97\u94fa\u5427",cc.v2(0,-40)),cc.tween(this).delay(2).call(function(){e.icon_finger.setPosition(0,-40),e.icon_finger.active=!0}).start();break;case 204:cc.Tween.stopAllByTarget(this),this.alter_mask(270,100,cc.v2(0,-265),!0),this.label_tips.node.parent.active=!1;break;case 205:this.alter_mask(750,1800,cc.v2(0,0),!1),this.icon_finger.active=!1,this.label_tips.node.parent.active=!1;break;case 206:this.icon_finger.setPosition(cc.v2(0,-158)),this.icon_finger.active=!0;break;case 207:this.icon_finger.active=!1,this.label_tips.node.parent.active=!1,d.default.Instance.OpenUI(_.default,d.UIOrder.Window_2);break;case 208:this.icon_finger.setPosition(cc.v2(0,-472)),this.icon_finger.active=!0;break;case 209:this.alter_mask(120,120,cc.v2(290,-388-p.default.Instance.ScreenAdaptive2),!0),this.alter_tips("\u5173\u4e8e\u7ecf\u8425\u5e97\u94fa\u7684\u6280\u5de7\uff0c\n\u53ef\u4ee5\u770b\u770b\u7ecf\u8425\u624b\u518c\u54e6",cc.v2(120,-230-p.default.Instance.ScreenAdaptive2)),this.label_tips.node.parent.active=!0;break;case 210:this.hide_show_btn(255),this.over();break;case 300:this.alter_mask(0,0,cc.v2(0,0),!1),this.icon_mask.opacity=0,this.icon_finger.active=!1,this.label_tips.node.parent.active=!1;break;case 301:this.icon_mask.opacity=255,this.alter_mask(120,120,cc.v2(290,-388-p.default.Instance.ScreenAdaptive2),!0),this.alter_tips("\u5ba2\u4eba\u70b9\u7684\u83dc\u8981\u5230\u540e\u53a8\u5236\u4f5c\uff0c\n\u5148\u53bb\u89e3\u9501\u540e\u53a8\u5427",cc.v2(120,-230-p.default.Instance.ScreenAdaptive2)),this.label_tips.node.parent.active=!0,f.default.Instance.Tasking[0]={task_type:h.TaskType.area,award_gold:100,value1:h.ScenceArea.first_kitchen,value2:null};for(var t=1;t<f.default.Instance.Tasking.length;t++){var n=f.default.Instance.Tasking[t];if(n.task_type==h.TaskType.area&&n.value1==h.ScenceArea.first_kitchen){f.default.Instance.Tasking.splice(t,1);break}}f.default.Instance.AutoSyncData();break;case 302:this.label_tips.node.parent.active=!1,this.alter_mask(160,75,cc.v2(240,-255-this.offect),!0);break;case 303:this.alter_mask(230,90,cc.v2(0,-345-this.offect),!0),this.label_tips.node.parent.active=!1;break;case 304:this.alter_mask(0,0,cc.v2(0,0),!1),this.icon_finger.active=!1,this.label_tips.node.parent.active=!1,cc.tween(this).delay(2).call(function(){p.default.Instance.GudieStep=305}).start();break;case 305:p.default.Instance.GameController.MoveScence(),this.alter_tips("\u540e\u53a8\u5b8c\u6210\u7684\u83dc\u54c1\u5c06\u4f1a\n\u81ea\u52a8\u9001\u5f80\u5ba2\u4eba\u684c\u4e0a",cc.v2(120,-230-p.default.Instance.ScreenAdaptive)),this.icon_finger.setPosition(120,-230-p.default.Instance.ScreenAdaptive),cc.tween(this).delay(2).call(function(){e.icon_finger.active=!0}).start(),this.label_tips.node.parent.active=!0;break;case 306:this.alter_tips("\u4eca\u540e\u52aa\u529b\u89e3\u9501\u66f4\u591a\u8bbe\u65bd\uff0c\n\u4e30\u5bcc\u5e97\u94fa\u88c5\u6f62\u5427",cc.v2(120,-230-p.default.Instance.ScreenAdaptive));break;case 307:var o=d.default.Instance.GetUI(v.default);o&&(o.icon_finger.active=!0),this.over();break;case 1e3:var a=d.default.Instance.GetUI(m.default);a&&this.alter_mask(a.winActivity.width,a.winActivity.height,cc.v2(-312,455+p.default.Instance.ScreenAdaptive),!0);break;case 1001:this.over()}},t.prototype.alter_mask=function(e,t,n,o){this.icon_mask.width=e,this.icon_mask.height=t,this.icon_mask.setPosition(n),this.icon_mask.children[0].x=-n.x,this.icon_mask.children[0].y=-n.y,1==o&&(this.icon_finger.setPosition(n),this.icon_finger.active=!0)},t.prototype.alter_tips=function(e,t){this.label_tips.string=e,this.label_tips._forceUpdateRenderData(!0),this.label_tips.node.parent.width=this.label_tips.node.width+40,this.label_tips.node.parent.height=this.label_tips.node.height+40,this.label_tips.node.parent.setPosition(t),this.label_tips.node.parent.active=!0},t.prototype.click=function(){switch(p.default.Instance.GudieStep){case 203:case 305:case 306:p.default.Instance.GudieStep++}},t.prototype.hide_show_btn=function(e){var t=d.default.Instance.GetUI(v.default);t&&(t.btn_circle.opacity=e,t.btn_desktop.opacity=e,t.btn_gift.opacity=e)},t.prototype.over=function(){p.default.Instance.GudieStep=null,d.default.Instance.DestroyUI(n)},t.bundleName="Bundle1Pre",t.prefabUrl="GameGuidePre/GameGuidePre",t.className="GameGuideInterface",l([T(cc.Node)],t.prototype,"icon_mask",void 0),l([T(cc.Node)],t.prototype,"icon_finger",void 0),l([T(cc.Node)],t.prototype,"icon_finger2",void 0),l([T(cc.Label)],t.prototype,"label_tips",void 0),n=l([I],t)}(u.default);i.default=k,cc._RF.pop(),cc._RF.pop()},{}],GameInterface:[function(e,t,n){"use strict";cc._RF.push(t,"1a4eadzAxxGK58UHFLwQm3U","GameInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"d19eaNjUbBO+ZOCLeJedpU7","GameInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("staff104_item"),f=o("staff105_item"),_=o("staff106_item"),y=o("node_facility"),b=o("DataManager"),v=o("FunctionManager"),m=o("GameManger"),g=o("StoragerManager"),I=o("TypeManager"),T=o("staff10_item"),k=o("staff11_item"),S=o("staff15_item"),w=o("staff1_item"),O=o("staff27_item"),F=o("staff28_item"),B=o("staff2_item"),x=o("staff3_item"),P=o("staff4_item"),C=o("staff5_item"),R=o("staff8_item"),N=o("staff7_item"),A=o("staff9_item"),D=o("GameController"),U=o("InfoManager"),M=o("PoolManager"),L=o("SoundManager"),E=o("UIManager"),G=o("MainInterface"),j=o("RoleSoundManager"),z=o("VoiceLabelManager"),K=o("TimePlayVoiceManager"),H=cc._decorator,W=H.ccclass,V=H.property,J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine_guo=null,t.role_ani=null,t.team11_array=[],t.team12_array=[],t.team21_array=[],t.team22_array=[],t.team31_array=[],t.team32_array=[],t.team33_array=[],t.team34_array=[],t.team41_array=[],t.passerby_array=[],t.guest_team10_type=[],t.guest_team20_type=[],t.guest_team30_type=[],t.table10_array={},t.park_sedan_array={},t.bowl_num=0,t.node_staff={},t.node_facility={},t.group_doorway=null,t.group_canteen1=null,t.group_canteen2=null,t.group_kitchen=null,t.group_second_floor=null,t.group_backyard=null,t.group_third_floor=null,t.group_park=null,t.group_escort=null,t.group_exhibition=null,t.table_order={},t.queue_second=new Array(3),t.film_stool_record=new Array(8),t.hot_spring_stool_record=new Array(4),t.drifting_num=0,t.story_time=-100,t._totalTime=20,t._time=0,t._noFullResetTime=t._totalTime-1,t.saunaOrMahjong=-1,t.sleepTeamIds=[],t.newSleepTeamId=0,t.sleepTime=0,t}return s(t,e),t.prototype.onLoad=function(){var e=this;if(m.default.Instance.isYuTinAB){var t=function(t){var n=j.default.Instance.staffIds[t];if(j.default.Instance.checkStaffInScene(n)){var o=e.node_staff[""+n];if(o&&o.node&&o.spine){var a=o.node.convertToWorldSpaceAR(cc.Vec2.ZERO),i=e.node.convertToNodeSpaceAR(a);if(Math.abs(i.x)<=320){var r=j.default.Instance.getStaffSound(n);r&&(L.default.Instance.playRoleVoice(r,!1),j.default.Instance.showTalkSpine(o.spine.node),z.default.Instance.showTalk(o,r))}}}};K.default.Instance.addTimePlayVoice(33,function(){t(0)}),K.default.Instance.addTimePlayVoice(33,function(){t(1)}),K.default.Instance.addTimePlayVoice(33,function(){t(2)}),K.default.Instance.addTimePlayVoice(33,function(){t(3)})}},t.prototype.onUIStart=function(){cc.systemEvent.on(I.DistributedEvent.change_facility,this.facility_monitor,this)},t.prototype.onInit=function(){this.dishes_array=[],this.order_list=[],this.order_list2=[],this.staff_array=[],this.tea2_array={},this.bed2_array={},this.pool2_array={},this.table_array={},m.default.Instance.TsGame=this,m.default.Instance.GameController=this.node.getComponent(D.default),m.default.Instance.GameController.Init(),this.escort_time=2,this.first_floor_time=2,this.third_floor_time=2,this.passerby_time=2*Math.random()+2,this.node_facility[I.FacilityType.outdoor_wall]=[this.group_doorway.container1.getChildByName("outdoor_wall").getComponent(y.default)],this.node_facility[I.FacilityType.outdoor_ground]=[this.group_doorway.container1.getChildByName("outdoor_ground").getComponent(y.default)],this.node_facility[I.FacilityType.outdoor_wall][0].Init(I.FacilityType.outdoor_wall),this.node_facility[I.FacilityType.outdoor_ground][0].Init(I.FacilityType.outdoor_ground),this.role_ani.node.zIndex=100,U.default.Instance.TsInitial.login.active=!1},t.prototype.staff_init=function(e){for(var t in g.default.Instance.Staff)if(null!=b.default.Instance.StaffData[t]){var n=b.default.Instance.StaffData[t].location;e.indexOf(n)<0||this.AddStaff(b.default.Instance.StaffData[t].id)}},t.prototype.AddStaff=function(e){var t;switch(e){case 1:t=new w.default;break;case 2:t=new B.default;break;case 3:t=new x.default;break;case 4:t=new P.default;break;case 5:t=new C.default;break;case 7:t=new N.default;break;case 8:t=new R.default;break;case 9:t=new A.default;break;case 10:t=new T.default;break;case 11:t=new k.default;break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:(t=new S.default).Init(e);break;case 27:t=new O.default;break;case 28:t=new F.default;break;case 104:t=new p.default;break;case 105:t=new f.default;break;case 106:t=new _.default}null==t.StaffId&&t.Init(),this.staff_array.push(t)},t.prototype.GetStaffById=function(e){for(var t=0;t<this.staff_array.length;t++)if(this.staff_array[t].StaffId==e)return this.staff_array[t];return null},t.prototype.onUpdate=function(e){null!=this.group_doorway&&this.group_doorway.FrameUpdate(e),null!=this.group_exhibition&&this.group_exhibition.Updata(e);for(var t=0;t<this.team11_array.length;t++)this.team11_array[t].Update(e);for(t=0;t<this.team12_array.length;t++)this.team12_array[t].Update(e);for(t=0;t<this.team21_array.length;t++)this.team21_array[t].Update(e);for(t=0;t<this.team22_array.length;t++)this.team22_array[t].Update(e);for(t=0;t<this.team31_array.length;t++)this.team31_array[t].Update(e);for(t=0;t<this.team32_array.length;t++)this.team32_array[t].Update(e);for(t=0;t<this.team33_array.length;t++)this.team33_array[t].Update(e);for(t=0;t<this.team34_array.length;t++)this.team34_array[t].Update(e);for(t=0;t<this.team41_array.length;t++)this.team41_array[t].Update(e);for(t=0;t<this.staff_array.length;t++){var n=this.staff_array[t],o=this.node_staff[""+n.StaffId];if(n.Update(e),null==o&&((o=m.default.Instance.GameController.FoundStaff()).Init(n.StaffId,n,n.Coord),o.node.setPosition(n.Coord),this.node_staff[""+n.StaffId]=o),o.Scence!=n.Scence){switch(o.Scence=n.Scence,o.Scence){case I.ScenceArea.doorway:o.node.setParent(this.group_doorway.container2);break;case I.ScenceArea.first_kitchen:o.node.setParent(this.group_kitchen.container2);break;case I.ScenceArea.first_canteen:o.node.setParent(this.group_canteen1.container2);break;case I.ScenceArea.first_room1:o.node.setParent(this.group_canteen2.container2);break;case I.ScenceArea.second_canteen:case I.ScenceArea.second_room1:case I.ScenceArea.second_room2:o.node.setParent(this.group_second_floor.container2);break;case I.ScenceArea.third_canteen:o.node.setParent(this.group_third_floor.container2);break;case I.ScenceArea.exhibition:o.node.setParent(this.group_exhibition.container2)}o.last_pos_x=n.Coord.x}switch(o.Behavior){case I.StaffBehavior.move_kitchen:case I.StaffBehavior.move_station:case I.StaffBehavior.move_table:case I.StaffBehavior.move_canteen:case I.StaffBehavior.move_bed:case I.StaffBehavior.move_counter:case I.StaffBehavior.move_canteen2:case I.StaffBehavior.move_booth:o.Move(n.Coord);break;case I.StaffBehavior.order_food:case I.StaffBehavior.wash_dishes:case I.StaffBehavior.settle_accounts:case I.StaffBehavior.clear_table:case I.StaffBehavior.check_in:case I.StaffBehavior.cook_dinner:case I.StaffBehavior.clear_bed:case I.StaffBehavior.additional_cargo:case I.StaffBehavior.clean_rubbish:o.RefreshBar(n.HandlingTime,b.default.Instance.StaffWorkTime)}o.Behavior!=n.Behavior&&(o.Behavior=n.Behavior,n.Behavior!=I.StaffBehavior.serve_food&&n.Behavior!=I.StaffBehavior.move_canteen||(1==o.node_main.active&&(o.node_main.active=!1),o.RefreshIcon()))}for(t=0;t<this.dishes_array.length;t++)this.dishes_array[t].Update(e);for(this.passerby_time>0&&(this.passerby_time-=e,this.passerby_time<=0&&(this.passerby_time=5*Math.random()+5,this.come_passerby(I.ScenceArea.doorway),null!=this.group_backyard&&this.come_passerby(I.ScenceArea.backyard))),t=0;t<this.passerby_array.length;t++)this.passerby_array[t].node.active;for(var a in this.story_time>0&&(this.story_time-=e),this.first_floor_time>=0&&(this.first_floor_time-=e,this.first_floor_time<0&&(this.first_floor_time=10,this.judge_come_guest11(),this.judge_come_guest12(),this.judge_come_guest21(),this.judge_come_guest22(),this.judge_come_guest31())),this.third_floor_time>=0&&(this.third_floor_time-=e,this.third_floor_time<0&&(this.third_floor_time=20,this.judge_come_guest32(),this.judge_come_guest33(),this.judge_come_guest34(),this.judge_come_guest41())),this.escort_time>=0&&(this.escort_time-=e,this.escort_time<0&&(this.escort_time=8,this.judge_come_guest41())),this.park_sedan_array)this.park_sedan_array[a].Update(e);null!=this.group_third_floor&&this.group_third_floor.onUpdate(e),m.default.Instance.isYuTinAB&&(this.playSceneSound(e),this.updateSleepSoundTime(e),K.default.Instance.updateTime(e))},t.prototype.TeeamIdAdd=function(){m.default.Instance.TeamId++},t.prototype.judge_come_guest11=function(){var e=this.GetTable(4);if(null!=e){for(var t=[],n=0;n<m.default.Instance.GuestTeam.length;n++){var o=m.default.Instance.GuestTeam[n];o.array.length>4||this.guest_team10_type.indexOf(o.id)>=0||t.push(o)}if(0!=t.length){var a=m.default.Instance.GameController.FoundTeam("team_11"),i=Math.floor(996*Math.random())%t.length;this.guest_team10_type.push(t[i].id),a.Init(m.default.Instance.TeamId,t[i],e),this.team11_array.push(a),this.TeeamIdAdd()}}},t.prototype.judge_come_guest12=function(){var e=this.GetTable(8);if(null!=e){for(var t=[],n=0;n<m.default.Instance.GuestTeam.length;n++){var o=m.default.Instance.GuestTeam[n];o.array.length<=4||this.guest_team10_type.indexOf(o.id)>=0||t.push(o)}if(0!=t.length){var a=m.default.Instance.GameController.FoundTeam("team_12"),i=Math.floor(996*Math.random())%t.length;this.guest_team10_type.push(t[i].id),a.Init(m.default.Instance.TeamId,e,t[i]),this.team12_array.push(a),this.TeeamIdAdd()}}},t.prototype.judge_come_guest21=function(){var e=this.GetTable(6);if(null!=e){for(var t=[],n=0;n<m.default.Instance.GuestTeam.length;n++){var o=m.default.Instance.GuestTeam[n];o.array.length<4||o.array.length>6||this.guest_team20_type.indexOf(o.id)>=0||t.push(o)}if(0!=t.length){var a=m.default.Instance.GameController.FoundTeam("team_21"),i=Math.floor(996*Math.random())%t.length;this.guest_team20_type.push(t[i].id),a.Init(m.default.Instance.TeamId,t[i],e),this.team21_array.push(a),this.TeeamIdAdd()}}},t.prototype.judge_come_guest22=function(){var e;for(var t in this.bed2_array){var n=this.bed2_array[t];if(null==n.TsTeam){e=n;break}}if(null!=e){for(var o=[],a=0;a<m.default.Instance.GuestTeam.length;a++){var i=m.default.Instance.GuestTeam[a];i.array.length>2||this.guest_team20_type.indexOf(i.id)>=0||o.push(i)}if(0!=o.length){var r=m.default.Instance.GameController.FoundTeam("team_22"),c=Math.floor(996*Math.random())%o.length;this.guest_team20_type.push(o[c].id),r.Init(m.default.Instance.TeamId,o[c],e),this.team22_array.push(r),this.newSleepTeamId=m.default.Instance.TeamId,this.TeeamIdAdd()}}},t.prototype.judge_come_guest31=function(){if(null!=this.group_third_floor){var e=this.node_facility[I.FacilityType.third_film_screen],t=this.node_facility[I.FacilityType.third_film_stool];if(null!=e&&null!=t){for(var n=[],o=0;o<this.film_stool_record.length;o++)1!=this.film_stool_record[o]&&n.push(o);if(0!=n.length){var a=[];for(o=0;o<m.default.Instance.GuestTeam.length;o++){var i=m.default.Instance.GuestTeam[o];i.array.length>n.length||this.guest_team30_type.indexOf(i.id)>=0||a.push(i)}if(0!=a.length){var r=m.default.Instance.GameController.FoundTeam("team_31"),c=Math.floor(996*Math.random())%a.length;this.guest_team30_type.push(a[c].id);var s=[];for(o=0;o<a[c].array.length;o++)this.film_stool_record[n[o]]=!0,s.push(n[o]);r.Init(s,m.default.Instance.TeamId,a[c]),this.team31_array.push(r),this.TeeamIdAdd()}}}}},t.prototype.judge_come_guest32=function(){if(null!=this.group_third_floor){var e=g.default.Instance.Facility[I.FacilityType.third_floor_bridge];if(null!=g.default.Instance.Facility[I.FacilityType.third_floor_platform]||null!=e){for(var t=[],n=0;n<m.default.Instance.GuestTeam.length;n++){var o=m.default.Instance.GuestTeam[n];o.array.length>3||this.guest_team30_type.indexOf(o.id)>=0||1!=o.id&&2!=o.id&&20!=o.id&&23!=o.id&&t.push(o)}if(0!=t.length){var a=m.default.Instance.GameController.FoundTeam("team_32"),i=Math.floor(996*Math.random())%t.length;this.guest_team30_type.push(t[i].id),a.Init(m.default.Instance.TeamId,t[i]),this.team32_array.push(a),this.TeeamIdAdd()}}}},t.prototype.judge_come_guest33=function(){if(null!=this.group_third_floor&&null!=g.default.Instance.Facility[I.FacilityType.third_floor_drifting]){var e=5-this.drifting_num;if(!(e<=0)){for(var t=[],n=0;n<m.default.Instance.GuestTeam.length;n++){var o=m.default.Instance.GuestTeam[n];o.array.length>2||o.array.length>e||this.guest_team30_type.indexOf(o.id)>=0||t.push(o)}if(0!=t.length){var a=m.default.Instance.GameController.FoundTeam("team_33"),i=Math.floor(996*Math.random())%t.length;this.guest_team30_type.push(t[i].id),a.Init(m.default.Instance.TeamId,t[i]),this.team33_array.push(a),this.drifting_num+=t[i].array.length,this.TeeamIdAdd()}}}},t.prototype.judge_come_guest34=function(){if(null!=this.group_third_floor&&null!=g.default.Instance.Facility[I.FacilityType.third_floor_spring]){for(var e=[],t=0;t<this.hot_spring_stool_record.length;t++)1!=this.hot_spring_stool_record[t]&&e.push(t);if(0!=e.length){var n=[];for(t=0;t<m.default.Instance.GuestTeam.length;t++){var o=m.default.Instance.GuestTeam[t];o.array.length>2||o.array.length>e.length||this.guest_team30_type.indexOf(o.id)>=0||n.push(o)}if(0!=n.length){var a=m.default.Instance.GameController.FoundTeam("team_34"),i=Math.floor(996*Math.random())%n.length;this.guest_team30_type.push(n[i].id);var r=[];for(t=0;t<n[i].array.length;t++)this.hot_spring_stool_record[e[t]]=!0,r.push(e[t]);a.Init(r,m.default.Instance.TeamId,n[i]),this.team34_array.push(a),this.TeeamIdAdd()}}}},t.prototype.judge_come_guest41=function(){if(null!=this.group_exhibition){var e=g.default.Instance.AreaUnlock[I.ScenceArea.exhibition];if(null!=e&&1==e.unlock){var t=this.judge_visit_booth();if(0!=t.length&&!(this.team41_array.length>15)){for(var n=0,o=0;o<this.team41_array.length;o++){var a=this.team41_array[o];switch(a.Behavior){case I.Team41Behavior.move_0:case I.Team41Behavior.move_1:case I.Team41Behavior.move_2:n+=a.guest_num}}if(b.default.Instance.EscortQueueData.length-n<=0)return!1;var i=[];for(o=0;o<m.default.Instance.GuestTeam.length;o++){var r=m.default.Instance.GuestTeam[o];r.array.length>=2||i.push(r)}if(0==i.length)return!1;var c=Math.floor(996*Math.random())%i.length,s=m.default.Instance.GameController.FoundTeam("team_41"),l={id:0,array:[i[c].array[0]]};s.Init(m.default.Instance.TeamId,l,t),this.team41_array.push(s),this.TeeamIdAdd()}}}},t.prototype.come_passerby=function(e){for(var t,n=0;n<this.passerby_array.length;n++){var o=this.passerby_array[n];if(0==o.node.active){t=o;break}}null==t&&(t=m.default.Instance.GameController.FoundPasserby(),this.passerby_array.push(t)),t.Init(e)},t.prototype.TeamLeave=function(e,t){var n,o;switch(t){case 11:n=this.team11_array;break;case 12:n=this.team12_array;break;case 21:n=this.team21_array;break;case 22:n=this.team22_array;break;case 31:n=this.team31_array;break;case 32:n=this.team32_array;break;case 33:n=this.team33_array;break;case 34:n=this.team34_array;break;case 41:n=this.team41_array}switch(t){case 11:case 12:o=this.guest_team10_type;break;case 21:case 22:o=this.guest_team20_type;break;case 31:case 32:case 33:case 34:o=this.guest_team30_type}for(var a=0;a<n.length;a++){var i=n[a];if(i.TeamId==e){if(i.Useing=!1,n.splice(a,1),o){var r=o.indexOf(i.GuestTeamType);r>=0&&o.splice(r,1)}break}}},t.prototype.RefreshDrifting=function(e){for(var t=0,n=0;n<this.team33_array.length;n++){var o=this.team33_array[n];if(o.Behavior==I.Team33Behavior.queue_up)for(var a=0;a<o.GuestArray.length;a++){var i=o.GuestArray[a];null!=e&&e!=o.TeamId||i.QueueUp(t),t++}}},t.prototype.NextDrifting=function(){for(var e=0;e<this.team33_array.length;e++){var t=this.team33_array[e];if(t.Behavior==I.Team33Behavior.queue_up){t.judge_move2();break}}},t.prototype.GetTable=function(e){for(var t in this.table10_array){var n=this.table10_array[t];if(null==n.TsTeam&&0!=n.Lv&&n.TableVolume==e&&null!=g.default.Instance.Facility[n.TableId])switch(n.TableId){case I.FacilityType.table_1:case I.FacilityType.room1_tabel:default:return n}}return null},t.prototype.judge_visit_booth=function(){for(var e=[],t=[],n=0;n<b.default.Instance.ExhibitionPath.length;n++)null!=g.default.Instance.Facility["exhibition_exhibits"+(n+1)]&&t.push(n);for(n=0;n<3;n++)if(!(t.length<=0)){var o=Math.floor(666*Math.random())%t.length;e.push(t[o]),t.splice(o,1)}return e.sort(function(e,t){return e-t}),e},t.prototype.JudgeQueue=function(e){for(var t=0,n=0;n<this.team41_array.length;n++){var o=this.team41_array[n];if(!(e<=o.TeamId))switch(o.Behavior){case I.Team41Behavior.move_2:t+=o.guest_num}}return t},t.prototype.EscortNext=function(){for(var e=0;e<this.team41_array.length;e++){var t=this.team41_array[e];switch(t.Behavior){case I.Team41Behavior.move_2:return void t.change_behavior(I.Team41Behavior.move_3)}}},t.prototype.NextBoothWait=function(){for(var e=0;e<this.team41_array.length;e++){var t=this.team41_array[e];if(t.Behavior==I.Team41Behavior.booth_wait){t.JudgeNextVisit("\u7eaa\u5ff5\u54c1\u5e97\u4e0b\u4e00\u4f4d");break}}},t.prototype.JudgePay=function(){for(var e=0;e<this.team41_array.length;e++){var t=this.team41_array[e];switch(t.Behavior){case I.Team41Behavior.move_3:case I.Team41Behavior.pay_1:return!1;case I.Team41Behavior.booth_wait:if(-1==t.visit_index)return!1}}return!0},t.prototype.JudgePos=function(e){for(var t=0;t<this.team41_array.length;t++){var n=this.team41_array[t];switch(n.Behavior){case I.Team41Behavior.booth_visiti:case I.Team41Behavior.booth_wait:if(n.visit_index==e)return!1}}return!0},t.prototype.JudgePos2=function(){for(var e=0;e<this.team41_array.length;e++)switch(this.team41_array[e].Behavior){case I.Team41Behavior.move_shop:case I.Team41Behavior.pay_2:return!1}return!0},t.prototype.addCookFood=function(e){this.order_list.push(e),this.startCookFood(),m.default.Instance.ScenceArea==I.ScenceArea.first_kitchen&&this.bowl_num},t.prototype.startCookFood=function(){if(!(this.BowlNum>=8))for(var e=0;e<this.order_list.length;e++){var t=this.order_list[e];this.cook_course(t),this.order_list.splice(e,1)}},t.prototype.cook_course=function(e){var t=m.default.Instance.GameController.FoundDishes();t.Init(e),this.dishes_array.push(t),m.default.Instance.TsGame.JudgeStaffJob(4),"work"!=m.default.Instance.TsGame.spine_guo.animation&&m.default.Instance.TsGame.spine_guo.setAnimation(0,"work",!0)},t.prototype.JudgeStaffToTable=function(e,t){if(void 0===t&&(t=null),null==t&&(t=this.GetTableByState(e)),null!=t){for(var n=!1,o=0;o<this.staff_array.length;o++){var a=this.staff_array[o];a.Behavior!=I.StaffBehavior.wait_work&&a.Behavior!=I.StaffBehavior.move_station||1==a.JudgeOperability(t)&&(t.TsStaff=a,a.TsTable=t,cc.Tween.stopAllByTarget(a),a.ChangeBehavior(I.StaffBehavior.move_table),n=!0)}if(0==n){var i=g.default.Instance.AreaUnlock[I.ScenceArea.first_kitchen];i&&1==i.unlock&&t.click(),300==m.default.Instance.GudieStep&&this.team11_array[0].sing_order()}}},t.prototype.JudgeStaffToBed=function(e){if(null==e)for(var t in this.bed2_array)if(255==this.bed2_array[t].btn_click.opacity&&0==this.bed2_array[t].cleaning){e=this.bed2_array[t];break}if(null==e)return!1;for(var n=0;n<this.staff_array.length;n++){var o=this.staff_array[n];if(28==o.StaffId&&(o.Behavior==I.StaffBehavior.wait_work||o.Behavior==I.StaffBehavior.move_station))return o.TsBed=e,cc.Tween.stopAllByTarget(o),o.ChangeBehavior(I.StaffBehavior.move_bed),!0}return!1},t.prototype.GetTableByState=function(e){for(var t in this.table10_array){var n=this.table10_array[t];if(null!=n&&n.TableTips==e)return n}return null},t.prototype.JudgeStaffToKitchen=function(e){void 0===e&&(e=null);for(var t,n=1e7,o=0;o<this.staff_array.length;o++){var a=this.staff_array[o],i=e.GetTableVolume();if(0!=a.JudgeDishes(i)&&null==e.ts_staff&&(a.Behavior==I.StaffBehavior.wait_work||a.Behavior==I.StaffBehavior.move_station)){var r=v.default.Instance.Distance(a.Coord,e.node.getPosition());n>r&&(n=r,t=a)}}return null!=t&&(e.ts_staff=t,t.TsDishes=e,cc.Tween.stopAllByTarget(t),t.ChangeBehavior(I.StaffBehavior.move_kitchen),!0)},t.prototype.GetDishesByState=function(e,t){for(var n=0;n<this.dishes_array.length;n++)if(null==t||this.dishes_array[n].dishes_scence==t){if(e<0&&this.dishes_array[n].cook_time<=0&&1==this.dishes_array[n].node.active&&this.dishes_array[n].node.opacity>0)return this.dishes_array[n];if(e>0&&this.dishes_array[n].cook_time>0)return this.dishes_array[n]}return null},t.prototype.JudgeStaffJob=function(e){for(var t=!1,n=0;n<this.staff_array.length;n++){var o=this.staff_array[n];if(o.StaffId==e&&o.Behavior!=I.StaffBehavior.move_station)switch(o.StaffId){case 4:this.GetDishesByState(1,I.ScenceArea.first_canteen)?o.Behavior==I.StaffBehavior.wait_work&&(o.ChangeBehavior(I.StaffBehavior.cook_dinner),t=!0):o.Behavior==I.StaffBehavior.cook_dinner&&o.ChangeBehavior(I.StaffBehavior.wait_work);break;case 27:this.GetDishesByState(1,I.ScenceArea.second_canteen)?o.Behavior==I.StaffBehavior.wait_work&&(o.ChangeBehavior(I.StaffBehavior.cook_dinner),t=!0):o.Behavior==I.StaffBehavior.cook_dinner&&o.ChangeBehavior(I.StaffBehavior.wait_work);break;case 8:this.BowlNum>=4?o.Behavior==I.StaffBehavior.wait_work&&(o.ChangeBehavior(I.StaffBehavior.wash_dishes),t=!0):o.Behavior==I.StaffBehavior.wash_dishes&&o.ChangeBehavior(I.StaffBehavior.wait_work)}}return t},Object.defineProperty(t.prototype,"BowlNum",{get:function(){return this.bowl_num},set:function(e){1!=m.default.Instance.IsWash&&(this.bowl_num=e,this.bowl_num>=4?(cc.systemEvent.emit(I.DistributedEvent.work_warn,I.WorkWarn.clear_dish,!0),null==g.default.Instance.Staff.staff_8&&this.group_kitchen.WashBtn(!0),this.bowl_num,m.default.Instance.TsGame.JudgeStaffJob(8)):0==this.bowl_num&&(this.group_kitchen.WashBtn(!1),this.startCookFood(),cc.systemEvent.emit(I.DistributedEvent.work_warn,I.WorkWarn.clear_dish,!1)))},enumerable:!1,configurable:!0}),t.prototype.facility_init2=function(e){for(var t=[],n=0;n<b.default.Instance.FacilityBasics.length;n++){var o=b.default.Instance.FacilityBasics[n];if(null!=e){var a=b.default.Instance.Facility1Information[o];if(e.indexOf(a.location)<0)continue}t.push(b.default.Instance.FacilityBasics[n])}for(n=0;n<e.length;n++){var i=g.default.Instance.AreaUnlock[e[n]];if(null!=i&&1==i.unlock)for(var r=b.default.Instance.FacilityOrder[e[n]],c=0;c<r.length;c++)b.default.Instance.Facility1Information[r[c]].data[0].unlock_path==I.UnlockPath.default&&null==g.default.Instance.Facility[r[c]]?(g.default.Instance.Facility[r[c]]={used_lv:1,buy_record:[1]},t.push(r[c])):b.default.Instance.FacilityDefault.indexOf(r[c])>=0&&t.push(r[c])}for(var s in g.default.Instance.Facility){var l=g.default.Instance.Facility[s];if(!l||0!=l.buy_record.length){if(null!=e&&(a=b.default.Instance.Facility1Information[s],e.indexOf(a.location)<0))continue;t.indexOf(s)<0&&t.push(s)}}this.facility_monitor(t,I.RefreshFacilityPath.init)},t.prototype.facility_monitor=function(e,t){var n=!0;switch(e.length>1&&(n=!1),t){case I.RefreshFacilityPath.init:case I.RefreshFacilityPath.unlock_default:n=!1}switch(t){case I.RefreshFacilityPath.init:case I.RefreshFacilityPath.change:case I.RefreshFacilityPath.unlock_default:case I.RefreshFacilityPath.unlock:for(var o=0;o<e.length;o++)switch(this.facility_refresh(e[o],t,n),e[o]){case I.FacilityType.exhibition_table:t==I.RefreshFacilityPath.unlock&&(this.group_exhibition.icon_stock.active=!0)}break;case I.RefreshFacilityPath.upgrade:v.default.Instance.LockFaclity(e[0],t)}},t.prototype.facility_refresh=function(e,t,n){return void 0===n&&(n=!0),u(this,void 0,void 0,function(){var o,a,i,r,c,s,l,u,h,p,f,_,y,T=this;return d(this,function(d){switch(d.label){case 0:switch(null==(o=g.default.Instance.Facility[e])&&(o={used_lv:0,buy_record:[]}),a=b.default.Instance.Facility1Information[e],e){case I.FacilityType.queue_stool:return[3,1];case I.FacilityType.stairs_decorate:return[3,2];case I.FacilityType.table_1:case I.FacilityType.table_2:case I.FacilityType.table_3:case I.FacilityType.table_4:return[3,3];case I.FacilityType.room1_tabel:case I.FacilityType.room2_tabel:case I.FacilityType.room3_tabel:return[3,4];case I.FacilityType.second_floor_stool:return[3,5];case I.FacilityType.second_floor_table1:case I.FacilityType.second_floor_table2:return[3,6];case I.FacilityType.second_floor_tea1:case I.FacilityType.second_floor_tea2:return[3,7];case I.FacilityType.second_floor_bed1:case I.FacilityType.second_floor_bed2:return[3,8];case I.FacilityType.second_floor_pool:return[3,9];case I.FacilityType.second_floor_lantern2:return[3,10];case I.FacilityType.third_film_stool:return[3,11];case I.FacilityType.third_floor_table1:case I.FacilityType.third_floor_table2:return[3,12];case I.FacilityType.third_floor_screen3:case I.FacilityType.third_floor_decorate9:case I.FacilityType.third_floor_decorate10:return[3,15];case I.FacilityType.park_sedan_1:case I.FacilityType.park_sedan_2:case I.FacilityType.park_sedan_3:case I.FacilityType.park_sedan_4:case I.FacilityType.park_sedan_5:return[3,16];case I.FacilityType.escort_flagging:case I.FacilityType.escort_bonsai:case I.FacilityType.exhibition_bonsai:return[3,19];case I.FacilityType.exhibition_lamp2:return[3,20]}return[3,21];case 1:for(null==this.node_facility[e]&&(this.node_facility[e]=[]),u=0;u<6;u++)null==this.node_facility[e][u]&&((h=m.default.Instance.GameController.FoundFacility(e)).Init(e,u),this.node_facility[e].push(h));return[3,22];case 2:for(null==this.node_facility[e]&&(this.node_facility[e]=[]),u=0;u<2;u++)null==this.node_facility[e][u]&&((h=m.default.Instance.GameController.FoundFacility(e)).Init(e,u),this.node_facility[e].push(h));return[3,22];case 3:return null==this.table10_array[e]&&((s=m.default.Instance.GameController.FoundTable11()).node.setParent(this.group_canteen1.container2),s.Init(e,4),this.table10_array[e]=s,this.judge_come_guest11()),[3,22];case 4:return null==this.table10_array[e]&&((s=m.default.Instance.GameController.FoundTable12()).node.setParent(this.group_canteen2.container2),s.Init(e,8),this.table10_array[e]=s),[3,22];case 5:for(null==this.node_facility[e]&&(this.node_facility[e]=[]),u=0;u<6;u++)null==this.node_facility[e][u]&&((h=m.default.Instance.GameController.FoundFacility(e)).Init(e,u),this.node_facility[e].push(h));return[3,22];case 6:return null==this.table10_array[e]&&((s=m.default.Instance.GameController.FoundTable21()).node.setParent(this.group_second_floor.container2),s.Init(e,6),this.table10_array[e]=s),[3,22];case 7:return null==this.tea2_array[e]&&((i=m.default.Instance.GameController.FoundTea2()).node.setParent(this.group_second_floor.container2),i.Init(e),this.tea2_array[e]=i),[3,22];case 8:return null==this.bed2_array[e]&&((r=m.default.Instance.GameController.FoundBed2()).node.setParent(this.group_second_floor.container2),r.Init(e),this.bed2_array[e]=r),[3,22];case 9:return null==this.pool2_array[e]&&((c=m.default.Instance.GameController.FoundPool2()).node.setParent(this.group_second_floor.container2),c.Init(e),this.pool2_array[e]=c),[3,22];case 10:for(null==this.node_facility[e]&&(this.node_facility[e]=[]),u=0;u<2;u++)null==this.node_facility[e][u]&&((h=m.default.Instance.GameController.FoundFacility(e)).Init(e,u),this.node_facility[e].push(h));return[3,22];case 11:for(null==this.node_facility[e]&&(this.node_facility[e]=[]),u=0;u<8;u++)null==this.node_facility[e][u]&&((h=m.default.Instance.GameController.FoundFacility(e)).Init(e,u),this.node_facility[e].push(h));return[3,22];case 12:return null!=this.table_array[e]?[3,14]:[4,m.default.Instance.GameController.FoundTable5()];case 13:(s=d.sent()).node.setParent(this.group_third_floor.container2),s.Init(e),this.table_array[e]=s,d.label=14;case 14:return[3,22];case 15:for(null==this.node_facility[e]&&(this.node_facility[e]=[]),u=0;u<2;u++)null==this.node_facility[e][u]&&((h=m.default.Instance.GameController.FoundFacility(e)).Init(e,u),this.node_facility[e].push(h));return[3,22];case 16:return null!=this.park_sedan_array[e]?[3,18]:[4,m.default.Instance.GameController.FoundParkSedan()];case 17:(l=d.sent()).node.setParent(this.group_park.container2),l.Init(e),this.park_sedan_array[e]=l,this.group_park.RefreshParkSedan(e),d.label=18;case 18:return[3,22];case 19:for(null==this.node_facility[e]&&(this.node_facility[e]=[]),u=0;u<2;u++)null==this.node_facility[e][u]&&((h=m.default.Instance.GameController.FoundFacility(e)).Init(e,u),this.node_facility[e].push(h));return[3,22];case 20:for(null==this.node_facility[e]&&(this.node_facility[e]=[]),u=0;u<2;u++)null==this.node_facility[e][u]&&((h=m.default.Instance.GameController.FoundFacility(e)).Init(e,u),1==u&&(h.node.scaleX=-1),this.node_facility[e].push(h));return[3,22];case 21:return null==this.node_facility[e]&&((h=m.default.Instance.GameController.FoundFacility(e)).Init(e),this.node_facility[e]=[h]),[3,22];case 22:switch(t){case I.RefreshFacilityPath.unlock_default:case I.RefreshFacilityPath.unlock:case I.RefreshFacilityPath.change:p=!0;break;default:p=!1}switch(t){case I.RefreshFacilityPath.unlock:_=1.7;break;default:_=0}switch(e){case I.FacilityType.table_1:case I.FacilityType.table_2:case I.FacilityType.table_3:case I.FacilityType.table_4:case I.FacilityType.room1_tabel:case I.FacilityType.room2_tabel:case I.FacilityType.room3_tabel:case I.FacilityType.second_floor_table1:case I.FacilityType.second_floor_table2:this.table10_array[e].RefreshLv(o.used_lv,p),f=[this.table10_array[e]];break;case I.FacilityType.second_floor_bed1:case I.FacilityType.second_floor_bed2:this.bed2_array[e].RefreshLv(o.used_lv,p),f=[this.bed2_array[e]];break;case I.FacilityType.second_floor_tea1:case I.FacilityType.second_floor_tea2:this.tea2_array[e].RefreshLv(o.used_lv,p),f=[this.tea2_array[e]];break;case I.FacilityType.second_floor_pool:this.pool2_array[e].RefreshLv(o.used_lv,p),f=[this.pool2_array[e]];break;case I.FacilityType.third_floor_table1:case I.FacilityType.third_floor_table2:this.table_array[e].RefreshLv(o.used_lv,p),f=[this.table_array[e]];break;case I.FacilityType.park_sedan_1:case I.FacilityType.park_sedan_2:case I.FacilityType.park_sedan_3:case I.FacilityType.park_sedan_4:case I.FacilityType.park_sedan_5:this.park_sedan_array[e].RefreshLv(o.used_lv,p),f=[this.park_sedan_array[e]];break;default:if(null==this.node_facility[e])return[2];this.scheduleOnce(function(){for(var t=0;t<T.node_facility[e].length;t++)T.node_facility[e][t].Refresh(o.used_lv,p)},_),f=this.node_facility[e]}switch(_>0&&(y=v.default.Instance.GetFacilityPos(e,g.default.Instance.Facility[e].used_lv),this.role_ani.node.setParent(f[0].node.parent),this.role_ani.node.setPosition(y),this.role_ani.node.zIndex=v.default.Instance.GetFacilityIndex(e,this.role_ani.node),this.role_ani.node.active=!0,L.default.Instance.PlayLoop("build",!0,"build"),this.role_ani.setAnimation(0,"work",!1),this.scheduleOnce(function(){T.role_ani.node.active=!1,L.default.Instance.PlayLoop("build",!1,"build"),cc.tween(T).delay(.5).call(function(){var e=E.default.Instance.GetUI(G.default).node,t=f[0].node.convertToWorldSpaceAR(cc.v2(0,0)),n=e.convertToNodeSpaceAR(t),o=e.convertToWorldSpaceAR(cc.v2(0,-460-m.default.Instance.ScreenAdaptive)),i=e.convertToNodeSpaceAR(o),r=v.default.Instance.Distance(n,i)/500;M.default.Instance.PlayDishesEffect(n,i,r,e,a.location)}).start()},_)),t){case I.RefreshFacilityPath.unlock:case I.RefreshFacilityPath.change:1==n&&v.default.Instance.LockFaclity(e,t)}switch(a.location){case I.ScenceArea.third_canteen:case I.ScenceArea.third_room1:case I.ScenceArea.third_room2:this.group_third_floor.JudgeFacility(e,o.used_lv)}return[2]}})})},t.prototype.addCookFood2=function(e){this.order_list2.push(e),this.startCookFood2()},t.prototype.startCookFood2=function(){for(var e=0;e<this.order_list2.length;e++){var t=this.order_list2[e];this.cook_course(t),this.order_list2.splice(e,1)}},Object.defineProperty(t.prototype,"NodeFacility",{get:function(){return this.node_facility},enumerable:!1,configurable:!0}),t.prototype.playSleepSound=function(e){if(void 0===e&&(e=!1),m.default.Instance.ScenceArea==I.ScenceArea.second_room1||m.default.Instance.ScenceArea==I.ScenceArea.second_room2){var t=null,n=[].concat(this.team22_array),o=this.getOneRoleSound(n,[m.default.Instance.ScenceArea],[I.Team22Behavior.have_bath,I.Team22Behavior.move_7,I.Team22Behavior.move_6,I.Team22Behavior.tea],I.VoiceType.scene2);if(o&&o.guest&&o.guest.spine){if(t=o.team.TeamId,e&&this.sleepTeamIds.includes(t))return;this.sleepTeamIds.includes(t)||this.sleepTeamIds.push(t),L.default.Instance.playRoleVoice(o.voice),j.default.Instance.showTalkSpine(o.guest.spine.node),z.default.Instance.showTalk(o.guest,o.voice)}}},t.prototype.updateSleepSoundTime=function(e){m.default.Instance.ScenceArea!=I.ScenceArea.second_room1&&m.default.Instance.ScenceArea!=I.ScenceArea.second_room2||this.sleepTeamIds.includes(this.newSleepTeamId)||(this.sleepTime+=e,this.sleepTime>=1&&(this.sleepTime=0,this.playSleepSound(!0)))},t.prototype.playSceneSound=function(e){if(this._time+=e,this._time>=this._totalTime){var t=[],n=null;switch(m.default.Instance.ScenceArea){case I.ScenceArea.doorway:case I.ScenceArea.first_canteen:case I.ScenceArea.second_canteen:this._time=this._noFullResetTime,t=[].concat(this.team11_array,this.team12_array,this.team21_array,this.team22_array,this.team31_array,this.team32_array,this.team33_array),n=this.getOneRoleSound(t,[m.default.Instance.ScenceArea],["leave"],I.VoiceType.scene1);break;case I.ScenceArea.third_room1:case I.ScenceArea.third_room2:case I.ScenceArea.third_canteen:if(m.default.Instance.TsGame&&m.default.Instance.TsGame.group_third_floor&&m.default.Instance.TsGame.group_third_floor.ts_map&&m.default.Instance.TsGame.group_third_floor.ts_map.map)if(m.default.Instance.TsGame.group_third_floor.ts_map.map.position.clone().x>=300){var o="";this._time=0;var a="",i=[I.Team34Behavior.wait_3,I.Team34Behavior.wait_4,I.Team34Behavior.wait_2];0==this.saunaOrMahjong?(i=[I.Team34Behavior.wait_3,I.Team34Behavior.wait_4],a=I.VoiceType.scene5):1==this.saunaOrMahjong&&(i=[I.Team34Behavior.wait_2],a=I.VoiceType.scene4),t=[].concat(this.team34_array);e:for(var r=0;r<t.length;r++){var c=t[r];if(i.includes(c.behavior)){var s=a;s||(s=c.behavior==I.Team34Behavior.wait_2?I.VoiceType.scene4:I.VoiceType.scene5);for(var l=c.GuestArray,u=0;u<l.length;u++){var d=l[u];if(d){var h=d.getGuestId();if(o=j.default.Instance.getRoleVoiceByType(h,s)){c.behavior==I.Team34Behavior.wait_2?this.saunaOrMahjong:this.saunaOrMahjong=1,n={voice:o,guest:d};break e}}}}}}else this._time=this._noFullResetTime,t=[].concat(this.team32_array),n=this.getOneRoleSound(t,[I.ScenceArea.third_canteen],[I.Team32Behavior.move_1,I.Team32Behavior.wait_1,I.Team32Behavior.move_2,I.Team32Behavior.wait_2],I.VoiceType.scene3)}n&&n.guest&&n.guest.spine&&(this._time=0,L.default.Instance.playRoleVoice(n.voice),j.default.Instance.showTalkSpine(n.guest.spine.node),z.default.Instance.showTalk(n.guest,n.voice))}},t.prototype.resetSceneGusetSound=function(){this._time=0},t.prototype.getOneRoleSound=function(e,t,n,o){e=e.sort(function(){return Math.random()-.5});var a=null;e:for(var i=0;i<e.length;i++){var r=e[i];if(n.includes(r.behavior))for(var c=r.GuestArray,s=0;s<c.length;s++){var l=c[s];if(l&&l.node&&l.node.isValid){var u=l.scence;if(u==I.ScenceArea.second_canteen){var d=l.node.getPosition();if(l.node.parent&&m.default.Instance.TsGame.group_second_floor.container2){var h=m.default.Instance.TsGame.group_second_floor.container2,p=l.node.parent.convertToWorldSpaceAR(d.clone());h.convertToNodeSpaceAR(p)&&(d=h.convertToNodeSpaceAR(p))}var f=null;d.x>=375?f=I.ScenceArea.second_canteen:d.x<=-375?f=I.ScenceArea.second_room2:d.y>=200&&(f=I.ScenceArea.second_room1),u=f}if(t.includes(u)){var _=l.getGuestId(),y=j.default.Instance.getRoleVoiceByType(_,o);if(y){a={team:r,voice:y,guest:l};break e}}}}}return a},t.bundleName="Bundle2Pre",t.prefabUrl="GamePre/GamePre",t.className="GameInterface",l([V(sp.Skeleton)],t.prototype,"spine_guo",void 0),l([V(sp.Skeleton)],t.prototype,"role_ani",void 0),l([W],t)}(h.default);i.default=J,cc._RF.pop(),cc._RF.pop()},{}],GameManger:[function(e,t,n){"use strict";cc._RF.push(t,"b566aY76UhGB7qlupshuVFN","GameManger");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"aadf9xuFgBHkJXrBOXTJhLx","GameManger");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var s=o("AStar"),l=o("DataManager"),u=o("StoragerManager"),d=o("TypeManager"),h=cc._decorator,p=h.ccclass,f=(h.property,function(){function e(){var e;this.gameType=d.GameType.barbecue,this.LoginTime=0,this.OfflineTime=0,this.OnlineTime=0,this.TeamId=10,this.IsWash=!1,this.NightControl=!1,this.SecondUpdate=!1,this.FirstFloorAStar=new s.AStar(l.default.Instance.FirstFloorSize.width,l.default.Instance.FirstFloorSize.height),this.SecondFloorAStar=new s.AStar(l.default.Instance.SecondFloorSize.width,l.default.Instance.SecondFloorSize.height),this.ExhibitionAStar=new s.AStar(l.default.Instance.ExhibitionSize.width,l.default.Instance.ExhibitionSize.height),this.gudie_step=null,this.TalkNum=((e={})[d.ScenceArea.doorway]=0,e[d.ScenceArea.first_canteen]=0,e[d.ScenceArea.first_kitchen]=0,e[d.ScenceArea.first_room1]=0,e),this.BarbecueMaxLv=90,this.barbecue_star=10,this.FacilityScroll={},this.ScreenAdaptive=0,this.ScreenAdaptive2=0,this.TipsArrowsNum=3,this.CanUnlockClikc={},this.inGame=!1,this.ABTestInfo={},this.LevelABConfig=[6,7,8,10,13,15,20,29],this.province="",this.showLevelPackInterfaceCount=0}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ScenceArea",{get:function(){return this.game_scence},set:function(e){this.game_scence=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GudieStep",{get:function(){return this.gudie_step},set:function(e){this.gudie_step=e,cc.systemEvent.emit(d.DistributedEvent.gudie_step)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BarbecueStar",{get:function(){return this.barbecue_star},set:function(e){this.barbecue_star=e,cc.systemEvent.emit(d.DistributedEvent.star_num),cc.systemEvent.emit(d.DistributedEvent.facility_red),cc.systemEvent.emit(d.DistributedEvent.shop_red)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isYuTinAB",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNewConfigAB",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isJump36AB",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.jumpABLevel=function(e,t){if(void 0===e&&(e=u.default.Instance.BarbecueLv.length+1),void 0===t&&(t=5),e>=3&&e<=6){for(var n=2;n<6;n++)u.default.Instance.BarbecueLv[n]||(u.default.Instance.BarbecueLv[n]=3);e=u.default.Instance.BarbecueLv.length+1}return u.default.Instance.AutoSyncData(!1,!0),e},e.prototype.getRealLevel=function(e,t){void 0===e&&(e=u.default.Instance.BarbecueLv.length+1),void 0===t&&(t=this.isJump36AB);var n=e,o=-1,a=-1;return t&&(o=3,a=6),-1!=o&&-1!=a&&n>=o&&(n-=a-o+1),n},Object.defineProperty(e.prototype,"isWinActivity",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInterstitialAD",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNoTimeGame",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDayChallange",{get:function(){return!!this.ABTestInfo&&1==this.ABTestInfo["daily_challenge1:daily_challenge1"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LvConfig",{get:function(){return!!this.ABTestInfo&&3==this.ABTestInfo["daily_challenge1:daily_challenge1"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLevel3Time30",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLevel3Time60",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameTip",{get:function(){return!!this.ABTestInfo&&2==this.ABTestInfo["daily_challenge1:daily_challenge1"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ShowLevelPackInterface",{get:function(){return this.showLevelPackInterfaceCount},set:function(e){this.showLevelPackInterfaceCount=e},enumerable:!1,configurable:!0}),e.prototype.GetMoreGameNameByType=function(e){switch(e){case d.MoreGameType.Jenga:return"\u70e7\u70e4\u53e0\u53e0\u4e50"}return""},e.prototype.GetMoreGameIconNameByType=function(e){switch(e){case d.MoreGameType.Jenga:return"icon_item1"}return""},e.prototype.GetMoreGameUnlockLvCount=function(e){switch(e){case d.MoreGameType.Jenga:return 0}return 0},e._instance=null,t=c([p],e)}());i.default=f,cc._RF.pop(),cc._RF.pop()},{}],GuestBase:[function(e,t,n){"use strict";cc._RF.push(t,"b1e64vSE9lE/oyb4oNO4lXP","GuestBase");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"077bck8IflPUpDj7ECrdXW7","GuestBase");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("FunctionManager"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos_0=cc.v2(80,-600),t.pos_1=cc.v2(80,-360),t.pos_2=cc.v2(640,-360),t.pos_3=cc.v2(200,-120),t.pos_4=cc.v2(250,400),t.pos_5=cc.v2(-350,-450),t.pos_6=cc.v2(-270,-1070),t.pos_7=cc.v2(-1400,550),t.pos_7_array=[cc.v2(30,50),cc.v2(30,-500),cc.v2(-230,-500),cc.v2(-350,-450)],t.coord=cc.v2(0,0),t}return s(t,e),t.prototype.getGuestId=function(){return this.skin_id},Object.defineProperty(t.prototype,"TeamId",{get:function(){return this.team_id},enumerable:!1,configurable:!0}),t.prototype.init_data=function(e,t,n){switch(this.index=e,this.skin_id=t,this.coord.x=n.x,this.coord.y=n.y,this.last_pos_x=this.coord.x,this.scence=null,this.animation="walk_1",this.skin_id){case 5:case 6:this.move_speed=100;break;default:this.move_speed=150}d.default.Instance.GudieStep>=300&&d.default.Instance.GudieStep<400&&(this.move_speed=300)},t.prototype.ChangeBehavior=function(){},t.prototype.Update=function(){},t.prototype.change_animation=function(e){switch(this.animation=e,this.animation){case"walk_1":case"walk_2":case"walk_3":case"standby_1":this.shadow.active=!0;break;default:this.shadow.active=!1}1==this.node.activeInHierarchy&&this.spine.setAnimation(0,this.animation,!0)},t.prototype.move=function(){this.node.x==this.coord.x&&this.node.y==this.coord.y||(this.last_pos_x>this.coord.x&&this.spine.node.scaleX>0?this.spine.node.scaleX=-1:this.last_pos_x<this.coord.x&&this.spine.node.scaleX<0&&(this.spine.node.scaleX=1),this.node.setPosition(this.coord),this.last_pos_x=this.coord.x,this.node.zIndex=3e3-Math.floor(this.node.y))},t.prototype.change_scene=function(e,t){if(this.index,this.scence!=e){switch(this.scence=e,this.scence){case h.ScenceArea.doorway:this.node.setParent(d.default.Instance.TsGame.group_doorway.container2),this.node.setScale(1);break;case h.ScenceArea.first_canteen:this.node.setParent(d.default.Instance.TsGame.group_canteen1.container2),this.node.setScale(1);break;case h.ScenceArea.first_room1:this.node.setParent(d.default.Instance.TsGame.group_canteen2.container2),this.node.setScale(1);break;case h.ScenceArea.second_canteen:this.node.setParent(d.default.Instance.TsGame.group_second_floor.container2),this.node.setScale(1);break;case h.ScenceArea.third_canteen:this.node.setParent(d.default.Instance.TsGame.group_third_floor.container2),this.node.setScale(1.2);break;case h.ScenceArea.escort:this.node.setParent(d.default.Instance.TsGame.group_escort.container2),this.node.setScale(1);break;case h.ScenceArea.exhibition:this.node.setParent(d.default.Instance.TsGame.group_exhibition.container2),this.node.setScale(1.2)}null!=t&&(this.coord=t,this.move())}},t.prototype.tween=function(e){cc.Tween.stopAllByTarget(this);for(var t=cc.tween(this),n=0;n<e.length;n++){var o;o=0==n?u.default.Instance.Distance(this.coord,e[n]):u.default.Instance.Distance(e[n-1],e[n]),t=t.to(o/this.move_speed,{Coord:e[n]})}return t},t.prototype.BeganSing=function(){},t.prototype.QueueUp=function(){},Object.defineProperty(t.prototype,"Seat",{get:function(){return this.seat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SkinId",{get:function(){return this.skin_id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Coord",{get:function(){return this.coord},set:function(e){this.coord=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{get:function(){return this.animation},enumerable:!1,configurable:!0}),l([f],t)}(cc.Component));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],Illustration1Interface:[function(e,t,n){"use strict";cc._RF.push(t,"487c2roqDZJca1C/st9g5Ji","Illustration1Interface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"3da03oarbRM+qD4kuCzkPOd","Illustration1Interface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u,d=o("UIBase"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("StoragerManager"),y=o("TypeManager"),b=o("UIManager"),v=o("illustration1_item"),m=o("ShopAwardInterface");(function(e){e[e.none=-1]="none",e[e.common=0]="common",e[e.activity=1]="activity"})(u||(u={}));var g=cc._decorator,I=g.ccclass,T=g.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.btn_close=null,t.icon_award1=null,t.icon_award2=null,t.btn_award=null,t.bar_4=null,t.label_progress=null,t.layout=null,t.tagList=null,t.topList=null,t.item_array=[],t._curTag=u.none,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){for(var e=this.tagList.childrenCount,t=0;t<e;t++)this.tagList.children[t].on(cc.Node.EventType.TOUCH_END,this._tagClick.bind(this,t),this)},t.prototype.onUIDisable=function(){for(var e=this.tagList.childrenCount,t=0;t<e;t++)this.tagList.children[t].off(cc.Node.EventType.TOUCH_END,this._tagClick.bind(this,t),this)},t.prototype._tagClick=function(e){this._updateTypeTag(e)},t.prototype._updateTypeTag=function(e){if(this._curTag!=e){this._curTag=e;for(var t=0;t<this.tagList.childrenCount;t++){var n=this.tagList.children[t],o=!1;t==e?(this.topList.children[t].active=!0,o=!0):this.topList.children[t].active=!1,this._setTagSelect(n,o)}this._updateLists(e)}},t.prototype._setTagSelect=function(e,t){if(e&&e.isValid){var n=e.getChildByName("unselect");e.getChildByName("select").active=t,n.active=!t}},t.prototype.start=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_award.on(cc.Node.EventType.TOUCH_END,this.award,this)},t.prototype.onInit=function(){this.max_num=h.default.Instance.getKebabsConfigBySource(y.KebabsSource.common).length,this.unlock_num=p.default.Instance.UnlockKebabsNum(),this.label_progress.string=this.unlock_num+"/"+this.max_num,this.bar_4.width=Math.floor(315*this.unlock_num/this.max_num),this.icon_award1.children[2].active=!1,this.icon_award2.children[2].active=!1,this.icon_award1.children[3].active=!1,this.icon_award2.children[3].active=!1,this.unlock_num>=this.max_num?1==_.default.Instance.Illustration.any?(this.btn_award.active=!1,this.icon_award1.children[2].active=!0,this.icon_award2.children[2].active=!0):(this.btn_award.active=!0,this.icon_award1.children[3].active=!0,this.icon_award2.children[3].active=!0):(this.btn_award.active=!1,this.icon_award1.children[2].active=!1,this.icon_award2.children[2].active=!1),this._updateTypeTag(u.common),f.default.Instance.isDayChallange||(this.tagList.children[1].active=!1)},t.prototype._updateLists=function(e){e==u.common?this.found():e==u.activity&&this._initMidAutumnList()},t.prototype.found=function(){for(var e={},t=h.default.Instance.getKebabsConfigBySource(y.KebabsSource.common),n=0;n<t.length;n++){var o=t[n];null==e[o.type]&&(e[o.type]=[0,0]),e[o.type][1]++,n+1<=this.unlock_num&&e[o.type][0]++}var a=[y.KebabType.meat,y.KebabType.seafood,y.KebabType.vegetable,y.KebabType.fruit,y.KebabType.staple,y.KebabType.bean_product],i=this.layout.childrenCount,r=0;for(n=0;n<a.length;n++){var c=a[n];(s=this.layout.children[n])||(s=cc.instantiate(this.item1),this.layout.addChild(s)),s.active=!0,s.getComponent(v.default).Init(c,e[c][0],e[c][1],this,0),r++}if(i>r)for(n=r;n<i;n++){var s;(s=this.layout.children[n])&&(s.active=!1)}},t.prototype._initMidAutumnList=function(){var e=h.default.Instance.getKebabsConfigBySource(y.KebabsSource.midAutumn),t=0,n=0;for(var o in e){var a=e[o];a&&(_.default.Instance.unlockKebabs.includes(a.id)&&t++,n++)}var i=this.layout.childrenCount,r=0,c=this.layout.children[r];if(c||(c=cc.instantiate(this.item1),this.layout.addChild(c)),c.active=!0,r++,c.getComponent(v.default).Init(y.KebabType.midAutumn,t,n,this,1),i>r)for(var s=r;s<i;s++){var l=this.layout.children[s];l&&(l.active=!1)}},t.prototype.award=function(){_.default.Instance.GoldNum+=500,null==_.default.Instance.BarbecueProp.prop_1?_.default.Instance.BarbecueProp.prop_1=1:_.default.Instance.BarbecueProp.prop_1++,_.default.Instance.Illustration.any=!0,_.default.Instance.AutoSyncData(),b.default.Instance.OpenUI(m.default,b.UIOrder.Window_2,[{type:"gold",value:500},{type:"prop_1",value:1}],"\u56fe\u9274\u5956\u52b1"),this.btn_award.active=!1,this.icon_award1.children[2].active=!0,this.icon_award2.children[2].active=!0,this.icon_award1.children[3].active=!1,this.icon_award2.children[3].active=!1,_.default.Instance.AutoSyncData(),cc.systemEvent.emit(y.DistributedEvent.illustration)},t.prototype.close=function(){b.default.Instance.DestroyUI(n)},t.bundleName="Bundle2Pre",t.prefabUrl="IllustrationPre/Illustration1Pre",t.className="Illustration1Interface",l([T(cc.Prefab)],t.prototype,"item1",void 0),l([T(cc.Node)],t.prototype,"btn_close",void 0),l([T(cc.Node)],t.prototype,"icon_award1",void 0),l([T(cc.Node)],t.prototype,"icon_award2",void 0),l([T(cc.Node)],t.prototype,"btn_award",void 0),l([T(cc.Node)],t.prototype,"bar_4",void 0),l([T(cc.Label)],t.prototype,"label_progress",void 0),l([T(cc.Node)],t.prototype,"layout",void 0),l([T(cc.Node)],t.prototype,"tagList",void 0),l([T(cc.Node)],t.prototype,"topList",void 0),n=l([I],t)}(d.default);i.default=k,cc._RF.pop(),cc._RF.pop()},{}],Illustration2Interface:[function(e,t,n){"use strict";cc._RF.push(t,"791aaNEjPxIL7YOfjQ8Wz+O","Illustration2Interface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"f5640JVI6dDSpAyw4hHfS5q","Illustration2Interface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("BundleManger"),h=o("DataManager"),p=o("SoundManager"),f=o("StoragerManager"),_=o("TypeManager"),y=o("UIManager"),b=o("illustration2_item"),v=o("ShopAwardInterface"),m=cc._decorator,g=m.ccclass,I=m.property,T=function(e){function t(){var t,n=null!==e&&e.apply(this,arguments)||this;return n.item2=null,n.ani_popup=null,n.btn_close=null,n.icon_award1=null,n.btn_award=null,n.icon=null,n.label_type=null,n.label_num=null,n.bar_6=null,n.layout=null,n.btn_sub=null,n.btn_add=null,n.label_page=null,n.reward=null,n.progress_title=null,n.progress=null,n.type_name=((t={})[_.KebabType.meat]="\u8089\u7c7b",t[_.KebabType.seafood]="\u6d77\u9c9c\u7c7b",t[_.KebabType.vegetable]="\u852c\u83dc\u7c7b",t[_.KebabType.fruit]="\u6c34\u679c\u7c7b",t[_.KebabType.staple]="\u4e3b\u98df\u7c7b",t[_.KebabType.bean_product]="\u8c46\u5236\u54c1\u7c7b",t[_.KebabType.midAutumn]="\u4e2d\u79cb\u6d3b\u52a8",t),n}var n;return s(t,e),n=t,t.prototype.start=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_award.on(cc.Node.EventType.TOUCH_END,this.award,this),this.btn_sub.on(cc.Node.EventType.TOUCH_END,this.sub,this),this.btn_add.on(cc.Node.EventType.TOUCH_END,this.add,this)},t.prototype.onInit=function(e){p.default.Instance.PlaySound("book_pop_open"),this.type=e[0],this.unlock_num=e[1],this.max_num=e[2],this._tagType=e[3],this.page=0,this.label_type.string=""+this.type_name[this.type],this.label_num.string=this.unlock_num+"/"+this.max_num,this.bar_6.width=184*this.unlock_num/this.max_num,d.default.Instance.LoadSpriteFrame("Bundle2UI","IllustrationUI/type_"+this.type,this.icon),this.icon_award1.children[2].active=!1,this.icon_award1.children[3].active=!1,this.unlock_num>=this.max_num?1==f.default.Instance.Illustration[this.type]?(this.btn_award.active=!1,this.icon_award1.children[2].active=!0):(this.btn_award.active=!0,this.icon_award1.children[3].active=!0):this.btn_award.active=!1,1==this._tagType?(this.icon_award1.active=!1,this.reward.active=!1,this.progress_title.active=!0,this.progress.setPosition(0,26)):(this.icon_award1.active=!0,this.reward.active=!0,this.progress_title.active=!1,this.progress.setPosition(0,0)),this.found()},t.prototype.found=function(){if(this.data_array=[],this.item_array=[],1==this._tagType)for(var e=h.default.Instance.getKebabsConfigBySource(_.KebabsSource.midAutumn),t=0;t<e.length;t++)(o=e[t])&&this.data_array.push(o);else if(0==this._tagType){var n=h.default.Instance.getKebabsConfigBySource(_.KebabsSource.common);for(t=0;t<n.length;t++){var o;(o=n[t]).type==this.type&&this.data_array.push(o)}}for(t=0;t<9;t++){var a=cc.instantiate(this.item2);this.layout.addChild(a);var i=a.getComponent(b.default);this.item_array.push(i)}this.change_page(1)},t.prototype.award=function(){f.default.Instance.GoldNum+=200,f.default.Instance.Illustration[this.type]=!0,y.default.Instance.OpenUI(v.default,y.UIOrder.Window_2,[{type:"gold",value:200}],"\u56fe\u9274\u5956\u52b1"),this.btn_award.active=!1,this.icon_award1.children[2].active=!0,this.icon_award1.children[3].active=!1,cc.systemEvent.emit(_.DistributedEvent.illustration),f.default.Instance.AutoSyncData()},t.prototype.change_page=function(e){this.page=e;for(var t=0;t<9;t++){var n=9*(e-1)+t,o=this.data_array[n];null==o?this.item_array[t].node.active=!1:this.item_array[t].Init(o)}this.label_page.string=this.page+"/"+(Math.floor(this.max_num/9)+1)},t.prototype.sub=function(){this.page<=1||this.change_page(this.page-1)},t.prototype.add=function(){this.page>=Math.floor(this.max_num/9)+1||this.change_page(this.page+1)},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){y.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="IllustrationPre/Illustration2Pre",t.className="Illustration2Interface",l([I(cc.Prefab)],t.prototype,"item2",void 0),l([I(cc.Animation)],t.prototype,"ani_popup",void 0),l([I(cc.Node)],t.prototype,"btn_close",void 0),l([I(cc.Node)],t.prototype,"icon_award1",void 0),l([I(cc.Node)],t.prototype,"btn_award",void 0),l([I(cc.Node)],t.prototype,"icon",void 0),l([I(cc.Label)],t.prototype,"label_type",void 0),l([I(cc.Label)],t.prototype,"label_num",void 0),l([I(cc.Node)],t.prototype,"bar_6",void 0),l([I(cc.Node)],t.prototype,"layout",void 0),l([I(cc.Node)],t.prototype,"btn_sub",void 0),l([I(cc.Node)],t.prototype,"btn_add",void 0),l([I(cc.Label)],t.prototype,"label_page",void 0),l([I(cc.Node)],t.prototype,"reward",void 0),l([I(cc.Node)],t.prototype,"progress_title",void 0),l([I(cc.Node)],t.prototype,"progress",void 0),n=l([g],t)}(u.default);i.default=T,cc._RF.pop(),cc._RF.pop()},{}],InfoManager:[function(e,t,n){"use strict";cc._RF.push(t,"cd8aa1FJUpBFKcmHhGixP0H","InfoManager");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"f6d8edDkHNC36kchIYO8SN7","InfoManager");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c},l=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},u=function(e,t){var n,o,a,r,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":i(Symbol))&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._debug=!1,t._version="1.0.0",t._user_name="\u533f\u540d",t._user_head="",t._user_uid="",t._screen_size={width:0,height:0},t.Web=!1,t.CanShare=!1,t._game_size=1,t.isDaren=!1,t.enter_scene=0,t.Chn="g127-1-wechat4",t.audit_status=0,t.interstitial_ad_conf=null,t.control_data={},t}var n;return c(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Debug",{get:function(){return this._debug},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Version",{get:function(){return this._version},set:function(e){this._version=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"UserName",{get:function(){return this._user_name},set:function(e){this._user_name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"UserHead",{get:function(){return this._user_head},set:function(e){this._user_head=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"UserUid",{get:function(){return this._user_uid},set:function(e){this._user_uid=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ScreenSize",{get:function(){if(0===this._screen_size.width){var e=cc.view.getVisibleSize();this._screen_size.width=e.width,this._screen_size.height=e.height}return this._screen_size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GameSize",{get:function(){return this._game_size},set:function(e){this._game_size=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AuditStatus",{get:function(){return this.audit_status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ShareStatus",{get:function(){return this.share_status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GameValue",{get:function(){return this.game_value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BannerConfig",{get:function(){return this.banner_config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"InterstitialAdConf",{get:function(){return this.interstitial_ad_conf},enumerable:!1,configurable:!0}),t.prototype.findInterstitialConfigByLoc=function(e){if(null==this.interstitial_ad_conf||null==this.interstitial_ad_conf)return{};try{var t=this.interstitial_ad_conf.find(function(t){return t.loc==e});if(t)return t}catch(n){}return{}},t.prototype.ServerInit=function(e){var t=this;try{this.audit_status=e.audit_status,this.share_status=e.share_status,this.banner_config=e.banner_conf,this.interstitial_ad_conf=e.interstitial_ad_conf,this.game_value={},e.game_conf.forEach(function(e){t.game_value[e.key]=e}),null!=e.interstitial_ad_conf&&e.interstitial_ad_conf.length>0&&(this.TableScreenId=e.interstitial_ad_conf[0].ad_id)}catch(n){}},Object.defineProperty(t.prototype,"TsInitial",{get:function(){return this.ts_Initial},set:function(e){this.ts_Initial=e},enumerable:!1,configurable:!0}),t.prototype.Control=function(e,t){var o=this;return new Promise(function(a){return l(o,void 0,void 0,function(){var o;return u(this,function(){return 1==n.Instance.Web&&a(t),null==(o=this.control_data[e])?(this.control_data[e]=t,a(t)):a(o),[2]})})})},Object.defineProperty(t.prototype,"GameValue_Interstitial_Control",{get:function(){return n.Instance.GameValue&&n.Instance.GameValue.interstitial_control&&n.Instance.GameValue.interstitial_control.value?n.Instance.GameValue.interstitial_control.value:null},enumerable:!1,configurable:!0}),t._instance=null,n=s([h],t)}(cc.Component));a.default=p,cc._RF.pop(),cc._RF.pop()},{}],InitialInterface:[function(e,t,n){"use strict";cc._RF.push(t,"5b62fDzlCBEz5yMZ0Dpge6g","InitialInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"94cabjRYjZIqIWe+kVZ5RmM","InitialInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("GameInterface"),p=o("FunctionManager"),f=o("GameManger"),_=o("InfoManager"),y=o("SdkManager"),b=o("SoundManager"),v=o("StoragerManager"),m=o("TypeManager"),g=o("UIManager"),I=o("WinActivityManager"),T=o("BarbecueStandInterface"),k=o("MainInterface"),S=cc._decorator,w=S.ccclass,O=S.property,F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_uid=null,t.label_tips=null,t.group_pool=null,t.video_shade=null,t.facility_shade=null,t.login=null,t.video_shade_click=!0,t}return s(t,e),t.prototype.onLoad=function(){switch(y.default.Instance.reportUserGuide(1001),_.default.Instance.TsInitial=this,cc.macro.ENABLE_MULTI_TOUCH=!1,v.default.Instance.JudegFacility(),_.default.Instance.enter_scene){case 1103:case 1104:null==v.default.Instance.Record[m.RecordType.collect_gift]&&(v.default.Instance.Record[m.RecordType.collect_gift]=!1);break;case 1123:null==v.default.Instance.Record[m.RecordType.add_desktop]&&(v.default.Instance.Record[m.RecordType.add_desktop]=!1)}v.default.Instance.AutoSyncData()},t.prototype.start=function(){if(f.default.Instance.isWinActivity&&I.default.Instance.initManager(),y.default.Instance.reportUserGuide(1002),this.recordLoadingTimeEnd(),this.schedule(this.second,1),this.schedule(this.second10,30),this.schedule(this.minute,60),p.default.Instance.JudgeNight(),p.default.Instance.JudgeGuestTeam(),p.default.Instance.TaskOrder(),y.default.Instance.getABTestInfo(),v.default.Instance.Tasking.length<3)for(var e=v.default.Instance.Tasking.length;e<3;e++){var t=p.default.Instance.TaskExtract();if(null==t)break;v.default.Instance.Tasking.push(t)}for(f.default.Instance.BarbecueStar=0,e=0;e<v.default.Instance.BarbecueLv.length;e++){var n=v.default.Instance.BarbecueLv[e];null!=n&&(f.default.Instance.BarbecueStar+=n)}f.default.Instance.BarbecueStar+=v.default.Instance.starNum,this.label_tips.node.parent.opacity=0,this.label_tips.node.parent.active=!0,this.label_uid.node.y+=(_.default.Instance.ScreenSize.height-1334)/2,v.default.Instance.Record[m.RecordType.game_explain1]?(this.login.active=!0,g.default.Instance.OpenUI(k.default,g.UIOrder.Window_1,!0),g.default.Instance.OpenUI(h.default,g.UIOrder.Interface_1),b.default.Instance.playmusic("BGM")):(this.login.active=!1,g.default.Instance.OpenUI(T.default,g.UIOrder.Window_2,1)),this.power_time=1800,f.default.Instance.ScreenAdaptive=(cc.sys.getSafeAreaRect().height-1334*_.default.Instance.GameSize)/2,f.default.Instance.ScreenAdaptive2=(_.default.Instance.ScreenSize.height-1334*_.default.Instance.GameSize)/2,this.label_uid.string="UID:"+_.default.Instance.UserUid,this.login.on(cc.Node.EventType.TOUCH_END,this.click_login,this),this.video_shade.on(cc.Node.EventType.TOUCH_END,this.click_video_shade,this),v.default.Instance.AutoSyncData()},t.prototype.click_login=function(){g.default.Instance.GetUI(h.default)&&(_.default.Instance.TsInitial.login.active=!1)},t.prototype.click_video_shade=function(){console.log("click_video_shade----",this.video_shade_click),0!=this.video_shade_click&&(this.video_shade.active=!1,cc.director.resume())},t.prototype.second=function(){f.default.Instance.OnlineTime++,this.power_time--,this.power_time<=0&&(this.power_time=900,v.default.Instance.BarbecuePower<5&&(v.default.Instance.BarbecuePower+=1)),f.default.Instance.isWinActivity&&I.default.Instance.updateTime(1)},t.prototype.second10=function(){},t.prototype.minute=function(){p.default.Instance.JudgeNight()},t.prototype.recordLoadingTimeEnd=function(){return u(this,void 0,void 0,function(){var e,t;return d(this,function(n){switch(n.label){case 0:return 1==_.default.Instance.Web?[2]:(y.default.Instance.recordTimeCostEnd("load_sence"),[4,y.default.Instance.getStorage("sub")]);case 1:return e=n.sent(),t=!1,e||(y.default.Instance.saveStorage("sub","fist_load"),t=!0),console.log("\u9996\u6b21\u52a0\u8f7d\u5b58\u6863"+e+",\u65e7\u7684\u5224\u65ad"+(null==e)+",\u65b0\u7684\u5224\u65ad"+!e+",\u662f\u5426\u662f\u7b2c\u4e00\u6b21\u767b\u5f55"+t),LWGSDK.recordLoadingTimeEnd({isFirstLoad:t,result:0,success:function(e){console.log("***\u7b2c\u4e00\u6b21\u8fdb\u5165\uff1f"+t+",\u6d88\u8017\u6642\u9593",e)},fail:function(e){console.log("***\u7b2c\u4e00\u6b21\u8fdb\u5165\uff1f"+t+",\u8017\u6642\u5f02\u5e38",e)}}),[2]}})})},t.prototype.ShowTips=function(e){null!=e&&""!=e&&(this.label_tips.string=e,this.label_tips._forceUpdateRenderData(!0),this.label_tips.node.parent.width=this.label_tips.node.width+40,cc.Tween.stopAllByTarget(this.label_tips.node.parent),cc.tween(this.label_tips.node.parent).to(.1,{opacity:255}).delay(1.5).to(.4,{opacity:0}).start())},t.prototype.HideTips=function(){cc.Tween.stopAllByTarget(this.label_tips.node.parent),this.label_tips.node.parent.opacity=0},t.prototype.ShowVideoShade=function(e,t){var n=this;void 0===t&&(t=!1),this.video_shade.active=e,B&&(clearInterval(B),B=null),1==e&&(this.video_shade.children[0].active=t,this.video_shade_click=!1,B=setTimeout(function(){y.default.Instance.stopShowVideo(),n.video_shade_click=!0,console.log("6s\u6267\u884c\u8ba1\u65f6\u5668\u505c\u6b62\u52a0\u8f7d\u89c6\u9891---")},6e3))},l([O(cc.Label)],t.prototype,"label_uid",void 0),l([O(cc.Label)],t.prototype,"label_tips",void 0),l([O(cc.Node)],t.prototype,"group_pool",void 0),l([O(cc.Node)],t.prototype,"video_shade",void 0),l([O(cc.Node)],t.prototype,"facility_shade",void 0),l([O(cc.Node)],t.prototype,"login",void 0),l([w],t)}(cc.Component);i.default=F;var B=null;cc._RF.pop(),cc._RF.pop()},{}],InterstitialAdManager:[function(e,t,n){"use strict";cc._RF.push(t,"9a8c8KD2oxEvb59pp8xUVX+","InterstitialAdManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"67724YdF4VAFI4UT1KbA6BH","InterstitialAdManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var s=o("GameManger"),l=o("InfoManager"),u=o("StoragerManager"),d=cc._decorator,h=d.ccclass,p=(d.property,function(){function e(){this.isNeedPlatform=!0,this.hasVideo=!1,this.isNewUser=!1,this.interstitialAd=null}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t.instance||(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),e.prototype.showHalfscreen=function(){var e=this;if(this.isNeedPlatform&&!l.default.Instance.isDaren&&l.default.Instance.GameValue_Interstitial_Control&&l.default.Instance.GameValue_Interstitial_Control.switch){var t=l.default.Instance.GameValue_Interstitial_Control.type;if(2==t)return this.updateLevel(),void LWGSDK.showCPSRecommend({loc:"cps_halfscreen",onShow:function(){console.log("CPS \u5c55\u793a")},onClose:function(){console.log("CPS \u5173\u95ed")},onClick:function(e){console.error("onClick res",e)},onError:function(e){console.log("CPS \u52a0\u8f7d\u5931\u8d25"+e)}});if(1==t){var n=l.default.Instance.findInterstitialConfigByLoc("interstitial");if(!n||!n.ad_id)return void console.error("\u63d2\u5c4f\u914d\u7f6e\u6709\u95ee\u9898",n);this.interstitialAd=wx.createInterstitialAd({adUnitId:n.ad_id}),this.interstitialAd.offLoad(),this.interstitialAd.offError(),this.interstitialAd.offClose(),this.interstitialAd.onLoad(function(){e.updateLevel(),e.interstitialAd&&e.interstitialAd.show().catch(function(){})}),this.interstitialAd.onError(function(e){console.log("\u63d2\u5c4f\u52a0\u8f7d\u5931\u8d25:",e)}),this.interstitialAd.onClose(function(){e.interstitialAd&&e.interstitialAd.destory&&e.interstitialAd.destory(),e.interstitialAd=null})}}},e.prototype.checkNewUserHalfScreen=function(){if(!LWGSDK.isAdWhiteList()&&l.default.Instance.GameValue&&l.default.Instance.GameValue.interstitial&&l.default.Instance.GameValue.interstitial.value){var e=u.default.Instance.videoLevel,t=l.default.Instance.GameValue.interstitial.value.begin_level;t=t||-1,s.default.Instance.isInterstitialAD?u.default.Instance.BarbecueLv.length==t&&this.showHalfscreen():-1!=t&&u.default.Instance.BarbecueLv.length==t&&(0==e||e>t)&&this.showHalfscreen()}},e.prototype.checkOldUserHalfScreen=function(){if(!LWGSDK.isAdWhiteList()&&l.default.Instance.GameValue&&l.default.Instance.GameValue.interstitial&&l.default.Instance.GameValue.interstitial.value){var e=l.default.Instance.GameValue.interstitial.value.begin_level;e=e||-1;var t=l.default.Instance.GameValue.interstitial.value.spaced_level;if(!(u.default.Instance.BarbecueLv.length<=e))if(s.default.Instance.isInterstitialAD)0==(u.default.Instance.BarbecueLv.length-e)%t&&this.showHalfscreen();else{u.default.Instance.adLevel<e&&(u.default.Instance.adLevel=e);var n=u.default.Instance.BarbecueLv.length-u.default.Instance.adLevel;-1!=(t=t||-1)&&n>=t&&this.showHalfscreen()}}},e.prototype.updateLevel=function(e){void 0===e&&(e=u.default.Instance.BarbecueLv.length),u.default.Instance.adLevel=e},t=c([h],e)}());i.default=p,cc._RF.pop(),cc._RF.pop()},{}],ItemManager:[function(e,t,n){"use strict";cc._RF.push(t,"9e3a0tJNeNLkafA0ZJIUZd7","ItemManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"56bfdnipQdL6ruLtbL34y5+","ItemManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var s=o("BundleManger"),l=o("TypeManager"),u=cc._decorator,d=u.ccclass,h=(u.property,function(){function e(){}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),e.prototype.getSpInfoByType=function(e){var t="",n="";switch(e){case"gold":t=l.BundleName.Bundle1UI,n="CommonUI/common/icon_11";break;case"star":t=l.BundleName.Bundle1UI,n="CommonUI/common/icon_12"}return t&&n?{bundleName:t,url:n}:null},e.prototype.setItemSp=function(e,t,n){switch(e){case"power":s.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/icon_5",t),t.setScale(1);break;case"gold":s.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/icon_6",t),t.setScale(1);break;case"prop_1":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_11",t),t.setScale(.7);break;case"prop_2":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_12",t),t.setScale(.7);break;case"prop_3":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_13",t),t.setScale(.7);break;case"kebabs":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+n,t),t.setScale(.6);break;case"star":s.default.Instance.LoadSpriteFrame(l.BundleName.Bundle1UI,"CommonUI/common/icon_12",t),t.setScale(1)}},e.prototype.setItemSp2=function(e,t,n,o){if(void 0===n&&(n=1),t&&t.isValid){var a=1;switch(e){case"power":s.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/icon_5",t),a=1;break;case"gold":s.default.Instance.LoadSpriteFrame("Bundle1UI","CommonUI/common/icon_11",t),a=.6;break;case"prop_1":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_11",t),a=.7;break;case"prop_2":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_12",t),a=.7;break;case"prop_3":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_13",t),a=.7;break;case"kebabs":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+o,t),a=.6;break;case"star":s.default.Instance.LoadSpriteFrame(l.BundleName.Bundle1UI,"CommonUI/common/icon_12",t),a=1}n?t.setScale(n):t.setScale(a)}},e.prototype.setItemSpBg=function(e,t){switch(e){case"gold":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueOverUI/icon_bg6",t);break;case"power":case"prop_1":case"prop_2":case"prop_3":case"kebabs":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueOverUI/icon_bg7",t);case"star":s.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueOverUI/icon_bg5",t)}},e._instance=null,t=c([d],e)}());i.default=h,cc._RF.pop(),cc._RF.pop()},{}],JengaFoodItem:[function(e,t,n){"use strict";cc._RF.push(t,"d369apuxJ9BGKzGCXyFifm5","JengaFoodItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"df47547cfdI6ZO9Nem/+SeV","JengaFoodItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("JengaManager"),h=o("Util"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t._state=d.JengaFoodState.none,t._moveSpeed=3e3,t._lines=[],t._lineIndex=0,t._totalTime=0,t._curTime=0,t._delayTime=0,t}return s(t,e),Object.defineProperty(t.prototype,"State",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"QianziIndex",{get:function(){return this._qianziIndex},set:function(e){this._oldQianziIndex=this._qianziIndex,this._qianziIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"OldQianziIndex",{get:function(){return this._oldQianziIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SortInd",{get:function(){return this._sortInd},set:function(e){this._oldSortInd=this._sortInd,this._sortInd=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"OldSortInd",{get:function(){return this._oldSortInd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"FoodType",{get:function(){return this._foodType},enumerable:!1,configurable:!0}),t.prototype.update=function(e){if(this._state==d.JengaFoodState.moving){if(!this.node||!this.node.isValid)return;if(this._curTime+=e,this._delayTime&&this._curTime>=this._delayTime&&(this._curTime=0,this._delayTime=0),this._delayTime)return;if(this._curTime<this._totalTime){var t=this._curTime;t>=this._totalTime&&(t=this._totalTime),this.node.position.clone();var n=h.default.bezier2(this._curTime/this._totalTime,this._p1,this._p2,this._p3),o=cc.v3(n.x,n.y,n.z);this.node.position=o}else this._lineIndex++,this._moveStep()}},t.prototype.setState=function(e){this._state=e},t.prototype.initItem=function(e,t,n){this._qianziIndex=e,this._sortInd=t,this._foodType=n,this.setState(d.JengaFoodState.idle),this.setIcon()},t.prototype.setIcon=function(e){if(void 0===e&&(e=!1),this.icon&&this.icon.node&&this.icon.node.isValid){var t="res/foods/"+this._foodType;e&&(t="res/foods_select/"+this._foodType),u.default.Instance.LoadSpriteFrame("BundleJenga",t,this.icon.node)}},t.prototype.moveFood=function(e){this.SortInd=e.sortInd,this.QianziIndex=e.sortInd,this._lines=e.lines,this._moveEndCb=e.moveEndCb,this.SortInd=e.sortInd,this.QianziIndex=e.sortInd,this._delayTime=e.delayTime,this.setState(d.JengaFoodState.moving),this._lineIndex=0,this._moveStep()},t.prototype._moveStep=function(e){void 0===e&&(e=0);var t=this._lines[this._lineIndex];if(t){var n=t.type;if(n==d.JengaLineType.straight?(this._p1=t.points[0],this._p2=t.points[0].clone().add(t.points[1].clone()).multiplyScalar(.5),this._p3=t.points[1]):n==d.JengaLineType.curved&&(this._p1=t.points[0],this._p2=t.points[1],this._p3=t.points[2]),this._p1&&this._p2&&this._p3){var o=h.default.bezier2Length(this._p1.clone(),this._p2.clone(),this._p3.clone());this._totalTime=o/this._moveSpeed,this._curTime=e}else this._moveEnd()}else this._moveEnd()},t.prototype._moveEnd=function(){this.setState(d.JengaFoodState.idle),this._moveEndCb&&this._moveEndCb()},t.prototype.destroySelf=function(){this.node&&this.node.isValid&&this.node.removeFromParent()},l([_(cc.Sprite)],t.prototype,"icon",void 0),l([f],t)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],JengaInterface:[function(e,t,n){"use strict";cc._RF.push(t,"f5ae2LL/IlNlJiy/eDcXJro","JengaInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"dc118oRgbhKErEqr2e3Ghij","JengaInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("SettingInterface"),h=o("GameManger"),p=o("InfoManager"),f=o("JengaManager"),_=o("SdkManager"),y=o("SoundManager"),b=o("StoragerManager"),v=o("TypeManager"),m=o("UIManager"),g=o("moreClickUtil"),I=o("JengaFoodItem"),T=o("JengaPanziItem"),k=o("JengaQianZiItem"),S=o("JengaOverInterface"),w=cc._decorator,O=w.ccclass,F=w.property,B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.foodPrefab=null,t.moreClickUtil=null,t.setBtn=null,t.levelLabel=null,t.list=null,t.seletcContent=null,t.panziNode=null,t.moveTip=null,t.backBtn=null,t.addBtn=null,t.moveBtn=null,t.top=null,t.bottom=null,t._level=0,t._isCanOperate=!0,t._qzUnlockStates=[],t._qianziItems={},t._curSelect=null,t._qianziDatas={},t._foodMoveRecords={},t._operateCount=0,t._oldOperateRecord=null,t._allFoodsItem=[],t._panziDatas={},t._useProp=0,t._isCanAutoChange=!0,t._autoTime=0,t._totalTime=0,t._autoOperateType=null,t._autoOperateList=[],t}return s(t,e),Object.defineProperty(t.prototype,"curSelect",{get:function(){return this._curSelect},set:function(e){this._curSelect&&this._resetSelect(),e instanceof k.default?e.doSelect():e instanceof T.default&&e.doSelect(),this._curSelect=e},enumerable:!1,configurable:!0}),t.prototype.addOperateRecords=function(e){this._oldOperateRecord=e;var t=e.targetIndex,n=e.originIndex;e.type!=f.JengaOperateType.qianzi?this._setBtnState(this.backBtn,1):this.getQianzi(n)&&this.getQianzi(t)&&!this.getQianzi(n).IsFinish&&!this.getQianzi(t).IsFinish?this._setBtnState(this.backBtn,0):this._setBtnState(this.backBtn,1)},t.prototype.getLastOperateRecord=function(){return this._oldOperateRecord},Object.defineProperty(t.prototype,"useProp",{set:function(e){this._useProp=e},enumerable:!1,configurable:!0}),t.prototype.getQianzi=function(e){return this._qianziDatas&&this._qianziDatas[e]&&this._qianziDatas[e].qianzi?this._qianziDatas[e].qianzi:null},t.prototype.getPanZi=function(e){return this._panziDatas&&this._panziDatas[e]},t.prototype.getFreePanZi=function(){var e=[];for(var t in this._panziDatas){var n=this._panziDatas[t];n&&!n.Food&&e.push(n)}return e},t.prototype.onInit=function(){},t.prototype.onUILoad=function(){var e=this,t=h.default.Instance.ScreenAdaptive-150;t<=0&&(t=0),this.top.y=this.top.y+t;var n=h.default.Instance.ScreenAdaptive2-50;n<=0&&(n=0),this.bottom.y=this.bottom.y-n,p.default.Instance.isDaren&&this.moreClickUtil.init(function(){e._isCanAutoChange&&(e._isCanAutoChange=!1,e.scheduleOnce(function(){e._isCanAutoChange=!0},2),f.default.Instance.isAuto=!f.default.Instance.isAuto,e._autoTime=0,e._totalTime=1*Math.random()+1,console.error("JengaManager.Instance.isAuto",f.default.Instance.isAuto))}),y.default.Instance.playmusic("g127_backgroundmusic"),h.default.Instance.gameType=v.GameType.jenga,h.default.Instance.TsGame&&h.default.Instance.TsGame.node&&h.default.Instance.TsGame.node.isValid&&(h.default.Instance.TsGame.node.active=!1)},t.prototype.onUIDestroy=function(){y.default.Instance.playmusic("BGM"),h.default.Instance.gameType=v.GameType.none,h.default.Instance.TsGame&&h.default.Instance.TsGame.node&&h.default.Instance.TsGame.node.isValid&&(h.default.Instance.TsGame.node.active=!0)},t.prototype.onUIEnable=function(){this.seletcContent.on(cc.Node.EventType.TOUCH_START,this._seletcContentClick,this),this.setBtn.on(cc.Node.EventType.TOUCH_END,this._setBtnClick,this),this.backBtn.on(cc.Node.EventType.TOUCH_END,this._backBtnClick,this),this.addBtn.on(cc.Node.EventType.TOUCH_END,this._addBtnClick,this),this.moveBtn.on(cc.Node.EventType.TOUCH_END,this._moveBtnClick,this),cc.systemEvent.on(v.DistributedEvent.jengaGameRestart,this._gameRestartEvent,this),cc.systemEvent.on(v.DistributedEvent.jengaGameNext,this._gameNextEvent,this),cc.systemEvent.on(v.DistributedEvent.jengaAutoGame,this._autoGameEvent,this)},t.prototype.onUIDisable=function(){this.seletcContent.off(cc.Node.EventType.TOUCH_START,this._seletcContentClick,this),this.setBtn.off(cc.Node.EventType.TOUCH_END,this._setBtnClick,this),this.backBtn.off(cc.Node.EventType.TOUCH_END,this._backBtnClick,this),this.addBtn.off(cc.Node.EventType.TOUCH_END,this._addBtnClick,this),this.moveBtn.off(cc.Node.EventType.TOUCH_END,this._moveBtnClick,this),cc.systemEvent.off(v.DistributedEvent.jengaGameRestart,this._gameRestartEvent,this),cc.systemEvent.off(v.DistributedEvent.jengaGameNext,this._gameNextEvent,this),cc.systemEvent.off(v.DistributedEvent.jengaAutoGame,this._autoGameEvent,this)},t.prototype._seletcContentClick=function(e){if(f.default.Instance.gameState==f.JengaGameState.plaing&&!f.default.Instance.isAuto&&this._isCanOperate&&this.node&&this.node.isValid){for(var t=e.getLocationX()-375,n=this.list.childrenCount,o=1e4,a=-1,i=0;i<n;i++){var r=this.list.children[i],c=Math.abs(r.x-t);c<o&&(o=c,a=i)}var s=this.getQianzi(a);s&&(s.IsCompelete||this._isCanOperate&&this._selectQianZi(s))}},t.prototype._selectQianZi=function(e){this._isCanOperate=!1;var t=null;if(e&&(y.default.Instance.PlaySound("g127_click"),t=this._doQianZiOperate(e)),t)switch(t){case f.JengaOperateType.none:case f.JengaOperateType.select:this._isCanOperate=!0;break;case f.JengaOperateType.qianzi:case f.JengaOperateType.toTop:case f.JengaOperateType.topToQianZi:case f.JengaOperateType.back:}else this._isCanOperate=!0},t.prototype._setBtnClick=function(){m.default.Instance.OpenUI(d.default,m.UIOrder.Window_2,this)},t.prototype._backBtnClick=function(){var e=this;f.default.Instance.gameState==f.JengaGameState.plaing&&(f.default.Instance.isAuto||this._isCanOperate&&(this._useProp||1!=this.backBtn.btnState&&(f.default.Instance.isAuto?this._toUseProp(1):_.default.Instance.ShareOrVideo(_.ShareLoc.revoke,function(){e._toUseProp(1)},function(){}))))},t.prototype._addBtnClick=function(){var e=this;f.default.Instance.gameState==f.JengaGameState.plaing&&(f.default.Instance.isAuto||this._isCanOperate&&(this._useProp||1!=this.addBtn.btnState&&(f.default.Instance.isAuto?this._toUseProp(2):_.default.Instance.ShareOrVideo(_.ShareLoc.add_skewer,function(){e._toUseProp(2)},function(){}))))},t.prototype._moveBtnClick=function(){var e=this;f.default.Instance.gameState==f.JengaGameState.plaing&&(f.default.Instance.isAuto||this._isCanOperate&&(this._useProp||1!=this.moveBtn.btnState&&(this.getFreePanZi().length<3?p.default.Instance.TsInitial.ShowTips("\u76d8\u5b50\u4f4d\u7f6e\u4e0d\u8db33\u4e2a"):f.default.Instance.isAuto?this._toUseProp(3):_.default.Instance.ShareOrVideo(_.ShareLoc.remove_food,function(){e._toUseProp(3)},function(){}))))},t.prototype._panziClick=function(e){if(f.default.Instance.gameState==f.JengaGameState.plaing&&3!=this._useProp){if(this.curSelect&&this.curSelect instanceof T.default&&this.curSelect.Index==e.Index)return this.curSelect.backSelect(),void(this._curSelect=null);e.Food&&!this.curSelect&&(y.default.Instance.PlaySound("g127_click"),this.curSelect=e)}},t.prototype._gameRestartEvent=function(){this._initView()},t.prototype._gameNextEvent=function(){this._initView()},t.prototype._autoGameEvent=function(){},t.prototype.onUIStart=function(){this._initView()},t.prototype.onUpdate=function(e){this._updateAutoTime(e)},t.prototype._initView=function(){f.default.Instance.gameState=f.JengaGameState.idle;for(var e=this._allFoodsItem.length-1;e>=0;e--){var t=this._allFoodsItem[e];t&&t.destroySelf()}this._allFoodsItem=[],this._isCanOperate=!0,this._qzUnlockStates=[],this._qianziItems={},this._curSelect=null,this._qianziDatas={},this._foodMoveRecords={},this._operateCount=0,this._oldOperateRecord=null,this._panziDatas={},this._useProp=0,this.levelLabel.string="\u7b2c"+b.default.Instance.jengaLevel+"\u5173";var n=[];for(e=0;e<this.list.childrenCount;e++)if((r=(y=this.list.children[e]).getComponent(k.default))||(r=y.addComponent(k.default)),r){var o=f.default.Instance.numIndexs[e];r.reset(),r.initItem(o,e),this._qianziDatas[e]||(this._qianziDatas[e]={foods:[],qianzi:r,index:e});var a=!1,i=f.default.Instance.stateIndexs[e];r.showVideo(!1),0==i?(this._qzUnlockStates.push(e),a=!0):1!=b.default.Instance.jengaLevel&&e==f.default.Instance.lockIndex?r.showVideo(!0):(a=!0,this._qzUnlockStates.push(e)),f.default.Instance.numIndexs[e]==f.default.Instance.fullNum&&a&&n.push(e)}for(e=0;e<this.panziNode.childrenCount;e++){var r;(y=this.panziNode.children[e])&&((r=y.getComponent(T.default))||(r=y.addComponent(T.default)),r.initItem(e,this._panziClick.bind(this)),this._panziDatas[e]=r)}this._showMoveTip(!1);var c=this._qzUnlockStates.includes(f.default.Instance.lockIndex)?1:0;this._setBtnState(this.addBtn,c),this._setBtnState(this.moveBtn),this._setBtnState(this.backBtn,1);var s=f.default.Instance.startNum,l=f.default.Instance.getRandomIndexs(s);this._qzUnlockStates.length,n=n.sort(function(){return Math.random()-.5});var u=[];for(e=0;e<s;e++){var d=n[e],h=(o=f.default.Instance.numIndexs[d],l[e]),p=new Array(o).fill(h);u.push.apply(u,p)}u=u.sort(function(){return Math.random()-.5});var _=0;for(e=0;e<s;e++){var y;if(d=n[e],o=f.default.Instance.numIndexs[d],y=this.list.children[d]){var v=u.slice(_,_+o);this._initQianZiFoods(d,v),_+=o}}f.default.Instance.gameState=f.JengaGameState.plaing},t.prototype._initQianZiFoods=function(e,t){if(void 0===t&&(t=[]),f.default.Instance.numIndexs[e])for(var n=0;n<t.length;n++){var o=t[n],a=this._createFood(e,n,o),i=this._qianziDatas[e];i&&(i.foods&&i.foods.push(a),i.qianzi&&i.qianzi.pushFood(a))}else console.error("\u5f53\u524d\u7b7e\u5b50\u6700\u591a\u98df\u7269\u6570\u91cf\u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e",e)},t.prototype._createFood=function(e,t,n){var o=this.getQianzi(e);if(o){var a=cc.instantiate(this.foodPrefab).getComponent(I.default);if(a){a.initItem(e,t,n);var i=f.default.Instance.getPosYByIndex(t);o.addFoodToChild(a,cc.v3(0,i,0))}return this._allFoodsItem.push(a),a}return console.error("\u6ca1\u6709\u5bf9\u5e94\u7684\u7236\u8282\u70b9",e),null},t.prototype._resetSelect=function(){this._curSelect&&(this._curSelect instanceof k.default?this._curSelect.backSelect():this._curSelect instanceof T.default&&(this._curSelect.removeFood(),this._curSelect.showFood(!1))),this._curSelect=null},t.prototype._unlockQianZi=function(e){this._qzUnlockStates.push(e);var t=this.getQianzi(e);t&&(t.showVideo(!1),this._setBtnState(this.addBtn,1))},t.prototype._setBtnState=function(e,t){if(void 0===t&&(t=0),e&&e.isValid){e.btnState=t;var n=e.getChildByName("video"),o=cc.Material.getBuiltinMaterial("2d-sprite");1==t?(o=cc.Material.getBuiltinMaterial("2d-gray-sprite"),n&&(n.active=!1)):n&&(n.active=!0);var a=e.getComponent(cc.Sprite);a&&o&&a.setMaterial(0,o);for(var i=e.getChildByName("layout"),r=0;r<i.childrenCount;r++){var c=i.children[r].getComponent(cc.Sprite);c&&c&&o&&c.setMaterial(0,o)}}},t.prototype._showMoveTip=function(e){void 0===e&&(e=!1),this.moveTip&&this.moveTip.isValid&&(this.moveTip.active=e)},t.prototype._doQianZiOperate=function(e){var t=this;if(!e)return console.error("\u6570\u636e\u4e0d\u5bf9"),null;var n=f.JengaOperateType.none,o=[],a=[],i=this.curSelect,r=e.Index;if(this._qzUnlockStates.includes(r)){var c=e.TopFoodType,s=e.NeedFoodNum,l=e.FoodNum,u=e.isFull,d=e.Index,h=(e.Foods,e.getPos().x),y=(e.getPos().y,f.default.Instance.besierY),b=f.default.Instance.topY;if(i){if(i instanceof k.default)if(i.Index==e.Index)this._resetSelect();else if(s<=0)console.error("\u4ea4\u6362\u7684\u76ee\u6807\u662f\u6ee1\u7684\uff0c\u53d8\u6210\u9009\u62e9"),i.backSelect(),this.curSelect=e,n=f.JengaOperateType.select;else{var v=i.Index,m=0,g=i.Foods;if(c)for(var I=g.length-1;I>=0&&(w=g[I])&&w.FoodType==c&&!(++m>=s);I--);else{var S=c;for(I=g.length-1;I>=0;I--){var w;if(!(w=g[I])||S&&S!=w.FoodType)break;if(S=w.FoodType,++m>=s)break}}if(m<=0)i.backSelect(),this.curSelect=e,n=f.JengaOperateType.select;else{var O=this.curSelect.getPos().x,F=this.curSelect.getPos().y,B=function(n){var i=x.curSelect.popFood();if(i){e.pushFood(i);var r=l+n+1-1,c=i.node.position.clone().y+F,s=(O+h)/2,u=f.default.Instance.getPosYByIndex(r),p=cc.v2(O,c),_=cc.v2(O,b),v=cc.v2(s,y),m=cc.v2(h,b),g=cc.v2(h,u);i.node.parent=x.list,i.node.setPosition(p.x,p.y,0),i.SortInd=r,i.QianziIndex=d,o=[{type:0,points:[cc.v2(p.x,p.y),cc.v2(_.x,_.y)]},{type:1,points:[cc.v2(_.x,_.y),cc.v2(v.x,v.y),cc.v2(m.x,m.y)]},{type:0,points:[cc.v2(m.x,m.y),cc.v2(g.x,g.y)]}],x._moveFoods(i,o,d,r,function(){if(e&&i){var n=cc.v3(0,u,0);e.addFoodToChild(i,n)}t._checkGameOver(),t._isCanOperate=!0},.1*n),a.push(i)}},x=this;for(I=0;I<m;I++)B(I);n=f.JengaOperateType.qianzi,this.addOperateRecords({type:f.JengaOperateType.qianzi,originIndex:v,targetIndex:d,foodLists:a}),this._resetSelect()}}else if(i instanceof T.default)if(u)p.default.Instance.TsInitial.ShowTips("\u5f53\u524d\u9009\u62e9\u7684\u7b7e\u5b50\u5df2\u6ee1");else if(i.topFoodType==c||!c){var P=i.Food,C=i.getPos().y,R=i.getPos().x,N=l,A=f.default.Instance.getPosYByIndex(N),D=cc.v2(R,C),U=cc.v2(h,b),M=cc.v2(h,A);e.pushFood(P),P.node.parent=this.list,P.node.setPosition(D.x,D.y,0),P.SortInd=N,P.QianziIndex=d,o=[{type:0,points:[cc.v2(D.x,D.y),cc.v2(U.x,U.y)]},{type:0,points:[cc.v2(U.x,U.y),cc.v2(M.x,M.y)]}],this._moveFoods(P,o,d,N,function(){if(e&&P){var n=cc.v3(0,A,0);e.addFoodToChild(P,n)}t._checkGameOver(),t._isCanOperate=!0}),n=f.JengaOperateType.topToQianZi,this.addOperateRecords({type:f.JengaOperateType.topToQianZi,originIndex:-1,targetIndex:d,foodLists:[P]}),this._resetSelect()}}else 3==this._useProp?l<f.default.Instance.moveNum?p.default.Instance.TsInitial.ShowTips("\u98df\u6750\u4e0d\u8db33\u4e2a"):(a=this._moveFoodToPanZi(e),this.addOperateRecords({type:f.JengaOperateType.toTop,originIndex:d,targetIndex:-1,foodLists:a}),n=f.JengaOperateType.toTop):e.FoodNum&&(this.curSelect=e,n=f.JengaOperateType.select)}else f.default.Instance.isAuto?this._unlockQianZi(r):_.default.Instance.ShareOrVideo(_.ShareLoc.add_skewer,function(){t._unlockQianZi(r)},function(){});return n},t.prototype._toUseProp=function(e){var t=this,n=!1;switch(e){case 1:this.useProp=1,this._setBtnState(this.backBtn,1);var o=this.getLastOperateRecord();if(o){o.type,o.type=f.JengaOperateType.back;var a=o.foodLists,i=o.targetIndex,r=o.originIndex,c=this.getQianzi(r),s=this.getQianzi(i);if(c&&s){var l=c.FoodNum;this._resetSelect();for(var u=s.getPos().x,d=c.getPos().x,h=f.default.Instance.topY,_=f.default.Instance.besierY,y=function(e){var n=s.popFood(),o=l+e+1-1,a=n.node.position.clone().y,i=(u+d)/2,p=f.default.Instance.getPosYByIndex(o),y=cc.v2(u,a),v=cc.v2(u,h),m=cc.v2(i,_),g=cc.v2(d,h),I=cc.v2(d,p);n.node.parent=b.list,n.node.setPosition(y.x,y.y,0),n.SortInd=o,n.QianziIndex=r,c.pushFood(n);var T=[{type:0,points:[cc.v2(y.x,y.y),cc.v2(v.x,v.y)]},{type:1,points:[cc.v2(v.x,v.y),cc.v2(m.x,m.y),cc.v2(g.x,g.y)]},{type:0,points:[cc.v2(g.x,g.y),cc.v2(I.x,I.y)]}];b._moveFoods(n,T,r,o,function(){if(c&&n){var e=cc.v3(0,p);c.addFoodToChild(n,e)}t._checkGameOver(),t._isCanOperate=!0},.1*e)},b=this,v=0;v<a.length;v++)y(v)}}n=!0,this._resetProp();break;case 2:this.useProp=2,this._unlockQianZi(f.default.Instance.lockIndex),this._resetProp(),n=!0;break;case 3:this.getFreePanZi().length>=3?(this.useProp=3,this._showMoveTip(!0),this.curSelect&&(this.curSelect.backSelect(),this._curSelect=null),n=!0):p.default.Instance.TsInitial.ShowTips("\u4f4d\u7f6e\u4e0d\u8db33\u4e2a")}return n},t.prototype._resetProp=function(){this._useProp=0},t.prototype._moveFoodToPanZi=function(e){var t=this;if(e){for(var n=[],o=[],a=this.getFreePanZi(),i=e.getPos().x,r=(e.getPos().y,f.default.Instance.topY),c=function(c){var l=e.popFood(),u=a[c],d=u.getPos().x,h=u.getPos().y,p=l.node.position.clone().y,f=cc.v2(i,p),_=cc.v2(i,r),y=cc.v2(d,h);l.node.parent=s.list,l.node.setPosition(f),u.pushFood(l),u.showFood(!0),s._showMoveTip(!1),s._resetProp(),o=[{type:0,points:[cc.v2(f.x,f.y),cc.v2(_.x,_.y)]},{type:0,points:[cc.v2(_.x,_.y),cc.v2(y.x,y.y)]}],s._moveFoods(l,o,-1,-1,function(){if(u&&l){var e=cc.v3(0,0,0);u.addFoodToChild(l,e)}t._checkGameOver(),t._isCanOperate=!0},.1*c),n.push(l)},s=this,l=0;l<f.default.Instance.moveNum;l++)c(l);return n}},t.prototype._moveFoods=function(e,t,n,o,a,i,r){void 0===i&&(i=0),void 0===r&&(r=f.JengaOperateType.qianzi),e&&(this._isCanOperate=!1,e.setIcon(!1),y.default.Instance.PlaySound("g127_drop"),e.moveFood({lines:t,qianziIndex:n,sortInd:o,moveEndCb:a,delayTime:i}))},t.prototype._checkGameOver=function(){var e=0;for(var t in this._qianziDatas){var n=this._qianziDatas[t];n&&n.qianzi&&n.qianzi.IsCompelete&&e++}e>=f.default.Instance.startNum&&this._gameover(1)},t.prototype._gameover=function(e){f.default.Instance.gameState!=f.JengaGameState.end&&(console.error("\u6e38\u620f\u7ed3\u675f"),f.default.Instance.gameState=f.JengaGameState.end,1==e?m.default.Instance.OpenUI(S.default,m.UIOrder.Window_2):m.default.Instance.OpenUI(d.default,m.UIOrder.Window_2))},t.prototype._updateAutoTime=function(e){if(f.default.Instance.gameState==f.JengaGameState.plaing)if(f.default.Instance.isAuto)if(this._isCanOperate){if(this._autoTime+=e,this._autoTime>=this._totalTime)if(this._autoTime=0,this._totalTime=1*Math.random()+1,this._autoOperateType){var t=this._autoOperateList.pop();this._selectQianZi(t),(!this._autoOperateList||this._autoOperateList.length<=0)&&(this._autoOperateType=0),this._resetSelect()}else{this._resetSelect();var n=this._checkAutoOperate(),o=n.operateType,a=n.selectItem,i=n.targetItem;1==o?(this._autoOperateType=o,this._selectQianZi(a),this._autoOperateList=[i]):2==o?this._moveFoodToPanZi(a):3==o?this._gameover(3):4==o?this._toUseProp(2):5==o&&(y.default.Instance.PlaySound("g127_click"),this._autoOperateType=o,this.curSelect=a,this._autoOperateList=[i])}}else this._autoTime=0;else this._autoTime=0},t.prototype._checkAutoOperate=function(){var e=null,t=null,n=null,o=Object.keys(this._qianziDatas);o.sort(function(e,t){return Number(e)-Number(t)});var a=null,i=null,r=[],c=[];e:for(var s=0;s<o.length;s++){var l=o[s],u=this.getQianzi(Number(l));if(u)if(u.TopFoodType){if(!u.IsCompelete){c.push(u);for(var d=0;d<o.length;d++)if(s!=d){var h=o[d],p=this.getQianzi(Number(h));if(p&&!p.IsCompelete&&u.TopFoodType==p.TopFoodType&&(I=u.getTopSameNum())<=p.NeedFoodNum){a=u,i=p;break e}}}}else r.push(u)}if(a&&i&&(e=1,t=a,n=i),!e&&r.length){for(var _=[].concat(c).sort(function(){return Math.random()-.5}),y=[],b=0;b<_.length;b++){var v=_[b];v&&!v.IsAllSameType&&y.push(v)}e:for(var m=0;m<y.length;m++){var g=y[m];if(!g||!g.isComplete){var I=g.getTopSameNum();for(b=0;b<r.length;b++){var T=r[b];if(I<=T.NeedFoodNum){a=g,i=T;break e}}}}a&&i&&(e=1,t=a,n=i)}if(e||this._qzUnlockStates.length<f.default.Instance.numIndexs.length&&(e=4,t=this.getQianzi(f.default.Instance.lockIndex)),!e){var k=null,S=null;e:for(var w in this._panziDatas){var O=this._panziDatas[w];if(O&&O.topFoodType)for(var F in this._qianziDatas){var B=this._qianziDatas[F];if(B&&B.qianzi&&!B.qianzi.isFull&&(!B.qianzi.TopFoodType||B.qianzi.TopFoodType==O.topFoodType)){S=O,k=B.qianzi;break e}}}k&&S&&(e=5,t=S,n=k)}if(!e&&this.getFreePanZi().length>=3){var x=[];for(b=0;b<c.length;b++){var P=c[b];P&&!P.IsCompelete&&P.FoodNum>=f.default.Instance.moveNum&&x.push(P)}var C=(x=x.sort(function(){return Math.random()-.5}))[0];C&&(e=2,t=C)}return e||(e=3),{operateType:e,selectItem:t,targetItem:n}},t.bundleName="BundleJenga",t.prefabUrl="prefabs/JengaPre",t.className="JengaInterface",l([F(cc.Prefab)],t.prototype,"foodPrefab",void 0),l([F(g.default)],t.prototype,"moreClickUtil",void 0),l([F(cc.Node)],t.prototype,"setBtn",void 0),l([F(cc.Label)],t.prototype,"levelLabel",void 0),l([F(cc.Node)],t.prototype,"list",void 0),l([F(cc.Node)],t.prototype,"seletcContent",void 0),l([F(cc.Node)],t.prototype,"panziNode",void 0),l([F(cc.Node)],t.prototype,"moveTip",void 0),l([F(cc.Node)],t.prototype,"backBtn",void 0),l([F(cc.Node)],t.prototype,"addBtn",void 0),l([F(cc.Node)],t.prototype,"moveBtn",void 0),l([F(cc.Node)],t.prototype,"top",void 0),l([F(cc.Node)],t.prototype,"bottom",void 0),l([O],t)}(u.default);i.default=B,cc._RF.pop(),cc._RF.pop()},{}],JengaManager:[function(e,t,n){"use strict";cc._RF.push(t,"ecac3DRd39Gw7Ax4KGqCa3n","JengaManager");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"8432fCfrORJkrAmBWj5Emmx","JengaManager");var r,c=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.JengaOperateType=a.JengaLineType=a.JengaFoodState=a.JengaQianZiState=a.JengaGameState=void 0,function(e){e[e.none=0]="none",e[e.idle=1]="idle",e[e.plaing=2]="plaing",e[e.end=3]="end",e[e.pasue=4]="pasue"}(r=a.JengaGameState||(a.JengaGameState={})),function(e){e.none="none",e.idle="idle",e.select="select",e.moving="moving"}(a.JengaQianZiState||(a.JengaQianZiState={})),function(e){e[e.none=0]="none",e[e.idle=1]="idle",e[e.moving=2]="moving",e[e.top=3]="top"}(a.JengaFoodState||(a.JengaFoodState={})),function(e){e[e.straight=0]="straight",e[e.curved=1]="curved"}(a.JengaLineType||(a.JengaLineType={})),function(e){e.none="none",e.select="select",e.toTop="top",e.topToQianZi="topToQianZi",e.qianzi="qianzi",e.back="back"}(a.JengaOperateType||(a.JengaOperateType={}));var s=cc._decorator,l=s.ccclass,u=(s.property,function(){function e(){this.unlockVideoNum=3,this.topY=500,this.besierY=800,this.beginX=-320,this.spaceX=70,this.beginY=-472,this.spaceY=59,this.foodTypeNum=17,this.startNum=5,this.stateIndexs=[0,0,0,0,0,0,0,1],this.lockIndex=7,this.numIndexs=[17,17,17,17,17,17,17,4],this.fullNum=17,this.moveY=20,this.moveNum=3,this.gameState=r.none,this.isAuto=!1}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t.instance||(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),e.prototype.getPosXByIndex=function(e){return this.beginX+e*this.spaceX},e.prototype.getPosYByIndex=function(e){return e*this.spaceY+this.beginY},e.prototype.getRandomIndexs=function(e,t){void 0===e&&(e=this.startNum),void 0===t&&(t=this.foodTypeNum);for(var n=[],o=1;o<=t;o++)n.push(o);var a=[];for(o=0;o<e&&n.length>0;o++){var i=Math.floor(Math.random()*n.length);a.push(n[i]),n.splice(i,1)}return a},t=c([l],e)}());a.default=u,cc._RF.pop(),cc._RF.pop()},{}],JengaOverInterface:[function(e,t,n){"use strict";cc._RF.push(t,"1b691td1KpOS4K+Ax5mTuSH","JengaOverInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"ccb86gJIh1GEoaWtNygIUFr","JengaOverInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("JengaManager"),h=o("StoragerManager"),p=o("TypeManager"),f=o("UIManager"),_=o("JengaInterface"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.homeBtn=null,t.nextBtn=null,t.levelLabel=null,t._level=0,t._btnLock=!1,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.homeBtn.on(cc.Node.EventType.TOUCH_END,this._homeBtnClick,this),this.nextBtn.on(cc.Node.EventType.TOUCH_END,this._nextBtnClick,this)},t.prototype.onUIDisable=function(){this.homeBtn.off(cc.Node.EventType.TOUCH_END,this._homeBtnClick,this),this.nextBtn.off(cc.Node.EventType.TOUCH_END,this._nextBtnClick,this)},t.prototype._homeBtnClick=function(){this._btnLock||(f.default.Instance.DestroyUI(_.default),this.closeView())},t.prototype._nextBtnClick=function(){this._btnLock||(this.closeView(),this._nextGame())},t.prototype._nextGame=function(){cc.systemEvent.emit(p.DistributedEvent.jengaGameNext,h.default.Instance.jengaLevel)},t.prototype.onInit=function(){var e=this;this._level=h.default.Instance.jengaLevel,this.levelLabel.string="\u7b2c"+this._level+"\u5173",h.default.Instance.jengaLevel++,d.default.Instance.isAuto&&(this._btnLock=!0,this.scheduleOnce(function(){cc.systemEvent.emit(p.DistributedEvent.jengaGameRestart),e._nextGame(),e.closeView()},2)),h.default.Instance.AutoSyncData(!1,!0)},t.prototype.onUIStart=function(){this.ani_popup.play("ani_tongyongtanchuang_open"),this._initView()},t.prototype._initView=function(){},t.prototype.closeView=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),f.default.Instance.DestroyUI(n))},t.bundleName="BundleJenga",t.prefabUrl="prefabs/JengaOverPre",t.className="JengaOverInterface",l([v(cc.Animation)],t.prototype,"ani_popup",void 0),l([v(cc.Node)],t.prototype,"homeBtn",void 0),l([v(cc.Node)],t.prototype,"nextBtn",void 0),l([v(cc.Label)],t.prototype,"levelLabel",void 0),n=l([b],t)}(u.default);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],JengaPanziItem:[function(e,t,n){"use strict";cc._RF.push(t,"8b5b3bWX89GzJjWg49cKGS/","JengaPanziItem");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"eee6eRDhQRKTKQ8jVXFiM9s","JengaPanziItem");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,d=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t._foods=null,t._index=0,t._clickCb=null,t}return c(t,e),Object.defineProperty(t.prototype,"Food",{get:function(){return this._foods},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topFoodType",{get:function(){return this._foods?this._foods.FoodType:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this._index},enumerable:!1,configurable:!0}),t.prototype.getPos=function(){return this.node&&this.node.isValid?this.node.position.clone():cc.v2(0,0)},t.prototype.onLoad=function(){this.icon=this.node.getChildByName("icon"),this.icon||console.error("\u8bf7\u68c0\u67e5\u8282\u70b9")},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this._nodeClick,this)},t.prototype.onDisable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this._nodeClick,this)},t.prototype._nodeClick=function(){this._clickCb&&this._clickCb(this)},t.prototype.initItem=function(e,t){this._index=e,this._clickCb=t,this.showFood(!1),this.removeFood()},t.prototype.showFood=function(e){this.icon&&this.icon.isValid&&(this.icon.active=e)},t.prototype.pushFood=function(e){this._foods=e},t.prototype.popFood=function(){return this._foods},t.prototype.removeFood=function(){this._foods=null},t.prototype.doSelect=function(){this.foodSelect(!0)},t.prototype.backSelect=function(){this.node&&this.node.isValid&&this.foodSelect(!1)},t.prototype.foodSelect=function(e){this._foods&&this._foods.setIcon(e)},t.prototype.addFoodToChild=function(e,t){this.node&&this.node.isValid&&(e.node.parent=this.node,e.node.setPosition(t))},s([u],t)}(cc.Component));a.default=d,cc._RF.pop(),cc._RF.pop()},{}],JengaQianZiItem:[function(e,t,n){"use strict";cc._RF.push(t,"8d402sThtRFqbA0VfGUdPwg","JengaQianZiItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"cfadcMdjj9ANYRXbDFXBPAR","JengaQianZiItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("JengaManager"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._state=u.JengaQianZiState.none,t._foods=[],t._index=0,t.icon=null,t.eff=null,t.foodsNode=null,t._tween=null,t}return s(t,e),Object.defineProperty(t.prototype,"State",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TotalNum",{get:function(){return this._totalNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Foods",{get:function(){return this._foods},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"FoodNum",{get:function(){return this._foods&&this._foods.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"NeedFoodNum",{get:function(){return this._totalNum-this._foods.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TopFoodType",{get:function(){if(this._foods.length<=0)return null;var e=this._foods[this._foods.length-1];return e&&e.FoodType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsAllSameType",{get:function(){if(this._foods.length<=0)return!1;var e=!0,t=this._foods[0].FoodType;if(t)for(var n=1;n<this._foods.length;n++){var o=this._foods[n];if(o&&o.FoodType!=t){e=!1;break}}else e=!1;return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCorrectQianZi",{get:function(){return this._totalNum<=u.default.Instance.fullNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFull",{get:function(){return this._foods.length>=this._totalNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsCompelete",{get:function(){if(!this.isFull)return!1;if(this._totalNum<u.default.Instance.fullNum)return!1;for(var e=!0,t=-1,n=this._foods.length,o=0;o<n;o++){var a=this._foods[o];if(!a||a.FoodType!=t&&-1!=t){e=!1;break}t=a.FoodType}return this.foodsNode&&this.foodsNode.childrenCount==n||(e=!1),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsFinish",{get:function(){if(!this.isFull)return!1;if(this._totalNum<u.default.Instance.fullNum)return!1;for(var e=!0,t=-1,n=this._foods.length,o=0;o<n;o++){var a=this._foods[o];if(!a||a.FoodType!=t&&-1!=t){e=!1;break}t=a.FoodType}return e},enumerable:!1,configurable:!0}),t.prototype.getTopSameNum=function(){for(var e=null,t=0,n=this._foods.length-1;n>=0;n--){var o=this._foods[n];if(!o||e&&o.FoodType!=e)break;e=o.FoodType,t++}return t},Object.defineProperty(t.prototype,"Index",{get:function(){return this._index},enumerable:!1,configurable:!0}),t.prototype.getPos=function(){return this.node&&this.node.isValid?this.node.position.clone():cc.v2(0,0)},t.prototype.onLoad=function(){this.icon=this.node.getChildByName("icon"),this.eff=this.node.getChildByName("JengaPre_PT"),this.foodsNode=this.node.getChildByName("foods")},t.prototype.initItem=function(e,t){this._index=t,this._totalNum=e,this._state=u.JengaQianZiState.idle,this._foods=[],this.showCompeleteEff(!1)},t.prototype.pushFood=function(e){this._foods.push(e)},t.prototype.popFood=function(){var e=this._foods.pop();return this.showCompeleteEff(this.IsCompelete),e},t.prototype.addFoodToChild=function(e,t){this.foodsNode&&this.foodsNode.isValid&&(e.node.parent=this.foodsNode,e.node.setPosition(cc.v3(0,t.y,t.z)),this.showCompeleteEff(this.IsCompelete))},t.prototype.showCompeleteEff=function(e){this.eff&&this.eff.isValid&&(this.eff.active=e)},t.prototype.doSelect=function(){if(this.node&&this.node.isValid){this._tween&&this._tween.stop();var e=this.node.position.x;this._tween=cc.tween(this.node).to(.02,{position:cc.v3(e,u.default.Instance.moveY,0)}).start(),this.foodSelect(!0)}},t.prototype.backSelect=function(){if(this.node&&this.node.isValid){this._tween&&this._tween.stop();var e=this.node.position.x;this._tween=cc.tween(this.node).to(.02,{position:cc.v3(e,0,0)}).start(),this.foodSelect(!1)}},t.prototype.foodSelect=function(e){for(var t=0;t<this._foods.length;t++)this._foods[t].setIcon(e)},t.prototype.showVideo=function(e){var t=this.node.getChildByName("video");t&&(t.active=e)},t.prototype.reset=function(){},l([h],t)}(cc.Component));i.default=p,cc._RF.pop(),cc._RF.pop()},{}],KebabListItem:[function(e,t,n){"use strict";cc._RF.push(t,"62bc24ZYTxC+YIvr3kSamvi","KebabListItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"adaaa+XUm5He5dtE6Nu9VdD","KebabListItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("SkinKebabItem"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listItem=null,t.bg=null,t.titleLabel=null,t.layout=null,t._data=[],t._index=0,t._isInit=!1,t._time=0,t}return s(t,e),t.prototype.update=function(e){this._isInit&&this._data.length-1>=this._index&&(this._time+=e,this._time>=.02&&(this._time=0,this._createItem(this._index),this._index++))},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){this._isInit=!1},t.prototype.initItem=function(e){if(this._data){this._isInit=!1,this._data=e,this._index=0;for(var t=this.layout.childrenCount,n=0;n<t;n++){var o=this.layout.children[n],a=this._data[n];if(o)if(a){this._index++,o.active=!0;var i=o.getComponent(u.default);i&&i.refresh(a)}else o.active=!1}this._data.length<=0&&(this.layout.height=0),this.node.getComponent(cc.Layout).enabled=!1;var r=Math.ceil(this._data.length/4);this.node.height=63+131*r+16*(r-1)+10,this._isInit=!0}},t.prototype._createItem=function(e){var t=cc.instantiate(this.listItem);this.layout.addChild(t),t.active=!0;var n=this._data[e],o=t.getComponent(u.default);o&&o.refresh(n)},l([p(cc.Prefab)],t.prototype,"listItem",void 0),l([p(cc.Node)],t.prototype,"bg",void 0),l([p(cc.Label)],t.prototype,"titleLabel",void 0),l([p(cc.Node)],t.prototype,"layout",void 0),l([h],t)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],LevelPackInterface:[function(e,t,n){"use strict";cc._RF.push(t,"0e8aer9e6BKmoyrPOmOBCds","LevelPackInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"ee79ecKP8lL36G54gkGTigJ","LevelPackInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("BarbecueOverInterface"),h=o("MainInterface"),p=o("ShopAwardInterface"),f=o("BundleManger"),_=o("GameManger"),y=o("SdkManager"),b=o("SoundManager"),v=o("StoragerManager"),m=o("TypeManager"),g=o("UIManager"),I=cc._decorator,T=I.ccclass,k=I.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.icon_title=null,t.icon_type1=null,t.icon_type2=null,t.icon_type3=null,t.btn_close=null,t.btn_video=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_video.on(cc.Node.EventType.TOUCH_END,this.video,this)},t.prototype.onInit=function(e){var t=this;b.default.Instance.PlaySound("book_pop_open"),this.type=e[0],this.ts=e[1];for(var n=1;n<4;n++)this.type==n?this["icon_type"+n].active=!0:this["icon_type"+n].active=!1;switch(f.default.Instance.LoadSpriteFrame("Bundle8UI","PackUI/txt_"+this.type,this.icon_title),this.type){case 1:f.default.Instance.LoadSpriteFrame("Bundle8UI","PackUI/txt_12",this.btn_video.children[1]);break;case 2:v.default.Instance.LevelAwardPack.push(this.ts.Lv),f.default.Instance.LoadSpriteFrame("Bundle8UI","PackUI/txt_11",this.btn_video.children[1]),v.default.Instance.AutoSyncData();break;case 3:f.default.Instance.LoadSpriteFrame("Bundle8UI","PackUI/txt_11",this.btn_video.children[1])}_.default.Instance.ShowLevelPackInterface<=3?(this.btn_close.active=!1,cc.tween(this).delay(3).call(function(){t.btn_close.active=!0}).start()):this.btn_close.active=!0},t.prototype.video=function(){var e=this,t=function(){var t,n;switch(null==v.default.Instance.BarbecueProp.prop_1&&(v.default.Instance.BarbecueProp.prop_1=0),null==v.default.Instance.BarbecueProp.prop_2&&(v.default.Instance.BarbecueProp.prop_2=0),e.type){case 1:e.ts.HelpPack();break;case 2:v.default.Instance.BarbecueProp.prop_1++,v.default.Instance.BarbecueProp.prop_2++;for(var o=0;o<e.ts.btn_prop.length;o++)e.ts.btn_prop[o].Refresh();t=[{type:"prop_1",value:1},{type:"prop_2",value:1}],n="\u5173\u5361\u5956\u52b1";break;case 3:v.default.Instance.BarbecueProp.prop_1+=3,v.default.Instance.BarbecuePower+=5,e.ts&&e.ts.btn_prop[0].Refresh(),v.default.Instance.Record[m.RecordType.newcomer_package1]=!0;var a=g.default.Instance.GetUI(h.default);a&&(a.btn_newcomer1.active=!1,a.btn_newcomer_kuang.active=a.btn_newcomer1.active||a.btn_newcomer2.active,a.rightBtnLayout.updateLayout());var i=g.default.Instance.GetUI(d.default);i&&(i.btn_newcomer1.active=!1),t=[{type:"prop_1",value:3},{type:"power",value:5}],n="\u65b0\u624b\u793c\u5305"}v.default.Instance.AutoSyncData(),t&&g.default.Instance.OpenUI(p.default,g.UIOrder.Window_2,t,n),e.close()};switch(this.type){case 1:y.default.Instance.ShareOrVideo(y.ShareLoc.level_boost_pack,t);break;case 2:y.default.Instance.ShareOrVideo(y.ShareLoc.level_reward_pack,t);break;case 3:y.default.Instance.ShareOrVideo(y.ShareLoc.beginner_gift_pack_1,t)}},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){g.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle8Pre",t.prefabUrl="PackPre/LevelPackPre",t.className="LevelPackInterface",l([k(cc.Animation)],t.prototype,"ani_popup",void 0),l([k(cc.Node)],t.prototype,"icon_title",void 0),l([k(cc.Node)],t.prototype,"icon_type1",void 0),l([k(cc.Node)],t.prototype,"icon_type2",void 0),l([k(cc.Node)],t.prototype,"icon_type3",void 0),l([k(cc.Node)],t.prototype,"btn_close",void 0),l([k(cc.Node)],t.prototype,"btn_video",void 0),n=l([T],t)}(u.default);i.default=S,cc._RF.pop(),cc._RF.pop()},{}],ListItem:[function(e,t,n){"use strict";cc._RF.push(t,"89b1aMGeoxFbJQiKwWJPJ6A","ListItem");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"19b8b2p8+BNLJfZH8/STnEw","ListItem");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var l,u=cc._decorator,d=u.ccclass,h=u.property,p=u.disallowMultiple,f=u.menu,_=u.executionOrder;(function(e){e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH"})(l||(l={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.title=null,t.selectedMode=l.NONE,t.selectedFlag=null,t.selectedSpriteFrame=null,t._unselectedSpriteFrame=null,t.adaptiveSize=!1,t._selected=!1,t._eventReg=!1,t}return c(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case l.TOGGLE:this.selectedFlag.active=e;break;case l.SWITCH:var t=this.selectedFlag.getComponent(cc.Sprite);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(this.selectedMode==l.SWITCH){var e=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=e.spriteFrame}},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},t.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},t.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},t.prototype.createEvt=function(e,t,n){if(void 0===n&&(n=null),e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var o=new cc.Component.EventHandler;return o.target=n||e.node,o.component=e.comName,o.handler=t,o}},t.prototype.showAni=function(e,t,n){var o,a=this;switch(e){case 0:o=cc.tween(a.node).to(.2,{scale:.7}).by(.3,{y:2*a.node.height});break;case 1:o=cc.tween(a.node).to(.2,{scale:.7}).by(.3,{x:2*a.node.width});break;case 2:o=cc.tween(a.node).to(.2,{scale:.7}).by(.3,{y:-2*a.node.height});break;case 3:o=cc.tween(a.node).to(.2,{scale:.7}).by(.3,{x:-2*a.node.width});break;default:o=cc.tween(a.node).to(.3,{scale:.1})}(t||n)&&o.call(function(){if(n){a.list._delSingleItem(a.node);for(var e=a.list.displayData.length-1;e>=0;e--)if(a.list.displayData[e].id==a.listId){a.list.displayData.splice(e,1);break}}t()}),o.start()},t.prototype.onClickThis=function(){this.list.selectedId=this.listId},s([h({type:cc.Sprite,tooltip:!1})],t.prototype,"icon",void 0),s([h({type:cc.Node,tooltip:!1})],t.prototype,"title",void 0),s([h({type:cc.Enum(l),tooltip:!1})],t.prototype,"selectedMode",void 0),s([h({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>l.NONE}})],t.prototype,"selectedFlag",void 0),s([h({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==l.SWITCH}})],t.prototype,"selectedSpriteFrame",void 0),s([h({tooltip:!1})],t.prototype,"adaptiveSize",void 0),s([d,p(),f("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),_(-5001)],t)}(cc.Component);a.default=y,cc._RF.pop(),cc._RF.pop()},{}],ListUtil:[function(e,t,n){"use strict";cc._RF.push(t,"8f8dc2PgL9L2ryN1FE0foVw","ListUtil");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"9b699h6/d5JwJEu8odTtl6d","ListUtil");var r,c,s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.grid=0]="grid",e[e.horizontal=1]="horizontal",e[e.vertial=2]="vertial"}(c||(c={}));var u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t.scrollView=null,t.content=null,t.spaceX=0,t.spaceY=0,t.originX=0,t.originY=0,t.bottomS=0,t.colNum=0,t._layoutType=c.grid,t._prefabW=0,t._prefabH=0,t._itemComp=null,t._listsInfo=[],t}return s(t,e),Object.defineProperty(t.prototype,"LayoutType",{set:function(e){this._layoutType=e+0},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){this.scrollView.node.on("scrolling",this._event_update_opacity,this),this.content.on(cc.Node.EventType.CHILD_REMOVED,this.removeItem,this),this.content.on(cc.Node.EventType.CHILD_ADDED,this.addItem,this)},t.prototype.onDisable=function(){this.scrollView.node.off("scrolling",this._event_update_opacity,this),this.content.off(cc.Node.EventType.CHILD_REMOVED,this.removeItem,this),this.content.off(cc.Node.EventType.CHILD_ADDED,this.addItem,this)},t.prototype.initListArgs=function(e){e&&(this.spaceX=e.spaceX?e.spaceX:0,this.spaceY=e.spaceY?e.spaceY:0,this.originX=e.originX?e.originX:0,this.originY=e.originY?e.originY:0,this.bottomS=e.bottomS?e.bottomS:0,this.colNum=e.colNum?e.colNum:1,this._layoutType=e.layoutType)},t.prototype.initListContent=function(e,t,n){this.content.removeAllChildren();var o=e.width,a=e.height;this._prefabW=o,this._prefabH=a,this.item=e,this._itemComp=n,this._listsInfo=t,this.item&&this._listsInfo?this._layoutType==c.grid?(this.scrollView.vertical=!0,this.scrollView.horizontal=!0,this.initGridContent()):this._layoutType==c.horizontal?(this.scrollView.vertical=!1,this.scrollView.horizontal=!0,this.initHContent()):this._layoutType==c.vertial&&(this.scrollView.vertical=!0,this.scrollView.horizontal=!1,this.initVContent()):console.warn("\u6ca1\u6709\u9700\u8981\u5b9e\u4f8b\u5316\u7684\u76ee\u6807\u6216\u8005\u6570\u636e")},t.prototype.updateListsInfo=function(e){this._listsInfo=e,this._layoutType==c.grid?(this.scrollView.vertical=!0,this.initGridContent()):this._layoutType==c.horizontal?(this.scrollView.vertical=!1,this.scrollView.horizontal=!0,this.initHContent()):this._layoutType==c.vertial&&(this.scrollView.vertical=!0,this.scrollView.horizontal=!1,this.initVContent())},t.prototype.initGridContent=function(){for(var e=this._listsInfo.length,t=e>this.content.children.length?e:this.content.children.length,n=this.colNum,o=0,a=0;a<t;a++){var i=this._listsInfo[a],r=this.content.children[o];if(i){r||(r=cc.instantiate(this.item),this.content.addChild(r)),r.name="child_"+(a+1);var c=r.getComponent(this._itemComp);c&&c.initItem(i);var s=o%n,l=Math.floor(o/n),u=this.originX+s*this.spaceX+s*this._prefabW,d=this.originY+l*this._prefabH+l*this.spaceY;r.Index=a,r.setPosition(u,-d),o++}else r&&(r.removeFromParent(),r.destroy())}this._event_update_opacity();var h=this.content.getContentSize(),p=Math.ceil(o/n)*this._prefabH+(Math.ceil(o/n)-1)*this.spaceY+this.bottomS;this.content.setContentSize(h.width,p)},t.prototype.initHContent=function(){for(var e=this._listsInfo.length,t=e>this.content.children.length?e:this.content.children.length,n=this._prefabW,o=0,a=0;a<t;a++){var i=this._listsInfo[a],r=this.content.children[o];if(i){r||(r=cc.instantiate(this.item),this.content.addChild(r)),r.name="child_"+(a+1);var c=r.getComponent(this._itemComp);c&&c.initItem(i),r.Index=o;var s=this.originX+o*this.spaceX+o*n;r.setPosition(s,0),o++}else r&&(r.removeFromParent(),r.destroy())}this._event_update_opacity();var l=this.content.getContentSize(),u=Math.ceil(o*n+(o-1)*this.spaceX);this.content.setContentSize(u,l.height)},t.prototype.initVContent=function(){for(var e=this._listsInfo.length,t=e>this.content.children.length?e:this.content.children.length,n=this._prefabH,o=0,a=0;a<t;a++){var i=this._listsInfo[a],r=this.content.children[o];if(i){r||(r=cc.instantiate(this.item),this.content.addChild(r)),r.name="child_"+(a+1);var c=r.getComponent(this._itemComp);c&&c.initItem(i),r.Index=o;var s=this.originY+o*this.spaceY+o*n;r.setPosition(0,-s),o++}else r&&(r.removeFromParent(),r.destroy())}this._event_update_opacity();var l=this.content.getContentSize(),u=Math.ceil(o*n+(o-1)*this.spaceY)+this.bottomS;this.content.setContentSize(l.width,u)},t.prototype.removeItem=function(){this._event_update_opacity()},t.prototype.addItem=function(){this._event_update_opacity()},t.prototype._get_bounding_box_to_world=function(e){var t=e.getContentSize(),n=t.width,o=t.height,a=new cc.Rect(-e.anchorX*n,-e.anchorY*o,n,o),i=new cc.Mat4;return e.getWorldMatrix(i),a.transformMat4(a,i),a},t.prototype._check_collision=function(e){var t=this._get_bounding_box_to_world(this.scrollView.node),n=this._get_bounding_box_to_world(e);return t.width+=.5*t.width,t.height+=.5*t.height,t.x-=.25*t.width,t.y-=.25*t.height,t.intersects(n)},t.prototype._event_update_opacity=function(){var e=this;this.content.children.forEach(function(t){t.active=!!e._check_collision(t)})},t.prototype.clearList=function(){this.content.removeAllChildren()},l([h(cc.Node)],t.prototype,"item",void 0),l([h(cc.ScrollView)],t.prototype,"scrollView",void 0),l([h(cc.Node)],t.prototype,"content",void 0),l([h],t.prototype,"spaceX",void 0),l([h],t.prototype,"spaceY",void 0),l([h],t.prototype,"originX",void 0),l([h],t.prototype,"originY",void 0),l([h],t.prototype,"bottomS",void 0),l([h],t.prototype,"colNum",void 0),l([h({tooltip:"\u6392\u5e8f\u6eda\u52a8\u7c7b\u578b",type:cc.Integer})],t.prototype,"_layoutType",void 0),l([d],t)}(cc.Component);a.default=p,cc._RF.pop(),cc._RF.pop()},{}],List:[function(e,t,n){"use strict";cc._RF.push(t,"fe8d43V7RtIz6GdCW4CQUFZ","List");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"8dec9gnlBhL9oYwOOk4KLo+","List");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u,d,h,p=cc._decorator,f=p.ccclass,_=p.property,y=p.disallowMultiple,b=p.menu,v=p.executionOrder,m=p.requireComponent,g=o("ListItem");(function(e){e[e.NODE=1]="NODE",e[e.PREFAB=2]="PREFAB"})(u||(u={})),function(e){e[e.NORMAL=1]="NORMAL",e[e.ADHERING=2]="ADHERING",e[e.PAGE=3]="PAGE"}(d||(d={})),function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULT=2]="MULT"}(h||(h={}));var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateType=u.NODE,t.tmpNode=null,t.tmpPrefab=null,t._slideMode=d.NORMAL,t.pageDistance=.3,t.pageChangeEvent=new cc.Component.EventHandler,t._virtual=!0,t.cyclic=!1,t.lackCenter=!1,t.lackSlide=!1,t._updateRate=0,t.frameByFrameRenderNum=0,t.renderEvent=new cc.Component.EventHandler,t.selectedMode=h.NONE,t.repeatEventSingle=!1,t.selectedEvent=new cc.Component.EventHandler,t._selectedId=-1,t._forceUpdate=!1,t._updateDone=!0,t._numItems=0,t._inited=!1,t._needUpdateWidget=!1,t._aniDelRuning=!1,t._doneAfterUpdate=!1,t.adhering=!1,t._adheringBarrier=!1,t.curPageNum=0,t}return s(t,e),Object.defineProperty(t.prototype,"slideMode",{get:function(){return this._slideMode},set:function(e){this._slideMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"virtual",{get:function(){return this._virtual},set:function(e){null!=e&&(this._virtual=e),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateRate",{get:function(){return this._updateRate},set:function(e){e>=0&&e<=6&&(this._updateRate=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this._selectedId},set:function(e){var t,n=this;switch(n.selectedMode){case h.SINGLE:if(!n.repeatEventSingle&&e==n._selectedId)return;t=n.getItemByListId(e);var o=void 0;if(n._selectedId>=0?n._lastSelectedId=n._selectedId:n._lastSelectedId=null,n._selectedId=e,t&&((o=t.getComponent(g.default)).selected=!0),n._lastSelectedId>=0&&n._lastSelectedId!=n._selectedId){var a=n.getItemByListId(n._lastSelectedId);a&&(a.getComponent(g.default).selected=!1)}n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],t,e%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems);break;case h.MULT:if(!(t=n.getItemByListId(e)))return;o=t.getComponent(g.default),n._selectedId>=0&&(n._lastSelectedId=n._selectedId),n._selectedId=e;var i=!o.selected;o.selected=i;var r=n.multSelected.indexOf(e);i&&r<0?n.multSelected.push(e):!i&&r>=0&&n.multSelected.splice(r,1),n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],t,e%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems,i)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(e){var t=this;if(t.checkInited(!1))if(null==e||e<0)cc.error("numItems set the wrong::",e);else if(t._actualNumItems=t._numItems=e,t._forceUpdate=!0,t._virtual)t._resizeContent(),t.cyclic&&(t._numItems=t._cyclicNum*t._numItems),t._onScrolling(),t.frameByFrameRenderNum||t.slideMode!=d.PAGE||(t.curPageNum=t.nearestListId);else{t.cyclic&&(t._resizeContent(),t._numItems=t._cyclicNum*t._numItems);var n=t.content.getComponent(cc.Layout);if(n&&(n.enabled=!0),t._delRedundantItem(),t.firstListId=0,t.frameByFrameRenderNum>0){for(var o=t.frameByFrameRenderNum>t._numItems?t._numItems:t.frameByFrameRenderNum,a=0;a<o;a++)t._createOrUpdateItem2(a);t.frameByFrameRenderNum<t._numItems&&(t._updateCounter=t.frameByFrameRenderNum,t._updateDone=!1)}else{for(a=0;a<t._numItems;a++)t._createOrUpdateItem2(a);t.displayItemNum=t._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._init()},t.prototype.onDestroy=function(){var e=this;cc.isValid(e._itemTmp)&&e._itemTmp.destroy(),cc.isValid(e.tmpNode)&&e.tmpNode.destroy(),e._pool&&e._pool.clear()},t.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},t.prototype.onDisable=function(){this._unregisterEvent()},t.prototype._registerEvent=function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.on("touch-up",e._onTouchUp,e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.on("scroll-began",e._onScrollBegan,e,!0),e.node.on("scroll-ended",e._onScrollEnded,e,!0),e.node.on("scrolling",e._onScrolling,e,!0),e.node.on(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._unregisterEvent=function(){var e=this;e.node.off(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.off("touch-up",e._onTouchUp,e),e.node.off(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.off("scroll-began",e._onScrollBegan,e,!0),e.node.off("scroll-ended",e._onScrollEnded,e,!0),e.node.off("scrolling",e._onScrolling,e,!0),e.node.off(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._init=function(){var e=this;if(!e._inited)if(e._scrollView=e.node.getComponent(cc.ScrollView),e.content=e._scrollView.content,e.content){switch(e._layout=e.content.getComponent(cc.Layout),e._align=e._layout.type,e._resizeMode=e._layout.resizeMode,e._startAxis=e._layout.startAxis,e._topGap=e._layout.paddingTop,e._rightGap=e._layout.paddingRight,e._bottomGap=e._layout.paddingBottom,e._leftGap=e._layout.paddingLeft,e._columnGap=e._layout.spacingX,e._lineGap=e._layout.spacingY,e._colLineNum,e._verticalDir=e._layout.verticalDirection,e._horizontalDir=e._layout.horizontalDirection,e.setTemplateItem(cc.instantiate(e.templateType==u.PREFAB?e.tmpPrefab:e.tmpNode)),e._slideMode!=d.ADHERING&&e._slideMode!=d.PAGE||(e._scrollView.inertia=!1,e._scrollView._onMouseWheel=function(){}),e.virtual||(e.lackCenter=!1),e._lastDisplayData=[],e.displayData=[],e._pool=new cc.NodePool,e._forceUpdate=!1,e._updateCounter=0,e._updateDone=!0,e.curPageNum=0,e.cyclic&&(e._scrollView._processAutoScrolling=this._processAutoScrolling.bind(e),e._scrollView._startBounceBackIfNeeded=function(){return!1}),e._align){case cc.Layout.Type.HORIZONTAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}}}e.content.removeAllChildren(),e._inited=!0}else cc.error(e.node.name+"'s cc.ScrollView unset content!")},t.prototype._processAutoScrolling=function(e){this._scrollView._autoScrollAccumulatedTime+=1*e;var t=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var n=t-1;t=n*n*n*n*n+1}var o=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(t)),a=this._scrollView.getScrollEndedEventTiming(),i=Math.abs(t-1)<=a;Math.abs(t-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),i&&(this._scrollView._autoScrolling=!1);var r=o.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(r),i),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},t.prototype.setTemplateItem=function(e){if(e){var t=this;t._itemTmp=e,t._resizeMode==cc.Layout.ResizeMode.CHILDREN?t._itemSize=t._layout.cellSize:t._itemSize=cc.size(e.width,e.height);var n=e.getComponent(g.default),o=!1;switch(n||(o=!0),o&&(t.selectedMode=h.NONE),(n=e.getComponent(cc.Widget))&&n.enabled&&(t._needUpdateWidget=!0),t.selectedMode==h.MULT&&(t.multSelected=[]),t._align){case cc.Layout.Type.HORIZONTAL:t._colLineNum=1,t._sizeType=!1;break;case cc.Layout.Type.VERTICAL:t._colLineNum=1,t._sizeType=!0;break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var a=t.content.width-t._leftGap-t._rightGap;t._colLineNum=Math.floor((a+t._columnGap)/(t._itemSize.width+t._columnGap)),t._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var i=t.content.height-t._topGap-t._bottomGap;t._colLineNum=Math.floor((i+t._lineGap)/(t._itemSize.height+t._lineGap)),t._sizeType=!1}}}},t.prototype.checkInited=function(e){return void 0===e&&(e=!0),!!this._inited||(e&&cc.error("List initialization not completed!"),!1)},t.prototype._resizeContent=function(){var e,t=this;switch(t._align){case cc.Layout.Type.HORIZONTAL:if(t._customSize){var n=t._getFixedSize(null);e=t._leftGap+n.val+t._itemSize.width*(t._numItems-n.count)+t._columnGap*(t._numItems-1)+t._rightGap}else e=t._leftGap+t._itemSize.width*t._numItems+t._columnGap*(t._numItems-1)+t._rightGap;break;case cc.Layout.Type.VERTICAL:t._customSize?(n=t._getFixedSize(null),e=t._topGap+n.val+t._itemSize.height*(t._numItems-n.count)+t._lineGap*(t._numItems-1)+t._bottomGap):e=t._topGap+t._itemSize.height*t._numItems+t._lineGap*(t._numItems-1)+t._bottomGap;break;case cc.Layout.Type.GRID:switch(t.lackCenter&&(t.lackCenter=!1),t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var o=Math.ceil(t._numItems/t._colLineNum);e=t._topGap+t._itemSize.height*o+t._lineGap*(o-1)+t._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var a=Math.ceil(t._numItems/t._colLineNum);e=t._leftGap+t._itemSize.width*a+t._columnGap*(a-1)+t._rightGap}}var i=t.content.getComponent(cc.Layout);if(i&&(i.enabled=!1),t._allItemSize=e,t._allItemSizeNoEdge=t._allItemSize-(t._sizeType?t._topGap+t._bottomGap:t._leftGap+t._rightGap),t.cyclic){var r=t._sizeType?t.node.height:t.node.width;t._cyclicPos1=0,r-=t._cyclicPos1,t._cyclicNum=Math.ceil(r/t._allItemSizeNoEdge)+1;var c=t._sizeType?t._lineGap:t._columnGap;t._cyclicPos2=t._cyclicPos1+t._allItemSizeNoEdge+c,t._cyclicAllItemSize=t._allItemSize+t._allItemSizeNoEdge*(t._cyclicNum-1)+c*(t._cyclicNum-1),t._cycilcAllItemSizeNoEdge=t._allItemSizeNoEdge*t._cyclicNum,t._cycilcAllItemSizeNoEdge+=c*(t._cyclicNum-1)}t._lack=!t.cyclic&&t._allItemSize<(t._sizeType?t.node.height:t.node.width);var s=t._lack&&t.lackCenter||!t.lackSlide?.1:0,l=t._lack?(t._sizeType?t.node.height:t.node.width)-s:t.cyclic?t._cyclicAllItemSize:t._allItemSize;l<0&&(l=0),t._sizeType?t.content.height=l:t.content.width=l},t.prototype._onScrolling=function(e){if(void 0===e&&(e=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&e&&"scroll-ended"!=e.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var t=this.content.getPosition();t=this._sizeType?t.y:t.x;var n=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),o=this._sizeType?cc.v2(0,n):cc.v2(n,0);switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):t<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)));break;case 2:t<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):t>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 3:t<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):t>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 4:t>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):t<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)))}}var a,i,r,c;if(this._calcViewPos(),this._sizeType?(a=this.viewTop,r=this.viewBottom):(i=this.viewRight,c=this.viewLeft),this._virtual){this.displayData=[];var s=void 0,l=0,u=this._numItems-1;if(this._customSize)for(var d=!1;l<=u&&!d;l++)switch(s=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:s.right>=c&&s.left<=i?this.displayData.push(s):0!=l&&this.displayData.length>0&&(d=!0);break;case cc.Layout.Type.VERTICAL:s.bottom<=a&&s.top>=r?this.displayData.push(s):0!=l&&this.displayData.length>0&&(d=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:s.bottom<=a&&s.top>=r?this.displayData.push(s):0!=l&&this.displayData.length>0&&(d=!0);break;case cc.Layout.AxisDirection.VERTICAL:s.right>=c&&s.left<=i?this.displayData.push(s):0!=l&&this.displayData.length>0&&(d=!0)}}else{var h=this._itemSize.width+this._columnGap,p=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(c-this._leftGap)/h,u=(i-this._leftGap)/h;break;case 2:l=(-i-this._rightGap)/h,u=(-c-this._rightGap)/h;break;case 3:l=(-a-this._topGap)/p,u=(-r-this._topGap)/p;break;case 4:l=(r-this._bottomGap)/p,u=(a-this._bottomGap)/p}for(l=Math.floor(l)*this._colLineNum,u=Math.ceil(u)*this._colLineNum,l<0&&(l=0),--u>=this._numItems&&(u=this._numItems-1);l<=u;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var f=this._lastDisplayData.length,_=this.displayItemNum!=f;if(_&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(e,t){return e-t}),_=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[f-1]),this._forceUpdate||_)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var y=0;y<this.displayItemNum;y++)this._createOrUpdateItem(this.displayData[y]);this._forceUpdate=!1}this._calcNearestItem()}}},t.prototype._calcViewPos=function(){var e=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=e.x>0?e.x:0,this.viewLeft=(e.x<0?-e.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=e.x<0?-e.x:0,this.viewRight=(e.x>0?-e.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=e.y<0?Math.abs(e.y):0,this.viewTop=(e.y>0?-e.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=e.y>0?Math.abs(e.y):0,this.viewBottom=(e.y<0?-e.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},t.prototype._calcItemPos=function(e){var t,n,o,a,i,r,c,s;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(e);i=this._leftGap+(this._itemSize.width+this._columnGap)*(e-l.count)+(l.val+this._columnGap*l.count),t=(u=this._customSize[e])>0?u:this._itemSize.width}else i=this._leftGap+(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width;return this.lackCenter&&(i-=this._leftGap,i+=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,left:i,right:r=i+t,x:i+this._itemTmp.anchorX*t,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(e),r=-this._rightGap-(this._itemSize.width+this._columnGap)*(e-l.count)-(l.val+this._columnGap*l.count),t=(u=this._customSize[e])>0?u:this._itemSize.width):(r=-this._rightGap-(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width),this.lackCenter&&(r+=this._rightGap,r-=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,right:r,left:i=r-t,x:i+this._itemTmp.anchorX*t,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(e),o=-this._topGap-(this._itemSize.height+this._lineGap)*(e-l.count)-(l.val+this._lineGap*l.count),n=(u=this._customSize[e])>0?u:this._itemSize.height):(o=-this._topGap-(this._itemSize.height+this._lineGap)*e,n=this._itemSize.height),this.lackCenter&&(o+=this._topGap,o-=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:o,bottom:a=o-n,x:this._itemTmp.x,y:a+this._itemTmp.anchorY*n};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var u;return this._customSize?(l=this._getFixedSize(e),a=this._bottomGap+(this._itemSize.height+this._lineGap)*(e-l.count)+(l.val+this._lineGap*l.count),n=(u=this._customSize[e])>0?u:this._itemSize.height):(a=this._bottomGap+(this._itemSize.height+this._lineGap)*e,n=this._itemSize.height),this.lackCenter&&(a-=this._bottomGap,a+=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:o=a+n,bottom:a,x:this._itemTmp.x,y:a+this._itemTmp.anchorY*n}}case cc.Layout.Type.GRID:var d=Math.floor(e/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:s=(a=(o=-this._topGap-(this._itemSize.height+this._lineGap)*d)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:o=(a=this._bottomGap+(this._itemSize.height+this._lineGap)*d)+this._itemSize.height,s=a+this._itemTmp.anchorY*this._itemSize.height}switch(c=this._leftGap+e%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:c+=this._itemTmp.anchorX*this._itemSize.width,c-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:c+=(1-this._itemTmp.anchorX)*this._itemSize.width,c-=(1-this.content.anchorX)*this.content.width,c*=-1}return{id:e,top:o,bottom:a,x:c,y:s};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:r=(i=this._leftGap+(this._itemSize.width+this._columnGap)*d)+this._itemSize.width,c=i+this._itemTmp.anchorX*this._itemSize.width,c-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:c=(i=(r=-this._rightGap-(this._itemSize.width+this._columnGap)*d)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,c+=(1-this.content.anchorX)*this.content.width}switch(s=-this._topGap-e%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:s-=(1-this._itemTmp.anchorY)*this._itemSize.height,s+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:s-=this._itemTmp.anchorY*this._itemSize.height,s+=this.content.anchorY*this.content.height,s*=-1}return{id:e,left:i,right:r,x:c,y:s}}}},t.prototype._calcExistItemPos=function(e){var t=this.getItemByListId(e);if(!t)return null;var n={id:e,x:t.x,y:t.y};return this._sizeType?(n.top=t.y+t.height*(1-t.anchorY),n.bottom=t.y-t.height*t.anchorY):(n.left=t.x-t.width*t.anchorX,n.right=t.x+t.width*(1-t.anchorX)),n},t.prototype.getItemPos=function(e){return this._virtual?this._calcItemPos(e):this.frameByFrameRenderNum?this._calcItemPos(e):this._calcExistItemPos(e)},t.prototype._getFixedSize=function(e){if(!this._customSize)return null;null==e&&(e=this._numItems);var t=0,n=0;for(var o in this._customSize)parseInt(o)<e&&(t+=this._customSize[o],n++);return{val:t,count:n}},t.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},t.prototype._onScrollEnded=function(){var e=this;if(e.curScrollIsTouch=!1,null!=e.scrollToListId){var t=e.getItemByListId(e.scrollToListId);e.scrollToListId=null,t&&cc.tween(t).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}e._onScrolling(),e._slideMode!=d.ADHERING||e.adhering?e._slideMode==d.PAGE&&(null!=e._beganPos&&e.curScrollIsTouch?this._pageAdhere():e.adhere()):e.adhere()},t.prototype._onTouchStart=function(e,t){if(!this._scrollView.hasNestedViewGroup(e,t)&&(this.curScrollIsTouch=!0,e.eventPhase!==cc.Event.AT_TARGET||e.target!==this.node)){for(var n=e.target;null==n._listId&&n.parent;)n=n.parent;this._scrollItem=null!=n._listId?n:e.target}},t.prototype._onTouchUp=function(){var e=this;e._scrollPos=null,e._slideMode==d.ADHERING?(this.adhering&&(this._adheringBarrier=!0),e.adhere()):e._slideMode==d.PAGE&&(null!=e._beganPos?this._pageAdhere():e.adhere()),this._scrollItem=null},t.prototype._onTouchCancelled=function(e,t){var n=this;n._scrollView.hasNestedViewGroup(e,t)||e.simulate||(n._scrollPos=null,n._slideMode==d.ADHERING?(n.adhering&&(n._adheringBarrier=!0),n.adhere()):n._slideMode==d.PAGE&&(null!=n._beganPos?n._pageAdhere():n.adhere()),this._scrollItem=null)},t.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},t.prototype._onItemAdaptive=function(e){if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});var t=this._sizeType?e.height:e.width;this._customSize[e._listId]!=t&&(this._customSize[e._listId]=t,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},t.prototype._pageAdhere=function(){var e=this;if(e.cyclic||!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){var t=e._sizeType?e.viewTop:e.viewLeft,n=(e._sizeType?e.node.height:e.node.width)*e.pageDistance;if(Math.abs(e._beganPos-t)>n)switch(e._alignCalcType){case 1:case 4:e._beganPos>t?e.prePage(.5):e.nextPage(.5);break;case 2:case 3:e._beganPos<t?e.prePage(.5):e.nextPage(.5)}else e.elasticTop<=0&&e.elasticRight<=0&&e.elasticBottom<=0&&e.elasticLeft<=0&&e.adhere();e._beganPos=null}},t.prototype.adhere=function(){var e=this;if(e.checkInited()&&!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){e.adhering=!0,e._calcNearestItem();var t=(e._sizeType?e._topGap:e._leftGap)/(e._sizeType?e.node.height:e.node.width);e.scrollTo(e.nearestListId,.7,t)}},t.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var e=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++){var n=this.displayData[t];n&&this._createOrUpdateItem(n)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==d.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(e=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++)this._createOrUpdateItem2(t);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==d.PAGE&&(this.curPageNum=this.nearestListId)},t.prototype._createOrUpdateItem=function(e){var t=this.getItemByListId(e.id);if(t)this._forceUpdate&&this.renderEvent&&(t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems));else{var n=this._pool.size()>0;if(t=n?this._pool.get():cc.instantiate(this._itemTmp),n&&cc.isValid(t)||(t=cc.instantiate(this._itemTmp),n=!1),t._listId!=e.id&&(t._listId=e.id,t.setContentSize(this._itemSize)),t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.content.addChild(t),n&&this._needUpdateWidget){var o=t.getComponent(cc.Widget);o&&o.updateAlignment()}t.setSiblingIndex(this.content.childrenCount-1);var a=t.getComponent(g.default);t.listItem=a,a&&(a.listId=e.id,a.list=this,a._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems)}this._resetItemSize(t),this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e.id)<0&&this._lastDisplayData.push(e.id)},t.prototype._createOrUpdateItem2=function(e){var t,n=this.content.children[e];n?this._forceUpdate&&this.renderEvent&&(n._listId=e,t&&(t.listId=e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,e%this._actualNumItems)):((n=cc.instantiate(this._itemTmp))._listId=e,this.content.addChild(n),t=n.getComponent(g.default),n.listItem=t,t&&(t.listId=e,t.list=this,t._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,e%this._actualNumItems)),this._updateListItem(t),this._lastDisplayData.indexOf(e)<0&&this._lastDisplayData.push(e)},t.prototype._updateListItem=function(e){if(e&&this.selectedMode>h.NONE){var t=e.node;switch(this.selectedMode){case h.SINGLE:e.selected=this.selectedId==t._listId;break;case h.MULT:e.selected=this.multSelected.indexOf(t._listId)>=0}}},t.prototype._resetItemSize=function(){},t.prototype._updateItemPos=function(e){var t=isNaN(e)?e:this.getItemByListId(e),n=this.getItemPos(t._listId);t.setPosition(n.x,n.y)},t.prototype.setMultSelected=function(e,t){var n=this;if(n.checkInited()){if(Array.isArray(e)||(e=[e]),null==t)n.multSelected=e;else{var o=void 0,a=void 0;if(t)for(var i=e.length-1;i>=0;i--)o=e[i],(a=n.multSelected.indexOf(o))<0&&n.multSelected.push(o);else for(i=e.length-1;i>=0;i--)o=e[i],(a=n.multSelected.indexOf(o))>=0&&n.multSelected.splice(a,1)}n._forceUpdate=!0,n._onScrolling()}},t.prototype.getMultSelected=function(){return this.multSelected},t.prototype.hasMultSelected=function(e){return this.multSelected&&this.multSelected.indexOf(e)>=0},t.prototype.updateItem=function(e){if(this.checkInited()){Array.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;t++){var o=e[t],a=this.getItemByListId(o);a&&cc.Component.EventHandler.emitEvents([this.renderEvent],a,o%this._actualNumItems)}}},t.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},t.prototype.getItemByListId=function(e){if(this.content)for(var t=this.content.childrenCount-1;t>=0;t--){var n=this.content.children[t];if(n._listId==e)return n}},t.prototype._getOutsideItem=function(){for(var e,t=[],n=this.content.childrenCount-1;n>=0;n--)e=this.content.children[n],this.displayData.find(function(t){return t.id==e._listId})||t.push(e);return t},t.prototype._delRedundantItem=function(){if(this._virtual)for(var e=this._getOutsideItem(),t=e.length-1;t>=0;t--){var n=e[t];if(!this._scrollItem||n._listId!=this._scrollItem._listId){n.isCached=!0,this._pool.put(n);for(var o=this._lastDisplayData.length-1;o>=0;o--)if(this._lastDisplayData[o]==n._listId){this._lastDisplayData.splice(o,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},t.prototype._delSingleItem=function(e){e.removeFromParent(),e.destroy&&e.destroy(),e=null},t.prototype.aniDelItem=function(e,t,n){var o=this;if(!o.checkInited()||o.cyclic||!o._virtual)return cc.error("This function is not allowed to be called!");if(!t)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(o._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var a,i=o.getItemByListId(e);if(i){a=i.getComponent(g.default),o._aniDelRuning=!0,o._aniDelCB=t,o._aniDelItem=i,o._aniDelBeforePos=i.position,o._aniDelBeforeScale=i.scale;var r=o.displayData[o.displayData.length-1].id,c=a.selected;a.showAni(n,function(){var n,a,s;if(r<o._numItems-2&&(n=r+1),null!=n){var l=o._calcItemPos(n);o.displayData.push(l),o._virtual?o._createOrUpdateItem(l):o._createOrUpdateItem2(n)}else o._numItems--;if(o.selectedMode==h.SINGLE)c?o._selectedId=-1:o._selectedId-1>=0&&o._selectedId--;else if(o.selectedMode==h.MULT&&o.multSelected.length){var u=o.multSelected.indexOf(e);u>=0&&o.multSelected.splice(u,1);for(var d=o.multSelected.length-1;d>=0;d--)(_=o.multSelected[d])>=e&&o.multSelected[d]--}if(o._customSize){o._customSize[e]&&delete o._customSize[e];var p={},f=void 0;for(var _ in o._customSize){f=o._customSize[_];var y=parseInt(_);p[y-(y>=e?1:0)]=f}o._customSize=p}for(d=null!=n?n:r;d>=e+1;d--)if(i=o.getItemByListId(d)){var b=o._calcItemPos(d-1);a=cc.tween(i).to(.2333,{position:cc.v2(b.x,b.y)}),d<=e+1&&(s=!0,a.call(function(){o._aniDelRuning=!1,t(e),delete o._aniDelCB})),a.start()}s||(o._aniDelRuning=!1,t(e),o._aniDelCB=null)},!0)}else t(e)},t.prototype.scrollTo=function(e,t,n,o){void 0===t&&(t=.5),void 0===n&&(n=null),void 0===o&&(o=!1);var a=this;if(a.checkInited(!1)){null==t?t=.5:t<0&&(t=0),e<0?e=0:e>=a._numItems&&(e=a._numItems-1),!a._virtual&&a._layout&&a._layout.enabled&&a._layout.updateLayout();var i,r,c=a.getItemPos(e);if(!c)return!1;switch(a._alignCalcType){case 1:i=c.left,i-=null!=n?a.node.width*n:a._leftGap,c=cc.v2(i,0);break;case 2:i=c.right-a.node.width,i+=null!=n?a.node.width*n:a._rightGap,c=cc.v2(i+a.content.width,0);break;case 3:r=c.top,r+=null!=n?a.node.height*n:a._topGap,c=cc.v2(0,-r);break;case 4:r=c.bottom+a.node.height,r-=null!=n?a.node.height*n:a._bottomGap,c=cc.v2(0,-r+a.content.height)}var s=a.content.getPosition();s=Math.abs(a._sizeType?s.y:s.x);var l=a._sizeType?c.y:c.x;Math.abs((null!=a._scrollPos?a._scrollPos:s)-l)>.5&&(a._scrollView.scrollToOffset(c,t),a._scrollToListId=e,a._scrollToEndTime=(new Date).getTime()/1e3+t,a._scrollToSo=a.scheduleOnce(function(){if(a._adheringBarrier||(a.adhering=a._adheringBarrier=!1),a._scrollPos=a._scrollToListId=a._scrollToEndTime=a._scrollToSo=null,o){var t=a.getItemByListId(e);t&&cc.tween(t).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},t+.1),t<=0&&a._onScrolling())}},t.prototype._calcNearestItem=function(){var e,t,n,o,a,i,r=this;r.nearestListId=null,r._virtual&&r._calcViewPos(),n=r.viewTop,o=r.viewRight,a=r.viewBottom,i=r.viewLeft;for(var c=!1,s=0;s<r.content.childrenCount&&!c;s+=r._colLineNum)if(e=r._virtual?r.displayData[s]:r._calcExistItemPos(s))switch(t=r._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,r._alignCalcType){case 1:e.right>=i&&(r.nearestListId=e.id,i>t&&(r.nearestListId+=r._colLineNum),c=!0);break;case 2:e.left<=o&&(r.nearestListId=e.id,o<t&&(r.nearestListId+=r._colLineNum),c=!0);break;case 3:e.bottom<=n&&(r.nearestListId=e.id,n<t&&(r.nearestListId+=r._colLineNum),c=!0);break;case 4:e.top>=a&&(r.nearestListId=e.id,a>t&&(r.nearestListId+=r._colLineNum),c=!0)}if((e=r._virtual?r.displayData[r.displayItemNum-1]:r._calcExistItemPos(r._numItems-1))&&e.id==r._numItems-1)switch(t=r._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,r._alignCalcType){case 1:o>t&&(r.nearestListId=e.id);break;case 2:i<t&&(r.nearestListId=e.id);break;case 3:a<t&&(r.nearestListId=e.id);break;case 4:n>t&&(r.nearestListId=e.id)}},t.prototype.prePage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,e)},t.prototype.nextPage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,e)},t.prototype.skipPage=function(e,t){var n=this;if(n.checkInited())return n._slideMode!=d.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(e<0||e>=n._numItems||n.curPageNum!=e&&(n.curPageNum=e,n.pageChangeEvent&&cc.Component.EventHandler.emitEvents([n.pageChangeEvent],e),n.scrollTo(e,t)))},t.prototype.calcCustomSize=function(e){var t=this;if(t.checkInited()){if(!t._itemTmp)return cc.error("Unset template item!");if(!t.renderEvent)return cc.error("Unset Render-Event!");t._customSize={};var n=cc.instantiate(t._itemTmp);t.content.addChild(n);for(var o=0;o<e;o++)cc.Component.EventHandler.emitEvents([t.renderEvent],n,o),n.height==t._itemSize.height&&n.width==t._itemSize.width||(t._customSize[o]=t._sizeType?n.height:n.width);return Object.keys(t._customSize).length||(t._customSize=null),n.removeFromParent(),n.destroy&&n.destroy(),t._customSize}},l([_({type:cc.Enum(u),tooltip:!1})],t.prototype,"templateType",void 0),l([_({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==u.NODE}})],t.prototype,"tmpNode",void 0),l([_({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==u.PREFAB}})],t.prototype,"tmpPrefab",void 0),l([_()],t.prototype,"_slideMode",void 0),l([_({type:cc.Enum(d),tooltip:!1})],t.prototype,"slideMode",null),l([_({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==d.PAGE}})],t.prototype,"pageDistance",void 0),l([_({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==d.PAGE}})],t.prototype,"pageChangeEvent",void 0),l([_()],t.prototype,"_virtual",void 0),l([_({type:cc.Boolean,tooltip:!1})],t.prototype,"virtual",null),l([_({tooltip:!1,visible:function(){var e=this.slideMode==d.NORMAL;return e||(this.cyclic=!1),e}})],t.prototype,"cyclic",void 0),l([_({tooltip:!1,visible:function(){return this.virtual}})],t.prototype,"lackCenter",void 0),l([_({tooltip:!1,visible:function(){var e=this.virtual&&!this.lackCenter;return e||(this.lackSlide=!1),e}})],t.prototype,"lackSlide",void 0),l([_({type:cc.Integer})],t.prototype,"_updateRate",void 0),l([_({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],t.prototype,"updateRate",null),l([_({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],t.prototype,"frameByFrameRenderNum",void 0),l([_({type:cc.Component.EventHandler,tooltip:!1})],t.prototype,"renderEvent",void 0),l([_({type:cc.Enum(h),tooltip:!1})],t.prototype,"selectedMode",void 0),l([_({tooltip:!1,visible:function(){return this.selectedMode==h.SINGLE}})],t.prototype,"repeatEventSingle",void 0),l([_({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>h.NONE}})],t.prototype,"selectedEvent",void 0),l([_({serializable:!1})],t.prototype,"_numItems",void 0),l([f,y(),b("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),m(cc.ScrollView),v(-5e3)],t)}(cc.Component);i.default=I,cc._RF.pop(),cc._RF.pop()},{}],LoginInterface:[function(e,t,n){"use strict";cc._RF.push(t,"761c7vZilpMM5R+IAlpO7Hl","LoginInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"45e38REI8FLS4zdad0AAWLD","LoginInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("BundleManger"),p=o("DataManager"),f=o("GameManger"),_=o("InfoManager"),y=o("SdkManager"),b=o("StoragerManager"),v=o("TypeManager"),m=o("DayChallangeManager"),g=o("RoleSoundManager"),I=cc._decorator,T=I.ccclass,k=I.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mask1=null,t.group_bottom=null,t.label_uid=null,t.btn_repair=null,t.laod_sdk=!1,t.load_config=!1,t}return s(t,e),t.prototype.onLoad=function(){return u(this,void 0,void 0,function(){var e,t,n;return d(this,function(o){switch(o.label){case 0:return console.log("\u8fdb\u5165\u767b\u5f55\u754c\u9762",b.default.Instance.local),this.group_bottom.y-=(_.default.Instance.ScreenSize.height-1334*_.default.Instance.GameSize)/2,this.btn_repair.on(cc.Node.EventType.TOUCH_END,this.click_repair,this),this.load_num=0,cc.director.preloadScene("Game",function(){cc.log("Game\u5834\u666f\u9884\u52a0\u8f7d\u5b8c\u6210")}),this.reading_data(),1!=_.default.Instance.Web?[3,2]:(e=f.default.Instance,[4,y.default.Instance.Date()]);case 1:return e.LoginTime=o.sent(),1==b.default.Instance.local&&(this.laod_sdk=!0,this.init_storager()),this.scheduleOnce(this.jude_login,.1),[3,5];case 2:return t=h.default.Instance,[4,h.default.Instance.LoadBundleDeps()];case 3:return t.BundleDeps=o.sent(),console.log("\u8bfb\u53d6bundle\u4f9d\u8d56\u914d\u7f6e=",h.default.Instance.BundleDeps),n=_.default.Instance,[4,h.default.Instance.LoadVersion()];case 4:n.Version=o.sent(),this.init(null),o.label=5;case 5:return[2]}})})},t.prototype.update=function(){this.mask1.width+=2,this.mask1.width>=588&&(this.mask1.width=0)},t.prototype.init=function(e){return u(this,void 0,void 0,function(){var t=this;return d(this,function(){return LWGSDK.addUserInfoButton(!1),LWGSDK.init({chn:_.default.Instance.Chn,version:_.default.Instance.Version,debug:_.default.Instance.Debug,host:"http://localhost:7456",debugHost:"http://localhost:7456",resourceHost:"https://static.longfu360.com",onShowPage:function(e){switch(console.log("\u89e6\u53d1\u9080\u8bf7\u70b9\u5165\u56de\u8c03",e),e.scene){case 1103:case 1104:null==b.default.Instance.Record[v.RecordType.collect_gift]&&(b.default.Instance.Record[v.RecordType.collect_gift]=!1,b.default.Instance.AutoSyncData()),b.default.Instance.Record[v.RecordType.collect_gift]||(b.default.Instance.addMiniGame=!1);break;case 1023:case 1123:case 1223:null==b.default.Instance.Record[v.RecordType.add_desktop]&&(b.default.Instance.Record[v.RecordType.add_desktop]=!1,b.default.Instance.AutoSyncData()),b.default.Instance.Record[v.RecordType.add_desktop]||(b.default.Instance.addDesltop=!1)}},onAuthorizeInfo:function(e){console.log("\u6388\u6743\u83b7\u53d6\u4fe1\u606f===================",e),1==e.userinfo_status?LWGSDK.getWxUserInfo({success:function(e){console.log("\u83b7\u53d6\u6388\u6743\u7528\u6237\uff1a",e),_.default.Instance.UserName=e.nickName,_.default.Instance.UserHead=e.avatarUrl,cc.systemEvent.emit(v.DistributedEvent.userInfoUpdate)},fail:function(e){console.log("\u83b7\u53d6\u6388\u6743\u7528\u6237\u4fe1\u606f\u5f02\u5e38\uff1a",e)}}):(_.default.Instance.UserName=e.nickName,_.default.Instance.UserHead=e.avatarUrl,cc.systemEvent.emit(v.DistributedEvent.userInfoUpdate))},onLoadProgress:function(){},success:function(n){return u(t,void 0,void 0,function(){var t;return d(this,function(o){switch(o.label){case 0:return t=f.default.Instance,[4,y.default.Instance.Date()];case 1:return t.LoginTime=o.sent(),this.res=n,this.laod_sdk=!0,LWGSDK.recordLoadingTimeStart(),y.default.Instance.reportUserGuide(1),console.log("sdk\u767b\u5f55\u5b8c\u6210\uff0c\u9879\u76ee\u7248\u672c\uff1a","v"+_.default.Instance.Version+"-g"+LWGSDK.GSDK_VER),console.log(LWGSDK.GSDK_VER,"\u6e38\u620f\u6570\u636e=================",n),_.default.Instance.UserUid=n.userConf.hashed_uid,this.label_uid.string="UID:"+_.default.Instance.UserUid,_.default.Instance.ServerInit(n.userConf.conf),y.default.Instance.getMultiTestABInfo(),this.init_storager(),n.userConf.labels&&-1!==n.userConf.labels.indexOf("KOL")&&(_.default.Instance.isDaren=!0),e?[4,e]:[3,3];case 2:o.sent(),o.label=3;case 3:return this.jude_login(),[2]}})})},fail:function(e){console.error("\u521d\u59cb\u5316\u5931\u8d25\u56de\u8c03",JSON.stringify(e))}}),[2]})})},t.prototype.jude_login=function(){return this.skip()},t.prototype.init_storager=function(){return u(this,void 0,void 0,function(){return d(this,function(){return console.log("\u5b58\u6863\u521d\u59cb\u5316===================",this.laod_sdk,this.load_config),1!=this.laod_sdk||1!=this.load_config?[2]:(b.default.Instance.Init(this.res,f.default.Instance.LoginTime),[2])})})},t.prototype.skip=function(){return u(this,void 0,void 0,function(){return d(this,function(){return LWGSDK.recordTimeCostStart("load_sence"),cc.director.loadScene("Game",function(){y.default.Instance.reportUserGuide(1e3)}),[2]})})},t.prototype.reading_data=function(){return u(this,void 0,void 0,function(){var e,t,n,o,a,i,r,c,s,l,u,f,_,b,v,I,T,k,S,w,O,F,B,x,P,C,R,N,A,D,U,M;return d(this,function(d){switch(d.label){case 0:return p.default.Instance.BarbecueLogicConfig={},p.default.Instance.BarbecueLvConfig={},[4,h.default.Instance.LoadJson("barbecue_data_logic")];case 1:for(e=d.sent(),D=0;D<e.level.length;D++)I=e.level[D],t={Oven_state:I.Oven_state,Plate:I.Plate,Food_species:I.Food_species,Elimination:I.Elimination,Initial_species:I.Initial_species,Initial_num:I.Initial_num,PlateType_num:I.PlateType_num,PlateType_weight:I.PlateType_weight,Same_food:I.Same_food,Ice:I.Ice,Tinfoil:I.Tinfoil,Introduce:I.Introduce,Cover_select:I.Cover_select,Inn_Lv:I.Inn_Lv,OrderOne:I.OrderOne,OrderTwo:I.OrderTwo,OrderThree:I.OrderThree,OrderFour:I.OrderFour,OrderFive:I.OrderFive},n={count_down:I.Time,star_rating:I.Star_rating,oven_data:null,kebab_data:null,plate_data:null,special_order:null,order_select:I.Order_select},p.default.Instance.BarbecueLogicConfig["lv_"+(D+1)]=t,p.default.Instance.BarbecueLvConfig["lv_"+(D+1)]=n;return[4,h.default.Instance.LoadJson("kebabs_config")];case 2:if(o=d.sent(),p.default.Instance.KebabsConfig=o.data,o.data)for(D=0;D<o.data.length;D++)(a=o.data[D])&&(i=a.Source,p.default.Instance.KebabsConfig_Source[i]||(p.default.Instance.KebabsConfig_Source[i]=[]),p.default.Instance.KebabsConfig_Source[i].push(a),p.default.Instance.KebabsConfigObject[a.id]=a);return p.default.Instance.bgConfig=o.bg,p.default.Instance.tableConfig=o.table,r=p.default.Instance,[4,h.default.Instance.LoadJson("staff_path")];case 3:return r.StaffPath=d.sent(),c=p.default.Instance,[4,h.default.Instance.LoadJson("guest_story")];case 4:return c.GuestStorySpeak=d.sent(),[4,h.default.Instance.LoadJson("guest_data")];case 5:return s=d.sent(),p.default.Instance.GuestTeam=s.guest_team.data,[4,h.default.Instance.LoadJson("map_data")];case 6:return l=d.sent(),p.default.Instance.FirstFloorJson=l.map_1,p.default.Instance.SecondFloorJson=l.map_2,p.default.Instance.ExhibitionJson=l.map_3,[4,h.default.Instance.LoadJson("staff_data")];case 7:for(u=d.sent(),D=0;D<u.staff_data.length;D++)f="staff_"+u.staff_data[D].id,p.default.Instance.StaffData[f]=u.staff_data[D],p.default.Instance.StaffData[f].key=f;return p.default.Instance.MapInit(),[4,h.default.Instance.LoadJson("area_data")];case 8:for(_=d.sent(),p.default.Instance.ScenceData={},D=0;D<_.data.length;D++)b=_.data[D],p.default.Instance.ScenceData[b.area]=b;return[4,h.default.Instance.LoadJson("facility_data")];case 9:for(v=d.sent(),p.default.Instance.Facility1Information={},D=0;D<v.name.length;D++)T=v.name[D],I={name:T.name,location:T.location,unlock_price:T.unlock_price,data:[]},p.default.Instance.Facility1Information[T.facility_type]=I;for(D=0;D<v.data.length;D++)T=v.data[D],k={name:T.name,unlock_path:T.unlock_path,coord:cc.v2(T.coord[0],T.coord[1])},null==p.default.Instance.Facility1Information[T.facility_type]&&console.log("\u8bbe\u65bd\u7c7b\u578b\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f",T.facility_type),p.default.Instance.Facility1Information[T.facility_type].data.push(k);return p.default.Instance.GuestPath={},[4,h.default.Instance.LoadJson("guest_path")];case 10:for(N in S=d.sent()){for(A=[],w=void 0,D=0;D<S[N].path.length;D++)U=S[N].path[D],A.push(cc.v2(U.x,U.y));if(S[N].path2)for(w=[],D=0;D<S[N].path2.length;D++)U=S[N].path2[D],w.push(cc.v2(U.x,U.y));p.default.Instance.GuestPath[N]={tips:S[N].tips,path:A,path2:w}}return p.default.Instance.Guest12Path={},[4,h.default.Instance.LoadJson("guest12_path")];case 11:for(N in O=d.sent()){for(A=[],D=0;D<O[N].path.length;D++)U=O[N].path[D],A.push(cc.v2(U.x,U.y));p.default.Instance.Guest12Path[N]={tips:O[N].tips,path:A}}return p.default.Instance.Guest21Path={},[4,h.default.Instance.LoadJson("guest21_path")];case 12:for(N in F=d.sent()){for(A=[],D=0;D<F[N].path.length;D++)U=F[N].path[D],A.push(cc.v2(U.x,U.y));p.default.Instance.Guest21Path[N]={tips:F[N].tips,path:A}}return p.default.Instance.Guest22Path={},[4,h.default.Instance.LoadJson("guest22_path")];case 13:for(N in B=d.sent()){for(A=[],D=0;D<B[N].path.length;D++)U=B[N].path[D],A.push(cc.v2(U.x,U.y));p.default.Instance.Guest22Path[N]={tips:B[N].tips,path:A}}return p.default.Instance.Guest31Path={},[4,h.default.Instance.LoadJson("guest31_path")];case 14:for(N in x=d.sent()){for(A=[],D=0;D<x[N].path.length;D++)U=x[N].path[D],A.push(cc.v2(U.x,U.y));p.default.Instance.Guest31Path[N]={tips:x[N].tips,path:A}}return p.default.Instance.Guest32Path={},[4,h.default.Instance.LoadJson("guest32_path")];case 15:for(N in P=d.sent()){for(A=[],D=0;D<P[N].path.length;D++)U=P[N].path[D],A.push(cc.v2(U.x,U.y));p.default.Instance.Guest32Path[N]={tips:P[N].tips,path:A}}return p.default.Instance.Guest33Path={},[4,h.default.Instance.LoadJson("guest33_path")];case 16:for(N in C=d.sent()){for(A=[],D=0;D<C[N].path.length;D++)U=C[N].path[D],A.push(cc.v2(U.x,U.y));p.default.Instance.Guest33Path[N]={tips:C[N].tips,path:A}}return p.default.Instance.Guest34Path={},[4,h.default.Instance.LoadJson("guest34_path")];case 17:for(N in R=d.sent()){for(A=[],D=0;D<R[N].path.length;D++)U=R[N].path[D],A.push(cc.v2(U.x,U.y));p.default.Instance.Guest34Path[N]={tips:R[N].tips,path:A}}return[4,h.default.Instance.LoadJson("shop_data")];case 18:return M=d.sent(),p.default.Instance.ShopUpgradeData=M.data,[4,g.default.Instance.init()];case 19:return d.sent(),[4,m.default.Instance.init()];case 20:return d.sent(),y.default.Instance.GetReady("first_start"),[4,h.default.Instance.LoadPrefab("BarbecueStandPre/BarbecueStandPre","Bundle1Pre")];case 21:return d.sent(),y.default.Instance.GetReady("first_end"),this.load_config=!0,console.log("\u914d\u7f6e\u8868\u52a0\u8f7d\u5b8c\u6210",this.laod_sdk,this.load_config),this.init_storager(),this.jude_login(),[2]}})})},t.prototype.click_repair=function(){this.restart_game(),console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a")},t.prototype.restart_game=function(){cc.assetManager.cacheManager.clearCache(),wx.restartMiniProgram()},l([k(cc.Node)],t.prototype,"mask1",void 0),l([k(cc.Node)],t.prototype,"group_bottom",void 0),l([k(cc.Label)],t.prototype,"label_uid",void 0),l([k(cc.Node)],t.prototype,"btn_repair",void 0),l([T],t)}(cc.Component);i.default=S,cc._RF.pop(),cc._RF.pop()},{}],MainInterface:[function(e,t,n){"use strict";cc._RF.push(t,"0c61f1J2UtAHaR+CEnS10TL","MainInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"d20ffTx4uFLQbH6uTDfkNyJ","MainInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("AddPowerInterface"),f=o("FacilityInterface"),_=o("Illustration1Interface"),y=o("MoreGameInterface"),b=o("NoticeInterface"),v=o("ShopAwardInterface"),m=o("ShopLvInterface"),g=o("TaskInterface"),I=o("WinActivityInterface"),T=o("WinActivityOpenInterface"),k=o("AddDesktopInterface"),S=o("CollectGiftsInterface"),w=o("GameCircleInterface"),O=o("LevelPackInterface"),F=o("NewcomerPackPreInterface"),B=o("JengaInterface"),x=o("BarbecueChallangeDetailInterface"),P=o("BundleManger"),C=o("DataManager"),R=o("DayChallangeManager"),N=o("FunctionManager"),A=o("GameManger"),D=o("InfoManager"),U=o("JengaManager"),M=o("SdkManager"),L=o("SoundManager"),E=o("StoragerManager"),G=o("TypeManager"),j=o("UIManager"),z=o("WinActivityManager"),K=o("SkinInterface"),H=o("BarbecueLvInterface"),W=o("BarbecueStandInterface"),V=o("GameGuideInterface"),J=o("SettingInterface"),q=cc._decorator,X=q.ccclass,Y=q.property,Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.group_up=null,t.group_down=null,t.btn_start_game=null,t.label_lv=null,t.btn_level=null,t.btn_facility=null,t.btn_illustrated=null,t.btn_task=null,t.icon_badge=null,t.label_shop_lv=null,t.btn_setting=null,t.btn_newcomer_kuang=null,t.btn_newcomer1=null,t.btn_newcomer2=null,t.label_time=null,t.icon_finger=null,t.btn_gift=null,t.btn_desktop=null,t.btn_circle=null,t.icon_award=null,t.btn_collcet=null,t.eff_collcet=null,t.icon_finish=null,t.bar_2=null,t.icon_lv=null,t.icon_area=null,t.label_bar=null,t.btn_winActivity=null,t.timeLabel=null,t.fishAnim=null,t.newLabel=null,t.oldLabel=null,t.btn_jenga=null,t.jengaUnLockLabel=null,t.dayChallangeBtn=null,t.challange_free_label=null,t.challange_unlock_label=null,t.btn_moregame=null,t.leftBtnLayout=null,t.rightBtnLayout=null,t.skinBtn=null,t.noticeBtn=null,t.pageBtn=null,t.pageList=null,t.time_finger=5,t}return s(t,e),t.prototype.onUIEnable=function(){this.btn_winActivity.on(cc.Node.EventType.TOUCH_END,this._winActivityBtnClick,this),this.btn_jenga.on(cc.Node.EventType.TOUCH_END,this._jengaBtnClick,this),this.dayChallangeBtn.on(cc.Node.EventType.TOUCH_END,this._dayChallangeBtnClick,this),this.btn_moregame.on(cc.Node.EventType.TOUCH_END,this._moreGameBtnClick,this),this.skinBtn.on(cc.Node.EventType.TOUCH_END,this._skinBtnClick,this),this.pageBtn.on(cc.Node.EventType.TOUCH_END,this._pageBtnClick,this),this.noticeBtn.on(cc.Node.EventType.TOUCH_END,this._noticeBtnClick,this),cc.systemEvent.on(G.DistributedEvent.winActivityInitComplete,this._initCompleteEvent,this),cc.systemEvent.on(G.DistributedEvent.backHome,this._backHomeEvent,this),cc.systemEvent.on(G.DistributedEvent.winActivityUpdate,this._winActivityUpdateEvent,this),cc.systemEvent.on(G.DistributedEvent.challangeUpdateBtnState,this._btnUpdateEvent,this),cc.systemEvent.on(G.DistributedEvent.updateSkinRed,this._updateSkinRedEvent,this),cc.systemEvent.on(G.DistributedEvent.updateNoticeRed,this._updateNoticeRedEvent,this)},t.prototype.onUIDisable=function(){this.btn_winActivity.off(cc.Node.EventType.TOUCH_END,this._winActivityBtnClick,this),this.btn_jenga.off(cc.Node.EventType.TOUCH_END,this._jengaBtnClick,this),this.dayChallangeBtn.off(cc.Node.EventType.TOUCH_END,this._dayChallangeBtnClick,this),this.btn_moregame.off(cc.Node.EventType.TOUCH_END,this._moreGameBtnClick,this),this.skinBtn.off(cc.Node.EventType.TOUCH_END,this._skinBtnClick,this),this.pageBtn.off(cc.Node.EventType.TOUCH_END,this._pageBtnClick,this),this.noticeBtn.off(cc.Node.EventType.TOUCH_END,this._noticeBtnClick,this),cc.systemEvent.off(G.DistributedEvent.winActivityInitComplete,this._initCompleteEvent,this),cc.systemEvent.off(G.DistributedEvent.backHome,this._backHomeEvent,this),cc.systemEvent.off(G.DistributedEvent.winActivityUpdate,this._winActivityUpdateEvent,this),cc.systemEvent.off(G.DistributedEvent.challangeUpdateBtnState,this._btnUpdateEvent,this),cc.systemEvent.off(G.DistributedEvent.updateSkinRed,this._updateSkinRedEvent,this),cc.systemEvent.off(G.DistributedEvent.updateNoticeRed,this._updateNoticeRedEvent,this)},t.prototype.onUIStart=function(){var e=this;this.group_up.y+=A.default.Instance.ScreenAdaptive,this.group_down.y-=A.default.Instance.ScreenAdaptive2,cc.systemEvent.on(G.DistributedEvent.shop_lv,this.shop_lv,this),cc.systemEvent.on(G.DistributedEvent.lv,this.monitor_lv,this),this.btn_start_game.on(cc.Node.EventType.TOUCH_END,this.click_game,this),this.btn_level.on(cc.Node.EventType.TOUCH_END,this.click_level,this),this.btn_facility.on(cc.Node.EventType.TOUCH_END,this.click_facility,this),this.btn_illustrated.on(cc.Node.EventType.TOUCH_END,this.click_illustrated,this),this.btn_task.on(cc.Node.EventType.TOUCH_END,this.click_task,this),this.icon_badge.on(cc.Node.EventType.TOUCH_END,this.click_badge,this),this.btn_setting.on(cc.Node.EventType.TOUCH_END,this.click_setting,this),this.btn_collcet.node.on(cc.Node.EventType.TOUCH_END,this.collect,this),this.btn_newcomer1.on(cc.Node.EventType.TOUCH_END,this.click_newcomer1,this),this.btn_newcomer2.on(cc.Node.EventType.TOUCH_END,this.click_newcomer2,this),this.btn_gift.on(cc.Node.EventType.TOUCH_END,this.click_gift,this),this.btn_desktop.on(cc.Node.EventType.TOUCH_END,this.click_desktop,this),this.btn_circle.on(cc.Node.EventType.TOUCH_END,this.click_circle,this),cc.systemEvent.on(G.DistributedEvent.facility_red,this.facility_red,this),cc.systemEvent.on(G.DistributedEvent.shop_red,this.shop_red,this),cc.systemEvent.on(G.DistributedEvent.change_scence,this.facility_collect,this),cc.systemEvent.on(G.DistributedEvent.facility_shake,this.facility_shake,this),cc.systemEvent.on(G.DistributedEvent.task,this.task_red,this),cc.systemEvent.on(G.DistributedEvent.illustration,this.illustration_red,this),this.schedule(this.time,1),D.default.Instance.TsInitial.node.on(cc.Node.EventType.TOUCH_END,function(){e.icon_finger.active=!1,e.time_finger=5,e.icon_award.active=!1},this,!0);var t=LWGSDK.isAdWhiteList();console.log("\u7528\u6237\u767d\u540d\u5355===",t),this.btn_level.active=1==t,this.btn_winActivity.active=!1,this.fishAnim.node.active=!1,A.default.Instance.isWinActivity&&z.default.Instance.checkIsUnlock()&&(this.btn_winActivity.active=!0,z.default.Instance.isNeedOpenAcitivity&&(z.default.Instance.isNeedOpenAcitivity=!1,j.default.Instance.OpenUI(T.default,j.UIOrder.Window_2)),this.timeLabel.string="\u5269\u4f59"+z.default.Instance.AcitivityDay+"\u5929"),this._updateJengaBtn(),this._updateDayChallangeBtn(),this.leftBtnLayout.updateLayout(),this.rightBtnLayout.updateLayout(),this._showSkinGuide(),this._updateNoticeRed()},t.prototype.onInit=function(e){return u(this,void 0,void 0,function(){var t;return d(this,function(){return this.monitor_lv(),1==e[0]&&null==E.default.Instance.Record[G.RecordType.gudie_game]&&((t=E.default.Instance.Facility[G.FacilityType.outdoor_wall])&&1==t.buy_record[0]?E.default.Instance.Record[G.RecordType.gudie_game]=!0:(A.default.Instance.GudieStep=200,j.default.Instance.OpenUI(V.default,j.UIOrder.Window_3))),1==N.default.Instance.JudgeFacilityBuy()&&(this.btn_facility.children[0].active=!0),this.icon_finger.active=!1,this.icon_award.active=!1,this.facility_collect(A.default.Instance.ScenceArea),this.task_red(),this.facility_red(),this.illustration_red(),this.judge_desktop(),this.judge_gift(),this.randm_prop(),this.shop_lv(),this.judge_newcomer(),this._updateSkinRed(),this.skinBtn.active=A.default.Instance.isDayChallange,[2]})})},t.prototype.update=function(e){if(this.time_finger>0&&null==A.default.Instance.GudieStep){if(A.default.Instance.isDayChallange&&!E.default.Instance.openSkin&&C.default.Instance.hasNewSkin())return void this._showSkinGuide();if(this.time_finger-=e,this.time_finger<=0){this.icon_finger.active=!0,this.icon_finger.setPosition(0,-530);var t=this.icon_finger.getChildByName("icon_bg2");t&&(t.active=!0)}}},t.prototype.time=function(){null!=this.count_down&&(this.count_down--,this.count_down<=0&&(this.count_down=3600),this.label_time.string=""+N.default.Instance.TimecFormat(this.count_down))},t.prototype.monitor_lv=function(){var e=E.default.Instance.BarbecueLv.length+1;A.default.Instance.isJump36AB&&(A.default.Instance.jumpABLevel(),e=A.default.Instance.getRealLevel(E.default.Instance.BarbecueLv.length+1)),this.label_lv.string="\u7b2c"+e+"\u5173",this._updateDayChallangeBtn()},t.prototype.shop_lv=function(){this.label_shop_lv.string=E.default.Instance.ShopLv+"\u7ea7";var e=Math.min(Math.floor(E.default.Instance.ShopLv/10)+1,5);P.default.Instance.LoadSpriteFrame("Bundle1UI","MainUI/badge_"+e,this.icon_badge),this.shop_red()},t.prototype._initCompleteEvent=function(){this.timeLabel.string="\u5269\u4f59"+z.default.Instance.AcitivityDay+"\u5929"},t.prototype._backHomeEvent=function(e){if(this.node||this.node.isValid)if(this._updateSkinRed(),this._showSkinGuide(),A.default.Instance.gameType!=G.GameType.challange){if(A.default.Instance.isWinActivity){var t=z.default.Instance.checkIsUnlock();if(this.btn_winActivity.active=t,t&&(0==z.default.Instance.ActivityTime&&z.default.Instance.showWeekRewards(),e==G.PanelEnum.set)){var n=E.default.Instance.comboLevel,o=E.default.Instance.comboLevel;if((o=n-2<=1?1:n-2)!=n){E.default.Instance.comboLevel=o,this.fishAnim.node.active=!0,this.fishAnim.play();var a=z.default.Instance.scores[o-1]?z.default.Instance.scores[o-1]:0,i=z.default.Instance.scores[n-1]?z.default.Instance.scores[n-1]:0;this.oldLabel.string=i+"",this.newLabel.string=a+"",E.default.Instance.sysWinActivityData()}}this.leftBtnLayout.updateLayout()}}else this._updateDayChallangeBtn()},t.prototype._winActivityUpdateEvent=function(){if(A.default.Instance.isWinActivity){var e=z.default.Instance.checkIsUnlock();this.btn_winActivity.active=e,e&&!A.default.Instance.inGame&&0==z.default.Instance.ActivityTime&&z.default.Instance.showWeekRewards(),this.leftBtnLayout.updateLayout()}},t.prototype._btnUpdateEvent=function(){this._updateDayChallangeBtn()},t.prototype._updateSkinRedEvent=function(){this._updateSkinRed()},t.prototype._updateNoticeRedEvent=function(){this._updateNoticeRed()},t.prototype.click_game=function(){this.OpenGame(E.default.Instance.BarbecueLv.length+1)},t.prototype.OpenGame=function(e){if(E.default.Instance.BarbecuePower<=0)return j.default.Instance.OpenUI(p.default,j.UIOrder.Window_2),D.default.Instance.TsInitial.ShowTips("\u4f53\u529b\u4e0d\u8db3");E.default.Instance.BarbecuePower--,j.default.Instance.OpenUI(W.default,j.UIOrder.Window_1,e)},t.prototype.click_level=function(){j.default.Instance.OpenUI(H.default,j.UIOrder.Window_2)},t.prototype.click_facility=function(){1==this.btn_facility.children[0].active&&this.facility_red(),j.default.Instance.OpenUI(f.default,j.UIOrder.Window_1)},t.prototype.click_illustrated=function(){j.default.Instance.OpenUI(_.default,j.UIOrder.Window_2)},t.prototype.click_task=function(){j.default.Instance.OpenUI(g.default,j.UIOrder.Window_2)},t.prototype.click_badge=function(){j.default.Instance.OpenUI(m.default,j.UIOrder.Window_1)},t.prototype.click_setting=function(){j.default.Instance.OpenUI(J.default,j.UIOrder.Window_2)},t.prototype.click_gift=function(){j.default.Instance.OpenUI(S.default,j.UIOrder.Window_2,this)},t.prototype.click_desktop=function(){j.default.Instance.OpenUI(k.default,j.UIOrder.Window_2,this)},t.prototype.click_circle=function(){j.default.Instance.OpenUI(w.default,j.UIOrder.Window_2)},t.prototype._winActivityBtnClick=function(){j.default.Instance.OpenUI(I.default,j.UIOrder.Window_2)},t.prototype._jengaBtnClick=function(){var e=this;E.default.Instance.jengaVideoNum>=U.default.Instance.unlockVideoNum?j.default.Instance.OpenUI(B.default,j.UIOrder.Window_2):M.default.Instance.ShareOrVideo(M.ShareLoc.barbecue_model,function(){E.default.Instance.jengaVideoNum++,e._updateJengaBtn(),E.default.Instance.AutoSyncData()})},t.prototype._dayChallangeBtnClick=function(){j.default.Instance.OpenUI(x.default,j.UIOrder.Window_2)},t.prototype._moreGameBtnClick=function(){j.default.Instance.OpenUI(y.default,j.UIOrder.Window_2)},t.prototype._skinBtnClick=function(){C.default.Instance.getUnlockKebabsNum()<=20?D.default.Instance.TsInitial.ShowTips("\u63d0\u5347\u5ba2\u6808\u7b49\u7ea7\u52303\u7ea7\u89e3\u9501"):j.default.Instance.OpenUI(K.default,j.UIOrder.Window_2,!E.default.Instance.openSkin)},t.prototype._pageBtnClick=function(){this.pageList.active=!this.pageList.active},t.prototype._noticeBtnClick=function(){j.default.Instance.OpenUI(b.default,j.UIOrder.Window_2)},t.prototype.click_newcomer1=function(){j.default.Instance.OpenUI(O.default,j.UIOrder.Window_2,3)},t.prototype.click_newcomer2=function(){j.default.Instance.OpenUI(F.default,j.UIOrder.Window_2)},t.prototype.judge_desktop=function(){1==E.default.Instance.Record[G.RecordType.add_desktop]?this.btn_desktop.active=!1:0==E.default.Instance.Record[G.RecordType.add_desktop]?this.btn_desktop.children[0].active=!0:this.btn_desktop.children[0].active=!1,this.rightBtnLayout.updateLayout()},t.prototype.judge_gift=function(){1==E.default.Instance.Record[G.RecordType.collect_gift]?this.btn_gift.active=!1:0==E.default.Instance.Record[G.RecordType.collect_gift]?this.btn_gift.children[0].active=!0:this.btn_gift.children[0].active=!1,this.rightBtnLayout.updateLayout()},t.prototype.judge_newcomer=function(){return u(this,void 0,void 0,function(){return d(this,function(){return this.btn_newcomer1.active=!1,this.btn_newcomer2.active=!1,this.count_down=null,console.log("\u5224\u65ad\u65b0\u624b\u793c\u5305"),0==E.default.Instance.Record[G.RecordType.newcomer_package1]&&(this.btn_newcomer1.active=!0),this.btn_newcomer_kuang.active=this.btn_newcomer1.active||this.btn_newcomer2.active,this.rightBtnLayout.updateLayout(),[2]})})},t.prototype.facility_red=function(){N.default.Instance.JudgeCanUnlockArea(),A.default.Instance.CanUnlockArea.length>0?this.btn_facility.children[0].active=!0:this.btn_facility.children[0].active=!1},t.prototype.task_red=function(){for(var e=!1,t=!1,n=0;n<E.default.Instance.Tasking.length;n++){var o=E.default.Instance.Tasking[n];switch(o.task_type){case G.TaskType.shop:if(E.default.Instance.ShopLv>=o.value1)t=!0;else{var a=C.default.Instance.ShopUpgradeData[o.value1];A.default.Instance.BarbecueStar>=a.upgrade_condition&&(e=!0)}break;case G.TaskType.lv:E.default.Instance.BarbecueLv.length>=o.value1&&(t=!0);break;case G.TaskType.area:var i=E.default.Instance.AreaUnlock[o.value1];if(i&&1==i.unlock)t=!0;else{var r=N.default.Instance.JudgeAreaUnlock(o.value1),c=C.default.Instance.ScenceData[o.value1];1==r&&A.default.Instance.BarbecueStar>=c.facility_unlock[0]&&(e=!0)}break;case G.TaskType.facility:var s=E.default.Instance.Facility[o.value1];if(s&&1==s.buy_record[o.value2])t=!0;else{r=N.default.Instance.JudegFacilityUnlock(o.value1,o.value2);var l=C.default.Instance.Facility1Information[o.value1];1==r&&E.default.Instance.GoldNum>=l.unlock_price*(.5*o.value2+1)&&(e=!0)}}}this.btn_task.children[0].active=e,this.btn_task.children[1].active=t},t.prototype.shop_red=function(){var e=C.default.Instance.ShopUpgradeData[E.default.Instance.ShopLv];e&&A.default.Instance.BarbecueStar>=e.upgrade_condition?this.icon_badge.children[1].active=!0:this.icon_badge.children[1].active=!1},t.prototype.illustration_red=function(){for(var e=N.default.Instance.UnlockKebabsNum(),t={},n=C.default.Instance.getKebabsConfigBySource(G.KebabsSource.common),o=0;o<n.length;o++){var a=n[o];null==t[a.type]&&(t[a.type]=[0,0]),t[a.type][1]++,o+1<=e&&t[a.type][0]++}var i=!1;for(var r in t){var c=t[r];if(c[0]>=c[1]&&1!=E.default.Instance.Illustration[r]){i=!0;break}}e>=n.length&&1!=E.default.Instance.Illustration.any&&(i=!0),this.btn_illustrated.children[0].active=i},t.prototype.randm_prop=function(){var e;e=E.default.Instance.BarbecueLv.length+1<5?[1]:E.default.Instance.BarbecueLv.length+1<8?[2]:E.default.Instance.BarbecueLv.length+1<33?[1,2]:[1,2,3],this.award_prop=e[Math.floor(Math.random()*e.length)],P.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_"+(10+this.award_prop),this.icon_award.children[0].children[0])},t.prototype.collect=function(){if(1==this.btn_collcet.node.children[0].active){var e=A.default.Instance.ScenceArea;switch(e){case G.ScenceArea.first_room1:case G.ScenceArea.first_room2:case G.ScenceArea.first_room3:e=G.ScenceArea.first_room1}E.default.Instance.FacilityCollect[e+"_"+this.collect_index]=!0,null==E.default.Instance.BarbecueProp["prop_"+this.award_prop]?E.default.Instance.BarbecueProp["prop_"+this.award_prop]=1:E.default.Instance.BarbecueProp["prop_"+this.award_prop]++,j.default.Instance.OpenUI(v.default,j.UIOrder.Window_2,[{type:"prop_"+this.award_prop,value:1}],"\u6536\u96c6\u5956\u52b1"),this.randm_prop(),this.facility_collect(e),E.default.Instance.AutoSyncData(!1,!0)}else this.icon_award.active=!this.icon_award.active},t.prototype.facility_shake=function(e){this.facility_collect(e),cc.tween(this.bar_2.parent).repeat(3,cc.tween().to(.05,{scale:1.2}).to(.05,{scale:1}).call(function(){L.default.Instance.PlaySound("g127_shake")})).start()},t.prototype.facility_collect=function(e){if(null!=(e=A.default.Instance.ScenceArea)){var t,n,o=0,a=0;switch(e){case G.ScenceArea.first_room1:case G.ScenceArea.first_room2:case G.ScenceArea.first_room3:n=[G.ScenceArea.first_room1,G.ScenceArea.first_room2,G.ScenceArea.first_room3],e=G.ScenceArea.first_room1;break;case G.ScenceArea.third_canteen:case G.ScenceArea.third_room1:case G.ScenceArea.third_room2:n=[G.ScenceArea.third_canteen,G.ScenceArea.third_room1,G.ScenceArea.third_room2],e=G.ScenceArea.third_canteen;break;default:n=[e]}for(var i=0;i<10;i++)if(1!=E.default.Instance.FacilityCollect[e+"_"+i]){t=i;break}for(var r in null==t&&(t=9),C.default.Instance.Facility1Information){var c=C.default.Instance.Facility1Information[r];if(c.data[t]&&!(n.indexOf(c.location)<0)){o++;var s=E.default.Instance.AreaUnlock[c.location];if(null!=s&&1==s.unlock){var l=E.default.Instance.Facility[r];l&&1==l.buy_record[t]&&a++}}}0==o||t>=7?this.btn_collcet.node.parent.active=!1:(this.btn_collcet.node.parent.active=!0,this.collect_index=t,this.label_bar.string=a+"/"+o,this.bar_2.width=Math.floor(a/o*178),a<o?(P.default.Instance.LoadSpriteFrame("Bundle1UI","MainUI/bar_2",this.bar_2),P.default.Instance.LoadSpriteFrame("Bundle1UI","MainUI/icon_3",this.btn_collcet.node),this.btn_collcet.node.y=-20,this.btn_collcet.node.children[0].active=!1,this.btn_collcet.stop(),this.btn_collcet.node.setScale(1),this.eff_collcet.active=!1,this.icon_finish.active=!1,this.btn_collcet.node.active=!0):(P.default.Instance.LoadSpriteFrame("Bundle1UI","MainUI/bar_3",this.bar_2),P.default.Instance.LoadSpriteFrame("Bundle1UI","MainUI/icon_1",this.btn_collcet.node),this.btn_collcet.node.y=-32,1==E.default.Instance.FacilityCollect[e+"_"+t]?(this.icon_finish.active=!0,this.btn_collcet.node.active=!1,this.icon_award.active=!1):(this.icon_finish.active=!1,this.btn_collcet.node.active=!0,this.btn_collcet.play(),this.eff_collcet.active=!0,E.default.Instance.FacilityCollect[e+"_"+t]=!1),this.btn_collcet.node.children[0].active=!0),E.default.Instance.AutoSyncData(),P.default.Instance.LoadSpriteFrame("Bundle1UI","MainUI/t_"+t,this.icon_lv),P.default.Instance.LoadSpriteFrame("Bundle1UI","MainUI/text_"+e,this.icon_area))}},t.prototype._updateJengaBtn=function(){var e=this.btn_jenga.getChildByName("layout");E.default.Instance.jengaVideoNum>=U.default.Instance.unlockVideoNum&&(e.active=!1),this.jengaUnLockLabel.string=E.default.Instance.jengaVideoNum+"/"+U.default.Instance.unlockVideoNum},t.prototype._updateSkinRed=function(){var e=C.default.Instance.hasNewSkin(),t=this.skinBtn.getChildByName("new"),n=this.skinBtn.getChildByName("unlock");C.default.Instance.getUnlockKebabsNum()>20?(n.active=!1,t.active=e):(t.active=!1,n.active=!0)},t.prototype._showSkinGuide=function(){if(A.default.Instance.isDayChallange&&!(C.default.Instance.getUnlockKebabsNum()<=20)&&!E.default.Instance.openSkin&&C.default.Instance.hasNewSkin()){this.icon_finger.active=!0;var e=this.icon_finger.getChildByName("icon_bg2");e&&(e.active=!1),this.icon_finger.setPosition(-288,-385)}},t.prototype._updateDayChallangeBtn=function(){var e=this.icon_finger.getChildByName("icon_bg2"),t=this.icon_lv.parent.parent;if(!A.default.Instance.isDayChallange)return this.dayChallangeBtn.active=!1,!E.default.Instance.openSkin&&C.default.Instance.hasNewSkin()||e&&(e.active=!0),e?e.setPosition(0,240):console.error("\u6ca1\u6709\u8282\u70b9\uff0c\u8bf7\u68c0\u67e5"),void(t?(t.setPosition(0,-396),this.icon_award.setPosition(150,-306)):console.error("\u6ca1\u6709\u8282\u70b9\uff0c\u8bf7\u68c0\u67e5"));!E.default.Instance.openSkin&&C.default.Instance.hasNewSkin()||e&&(e.active=!0),e?e.setPosition(0,380):console.error("\u6ca1\u6709\u8282\u70b9\uff0c\u8bf7\u68c0\u67e5"),t?(t.setPosition(0,-246),this.icon_award.setPosition(150,-156)):console.error("\u6ca1\u6709\u8282\u70b9\uff0c\u8bf7\u68c0\u67e5");var n=this.dayChallangeBtn.getChildByName("lock"),o=this.dayChallangeBtn.getChildByName("unlock"),a=o.getChildByName("video");this.dayChallangeBtn.getChildByName("finish").active=!1,n.active=!1,o.active=!0;var i=R.default.Instance.unlockLevel;A.default.Instance.isJump36AB&&(i=A.default.Instance.getRealLevel(i)),this.challange_unlock_label.string="\u901a\u5173"+i+"\u5173\u89e3\u9501";var r=R.default.Instance.freeNum-R.default.Instance.useFreeNum;r<=0&&(r=0),R.default.Instance.winNum?a.active=!1:a.active=r<=0,this.challange_free_label.string="\u4eca\u65e5\u514d\u8d39"+r+"/"+R.default.Instance.freeNum+"\u6b21"},t.prototype._updateNoticeRed=function(){var e=this.noticeBtn.getChildByName("red"),t=this.pageBtn.getChildByName("red");e&&(e.active=!E.default.Instance.noticeOpen,t.active=!E.default.Instance.noticeOpen)},t.bundleName="Bundle1Pre",t.prefabUrl="MainPre/MainPre",t.className="MainInterface",l([Y(cc.Node)],t.prototype,"group_up",void 0),l([Y(cc.Node)],t.prototype,"group_down",void 0),l([Y(cc.Node)],t.prototype,"btn_start_game",void 0),l([Y(cc.Label)],t.prototype,"label_lv",void 0),l([Y(cc.Node)],t.prototype,"btn_level",void 0),l([Y(cc.Node)],t.prototype,"btn_facility",void 0),l([Y(cc.Node)],t.prototype,"btn_illustrated",void 0),l([Y(cc.Node)],t.prototype,"btn_task",void 0),l([Y(cc.Node)],t.prototype,"icon_badge",void 0),l([Y(cc.Label)],t.prototype,"label_shop_lv",void 0),l([Y(cc.Node)],t.prototype,"btn_setting",void 0),l([Y(cc.Node)],t.prototype,"btn_newcomer_kuang",void 0),l([Y(cc.Node)],t.prototype,"btn_newcomer1",void 0),l([Y(cc.Node)],t.prototype,"btn_newcomer2",void 0),l([Y(cc.Label)],t.prototype,"label_time",void 0),l([Y(cc.Node)],t.prototype,"icon_finger",void 0),l([Y(cc.Node)],t.prototype,"btn_gift",void 0),l([Y(cc.Node)],t.prototype,"btn_desktop",void 0),l([Y(cc.Node)],t.prototype,"btn_circle",void 0),l([Y(cc.Node)],t.prototype,"icon_award",void 0),l([Y(cc.Animation)],t.prototype,"btn_collcet",void 0),l([Y(cc.Node)],t.prototype,"eff_collcet",void 0),l([Y(cc.Node)],t.prototype,"icon_finish",void 0),l([Y(cc.Node)],t.prototype,"bar_2",void 0),l([Y(cc.Node)],t.prototype,"icon_lv",void 0),l([Y(cc.Node)],t.prototype,"icon_area",void 0),l([Y(cc.Label)],t.prototype,"label_bar",void 0),l([Y(cc.Node)],t.prototype,"btn_winActivity",void 0),l([Y(cc.Label)],t.prototype,"timeLabel",void 0),l([Y(cc.Animation)],t.prototype,"fishAnim",void 0),l([Y(cc.Label)],t.prototype,"newLabel",void 0),l([Y(cc.Label)],t.prototype,"oldLabel",void 0),l([Y(cc.Node)],t.prototype,"btn_jenga",void 0),l([Y(cc.Label)],t.prototype,"jengaUnLockLabel",void 0),l([Y(cc.Node)],t.prototype,"dayChallangeBtn",void 0),l([Y(cc.Label)],t.prototype,"challange_free_label",void 0),l([Y(cc.Label)],t.prototype,"challange_unlock_label",void 0),l([Y(cc.Node)],t.prototype,"btn_moregame",void 0),l([Y(cc.Layout)],t.prototype,"leftBtnLayout",void 0),l([Y(cc.Layout)],t.prototype,"rightBtnLayout",void 0),l([Y(cc.Node)],t.prototype,"skinBtn",void 0),l([Y(cc.Node)],t.prototype,"noticeBtn",void 0),l([Y(cc.Node)],t.prototype,"pageBtn",void 0),l([Y(cc.Node)],t.prototype,"pageList",void 0),l([X],t)}(h.default);i.default=Z,cc._RF.pop(),cc._RF.pop()},{}],MapControl3:[function(e,t,n){"use strict";cc._RF.push(t,"a2ede0yXVZHB5j/MBKTE3cy","MapControl3");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"cb0d4v0kjpCEZp1RnuUzPy4","MapControl3");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0}),i.MapControl3=void 0;var u=o("InfoManager"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.map=null,t.move_zoom=10,t.lerp_ratio=.02,t.target_pos=null,t.inertia=!1,t}return s(t,e),t.prototype.onDisable=function(){this.inertia=!1},t.prototype.onEnable=function(){this.map.setScale(this.size_min),this.map.x=0,this.map.y=0},t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.tuoch_start,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.tuoch_move,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this.tuoch_end,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.tuoch_end,this,!0),this.node.on(cc.Node.EventType.MOUSE_WHEEL,this.mouse,this)},t.prototype.Init=function(){var e=u.default.Instance.ScreenSize.height/u.default.Instance.GameSize;this.size_min=e/this.map.height,this.size_max=this.size_min+1,this.map.setScale(this.size_min),this.MoveDis=0},t.prototype.tuoch_start=function(){this.MoveDis=0,this.count_x=0,this.count_y=0,this.last_x=null,this.last_y=null,this.inertia=!1,this.target_pos=null},t.prototype.tuoch_move=function(e){var t=e.getTouches();switch(this.MoveDis+=Math.abs(e.getDeltaY()),t.length){case 0:console.error("\u89e6\u6478\u70b9\u51fa\u9519======");break;case 1:var n=cc.v2(t[0].getDelta()).mulSelf(1.15);this.map_move(n),this.refresh_target(e.getDelta());break;default:var o=this.Distance(t[0].getLocation(),t[1].getLocation());null!=this.scale_dis&&this.map_scale((o-this.scale_dis)/200),this.scale_dis=o}},t.prototype.tuoch_end=function(e){this.scale_dis=null;var t=e.getTouches();console.log("\u62ac\u8d77\u624b\u6307\u6578\u91cf",t.length),1==t.length&&null!=this.target_pos&&(null!=this.last_x&&(this.target_pos.x=this.last_x),null!=this.last_y&&(this.target_pos.y=this.last_y),this.inertia=!0)},t.prototype.update=function(){if(1==this.inertia&&null!=this.target_pos){var e=this.map.getPosition().lerp(this.target_pos,this.lerp_ratio);this.map.setPosition(e),this.judge_boundary(),this.target_pos.sub(this.map.getPosition()).mag()<=5&&(this.inertia=!1,this.target_pos=null)}},t.prototype.mouse=function(e){var t=e.getScrollY();this.map_scale(t/8e3)},t.prototype.map_move=function(e){this.map.x+=e.x,this.map.y+=e.y,this.judge_boundary()},t.prototype.MapMove=function(e){this.map.x=-e.x,this.map.y=-e.y,this.judge_boundary()},t.prototype.map_scale=function(e){var t=this.map.scaleX+e;t>this.size_max?t=this.size_max:t<this.size_min&&(t=this.size_min),this.map.setScale(t),this.judge_boundary()},t.prototype.judge_boundary=function(){var e=this.map.width*this.map.scaleX;e<this.node.width?0!=this.map.x&&Math.abs(this.map.x)>Math.abs(e-this.node.width)/2&&(this.map.x=Math.abs(e-this.node.width)/2*(Math.abs(this.map.x)/this.map.x)):Math.abs(this.map.x)>(e-this.node.width)/2&&(this.map.x=(e-this.node.width)/2*(Math.abs(this.map.x)/this.map.x));var t=this.map.height*this.map.scaleY;t<this.node.height?0!=this.map.y&&Math.abs(this.map.y)>Math.abs(t-this.node.height)/2&&(this.map.y=Math.abs(t-this.node.height)/2*(Math.abs(this.map.y)/this.map.y)):Math.abs(this.map.y)>(t-this.node.height)/2&&(this.map.y=(t-this.node.height)/2*(Math.abs(this.map.y)/this.map.y))},t.prototype.refresh_target=function(e){if(null!=e){var t=e.x*this.move_zoom,n=e.y*this.move_zoom,o=this.map.height*this.map.scaleY,a=this.map.width*this.map.scaleX;isNaN(t)&&(t=0),isNaN(n)&&(n=0),null==this.target_pos||(this.target_pos.x*t<0?(this.count_x=0,this.last_x=this.target_pos.x):(this.count_x++,5==this.count_x&&(this.last_x=null)),this.target_pos.y*n<0?(this.count_y=0,this.last_y=this.target_pos.y):(this.count_y++,5==this.count_y&&(this.last_y=null))),this.target_pos=this.map.getPosition().add(cc.v2(t,n)),a<this.node.width?0!=this.target_pos.x&&Math.abs(this.target_pos.x)>Math.abs(a-this.node.width)/2&&(this.target_pos.x=Math.abs(a-this.node.width)/2*(Math.abs(this.target_pos.x)/this.target_pos.x)):Math.abs(this.target_pos.x)>(a-this.node.width)/2&&(this.target_pos.x=(a-this.node.width)/2*(Math.abs(this.target_pos.x)/this.target_pos.x||0)),o<this.node.height?0!=this.target_pos.y&&Math.abs(this.target_pos.y)>Math.abs(o-this.node.height)/2&&(this.target_pos.y=Math.abs(o-this.node.height)/2*(Math.abs(this.target_pos.y)/this.target_pos.y)):Math.abs(this.target_pos.y)>(o-this.node.height)/2&&(this.target_pos.y=(o-this.node.height)/2*(Math.abs(this.target_pos.y)/this.target_pos.y))}},t.prototype.Distance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},l([p({type:cc.Node,tooltip:"\u76ee\u6807\u8282\u70b9"})],t.prototype,"map",void 0),l([h],t)}(cc.Component);i.MapControl3=f,cc._RF.pop(),cc._RF.pop()},{}],MoreGameInterface:[function(e,t,n){"use strict";cc._RF.push(t,"f4463Myl45P4qOO+ILUOu0y","MoreGameInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"07421Nzof1PPrU2gusfIWwg","MoreGameInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("InfoManager"),h=o("SoundManager"),p=o("TypeManager"),f=o("UIManager"),_=o("MoreGameItem"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.btn_left=null,t.btn_right=null,t.itemPrefab=null,t.page_1=null,t.page_2=null,t.pageLab=null,t.item1_array=[],t.item2_array=[],t.onePageItemCount=4,t.allTypeArray=[p.MoreGameType.Jenga],t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.page_1.parent.on(cc.Node.EventType.TOUCH_START,this.touch_start,this,!0),this.page_1.parent.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move,this,!0),this.page_1.parent.on(cc.Node.EventType.TOUCH_END,this.touch_end,this,!0),this.page_1.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.touch_end,this,!0),this.btn_left.on(cc.Node.EventType.TOUCH_END,this._btnLeftClick,this),this.btn_right.on(cc.Node.EventType.TOUCH_END,this._btnRightclick,this)},t.prototype.onInit=function(){h.default.Instance.PlaySound("book_pop_open"),this.ani_popup.play("ani_tongyongtanchuang_open");var e=this.allTypeArray.length;this.max_page=Math.floor(e/this.onePageItemCount),e%this.onePageItemCount!=0&&this.max_page++,this.now_page=1,this.now_page>this.max_page&&(this.now_page=this.max_page),0==this.item1_array.length&&this.found_page(this.now_page,1),0==this.item2_array.length&&this.found_page(2,2),this.pageLab.string=this.now_page+"/"+this.max_page},t.prototype.touch_start=function(){1==this.page_1.active?(this.now_page_node=this.page_1,this.next_page_node=this.page_2):(this.now_page_node=this.page_2,this.next_page_node=this.page_1),this.next_page=null,this.next_page_node.x=800,this.next_page_node.active=!0,this.move_dis=0},t.prototype.touch_move=function(e){var t=e.getDelta();this.now_page_node.x+=t.x,this.move_dis+=Math.abs(t.x),1==this.now_page&&this.now_page_node.x>0?this.now_page_node.x=0:this.now_page>=this.max_page&&this.now_page_node.x<0?this.now_page_node.x=0:this.now_page_node.x>0?(this.next_page!=this.now_page-1&&(this.next_page=this.now_page-1,this.draw_page(this.next_page,this.next_page_node)),this.next_page_node.x=this.now_page_node.x-700):(this.next_page!=this.now_page+1&&(this.next_page=this.now_page+1,this.draw_page(this.next_page,this.next_page_node)),this.next_page_node.x=this.now_page_node.x+700)},t.prototype.touch_end=function(){var e=this;Math.abs(this.now_page_node.x)<200?(cc.tween(this.now_page_node).to(.1,{x:0}).start(),cc.tween(this.next_page_node).by(.1,{x:0-this.now_page_node.x}).call(function(){e.next_page_node.active=!1}).start()):(this.now_page=this.next_page,cc.tween(this.next_page_node).to(.2,{x:0}).start(),cc.tween(this.now_page_node).by(.2,{x:0-this.next_page_node.x}).call(function(){e.now_page_node.active=!1}).start())},t.prototype.found_page=function(e,t){var n,o,a=(e-1)*this.onePageItemCount;switch(t){case 1:n=this.item1_array,o=this.page_1;break;case 2:n=this.item2_array,o=this.page_2}for(var i=0;i<this.onePageItemCount;i++)if(a+i>=this.allTypeArray.length)null!=n[i]&&null!=n[i].node&&(n[i].node.active=!1);else{var r=cc.instantiate(this.itemPrefab);r.setParent(o),r.active=!0,n[i]=r.getComponent(_.default),n[i].InitData(this.allTypeArray[a+i])}},t.prototype.draw_page=function(e,t){var n,o=(e-1)*this.onePageItemCount;switch(t.name){case"page_1":n=this.item1_array;break;case"page_2":n=this.item2_array}for(var a=0;a<n.length;a++)o+a>=this.allTypeArray.length?null!=n[a]&&null!=n[a].node&&(n[a].node.active=!1):(n[a].node.active=!0,n[a].InitData(this.allTypeArray[o+a]))},t.prototype._btnLeftClick=function(){d.default.Instance.TsInitial.ShowTips("\u6682\u65e0\u66f4\u591a\u6a21\u5f0f")},t.prototype._btnRightclick=function(){d.default.Instance.TsInitial.ShowTips("\u6682\u65e0\u66f4\u591a\u6a21\u5f0f")},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){f.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="MoreGamePre/MoreGamePre",t.className="MoreGameInterface",l([v(cc.Animation)],t.prototype,"ani_popup",void 0),l([v(cc.Node)],t.prototype,"btn_close",void 0),l([v(cc.Node)],t.prototype,"btn_left",void 0),l([v(cc.Node)],t.prototype,"btn_right",void 0),l([v(cc.Prefab)],t.prototype,"itemPrefab",void 0),l([v(cc.Node)],t.prototype,"page_1",void 0),l([v(cc.Node)],t.prototype,"page_2",void 0),l([v(cc.Label)],t.prototype,"pageLab",void 0),n=l([b],t)}(u.default);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],MoreGameItem:[function(e,t,n){"use strict";cc._RF.push(t,"0d77b9V+OFPpryfPMYAnfYX","MoreGameItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"e1711T93uhMLqxTqFxv4bEc","MoreGameItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("JengaInterface"),d=o("BundleManger"),h=o("GameManger"),p=o("JengaManager"),f=o("SdkManager"),_=o("StoragerManager"),y=o("TypeManager"),b=o("UIManager"),v=o("MoreGameInterface"),m=cc._decorator,g=m.ccclass,I=m.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNameLab=null,t.itemIcon=null,t.gotoBtn=null,t.unlockBtn=null,t.unlockLab=null,t.typeUnlockLab=null,t._moreGameType=y.MoreGameType.Jenga,t}return s(t,e),t.prototype.onEnable=function(){this.unlockBtn.on(cc.Node.EventType.TOUCH_END,this._unlockBtnClick,this),this.gotoBtn.on(cc.Node.EventType.TOUCH_END,this._gotoBtnClick,this)},t.prototype.onDisable=function(){this.unlockBtn.off(cc.Node.EventType.TOUCH_END,this._unlockBtnClick,this),this.gotoBtn.off(cc.Node.EventType.TOUCH_END,this._gotoBtnClick,this)},t.prototype.InitData=function(e){this._moreGameType=e,this.itemNameLab.string=h.default.Instance.GetMoreGameNameByType(this._moreGameType),d.default.Instance.LoadSpriteFrame("Bundle2UI","MoreGameUI/"+h.default.Instance.GetMoreGameIconNameByType(this._moreGameType),this.itemIcon.node),this._updateItemBtn()},t.prototype._unlockBtnClick=function(){var e=this;switch(this._moreGameType){case y.MoreGameType.Jenga:_.default.Instance.jengaVideoNum>=p.default.Instance.unlockVideoNum?this._updateItemBtn():f.default.Instance.ShareOrVideo(f.ShareLoc.barbecue_model,function(){_.default.Instance.jengaVideoNum++,e._updateItemBtn(),_.default.Instance.AutoSyncData()})}},t.prototype._gotoBtnClick=function(){switch(this._moreGameType){case y.MoreGameType.Jenga:_.default.Instance.jengaVideoNum>=p.default.Instance.unlockVideoNum&&(b.default.Instance.OpenUI(u.default,b.UIOrder.Window_2),b.default.Instance.DestroyUI(v.default))}},t.prototype._updateItemBtn=function(){this.unlockLab.string="",this.typeUnlockLab.string="";var e=h.default.Instance.GetMoreGameUnlockLvCount(this._moreGameType),t=e;if(h.default.Instance.isJump36AB&&(t=h.default.Instance.getRealLevel(t)),_.default.Instance.BarbecueLv.length<e)return this.unlockBtn.active=!1,this.gotoBtn.active=!1,void(this.typeUnlockLab.string="<b>\u901a\u5173\u7b2c<color=#D67B05>"+t+"</color>\u5173\u89e3\u9501</b>");switch(this._moreGameType){case y.MoreGameType.Jenga:_.default.Instance.jengaVideoNum>=p.default.Instance.unlockVideoNum?(this.unlockBtn.active=!1,this.gotoBtn.active=!0):(this.unlockBtn.active=!0,this.gotoBtn.active=!1,this.unlockLab.string=_.default.Instance.jengaVideoNum+"/"+p.default.Instance.unlockVideoNum)}},l([I(cc.Label)],t.prototype,"itemNameLab",void 0),l([I(cc.Sprite)],t.prototype,"itemIcon",void 0),l([I(cc.Node)],t.prototype,"gotoBtn",void 0),l([I(cc.Node)],t.prototype,"unlockBtn",void 0),l([I(cc.Label)],t.prototype,"unlockLab",void 0),l([I(cc.RichText)],t.prototype,"typeUnlockLab",void 0),l([g],t)}(cc.Component);i.default=T,cc._RF.pop(),cc._RF.pop()},{}],NewcomerPackPreInterface:[function(e,t,n){"use strict";cc._RF.push(t,"d9578kL9INCv4S/x5i/qNaT","NewcomerPackPreInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"e2b760SpCtIqLNFQKOOgxDw","NewcomerPackPreInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("BarbecueOverInterface"),f=o("BarbecueStandInterface"),_=o("MainInterface"),y=o("ShopAwardInterface"),b=o("BundleManger"),v=o("FunctionManager"),m=o("SdkManager"),g=o("SoundManager"),I=o("StoragerManager"),T=o("UIManager"),k=cc._decorator,S=k.ccclass,w=k.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.icon_day1=null,t.icon_day2=null,t.icon_day3=null,t.icon_select=null,t.shade_day1=null,t.shade_day2=null,t.btn_video=null,t.btn_bg=null,t.label_time=null,t.icon_tips=null,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_video.on(cc.Node.EventType.TOUCH_END,this.video,this),this.schedule(this.time,1)},t.prototype.onInit=function(){return u(this,void 0,void 0,function(){var e,t,n,o,a,i=this;return d(this,function(r){switch(r.label){case 0:return g.default.Instance.PlaySound("book_pop_open"),[4,m.default.Instance.Date()];case 1:return e=r.sent(),t=this.formatting_time(e),n=I.default.Instance.NewcomerPackage2Time,o=this.formatting_time(n),e>n&&t!=o?(this.is_get=!1,this.day=I.default.Instance.NewcomerPackage2Get+1):(this.is_get=!0,this.day=I.default.Instance.NewcomerPackage2Get),console.log("\u4e0a\u6b21\u9886\u5956"+o+",\u4eca\u5929\u65f6\u95f4"+t+",\u5f53\u524d\u7b2c"+this.day+"\u5929\u5956\u52b1---\u5df2\u9886\u53d6="+this.is_get),this.init_day(),this.btn_video.active=!this.is_get,this.btn_bg.active=this.is_get,this.count_down=null,0==I.default.Instance.NewcomerPackage2Get?(a=Math.floor((e-n)/1e3),this.count_down=3600-a%3600,this.label_time.string=v.default.Instance.TimecFormat(this.count_down)+"\u540e\u793c\u5305\u6d88\u5931",this.icon_tips.active=!0):(this.label_time.string="",this.icon_tips.active=!1),this.btn_close.active=!1,cc.tween(this).delay(3).call(function(){i.btn_close.active=!0}).start(),[2]}})})},t.prototype.init_day=function(){for(var e=1;e<4;e++)this.day>e?this["shade_day"+e].active=!0:this.day==e&&(1==this.is_get?this["shade_day"+e].active=!0:this.select_day(e))},t.prototype.select_day=function(e){var t=this["icon_day"+e];t&&(3==e?(b.default.Instance.LoadSpriteFrame("Bundle8UI","PackUI/icon_bg21_",t),b.default.Instance.LoadSpriteFrame("Bundle8UI","PackUI/icon_21",this.icon_select)):(b.default.Instance.LoadSpriteFrame("Bundle8UI","PackUI/icon_bg20_",t),b.default.Instance.LoadSpriteFrame("Bundle8UI","PackUI/icon_20",this.icon_select)),b.default.Instance.LoadSpriteFrame("Bundle8UI","PackUI/day_"+e+"_",t.children[0]),this.icon_select.setPosition(t.getPosition()))},t.prototype.time=function(){null!=this.count_down&&(this.count_down--,this.count_down<=0&&(this.count_down=3600),this.label_time.string=v.default.Instance.TimecFormat(this.count_down)+"\u540e\u793c\u5305\u6d88\u5931")},t.prototype.video=function(){var e=this;m.default.Instance.ShareOrVideo(m.ShareLoc.beginner_gift_pack_2,function(){return u(e,void 0,void 0,function(){var e,t,n,o,a,i;return d(this,function(r){switch(r.label){case 0:switch(null==I.default.Instance.BarbecueProp.prop_1&&(I.default.Instance.BarbecueProp.prop_1=0),null==I.default.Instance.BarbecueProp.prop_2&&(I.default.Instance.BarbecueProp.prop_2=0),this.day){case 1:I.default.Instance.BarbecueProp.prop_1++,I.default.Instance.BarbecuePower+=2,I.default.Instance.GoldNum+=200,e=[{type:"prop_1",value:1},{type:"power",value:2},{type:"gold",value:200}];break;case 2:I.default.Instance.BarbecueProp.prop_1++,I.default.Instance.BarbecuePower+=3,I.default.Instance.GoldNum+=300,e=[{type:"prop_1",value:1},{type:"power",value:3},{type:"gold",value:300}];break;case 3:I.default.Instance.BarbecueProp.prop_1+=2,I.default.Instance.BarbecueProp.prop_2++,I.default.Instance.BarbecuePower+=3,I.default.Instance.GoldNum+=300,e=[{type:"prop_1",value:2},{type:"prop_2",value:1},{type:"power",value:3},{type:"gold",value:300}]}return t=I.default.Instance,[4,m.default.Instance.Date()];case 1:if(t.NewcomerPackage2Time=r.sent(),I.default.Instance.NewcomerPackage2Get++,(n=T.default.Instance.GetUI(_.default))&&(I.default.Instance.NewcomerPackage2Get>=3&&(n.btn_newcomer2.active=!1),n.label_time.string="",n.count_down=null),(o=T.default.Instance.GetUI(p.default))&&(I.default.Instance.NewcomerPackage2Get>=3&&(o.btn_newcomer2.active=!1),o.label_time.string="",o.count_down=null),a=T.default.Instance.GetUI(f.default))for(i=0;i<a.btn_prop.length;i++)a.btn_prop[i].Refresh();return I.default.Instance.AutoSyncData(),T.default.Instance.OpenUI(y.default,T.UIOrder.Window_2,e,"\u65b0\u624b\u793c\u5305"),this.btn_video.active=!1,this.close(),[2]}})})})},t.prototype.formatting_time=function(e){var t=new Date(e);return t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){T.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle8Pre",t.prefabUrl="PackPre/NewcomerPackPre",t.className="NewcomerPackPreInterface",l([w(cc.Animation)],t.prototype,"ani_popup",void 0),l([w(cc.Node)],t.prototype,"btn_close",void 0),l([w(cc.Node)],t.prototype,"icon_day1",void 0),l([w(cc.Node)],t.prototype,"icon_day2",void 0),l([w(cc.Node)],t.prototype,"icon_day3",void 0),l([w(cc.Node)],t.prototype,"icon_select",void 0),l([w(cc.Node)],t.prototype,"shade_day1",void 0),l([w(cc.Node)],t.prototype,"shade_day2",void 0),l([w(cc.Node)],t.prototype,"btn_video",void 0),l([w(cc.Node)],t.prototype,"btn_bg",void 0),l([w(cc.Label)],t.prototype,"label_time",void 0),l([w(cc.Node)],t.prototype,"icon_tips",void 0),n=l([S],t)}(h.default);i.default=O,cc._RF.pop(),cc._RF.pop()},{}],NoCoinInterface:[function(e,t,n){"use strict";cc._RF.push(t,"3a6d7lc/QBBa4phUvAnZmra","NoCoinInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"496ec+68ohCQofubwof1UrC","NoCoinInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("AddPowerInterface"),h=o("FacilityInterface"),p=o("InfoManager"),f=o("StoragerManager"),_=o("UIManager"),y=o("BarbecueStandInterface"),b=cc._decorator,v=b.ccclass,m=b.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.skipBtn=null,t.goBtn=null,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.skipBtn.on(cc.Node.EventType.TOUCH_END,this._skinBtnClick,this),this.goBtn.on(cc.Node.EventType.TOUCH_END,this._goBtnClick,this)},t.prototype.onUIDisable=function(){this.btn_close.off(cc.Node.EventType.TOUCH_END,this.close,this),this.skipBtn.off(cc.Node.EventType.TOUCH_END,this._skinBtnClick,this),this.goBtn.off(cc.Node.EventType.TOUCH_END,this._goBtnClick,this)},t.prototype.onInit=function(){this.ani_popup.play("ani_tongyongtanchuang_open")},t.prototype._skinBtnClick=function(){this.is_close||this.close()},t.prototype._goBtnClick=function(){this.is_close||(this.close(),this.OpenGame(f.default.Instance.BarbecueLv.length+1))},t.prototype.OpenGame=function(e){if(f.default.Instance.BarbecuePower<=0)return _.default.Instance.OpenUI(d.default,_.UIOrder.Window_2),p.default.Instance.TsInitial.ShowTips("\u4f53\u529b\u4e0d\u8db3");_.default.Instance.DestroyUI(h.default),f.default.Instance.BarbecuePower--,_.default.Instance.OpenUI(y.default,_.UIOrder.Window_1,e)},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){_.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="noCoinPre/noCoinPre",t.className="NoCoinInterface",l([m(cc.Animation)],t.prototype,"ani_popup",void 0),l([m(cc.Node)],t.prototype,"btn_close",void 0),l([m(cc.Node)],t.prototype,"skipBtn",void 0),l([m(cc.Node)],t.prototype,"goBtn",void 0),n=l([v],t)}(u.default);i.default=g,cc._RF.pop(),cc._RF.pop()},{}],NoticeInterface:[function(e,t,n){"use strict";cc._RF.push(t,"fc8f7IKs+BFhrI95P2HfCzI","NoticeInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"e95f6AvE9VB7rsif0tYa8zQ","NoticeInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("GameManger"),h=o("StoragerManager"),p=o("TypeManager"),f=o("UIManager"),_=cc._decorator,y=_.ccclass,b=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.closeBtn=null,t.list=null,t._tips={1:[{title:"\u5185\u5bb9\u66f4\u65b0",desc:"1\u3001\u4f18\u5316\u201c\u6bcf\u65e5\u6311\u6218\u201d\u6a21\u5f0f\u5956\u52b1\uff0c\u6bcf\u5929\u901a\u5173\u201c\u6bcf\u65e5\u6311\u6218\u201d\u6a21\u5f0f\u53ef\u4ee5\u83b7\u53d6\u4e00\u4e2a\u4e0d\u91cd\u590d\u70e4\u4e32\u56fe\u9274\uff1b\u96c6\u9f507\u4e2a\u70e4\u4e32\u56fe\u9274\u53ef\u4ee5\u83b7\u53d6\u5bf9\u5e94\u7684\u6e38\u620f\u80cc\u666f\u76ae\u80a4\u548c\u6e38\u620f\u684c\u9762\u76ae\u80a4\n2\u3001\u65b0\u589e\u76ae\u80a4\u7cfb\u7edf\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u81ea\u5df1\u7684\u504f\u597d\u70e4\u4e32\u4ee5\u53ca\u80cc\u666f\u3001\u684c\u9762\u76ae\u80a4\n3\u3001\u56fe\u9274\u754c\u9762\u65b0\u589e\u6d3b\u52a8\u56fe\u9274\n4\u3001\u6e38\u620f\u4e2d\u89d2\u8272\u64ad\u8bed\u97f3\u65f6\u589e\u52a0\u5634\u5df4\u52a8\u753b"},{title:"BUG\u4fee\u590d",desc:"1\u3001\u4fee\u590d\u70e4\u9c7c\u5927\u5e08\u6d3b\u52a8\u6ca1\u53d1\u653e\u5956\u52b1\u7684BUG\uff0c\u7248\u672c\u66f4\u65b0\u540e\u4f1a\u5bf9\u6ca1\u6709\u9886\u53d6\u5230\u5956\u52b1\u7684\u73a9\u5bb6\u7edf\u4e00\u53d1\u653e\u5956\u52b1\n2\u3001\u540e\u7eed\u5982\u679c\u6ca1\u6709\u53d1\u653e\u70e4\u9c7c\u6d3b\u52a8\u5956\u52b1\uff0c\u53ef\u4ee5\u70b9\u51fb\u8fdb\u5165\u70e4\u9c7c\u5927\u5e08\u6d3b\u52a8\u624b\u52a8\u9886\u53d6"}],2:[{title:"\u5185\u5bb9\u66f4\u65b0",desc:"1\u3001\u6e38\u620f\u4e2d\u89d2\u8272\u64ad\u8bed\u97f3\u65f6\u589e\u52a0\u5634\u5df4\u52a8\u753b"},{title:"BUG\u4fee\u590d",desc:"1\u3001\u4fee\u590d\u70e4\u9c7c\u5927\u5e08\u6d3b\u52a8\u6ca1\u53d1\u653e\u5956\u52b1\u7684BUG\uff0c\u7248\u672c\u66f4\u65b0\u540e\u4f1a\u5bf9\u6ca1\u6709\u9886\u53d6\u5230\u5956\u52b1\u7684\u73a9\u5bb6\u7edf\u4e00\u53d1\u653e\u5956\u52b1\n2\u3001\u540e\u7eed\u5982\u679c\u6ca1\u6709\u53d1\u653e\u70e4\u9c7c\u6d3b\u52a8\u5956\u52b1\uff0c\u53ef\u4ee5\u70b9\u51fb\u8fdb\u5165\u70e4\u9c7c\u5927\u5e08\u6d3b\u52a8\u624b\u52a8\u9886\u53d6"}]},t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.closeBtn.on(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this)},t.prototype.onUIDisable=function(){this.closeBtn.on(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this)},t.prototype._closeBtnClick=function(){this.close()},t.prototype.onInit=function(){this.ani_popup.play("ani_tongyongtanchuang_open")},t.prototype.onUIStart=function(){this._initView()},t.prototype._initView=function(){h.default.Instance.noticeOpen=!0,this._initList(),cc.systemEvent.emit(p.DistributedEvent.updateNoticeRed)},t.prototype._initList=function(){var e;e=d.default.Instance.isDayChallange?this._tips[1]:this._tips[2];var t=this.list.childrenCount;e&&e.length>t&&(t=e.length);for(var n=0;n<t;n++){var o=this.list.children[n];if(e&&e[n])if(o)this._initItem(o,e[n]);else{var a=cc.instantiate(this.list.children[0]);this.list.addChild(a),this._initItem(o,e[n])}else o&&(o.active=!1)}},t.prototype._initItem=function(e,t){if(e&&t){var n=e.getChildByName("titleLabel").getComponent(cc.Label),o=e.getChildByName("descLabel").getComponent(cc.Label);n.string=t.title,o.string=t.desc}},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){f.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="noticePre/noticePre",t.className="NoticeInterface",l([b(cc.Animation)],t.prototype,"ani_popup",void 0),l([b(cc.Node)],t.prototype,"closeBtn",void 0),l([b(cc.Node)],t.prototype,"list",void 0),n=l([y],t)}(u.default);i.default=v,cc._RF.pop(),cc._RF.pop()},{}],Platform:[function(e,t){"use strict";cc._RF.push(t,"c87e71aTkxOrpo2pjpBCNUW","Platform");var n=t;cc._RF.push(n,"e01fcpHWEZPZaFx1N+WtLx5","Platform"),cc._RF.pop(),cc._RF.pop()},{}],PoolManager:[function(e,t,n){"use strict";cc._RF.push(t,"fcdbb9DFn5BdL9dltFcj2v6","PoolManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"2c2e6IaK9lGCIr7ipLNx2Nf","PoolManager");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("dishes_eff"),p=o("eff_facility"),f=o("BundleManger"),_=o("FunctionManager"),y=o("GameManger"),b=o("InfoManager"),v=o("SoundManager"),m=o("TypeManager"),g=cc._decorator,I=g.ccclass,T=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label3_array=[],t.label_array=[],t.label2_array=[],t.eff_facility_array=[],t.node_array=[],t.eff_clean_array=[],t.prop_eff_array=[],t.currency_eff_array2=[],t.dishes_eff_array=[],t}var n;return s(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!1,configurable:!0}),t.prototype.Label3Effect=function(e,t,n){return u(this,void 0,void 0,function(){var o,a,i,r,c;return d(this,function(s){switch(s.label){case 0:for(a=0;a<this.label3_array.length;a++)if(null!=this.label3_array[a].node.parent&&0==this.label3_array[a].node.active){o=this.label_array[a];break}return null!=o&&null!=o.node?[3,2]:(c=(r=cc).instantiate,[4,f.default.Instance.LoadPrefab("BarbecueStandPre/Item/label3_item","Bundle1Pre")]);case 1:(i=c.apply(r,[s.sent()])).setParent(n),o=i.getComponent(cc.Label),this.label_array.push(o),s.label=2;case 2:return o.string="+"+e,o.node.setPosition(t),cc.tween(o.node).by(.5,{y:90}).call(function(){o.node.active=!1}).start(),[2]}})})},t.prototype.LabelEffects=function(e,t,n,o,a,i){return u(this,void 0,void 0,function(){var r,c,s,l,u;return d(this,function(d){switch(d.label){case 0:for(c=0;c<this.label_array.length;c++)if(null!=this.label_array[c].node&&0==this.label_array[c].node.active){r=this.label_array[c];break}return null!=r&&null!=r.node?[3,2]:(u=(l=cc).instantiate,[4,f.default.Instance.LoadPrefab("GamePre/eff_label","Bundle2Pre")]);case 1:s=u.apply(l,[d.sent()]),r=s.getComponent(cc.Label),this.label_array.push(r),d.label=2;case 2:return r.string=n,r.fontSize=e,r.node.active=!0,r.node.zIndex=5e3,r.node.setParent(i),r.node.setPosition(i.convertToNodeSpaceAR(a)),cc.tween(r.node).by(t,{y:o}).call(function(){r.node.active=!1,r.node.parent=null}).start(),[2]}})})},t.prototype.LabelEffects2=function(e,t,n){return u(this,void 0,void 0,function(){var o,a,i,r;return d(this,function(c){switch(c.label){case 0:for(a=0;a<this.label2_array.length;a++)if(null!=this.label2_array[a]&&0==this.label2_array[a].active){o=this.label2_array[a];break}return null!=o?[3,2]:(r=(i=cc).instantiate,[4,f.default.Instance.LoadPrefab("GamePre/eff_label2","Bundle2Pre")]);case 1:o=r.apply(i,[c.sent()]),this.label2_array.push(o),c.label=2;case 2:return o.children[0].getComponent(cc.Label).string=e,o.active=!0,o.opacity=255,o.zIndex=5e3,o.setParent(n),o.setPosition(t),o.setPosition(n.convertToNodeSpaceAR(t)),o.getComponent(cc.Animation).play(),cc.tween(o).delay(.83).call(function(){o.active=!1}).start(),[2]}})})},t.prototype.PlaySmokeEffect=function(e,t,n,o){return u(this,void 0,void 0,function(){var a,i,r,c,s;return d(this,function(l){switch(l.label){case 0:for(i=0;i<this.eff_facility_array.length;i++)if(null!=this.eff_facility_array[i].node&&0==this.eff_facility_array[i].node.active){a=this.eff_facility_array[i];break}return null!=a?[3,2]:(s=(c=cc).instantiate,[4,f.default.Instance.LoadPrefab("GamePre/eff_facility","Bundle2Pre")]);case 1:r=s.apply(c,[l.sent()]),a=r.getComponent(p.default),this.eff_facility_array.push(a),l.label=2;case 2:return a.Init(e,t,n,o),[2]}})})},t.prototype.TipsCelebrate=function(e){return u(this,void 0,void 0,function(){var t,n,o,a,i=this;return d(this,function(r){switch(r.label){case 0:return[4,f.default.Instance.LoadPrefab("GamePre/eff_congratulation","Bundle2Pre")];case 1:switch(t=r.sent(),n=cc.instantiate(t),(o=n.getComponent(cc.Animation)).on("finished",function(){i.scheduleOnce(function(){n.destroy()},3)},this),n.setParent(b.default.Instance.TsInitial.group_pool),n.setPosition(cc.v2(0,0)),a=n.children[0].children[0],e){case 1:f.default.Instance.LoadSpriteFrame("Bundle2UI","GameUI/game/txt_2",a);break;case 2:f.default.Instance.LoadSpriteFrame("Bundle2UI","GameUI/game/txt_1",a);break;case 3:f.default.Instance.LoadSpriteFrame("Bundle2UI","GameUI/game/txt_4",a)}return o.play(),[2]}})})},t.prototype.PlayNodeEffect=function(e,t,n,o,a){return u(this,void 0,void 0,function(){var i,r,c,s;return d(this,function(l){switch(l.label){case 0:for(r=0;r<this.node_array.length;r++)if(null!=this.node_array[r]&&0==this.node_array[r].active){i=this.node_array[r];break}return null!=i?[3,2]:[4,f.default.Instance.LoadPrefab("BarbecueOverPre/PT_aixin","Bundle1Pre")];case 1:c=l.sent(),i=cc.instantiate(c),this.node_array.push(i),i.setParent(b.default.Instance.TsInitial.group_pool),l.label=2;case 2:switch(e){case 1:f.default.Instance.LoadSpriteFrame2("Bundle1UI","CommonUI/common/icon_11",null,function(e,t){i.getComponent(cc.Sprite).spriteFrame=t});break;case 2:f.default.Instance.LoadSpriteFrame2("Bundle1UI","CommonUI/common/icon_10",null,function(e,t){i.getComponent(cc.Sprite).spriteFrame=t});break;case 3:case 4:case 5:f.default.Instance.LoadSpriteFrame2("Bundle1UI","BarbecueStandUI/ui/icon_"+(8+e),null,function(e,t){i.getComponent(cc.Sprite).spriteFrame=t});break;case 6:f.default.Instance.LoadSpriteFrame2("Bundle1UI","CommonUI/common/icon_12",null,function(e,t){i.getComponent(cc.Sprite).spriteFrame=t})}return i.active=!0,i.setPosition(t),s=_.default.Instance.Distance(t,n),cc.tween(i).to(s/o,{x:n.x,y:n.y}).call(function(){i.active=!1,a&&a()}).start(),[2]}})})},t.prototype.PlayCleanEffect=function(e,t,n,o){return u(this,void 0,void 0,function(){var a,i,r,c,s;return d(this,function(l){switch(l.label){case 0:for(i=0;i<this.eff_clean_array.length;i++)if(0==this.eff_clean_array[i].node.active){a=this.eff_clean_array[i];break}return null!=a?[3,2]:(s=(c=cc).instantiate,[4,f.default.Instance.LoadPrefab("GamePre/eff_clean","Bundle2Pre")]);case 1:r=s.apply(c,[l.sent()]),a=r.getComponent(sp.Skeleton),this.eff_clean_array.push(a),l.label=2;case 2:return a.node.active=!0,a.node.setPosition(n),a.node.setParent(o),a.node.zIndex=t,a.setAnimation(0,"animation",!0),cc.tween(this).delay(e).call(function(){a.node.active=!1}).start(),[2]}})})},t.prototype.PropEffects=function(e,t){return u(this,void 0,void 0,function(){var n,o,a,i,r,c;return d(this,function(s){switch(s.label){case 0:for(o=0;o<this.prop_eff_array.length;o++)if(0==(a=this.prop_eff_array[o]).node.active){n=a;break}return null!=n?[3,2]:(c=(r=cc).instantiate,[4,f.default.Instance.LoadPrefab("BarbecueStandPre/Item/eff_prop_get","Bundle1Pre")]);case 1:i=c.apply(r,[s.sent()]),n=i.getComponent(cc.Animation),this.prop_eff_array.push(n),i.setParent(b.default.Instance.TsInitial.group_pool),s.label=2;case 2:return n.node.setPosition(0,0),n.node.setScale(1.5),n.node.active=!0,f.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_"+(10+e),n.node.children[1]),n.play(),cc.tween(n.node).delay(1.2).to(.3,{x:t.node.x,y:t.node.y-.5*y.default.Instance.ScreenAdaptive,scale:1}).call(function(){n.node.active=!1,t.ani.play(),t.Refresh()}).start(),[2]}})})},t.prototype.PlayCurrencyEffects2=function(e,t,n,o,a,i,r){return void 0===o&&(o=null),void 0===a&&(a=10),void 0===i&&(i=260),void 0===r&&(r=960),u(this,void 0,void 0,function(){var c,s,l,u,h,p;return d(this,function(y){switch(y.label){case 0:for(c=_.default.Instance.GetCirclePoints(100,t,a,100),s=[],l=0;l<this.currency_eff_array2.length&&!(null!=this.currency_eff_array2[l]&&0==this.currency_eff_array2[l].active&&(s.push(this.currency_eff_array2[l]),s.length>=c.length));l++);v.default.Instance.PlaySound("g127_money"),u=function(a){var l,u,p,_,y,v;return d(this,function(d){switch(d.label){case 0:return null!=(l=s[a])?[3,2]:(p=(u=cc).instantiate,[4,f.default.Instance.LoadPrefab("AddPowerPre/eff_currency_move2","Bundle2Pre")]);case 1:l=p.apply(u,[d.sent()]),h.currency_eff_array2.push(l),l.setParent(b.default.Instance.TsInitial.group_pool),d.label=2;case 2:switch(e){case 1:f.default.Instance.LoadSpriteFrame("Bundle1UI","CommonUI/common/icon_11",l);break;case 2:f.default.Instance.LoadSpriteFrame("Bundle1UI","CommonUI/common/icon_10",l);break;case 3:f.default.Instance.LoadSpriteFrame("Bundle1UI","CommonUI/common/icon_12",l);break;case 4:f.default.Instance.LoadSpriteFrame("Bundle2UI","winActivityUI/fish_1",l)}return l.active=!0,l.setPosition(t),_=cc.Vec2.distance(l.position,c[a])/i,y=cc.Vec2.distance(n,c[a])/r,v=c[a],cc.tween(l).to(_,{position:v},{easing:"sineOut"}).to(y,{x:n.x,y:n.y},{easing:"cubicIn"}).call(function(){l.active=!1,a==c.length-1&&o&&o(),cc.systemEvent.emit(m.DistributedEvent.currency_shake,e)}).start(),[2]}})},h=this,p=0,y.label=1;case 1:return p<c.length?[5,u(p)]:[3,4];case 2:y.sent(),y.label=3;case 3:return p++,[3,1];case 4:return[2]}})})},t.prototype.PlayDishesEffect=function(e,t,n,o,a){return u(this,void 0,void 0,function(){var i,r,c,s;return d(this,function(l){switch(l.label){case 0:for(r=0;r<this.dishes_eff_array.length;r++)if(null!=this.dishes_eff_array[r].node&&0==this.dishes_eff_array[r].node.active){i=this.dishes_eff_array[r];break}return null!=i?[3,2]:[4,f.default.Instance.LoadPrefab("GamePre/dishes_eff","Bundle2Pre")];case 1:c=l.sent(),s=cc.instantiate(c),i=s.getComponent(h.default),this.dishes_eff_array.push(i),i.node.setPosition(cc.v2(0,0)),l.label=2;case 2:return i.node.zIndex=cc.macro.MAX_ZINDEX,i.node.setParent(o),i.Init(e,t,n,a),v.default.Instance.PlaySound("g127_particle"),[2]}})})},t._instance=null,n=l([I],t)}(cc.Component));i.default=T,cc._RF.pop(),cc._RF.pop()},{}],RoleSoundManager:[function(e,t,n){"use strict";cc._RF.push(t,"f1924FZEsVKzZSCADpudod/","RoleSoundManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"bcff0aX5zBBzYTb4ZOZ4KBY","RoleSoundManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},s=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},l=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("GameManger"),h=o("SoundManager"),p=o("StoragerManager"),f=o("TypeManager"),_=cc._decorator,y=_.ccclass,b=(_.property,function(){function e(){this.manIds=[1,7,10,11,16,9,26,15,18,21,22,24],this.womanIds=[2,12,20,17,27,19,23,25],this._voiceConfig={},this._staffConfig={},this._wordsConfig={},this._ipConfig={},this.isFinishFisrt=!1,this.talkTime=2.5,this.nowTime=0,this.staffIds=[],this._talkPre=null}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VoiceConfig",{get:function(){return this._voiceConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"StaffConfig",{get:function(){return this._staffConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"WordsConfig",{get:function(){return this._wordsConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IpConfig",{get:function(){return this._ipConfig},enumerable:!1,configurable:!0}),e.prototype.getIpConfigById=function(e){if(!e)return null;var t=e.substring(0,e.length-1);return this._ipConfig[e]?this._ipConfig[e]:this._ipConfig[t]?this._ipConfig[t]:null},e.prototype.getVoiceConfigById=function(e){return this._voiceConfig[e]},e.prototype.getRoleVoiceByType=function(e,t){return this._voiceConfig&&this._voiceConfig[e]?this._voiceConfig[e][t]:null},e.prototype.getStaffById=function(e){return this._staffConfig&&this._staffConfig[e]},e.prototype.getWordsById=function(e){return this._wordsConfig&&this._wordsConfig[e]},e.prototype.init=function(){var e=this;return new Promise(function(t){return s(e,void 0,void 0,function(){var e,n,o,a,i,r,c,s,d,h;return l(this,function(l){switch(l.label){case 0:return[4,u.default.Instance.LoadJson("voice")];case 1:if(e=l.sent()){for(n=e.voice,o=e.staff,a=e.words,i=e.ip,r=[],c=[],s=n.length,d=0;d<s;d++)h=n[d],this._voiceConfig[h.id]=h,1==h.sex?r.push(h.id):2==h.sex&&c.push(h.id);for(this.manIds=r,this.womanIds=c,s=o.length,d=0;d<s;d++)h=o[d],this._staffConfig[h.id]=h,this.staffIds.push(h.id);for(s=a.length,d=0;d<s;d++)h=a[d],this._wordsConfig[h.id]=h;for(s=i.length,d=0;d<s;d++)h=i[d],this._ipConfig[h.province]=h}return t(),[2]}})})})},e.prototype.updateVoiceTime=function(e){if(d.default.Instance.inGame&&this.nowTime>0)if(this.nowTime-=e,this.nowTime<=0){this.nowTime=0;var t=p.default.Instance.musicVolume;h.default.Instance.setMusicVolume(t)}else t=.3*p.default.Instance.musicVolume,h.default.Instance.setMusicVolume(t)},e.prototype.turnFoodIdToType=function(e){var t=null;switch(e){case 11:t=f.VoiceType.tomato;break;case 12:t=f.VoiceType.trotters;break;case 20:t=f.VoiceType.tofu;break;case 13:t=f.VoiceType.oyster;break;case 1:t=f.VoiceType.chicken_wings;break;case 6:t=f.VoiceType.sausage}return t},e.prototype.checkStaffInScene=function(e,t){void 0===t&&(t=d.default.Instance.ScenceArea);var n=!1;return d.default.Instance.ScenceArea==f.ScenceArea.doorway&&5==e?n=!0:d.default.Instance.ScenceArea==f.ScenceArea.first_canteen&&1==e?n=!0:d.default.Instance.ScenceArea==f.ScenceArea.second_canteen&&27==e?n=!0:d.default.Instance.ScenceArea==f.ScenceArea.third_canteen&&24==e&&(n=!0),n},e.prototype.getStaffSound=function(e,t){if(void 0===t&&(t=d.default.Instance.ScenceArea),p.default.Instance.Staff["staff_"+e])return this.checkStaffInScene(e,t)?this.getStaffById(e).staff_voice:null},e.prototype.showTalkSpine=function(e){return s(this,void 0,void 0,function(){var n,o,a;return l(this,function(i){switch(i.label){case 0:return e?this._talkPre?[3,2]:(n=this,[4,u.default.Instance.LoadPrefab("talkItem","Bundle1Pre")]):[2];case 1:n._talkPre=i.sent(),i.label=2;case 2:return this._talkPre?(o=null,e instanceof cc.Node?o=e:e.node&&e.node.isValid&&(o=e.node),o&&o.isValid&&o.parent&&o.parent.isValid&&(a=cc.instantiate(this._talkPre),o.addChild(a),a.scaleX=o.parent.scaleX<0?1:-1,a.setPosition(cc.v2(0,15)),setTimeout(function(){a&&a.isValid&&(a.removeFromParent(),a.destroy())},1e3*t.Instance.talkTime))):console.error("\u6ca1\u6709\u9884\u5236\u4f53"),[2]}})})},e.prototype.getSpineBone=function(e,t){var n=e.attachUtil;return n.generateAllAttachedNodes(),n.getAttachedNodes(t)[0]},e._instance=null,t=c([y],e)}());i.default=b,cc._RF.pop(),cc._RF.pop()},{}],RotationCtr:[function(e,t,n){"use strict";cc._RF.push(t,"188b6Ur0tRMIISyuDDgmFOp","RotationCtr");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"3ada6VIujNLy6qiFo/5AXER","RotationCtr");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotationSpeed=100,t.dir=1,t}return c(t,e),t.prototype.update=function(e){1==this.dir?(this.node.angle-=e*this.rotationSpeed,this.node.angle<=360&&(this.node.angle+=360)):2==this.dir&&(this.node.angle+=e*this.rotationSpeed,this.node.angle>=360&&(this.node.angle-=360))},s([d],t.prototype,"rotationSpeed",void 0),s([d],t.prototype,"dir",void 0),s([u],t)}(cc.Component);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],SdkManager:[function(e,t,n){"use strict";cc._RF.push(t,"00de7cO1RJMAK6DN/sIfk2J","SdkManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"eb25bJyaWNNOqqNCHBjx866","SdkManager");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.ShareLoc=void 0;var h,p=o("BarbecueStandInterface"),f=o("InfoManager"),_=o("GameManger"),y=o("InterstitialAdManager"),b=o("SoundManager"),v=o("StoragerManager"),m=o("TypeManager"),g=o("UIManager"),I=cc._decorator,T=I.ccclass,k=(I.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.record_guide={},t.starttime=0,t.module_monitor={},t}var n;return s(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!1,configurable:!0}),t.prototype.getStorage=function(e){if(1!=f.default.Instance.Web)return new Promise(function(t){t(localStorage.getItem(e))})},t.prototype.saveStorage=function(e,t){1!=f.default.Instance.Web&&localStorage.setItem(e,t)},t.prototype.Date=function(){return new Promise(function(e){1==f.default.Instance.Web?e(Date.now()):LWGSDK.getServeTime({success:function(t){console.log("\u83b7\u53d6\u670d\u52a1\u5668\u65f6\u95f4",r(t),t),e(1e3*t)},fail:function(t){console.log("\u83b7\u53d6\u670d\u52a1\u5668\u65f6\u95f4\u5931\u8d25",t),e(Date.now())}})})},t.prototype.request=function(e,t,n){return new Promise(function(o,a){1!=f.default.Instance.Web?LWGSDK.request({method:"POST",url:e,data:t,crypto:!0,success:function(e){o(e.d)},fail:function(e){console.log("LWGSDK Request err",e),n&&n(),a(e)}}):o(null)})},t.prototype.getInviteRecords=function(){return new Promise(function(e){1==f.default.Instance.Web?e(0):LWGSDK.getInviteRecords({page:1,page_size:20,loc:h.new_share,include_active_invite:1,success:function(t){console.log("\u83b7\u53d6\u88ab\u9080\u8bf7\u8bb0\u5f55",t),e(10*t.items.length)},fail:function(t){console.log("\u83b7\u53d6\u88ab\u9080\u8bf7\u8bb0\u5f55\u5f02\u5e38",t),e(0)}})})},t.prototype.reportUserGuide=function(e){1!=f.default.Instance.Web&&null==this.record_guide["gudie_"+e]&&(this.record_guide["gudie_"+e]=1,LWGSDK.reportUserGuide({guide_id:e,success:function(){console.log("\u65b0\u624b\u6559\u7a0b\u4e0a\u62a5\u6210\u529f",e)},fail:function(e){console.log("\u65b0\u624b\u6559\u7a0b\u4e0a\u62a5\u5f02\u5e38",e)}}))},t.prototype.reportEnterStage=function(e,t,n){var o;void 0===t&&(t=""),void 0===n&&(n=""),1!=f.default.Instance.Web&&(console.log("reportEnterStage label",t),o=t?{stage:e,label:t,success:function(){console.log("\u8fdb\u5165"+e+"\u5173\u4e0a\u62a5\u6210\u529f")},fail:function(){console.log("\u8fdb\u5165"+e+"\u5173\u4e0a\u62a5\u5931\u8d25")}}:{stage:e,success:function(){console.log("\u8fdb\u5165"+e+"\u5173\u4e0a\u62a5\u6210\u529f")},fail:function(){console.log("\u8fdb\u5165"+e+"\u5173\u4e0a\u62a5\u5931\u8d25")}},LWGSDK.reportEnterStage(o),this.starttime=(new Date).getTime())},t.prototype.reportEndStage=function(e,t,n,o,a){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=null),u(this,void 0,void 0,function(){var i,r;return d(this,function(c){switch(c.label){case 0:return[4,this.Date()];case 1:return i=c.sent(),r=a?Object.assign({stage:e,status:t,operateTimes:n,continueTimes:o,costTime:Math.floor((i-this.starttime)/1e3),success:function(){console.log("\u7ed3\u675f"+e+"\u5173-"+n+"-"+t+"-"+o+"\u4e0a\u62a5\u6210\u529f")},fail:function(e){console.log("\u7ed3\u675f\u5173\u5361\u4e8b\u4ef6\u4e0a\u62a5\u5f02\u5e38",e)}},a):{stage:e,status:t,operateTimes:n,continueTimes:o,costTime:Math.floor((i-this.starttime)/1e3),success:function(){console.log("\u7ed3\u675f"+e+"\u5173-"+n+"-"+t+"-"+o+"\u4e0a\u62a5\u6210\u529f")},fail:function(e){console.log("\u7ed3\u675f\u5173\u5361\u4e8b\u4ef6\u4e0a\u62a5\u5f02\u5e38",e)}},1==f.default.Instance.Web?(console.error("\u5173\u5361\u4e0a\u62a5\u7ed3\u675f=======obj"),[2]):(console.log("reportEndStage======"),LWGSDK.reportEndStage(r),[2])}})})},t.prototype.recordTimeCostEnd=function(e){1!=f.default.Instance.Web&&LWGSDK.recordTimeCostEnd({action:e,result:0,success:function(){},fail:function(e){console.log("\u7edf\u8ba1\u6642\u9593\u76f8\u5173\u4e0a\u62a5 \u8bb0\u5f55\u7ed3\u675f \u901a\u7528\u63a5\u53e3\u5f02\u5e38",e)}})},t.prototype.ModuleReported=function(e,t){switch(t){case-1:this.module_monitor[e]=[],this.entrance_module(e);break;case 0:this.secede_module(e);break;default:if(null==this.module_monitor[e])return;this.module_monitor[e].indexOf(t)<0&&(this.module_monitor[e].push(t),this.event_module(e,t))}},t.prototype.entrance_module=function(e){1!=f.default.Instance.Web&&LWGSDK.reportModuleEnter({module:e,success:function(){},fail:function(t){console.log("\u6a21\u5757",e,"\u8fdb\u5165\u4e0a\u62a5\u5931\u8d25",t)}})},t.prototype.event_module=function(e,t){1!=f.default.Instance.Web&&LWGSDK.reportModuleAction({module:e,index:t,modValue:0,success:function(){},fail:function(){}})},t.prototype.secede_module=function(e){1!=f.default.Instance.Web&&LWGSDK.reportModuleExit({module:e,success:function(){},fail:function(t){console.log("\u6a21\u5757",e,"\u9000\u51fa\u4e0a\u62a5\u5931\u8d25",t)}})},t.prototype.GetReady=function(){},t.prototype.ShareOrVideo=function(e,t,n){if(1==f.default.Instance.Web)return t(),void(_.default.Instance.isInterstitialAD||(v.default.Instance.videoLevel=v.default.Instance.BarbecueLv.length,y.default.Instance.updateLevel(v.default.Instance.BarbecueLv.length)));cc.director.pause(),f.default.Instance.TsInitial.ShowVideoShade(!0,!0);var o=null,a=g.default.Instance.GetUI(p.default);a&&(o=a.Lv),LWGSDK.showShareOrAdByLoc({loc:e,defaultChoice:1,location:o,success:function(e){cc.director.resume(),console.log("\u5206\u4eab/\u89c6\u9891\u6210\u529f,\u89c6\u9891\u906e\u7f69\u663e\u793a"+f.default.Instance.TsInitial.video_shade.active),1==f.default.Instance.TsInitial.video_shade.active&&(t(),f.default.Instance.TsInitial.ShowVideoShade(!1,!0),f.default.Instance.TsInitial.ShowTips(e.tips)),1==v.default.Instance.MusicSwitch&&(null==g.default.Instance.GetUI(p.default)?b.default.Instance.playmusic("BGM"):b.default.Instance.playmusic("g127_backgroundmusic")),_.default.Instance.isInterstitialAD||(v.default.Instance.videoLevel=v.default.Instance.BarbecueLv.length,y.default.Instance.updateLevel(v.default.Instance.BarbecueLv.length))},fail:function(e){cc.director.resume(),console.log("\u5206\u4eab/\u89c6\u9891\u5931\u8d25",e),n&&n(),f.default.Instance.TsInitial.ShowVideoShade(!1,!0),f.default.Instance.TsInitial.ShowTips(e.tips),1==v.default.Instance.MusicSwitch&&(null==g.default.Instance.GetUI(p.default)?b.default.Instance.playmusic("BGM"):b.default.Instance.playmusic("g127_backgroundmusic"))}})},t.prototype.stopShowVideo=function(){LWGSDK.stopShowVideo()},t.prototype.Share=function(e){1!=f.default.Instance.Web&&LWGSDK.showShareMenu({loc:e,callback:function(e){console.log("\u5206\u4eab\u56de\u8c03",e)}})},t.prototype.getUserInfo=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),f.default.Instance.UserName&&f.default.Instance.UserHead?e&&e():LWGSDK.getWxUserInfo({success:function(t){console.log("getUserInfo success",t),t.nickName&&(f.default.Instance.UserName=t.nickName),t.avatarUrl&&(f.default.Instance.UserHead=t.avatarUrl),e&&e(t),cc.systemEvent.emit(m.DistributedEvent.userInfoUpdate)},fail:function(e){console.log("getUserInfo fail",e),t&&t()}})},t.prototype.getABTestInfo=function(){LWGSDK.getABTestInfo({keys:["test_gift_package:test_gift_package_2"],success:function(e){console.log("ab\u63a7\u5236\u6240\u6709\u53c2\u6570=====",e),e&&e["test_gift_package:test_gift_package_2"]&&(_.default.Instance.ABTestInfo["test_gift_package:test_gift_package_2"]=e["test_gift_package:test_gift_package_2"])},fail:function(e){console.log("\u5b9e\u9a8c\u53c2\u6570\u6570\u7ec4\u5931\u8d25===========:",e)}})},t.prototype.getNewABTestInfo=function(){LWGSDK.getABTestInfo({keys:["Interstitial:Interstitial_Adv"],success:function(e){console.log("Interstitial_Adv=====",e),e&&e["Interstitial:Interstitial_Adv"]&&(_.default.Instance.ABTestInfo["Interstitial:Interstitial_Adv"]=e["Interstitial:Interstitial_Adv"])},fail:function(e){console.log("\u5b9e\u9a8c\u53c2\u6570\u6570\u7ec4\u5931\u8d25===========:",e)}})},t.prototype.getMultiTestABInfo=function(){LWGSDK.getABTestInfo({keys:["daily_challenge1:daily_challenge1"],success:function(e){console.log("daily_challenge1:daily_challenge1=====",e),e&&e["daily_challenge1:daily_challenge1"]&&(_.default.Instance.ABTestInfo["daily_challenge1:daily_challenge1"]=e["daily_challenge1:daily_challenge1"]),LWGSDK.getIpAndRegion({success:function(e){console.log("\u83b7\u53d6ip\u548c\u5730\u533a\u6210\u529f===========:",e),_.default.Instance.province=e.region},fail:function(e){console.log("\u83b7\u53d6ip\u548c\u5730\u533a\u5931\u8d25===========:",e)}})},fail:function(e){console.log("\u5b9e\u9a8c\u53c2\u6570\u6570\u7ec4\u5931\u8d25===========:",e)}})},t._instance=null,n=l([T],t)}(cc.Component));i.default=k,function(e){e.advertising_oven="advertising_oven",e.stale_mate="stale_mate",e.pick_up="pick_up",e.mess_up="mess_up",e.revive_gence="revive_gence",e.skip_order="skip_order",e.physical_strength="physical_strength",e.region_unlock="region_unlock",e.new_share="new_share",e.soliciting_customers="soliciting_customers",e.share_game="share_game",e.beginner_gift_pack_1="beginner_gift_pack_1",e.beginner_gift_pack_2="beginner_gift_pack_2",e.level_reward_pack="level_reward_pack",e.level_boost_pack="level_boost_pack",e.recover_winning="recover_winning",e.revoke="revoke",e.add_skewer="add_skewer",e.remove_food="remove_food",e.barbecue_model="barbecue_model",e.daily_challenge="daily_challenge",e.daily_challenge_revive="daily_challenge_revive"}(h=i.ShareLoc||(i.ShareLoc={})),cc._RF.pop(),cc._RF.pop()},{}],SettingInterface:[function(e,t,n){"use strict";cc._RF.push(t,"789e3Q5TTJI6LNxty9RVHDa","SettingInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"f4f239sIgZNhodZmuXExmYB","SettingInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("BarbecueStandInterface"),h=o("UIManager"),p=o("StoragerManager"),f=o("BarbecueReturnInterface"),_=o("InfoManager"),y=o("SoundManager"),b=o("GameManger"),v=o("TypeManager"),m=o("BarbecueAgainInterface"),g=o("moreClickUtil"),I=o("GMPanel"),T=o("JengaInterface"),k=o("JengaManager"),S=cc._decorator,w=S.ccclass,O=S.property,F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.container=null,t.music=null,t.sound=null,t.voice=null,t.btn_shake=null,t.btn_return=null,t.btn_replay=null,t.btn_ok=null,t.label_uid=null,t.btn_power_icon=null,t.moreClickUtil=null,t.restartBtn=null,t._btnLock=!1,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.restartBtn.on(cc.Node.EventType.TOUCH_END,this._restartBtnClick,this)},t.prototype.onUIDisable=function(){this.restartBtn.off(cc.Node.EventType.TOUCH_END,this._restartBtnClick,this)},t.prototype._restartBtnClick=function(){h.default.Instance.OpenUI(m.default,h.UIOrder.Window_2,this.ts),this.close()},t.prototype.onUIStart=function(){_.default.Instance.isDaren&&this.moreClickUtil.init(function(){h.default.Instance.OpenUI(I.default,h.UIOrder.Window_2)},2,.5),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_shake.on(cc.Node.EventType.TOUCH_END,this.change.bind(this,3)),this.btn_return.on(cc.Node.EventType.TOUCH_END,this.return,this),this.btn_replay.on(cc.Node.EventType.TOUCH_END,this.replay,this),this.btn_ok.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(e){var t=this;y.default.Instance.PlaySound("book_pop_open"),this.ts=e[0],null==this.ts?(this.btn_return.active=!1,this.btn_replay.active=!1,this.btn_ok.active=!0):(this.btn_return.active=!0,this.btn_replay.active=!0,this.btn_ok.active=!1),this.restartBtn.active=!1,b.default.Instance.gameType==v.GameType.challange&&(this.btn_return.active=!0,this.btn_replay.active=!1,this.btn_ok.active=!1,this.restartBtn.active=!0),this.draw(3),this._setSlider(this.music,p.default.Instance.musicVolume),this._setSlider(this.sound,p.default.Instance.soundVolume),this._setSlider(this.voice,p.default.Instance.voiceVolume),this.ani_popup.play("ani_tongyongtanchuang_open"),this.label_uid.string="UID:"+_.default.Instance.UserUid,b.default.Instance.isYuTinAB?(this.voice.node.parent.active=!0,this.container.height=840):(this.voice.node.parent.active=!1,this.container.height=810),b.default.Instance.gameType==v.GameType.jenga?this.btn_power_icon.active=!1:this.btn_power_icon.active=!0,k.default.Instance.isAuto&&(this._btnLock=!0,this.scheduleOnce(function(){cc.systemEvent.emit(v.DistributedEvent.jengaGameRestart),t.close()},2))},t.prototype.change=function(e){switch(e){case 1:p.default.Instance.MusicSwitch=!p.default.Instance.MusicSwitch,1==p.default.Instance.MusicSwitch?null==h.default.Instance.GetUI(d.default)?y.default.Instance.playmusic("BGM"):y.default.Instance.playmusic("g127_backgroundmusic"):y.default.Instance.stopmusic();break;case 2:p.default.Instance.SoundSwitch=!p.default.Instance.SoundSwitch;var t=h.default.Instance.GetUI(d.default);1==p.default.Instance.SoundSwitch?null!=t||b.default.Instance.ScenceArea==v.ScenceArea.doorway&&y.default.Instance.PlayLoop("bustling",!0,"bustling"):y.default.Instance.StopLoop();break;case 3:p.default.Instance.ShakeSwitch=!p.default.Instance.ShakeSwitch}this.draw(e)},t.prototype.draw=function(e){var t,n=!1;switch(e){case 3:t=this.btn_shake,n=p.default.Instance.ShakeSwitch}if(t){var o=t.getChildByName("open"),a=t.getChildByName("close");o.active=n,a.active=!n}},t.prototype.return=function(){this._btnLock&&this.return,b.default.Instance.gameType==v.GameType.jenga?(h.default.Instance.DestroyUI(T.default),this.close()):h.default.Instance.OpenUI(f.default,h.UIOrder.Window_2,1)},t.prototype.replay=function(){this._btnLock&&this.return,b.default.Instance.gameType==v.GameType.jenga?(cc.systemEvent.emit(v.DistributedEvent.jengaGameRestart),this.close()):(h.default.Instance.OpenUI(m.default,h.UIOrder.Window_2,this.ts),this.close())},t.prototype._setSlider=function(e,t){e&&e.node&&e.node.isValid&&(t=Math.min(1,t),t=Math.max(0,t),e.progress=t,this._setSliderMask(e.node,t))},t.prototype._setSliderMask=function(e,t){if(e){var n=314*t;e.getChildByName("mask").setContentSize(n,40)}},t.prototype.sliderEvent=function(e,t){var n=e.progress.toFixed(1);"sound"==t?p.default.Instance.soundVolume=Number(n):"music"==t?(p.default.Instance.musicVolume=Number(n),y.default.Instance.setMusicVolume(p.default.Instance.musicVolume)):"voice"==t&&(p.default.Instance.voiceVolume=Number(n)),this._setSliderMask(e.node,Number(n))},t.prototype.close=function(){var e=this;this._btnLock&&this.return,1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),b.default.Instance.gameType==v.GameType.jenga?h.default.Instance.DestroyUI(n):this.scheduleOnce(function(){e.ts&&e.ts.GameStop(!1),e.ts&&e.ts.restoreAuto(),h.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle1Pre",t.prefabUrl="SettingPre/SettingPre",t.className="SettingInterface",l([O(cc.Animation)],t.prototype,"ani_popup",void 0),l([O(cc.Node)],t.prototype,"btn_close",void 0),l([O(cc.Node)],t.prototype,"container",void 0),l([O(cc.Slider)],t.prototype,"music",void 0),l([O(cc.Slider)],t.prototype,"sound",void 0),l([O(cc.Slider)],t.prototype,"voice",void 0),l([O(cc.Node)],t.prototype,"btn_shake",void 0),l([O(cc.Node)],t.prototype,"btn_return",void 0),l([O(cc.Node)],t.prototype,"btn_replay",void 0),l([O(cc.Node)],t.prototype,"btn_ok",void 0),l([O(cc.Label)],t.prototype,"label_uid",void 0),l([O(cc.Node)],t.prototype,"btn_power_icon",void 0),l([O(g.default)],t.prototype,"moreClickUtil",void 0),l([O(cc.Node)],t.prototype,"restartBtn",void 0),n=l([w],t)}(u.default);i.default=F,cc._RF.pop(),cc._RF.pop()},{}],ShopAwardInterface:[function(e,t,n){"use strict";cc._RF.push(t,"53a92ApEOJMqb765hrSZFi/","ShopAwardInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"21b38SIgXBIPKIJSDR+IoRX","ShopAwardInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("BundleManger"),f=o("DataManager"),_=o("GameManger"),y=o("PoolManager"),b=o("SoundManager"),v=o("StoragerManager"),m=o("TypeManager"),g=o("UIManager"),I=cc._decorator,T=I.ccclass,k=I.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.label_tips=null,t.btn_close=null,t.layout=null,t._closeCb=null,t._openType=0,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.click_close,this)},t.prototype.onInit=function(e){return u(this,void 0,void 0,function(){var t,n,o=this;return d(this,function(){if(this.award=e[0],this.label_tips.string=e[1],this._closeCb=e[2],this._openType=e[3],1==this._openType)for(v.default.Instance.activityRewards=null,n=0;n<this.award.length;n++)(t=this.award[n])&&(-1!=t.type.indexOf("prop_")?null==v.default.Instance.BarbecueProp[t.type]?v.default.Instance.BarbecueProp[t.type]=t.value:v.default.Instance.BarbecueProp[t.type]+=t.value:"gold"==t.type&&(v.default.Instance.GoldNum+=t.value));for(n=0;n<this.award.length;n++)if(this.award[n]){switch(this.award[n].type){case"power":this.layout.children[n].children[2].getComponent(cc.Label).string="\u4f53\u529b",p.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/icon_5",this.layout.children[n].children[0]),this.layout.children[n].children[0].setScale(1);break;case"gold":this.layout.children[n].children[2].getComponent(cc.Label).string="\u91d1\u5e01",p.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/icon_6",this.layout.children[n].children[0]),this.layout.children[n].children[0].setScale(1);break;case"prop_1":this.layout.children[n].children[2].getComponent(cc.Label).string="\u6253\u5305\u9053\u5177",p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_11",this.layout.children[n].children[0]),this.layout.children[n].children[0].setScale(.7);break;case"prop_2":this.layout.children[n].children[2].getComponent(cc.Label).string="\u6253\u4e71\u9053\u5177",p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_12",this.layout.children[n].children[0]),this.layout.children[n].children[0].setScale(.7);break;case"prop_3":this.layout.children[n].children[2].getComponent(cc.Label).string="\u878d\u5316\u9053\u5177",p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_13",this.layout.children[n].children[0]),this.layout.children[n].children[0].setScale(.7);break;case"kebabs":this.layout.children[n].children[2].getComponent(cc.Label).string=f.default.Instance.KebabsConfig[this.award[n].value-1].name,p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+this.award[n].value,this.layout.children[n].children[0]),this.layout.children[n].children[0].setScale(.6),cc.systemEvent.emit(m.DistributedEvent.updateSkinRed);break;case"star":this.layout.children[n].children[2].getComponent(cc.Label).string="\u661f\u661f",p.default.Instance.LoadSpriteFrame(m.BundleName.Bundle1UI,"CommonUI/common/icon_12",this.layout.children[n].children[0]),this.layout.children[n].children[0].setScale(1),p.default.Instance.LoadSpriteFrame(m.BundleName.Bundle1UI,"BarbecueOverUI/icon_bg5",this.layout.children[n]);break;case"midAutumn":this.layout.getComponent(cc.Layout).enabled=!1,this.layout.children[n].children[2].getComponent(cc.Label).string="\u4e2d\u79cb\u9650\u5b9a\u76ae\u80a4",p.default.Instance.LoadSpriteFrame(m.BundleName.Bundle1UI_Challange,"reward_icon",this.layout.children[n].children[0]),this.layout.children[n].children[0].setScale(1),p.default.Instance.LoadSpriteFrame(m.BundleName.Bundle1UI_Challange,"kaung_light",this.layout.children[n]),this.layout.children[n]&&this.layout.children[n].setPosition(0,-80),this.btn_close&&this.btn_close.parent.setPosition(0,-260),this.layout.children[n].setScale(.8),this.layout.children[n].children[2].setScale(1.25),this.layout.children[n].children[2].y-=20}"kebabs"==this.award[n].type||"midAutumn"==this.award[n].type?this.layout.children[n].children[1].getComponent(cc.Label).string="":this.layout.children[n].children[1].getComponent(cc.Label).string="x"+this.award[n].value,this.layout.children[n].active=!0}return this.btn_close.active=!1,cc.tween(this).delay(2).call(function(){o.btn_close.active=!0,205==_.default.Instance.GudieStep&&_.default.Instance.GudieStep++}).start(),b.default.Instance.PlaySound("g127_congratulations"),[2]})})},t.prototype.award_eff=function(){for(var e=0;e<this.award.length;e++){var t=this.layout.children[e].convertToWorldSpaceAR(cc.v2(0,0)),n=this.node.parent.convertToNodeSpaceAR(t);switch(this.award[e].type){case"power":y.default.Instance.PlayCurrencyEffects2(2,n,cc.v2(-170,580+_.default.Instance.ScreenAdaptive),null);break;case"gold":y.default.Instance.PlayCurrencyEffects2(1,n,cc.v2(20,580+_.default.Instance.ScreenAdaptive),null);break;case"prop_1":1==this._openType?y.default.Instance.PlayNodeEffect(3,n,cc.v2(0,-587),1200,null):y.default.Instance.PlayNodeEffect(3,n,cc.v2(-219,-587),1200,null);break;case"prop_2":this._openType,y.default.Instance.PlayNodeEffect(4,n,cc.v2(0,-587),1200,null);break;case"prop_3":1==this._openType?y.default.Instance.PlayNodeEffect(5,n,cc.v2(0,-587),1200,null):y.default.Instance.PlayNodeEffect(5,n,cc.v2(219,-587),1200,null);break;case"star":this._openType,y.default.Instance.PlayNodeEffect(6,n,cc.v2(0,580),1200,null)}}},t.prototype.click_close=function(){1!=this.is_close&&(this.is_close=!0,this.award_eff(),this.ani_popup.play("ani_popup_close"),this._closeCb&&this._closeCb(),this.scheduleOnce(function(){g.default.Instance.DestroyUI(n),206==_.default.Instance.GudieStep&&_.default.Instance.GudieStep++},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="ShopLvPre/ShopAwardPre",t.className="ShopAwardInterface",l([k(cc.Animation)],t.prototype,"ani_popup",void 0),l([k(cc.Label)],t.prototype,"label_tips",void 0),l([k(cc.Node)],t.prototype,"btn_close",void 0),l([k(cc.Node)],t.prototype,"layout",void 0),n=l([T],t)}(h.default);i.default=S,cc._RF.pop(),cc._RF.pop()},{}],ShopLvInterface:[function(e,t,n){"use strict";cc._RF.push(t,"4d823cTeKNGtrTp4G3hy9zU","ShopLvInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"15d758WzuZM8p8K4XNnxCoq","ShopLvInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("UIBase"),p=o("BundleManger"),f=o("DataManager"),_=o("FunctionManager"),y=o("GameManger"),b=o("InfoManager"),v=o("PoolManager"),m=o("StoragerManager"),g=o("TypeManager"),I=o("UIManager"),T=o("ShopAwardInterface"),k=cc._decorator,S=k.ccclass,w=k.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.btn_close=null,t.label_lv=null,t.label_progress=null,t.icon_bar=null,t.btn_upgrade=null,t.icon_prop=null,t.tips_maxlv=null,t.label_power=null,t.label_gold=null,t.label_prop=null,t.facility_num=0,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_upgrade.on(cc.Node.EventType.TOUCH_END,this.click_upgrade,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.click_close,this)},t.prototype.onInit=function(){return u(this,void 0,void 0,function(){return d(this,function(){return m.default.Instance.ShopLv<f.default.Instance.ShopUpgradeData.length?(this.shop_data=f.default.Instance.ShopUpgradeData[m.default.Instance.ShopLv],this.label_lv.string=""+m.default.Instance.ShopLv,this.label_progress.string=y.default.Instance.BarbecueStar+"/"+this.shop_data.upgrade_condition,this.icon_bar.width=360*Math.min(y.default.Instance.BarbecueStar/this.shop_data.upgrade_condition,1),this.label_power.string="x"+this.shop_data.power_num,this.label_gold.string="x"+this.shop_data.gold_num,this.label_prop.string="x"+this.shop_data.prop_num,this.ani_popup.play("ani_popup_open"),p.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_"+(10+this.shop_data.prop_id),this.icon_prop),y.default.Instance.BarbecueStar<this.shop_data.upgrade_condition&&(p.default.Instance.LoadSpriteFrame("Bundle1UI","CommonUI/common/btn_bg13",this.btn_upgrade),p.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/text_3",this.btn_upgrade.children[0]),this.btn_upgrade.children[1].active=!1),this.tips_maxlv.active=!1):(this.label_progress.string=""+y.default.Instance.BarbecueStar,this.icon_bar.width=360,this.icon_prop.parent.parent.active=!1,this.btn_upgrade.active=!1,this.tips_maxlv.active=!0),202==y.default.Instance.GudieStep&&(y.default.Instance.GudieStep++,this.node.on(cc.Node.EventType.TOUCH_END,function(){203==y.default.Instance.GudieStep&&y.default.Instance.GudieStep++},this,!0)),[2]})})},t.prototype.click_upgrade=function(){if(y.default.Instance.BarbecueStar<this.shop_data.upgrade_condition)return b.default.Instance.TsInitial.ShowTips("\u4e0d\u6ee1\u8db3\u5347\u7ea7\u6761\u4ef6");m.default.Instance.ShopLv+=1,m.default.Instance.BarbecuePower+=this.shop_data.power_num,m.default.Instance.GoldNum+=this.shop_data.gold_num;var e=[{type:"power",value:this.shop_data.power_num},{type:"gold",value:this.shop_data.gold_num}];if(this.shop_data.prop_num>0&&this.shop_data.prop_id>0&&(null==m.default.Instance.BarbecueProp["prop_"+this.shop_data.prop_id]?m.default.Instance.BarbecueProp["prop_"+this.shop_data.prop_id]=this.shop_data.prop_num:m.default.Instance.BarbecueProp["prop_"+this.shop_data.prop_id]+=this.shop_data.prop_num,e.push({type:"prop_"+this.shop_data.prop_id,value:this.shop_data.prop_num})),cc.systemEvent.emit(g.DistributedEvent.shop_lv),cc.systemEvent.emit(g.DistributedEvent.shop_red),cc.systemEvent.emit(g.DistributedEvent.illustration),v.default.Instance.TipsCelebrate(1),204==y.default.Instance.GudieStep&&y.default.Instance.GudieStep++,cc.systemEvent.emit(g.DistributedEvent.task),this.shop_data.add_kebabs>0)for(var t=_.default.Instance.UnlockKebabsNum(),n=0;n<this.shop_data.add_kebabs;n++)e.push({type:"kebabs",value:t-n});var o=m.default.Instance.BarbecueLv.length+1;LWGSDK.reportGeneralAction({context:"",actionName:"FacilityUpgrade",actNum1:m.default.Instance.ShopLv,actNum2:o,success:function(){},fail:function(){}}),m.default.Instance.AutoSyncData(),I.default.Instance.OpenUI(T.default,I.UIOrder.Window_2,e,"\u5e97\u94fa\u5347\u7ea7"),this.click_close()},t.prototype.click_close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_popup_close"),this.scheduleOnce(function(){I.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="ShopLvPre/ShopLvPre",t.className="ShopLvInterface",l([w(cc.Animation)],t.prototype,"ani_popup",void 0),l([w(cc.Node)],t.prototype,"btn_close",void 0),l([w(cc.Label)],t.prototype,"label_lv",void 0),l([w(cc.Label)],t.prototype,"label_progress",void 0),l([w(cc.Node)],t.prototype,"icon_bar",void 0),l([w(cc.Node)],t.prototype,"btn_upgrade",void 0),l([w(cc.Node)],t.prototype,"icon_prop",void 0),l([w(cc.Node)],t.prototype,"tips_maxlv",void 0),l([w(cc.Label)],t.prototype,"label_power",void 0),l([w(cc.Label)],t.prototype,"label_gold",void 0),l([w(cc.Label)],t.prototype,"label_prop",void 0),n=l([S],t)}(h.default);i.default=O,cc._RF.pop(),cc._RF.pop()},{}],SkinBgItem:[function(e,t,n){"use strict";cc._RF.push(t,"6a313In4X9PMIZGPuxf7wLW","SkinBgItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"be8c1tOsYdGiay+r+CSpNnp","SkinBgItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("SkinManager"),h=o("StoragerManager"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lock=null,t.title=null,t.icon=null,t.select=null,t._data=null,t._clickCb=null,t._titles=[],t._isSelect=!1,t._isUnLock=!1,t}return s(t,e),Object.defineProperty(t.prototype,"IsSelect",{get:function(){return this._isSelect},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ID",{get:function(){return this._data&&this._data.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Source",{get:function(){return this._data&&this._data.Source},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsLock",{get:function(){return!this._data||!h.default.Instance.bgIds.includes(this.ID)&&1!=this.Source},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this._nodeClick,this),cc.systemEvent.on(p.DistributedEvent.selectBg,this._selectBgEvent,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this._nodeClick,this),cc.systemEvent.off(p.DistributedEvent.selectBg,this._selectBgEvent,this)},t.prototype._selectBgEvent=function(){var e=h.default.Instance.curBg==this.ID;this.showSelect(e)},t.prototype._nodeClick=function(){this._clickCb&&this._clickCb(this)},t.prototype.refresh=function(e,t){void 0===t&&(t=null),this._data=e,this._clickCb=t;var n=e.id,o=!h.default.Instance.bgIds.includes(n)&&1!=e.Source,a=this.lock.getComponent(cc.Animation);this.lock.active=!0,o?a.play("ani_kebabItem_lock"):d.default.Instance.tempNewLockBg.includes(n)?a.play("ani_kebabItem_unlock"):this.lock.active=!1,u.default.Instance.LoadSpriteFrame(p.BundleName.SkinUI,"bg/bg_"+n,this.icon),this.title.removeAllChildren();var i=d.default.Instance.titlePrefab[e.Source];if(i&&this.title&&this.title.isValid){this._titles.push(e.Source);var r=cc.instantiate(i),c=r.getChildByName("descLabel");c&&(c.getComponent(cc.Label).string=e.name),this.title.addChild(r),r.setPosition(r.width/2,-r.height/2)}var s=h.default.Instance.curBg==n;this.showSelect(s)},t.prototype.showSelect=function(e){this._isSelect=e,this.select.active=e},l([y(cc.Node)],t.prototype,"lock",void 0),l([y(cc.Node)],t.prototype,"title",void 0),l([y(cc.Node)],t.prototype,"icon",void 0),l([y(cc.Node)],t.prototype,"select",void 0),l([_],t)}(cc.Component);i.default=b,cc._RF.pop(),cc._RF.pop()},{}],SkinInterface:[function(e,t,n){"use strict";cc._RF.push(t,"c52fa1xZdhKh6AyArlfWd9+","SkinInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"c0c48vOTLZKFbIyR1Cgc7Jj","SkinInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h,p,f=o("UIBase"),_=o("BundleManger"),y=o("DataManager"),b=o("FunctionManager"),v=o("GameManger"),m=o("InfoManager"),g=o("SkinManager"),I=o("StoragerManager"),T=o("TypeManager"),k=o("UIManager"),S=o("List"),w=o("KebabListItem"),O=o("SkinBgItem"),F=o("SkinTableItem"),B=o("SkinRuleInterface");(function(e){e[e.none=-1]="none",e[e.kebab=0]="kebab",e[e.bg=1]="bg",e[e.table=2]="table"})(h||(h={})),function(e){e[e.none=-1]="none",e[e.all=0]="all",e[e.unlock=1]="unlock",e[e.lock=2]="lock",e[e.activity=3]="activity"}(p||(p={}));var x=cc._decorator,P=x.ccclass,C=x.property,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._curTag=h.none,t._curCondition=p.none,t.ani_popup=null,t.closeBtn=null,t.ruleBtn=null,t.lists=[],t.scrollViews=[],t.kebabListContent=null,t.bottom=null,t.typeTag=null,t.conditionTag=null,t.bgIcon=null,t.tableIcon=null,t.kebabList=null,t.guide=null,t.fingerBg=null,t._bgConfigs=[],t._tableConfigs=[],t._nowDataLists=[],t._kebabdatas={},t._kebabShowOrders=[4,3,5,1,0,2,7,6,8],t._kebabShowOrders2=[4,3,5],t._kebabShowIds=[0,0,0,0,0,0,0,0,0],t._nowReplaceNum=0,t._isNeedGuide=!1,t._guideSelectId=-1,t._tween=null,t._guideId=0,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.closeBtn.on(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this),this.ruleBtn.on(cc.Node.EventType.TOUCH_END,this._ruleBtnClick,this),this.fingerBg.on(cc.Node.EventType.TOUCH_END,this._fingerBgClick,this);for(var e=0;e<this.typeTag.childrenCount;e++)(t=this.typeTag.children[e])&&t.on(cc.Node.EventType.TOUCH_END,this._typeTagClick.bind(this,e,!0),this);for(e=0;e<this.conditionTag.childrenCount;e++){var t;(t=this.conditionTag.children[e])&&t.on(cc.Node.EventType.TOUCH_END,this._conditionTagClick.bind(this,e,!0),this)}for(e=0;e<this.scrollViews.length;e++){var n=this.scrollViews[e];n&&(n.on(cc.Node.EventType.TOUCH_START,this._touchStart,this),n.on(cc.Node.EventType.TOUCH_MOVE,this._touchMove,this))}cc.systemEvent.on(T.DistributedEvent.selectKebab,this._selectKababEvent,this)},t.prototype.onUIDisable=function(){this.closeBtn.off(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this),this.ruleBtn.off(cc.Node.EventType.TOUCH_END,this._ruleBtnClick,this),this.fingerBg.off(cc.Node.EventType.TOUCH_END,this._fingerBgClick,this);for(var e=0;e<this.typeTag.childrenCount;e++)(t=this.typeTag.children[e])&&t.off(cc.Node.EventType.TOUCH_END,this._typeTagClick,this);for(e=0;e<this.conditionTag.childrenCount;e++){var t;(t=this.conditionTag.children[e])&&t.off(cc.Node.EventType.TOUCH_END,this._conditionTagClick,this)}for(e=0;e<this.scrollViews.length;e++){var n=this.scrollViews[e];n&&(n.off(cc.Node.EventType.TOUCH_START,this._touchStart,this),n.off(cc.Node.EventType.TOUCH_MOVE,this._touchMove,this))}cc.systemEvent.off(T.DistributedEvent.selectKebab,this._selectKababEvent,this)},t.prototype.onInit=function(e){this._isNeedGuide=e[0]},t.prototype._touchStart=function(){g.default.Instance.scollingY=0},t.prototype._touchMove=function(e){g.default.Instance.scollingY+=Math.abs(e.getDeltaY())},t.prototype._closeBtnClick=function(){this.close()},t.prototype._ruleBtnClick=function(){k.default.Instance.OpenUI(B.default,k.UIOrder.Window_2)},t.prototype._fingerBgClick=function(){2!=this._guideId||this._tween||this._hideGuide()},t.prototype._typeTagClick=function(e){this._curTag!=e&&this._updateTypeTag(e)},t.prototype._conditionTagClick=function(e){this._curCondition!=e&&this._updateConditionTag(e)},t.prototype._selectKababEvent=function(e){if(e){var t=!e.IsSelect,n=e.ID;if(1==this._guideId&&this._doGuide(2),t?I.default.Instance.addSelectKebab(n):I.default.Instance.removeSelectKebab(n),e.showSelect(t),t){for(var o=!1,a=0;a<this._kebabShowOrders.length;a++){var i=this._kebabShowOrders[a];if(!this._kebabShowIds[i]&&(c=this.kebabList.children[i])){this._kebabShowIds[i]=n,_.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+n,c),o=!0;break}}if(!o){var r=this._nowReplaceNum%this._kebabShowOrders2.length;i=this._kebabShowOrders2[r],(c=this.kebabList.children[i])&&(this._kebabShowIds[i]=n,_.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+n,c),this._nowReplaceNum++)}}else{var c,s=this._kebabShowIds.indexOf(n);-1!=s&&(c=this.kebabList.children[s])&&(c.getComponent(cc.Sprite).spriteFrame=null,this._kebabShowIds[s]=0)}}},t.prototype.onUIStart=function(){return u(this,void 0,void 0,function(){var e,t,n,o,a;return d(this,function(i){switch(i.label){case 0:return e=b.default.Instance.UnlockKebabsNum(),g.default.Instance.tempNewLockKebab=[].concat(I.default.Instance.newUnlockKebab),g.default.Instance.tempNewLockBg=[].concat(I.default.Instance.newBg),g.default.Instance.tempNewLockTable=[].concat(I.default.Instance.newTable),I.default.Instance.oldKebakNum=e,this.bottom.y-=v.default.Instance.ScreenAdaptive2,t=g.default.Instance.titlePrefab,n=T.KebabsSource.common,[4,_.default.Instance.LoadPrefab("prefabs/commonTitleItem",T.BundleName.SkinPre)];case 1:return t[n]=i.sent(),o=g.default.Instance.titlePrefab,a=T.KebabsSource.midAutumn,[4,_.default.Instance.LoadPrefab("prefabs/activityTitleItem",T.BundleName.SkinPre)];case 2:return o[a]=i.sent(),this._initView(),[2]}})})},t.prototype._initView=function(){this._isNeedGuide?this._doGuide(1):this.guide.active=!1,this._bgConfigs=[].concat(y.default.Instance.bgConfig),this._tableConfigs=[].concat(y.default.Instance.tableConfig);for(var e=[],t=[],n=b.default.Instance.UnlockKebabsNum(),o=0;o<y.default.Instance.KebabsConfig.length;o++){var a=y.default.Instance.KebabsConfig[o];if(a){var i=a.Source;this._kebabdatas[i]||(this._kebabdatas[i]={});var r="lock";i==T.KebabsSource.common?a.id<=n&&(r="unlock",a.id<=20?e.push(a):t.push(a)):i==T.KebabsSource.midAutumn&&I.default.Instance.unlockKebabs.includes(a.id)&&(r="unlock"),this._kebabdatas[i][r]||(this._kebabdatas[i][r]=[]),this._kebabdatas[i][r].push(a),this._kebabdatas[i].all||(this._kebabdatas[i].all=[]),this._kebabdatas[i].all.push(a)}}for(this._kebabdatas[T.KebabsSource.common].unlock=[].concat(t,e),this._updateTypeTag(h.kebab),this._setBgIcon(I.default.Instance.curBg),this._setTableIcon(I.default.Instance.curTable),o=0;o<this.typeTag.childrenCount;o++)this._updateRed(o);I.default.Instance.openSkin=!0,I.default.Instance.AutoSyncData()},t.prototype._updateTypeTag=function(e){if(this._curTag!=e){this._curTag==h.kebab?g.default.Instance.tempNewLockKebab=[]:this._curTag==h.bg?g.default.Instance.tempNewLockBg=[]:this._curTag==h.table&&(g.default.Instance.tempNewLockTable=[]),this._curTag=e;for(var t=0;t<this.scrollViews.length;t++){var n=this.scrollViews[t],o=!1;t==e?(o=!0,n.active=!0):n.active=!1;var a=this.typeTag.children[t];this._setTypeItemSelect(a,o)}e==h.kebab?I.default.Instance.newUnlockKebab=[]:e==h.bg?I.default.Instance.newBg=[]:e==h.table&&(I.default.Instance.newTable=[]),g.default.Instance.scollingY=0,this._curCondition=p.none,this._updateConditionTag(p.all),this._updateRed(e),cc.systemEvent.emit(T.DistributedEvent.updateSkinRed)}},t.prototype._updateConditionTag=function(e){if(this._curCondition!=e){this._curCondition=e;for(var t=0;t<this.conditionTag.children.length;t++){var n=this.conditionTag.children[t],o=!1;t==e&&(o=!0),this._setConditionItemSelect(n,o)}if(this._curTag!=h.kebab){var a=[];this._curTag==h.bg?a=[].concat(this._bgConfigs):this._curTag==h.table&&(a=[].concat(this._tableConfigs));var i=[];if(e==p.all){var r=[],c=[];for(t=0;t<a.length;t++)if(s=a[t]){if(!v.default.Instance.isDayChallange&&s.Source==T.KebabsSource.midAutumn)continue;this._curTag==h.bg?I.default.Instance.bgIds.includes(s.id)?r.push(s):c.push(s):this._curTag==h.table&&(I.default.Instance.tableIds.includes(s.id)?r.push(s):c.push(s))}i=[].concat(r,c)}else for(t=0;t<a.length;t++){var s;if(s=a[t]){if(!v.default.Instance.isDayChallange&&s.Source==T.KebabsSource.midAutumn)continue;e==p.lock?I.default.Instance.unlockKebabs.includes(s.id)||1==s.Source||i.push(s):e==p.unlock?(I.default.Instance.unlockKebabs.includes(s.id)||1==s.Source)&&i.push(s):e==p.activity&&2==s.Source&&i.push(s)}}this._nowDataLists=i,this.lists[this._curTag].numItems=this._nowDataLists.length,this.lists[this._curTag].scrollView.scrollToTop(.02)}else this.onKebabListRender(this._curCondition)}},t.prototype._setConditionItemSelect=function(e,t){var n=e.getChildByName("select"),o=e.getChildByName("unselect");n.active=t,o.active=!t},t.prototype._setTypeItemSelect=function(e,t){if(e&&e.isValid){var n=e.getChildByName("unlock"),o=e.getChildByName("lock");n.active=t,o.active=!t}},t.prototype.onKebabListRender=function(e){var t=this,n=[];e==p.all||e==p.unlock||e==p.lock||e==p.activity&&n.push(1),v.default.Instance.isDayChallange||n.push(0);for(var o=this.kebabListContent.childrenCount,a=0;a<o;a++){var i=this.kebabListContent.children[a];if(n.includes(a))i.active=!1;else{i.active=!0;var r=[],c=null;if(0==a?c=this._kebabdatas[T.KebabsSource.midAutumn]:1==a&&(c=this._kebabdatas[T.KebabsSource.common]),c)if(e==p.all){var s=c.unlock?c.unlock:[],l=c.lock?c.lock:[];r=[].concat(s,l)}else e==p.unlock?r=c.unlock:e==p.lock?r=c.lock:e==p.activity&&0==a&&(r=c.all);r=r||[],i.getComponent(w.default).initItem(r)}}if(this._guideId){var u=0;this._kebabdatas&&this._kebabdatas[T.KebabsSource.midAutumn]&&this._kebabdatas[T.KebabsSource.midAutumn].unlock?(u=0,this._guideSelectId=this._kebabdatas[T.KebabsSource.midAutumn].unlock[0].id):(u=360,this._guideSelectId=21),this.scheduleOnce(function(){t.scrollViews[0].getComponent(cc.ScrollView).scrollToOffset(cc.v2(0,u),.1)},.01)}},t.prototype.onBgListRender=function(e,t){var n=e.getComponent(O.default),o=this._nowDataLists[t];o&&n.refresh(o,this._bgClickEvent.bind(this))},t.prototype.onTableListRender=function(e,t){var n=e.getComponent(F.default),o=this._nowDataLists[t];o&&n.refresh(o,this._tableClickEvent.bind(this))},t.prototype._bgClickEvent=function(e){g.default.Instance.scollingLimitY<=g.default.Instance.scollingY||e&&(e.IsLock?e.Source==T.KebabsSource.midAutumn?m.default.Instance.TsInitial.ShowTips("\u5b8c\u6210\u4e2d\u79cb\u6d3b\u52a8\u89e3\u9501"):e.Source==T.KebabsSource.common&&m.default.Instance.TsInitial.ShowTips("\u5347\u7ea7\u5ba2\u6808\u7b49\u7ea7\u89e3\u9501"):I.default.Instance.curBg!=e.ID&&(I.default.Instance.curBg=e.ID,this._setBgIcon(),cc.systemEvent.emit(T.DistributedEvent.selectBg,e.ID)))},t.prototype._tableClickEvent=function(e){g.default.Instance.scollingLimitY<=g.default.Instance.scollingY||e&&(e.IsLock?e.Source==T.KebabsSource.midAutumn?m.default.Instance.TsInitial.ShowTips("\u5b8c\u6210\u4e2d\u79cb\u6d3b\u52a8\u89e3\u9501"):e.Source==T.KebabsSource.common&&m.default.Instance.TsInitial.ShowTips("\u5347\u7ea7\u5ba2\u6808\u7b49\u7ea7\u89e3\u9501"):I.default.Instance.curTable!=e.ID&&(I.default.Instance.curTable=e.ID,this._setTableIcon(),cc.systemEvent.emit(T.DistributedEvent.selectTable,e.ID)))},t.prototype._kebabClickEvent=function(){},t.prototype._setBgIcon=function(e){void 0===e&&(e=I.default.Instance.curBg);var t=g.default.Instance.getBgUrl(I.default.Instance.curBg);_.default.Instance.LoadSpriteFrame(t.bundle,t.url,this.bgIcon)},t.prototype._setTableIcon=function(e){void 0===e&&(e=I.default.Instance.curTable);var t=g.default.Instance.getTableUrl(I.default.Instance.curTable);_.default.Instance.LoadSpriteFrame(t.bundle,t.url,this.tableIcon)},t.prototype._doGuide=function(e){var t=this;this.guide.active=!0;var n=this.guide.getChildByName("talk"),o=n.getChildByName("talkLabel").getComponent(cc.Label),a=this.guide.getChildByName("mask"),i=this.guide.getChildByName("finger"),r=this.guide.getChildByName("maskTouch");if(a.setContentSize(1e3,2e3),this._tween&&this._tween.stop(),this._tween=null,this._guideId=e,n.active=!1,i.active=!1,r.active=!1,1==e){r.active=!0,this.guide.getComponent(cc.BlockInputEvents).enabled=!0,a.active=!0;var c=cc.v3(-249,-250-v.default.Instance.ScreenAdaptive2);a.setPosition(c),i.setPosition(c),n.setPosition(c.x,c.y+100),r.setPosition(c),r.setContentSize(131,131),this._tween=cc.tween(a).to(.3,{width:131,height:131}).call(function(){r.on(cc.Node.EventType.TOUCH_END,t._maskTouchClick,t),t.guide.getComponent(cc.BlockInputEvents).enabled=!1,i.active=!0,n.active=!0,o.string="\u8bbe\u4e3a\u504f\u7231\u70e4\u4e32\u540e\n\u5728\u5173\u5361\u4e2d\u4f1a\u66f4\u9891\u7e41\u51fa\u73b0\u54e6\uff01"}).start()}else if(2==e){this.guide.getComponent(cc.BlockInputEvents).enabled=!0,a.active=!0,c=this.kebabList.children[4].position.clone();var s=this.kebabList.parent.convertToWorldSpaceAR(c),l=this.node.convertToNodeSpaceAR(s);i.setPosition(l),n.setPosition(l.x,l.y+100),a.setPosition(l.x,l.y),this._tween=cc.tween(a).to(.3,{width:220,height:160}).call(function(){t.guide.getComponent(cc.BlockInputEvents).enabled=!1,i.active=!0,n.active=!0,o.string="\u5728\u8fd9\u91cc\u53ef\u4ee5\u9884\u89c8\u88c5\u626e\u6548\u679c",t._tween=null,t.scheduleOnce(function(){t._hideGuide()},2)}).start()}},t.prototype._maskTouchClick=function(){console.error("\u5f15\u5bfc\u70b9\u51fb\u4e00\u4e2a\u70e4\u4e32 \u5b8c\u6210\u5f15\u5bfc"),this.guide.getChildByName("maskTouch").off(cc.Node.EventType.TOUCH_END,this._maskTouchClick,this),cc.systemEvent.emit(T.DistributedEvent.skinGuideId,this._guideSelectId)},t.prototype._updateRed=function(e){var t=this.typeTag.children[e];if(t&&t.isValid){var n=t.getChildByName("red");if(n&&n.isValid){var o=!1;0==e?o=I.default.Instance.newUnlockKebab.length>0:1==e?o=I.default.Instance.newBg.length>0:2==e&&(o=I.default.Instance.newTable.length>0),n.active=o}}},t.prototype._hideGuide=function(){this.guide&&this.guide.isValid&&(this.guide.active=!1)},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,k.default.Instance.DestroyUI(n))},t.bundleName=T.BundleName.SkinPre,t.prefabUrl="prefabs/SkinPre",t.className="SkinInterface",l([C(cc.Animation)],t.prototype,"ani_popup",void 0),l([C(cc.Node)],t.prototype,"closeBtn",void 0),l([C(cc.Node)],t.prototype,"ruleBtn",void 0),l([C([S.default])],t.prototype,"lists",void 0),l([C([cc.Node])],t.prototype,"scrollViews",void 0),l([C(cc.Node)],t.prototype,"kebabListContent",void 0),l([C(cc.Node)],t.prototype,"bottom",void 0),l([C({type:cc.Node,tooltip:"\u6807\u7b7e--\u4e0b\u6807\u5bf9\u5e94  0:\u70e4\u4e32 1:\u80cc\u666f 2:\u684c\u9762"})],t.prototype,"typeTag",void 0),l([C({type:cc.Node,tooltip:"\u6807\u7b7e--\u4e0b\u6807\u5bf9\u5e94 0:\u5168\u4e0d 1:\u89e3\u9501 2:\u672a\u89e3\u9501 3:\u6d3b\u52a8"})],t.prototype,"conditionTag",void 0),l([C(cc.Node)],t.prototype,"bgIcon",void 0),l([C(cc.Node)],t.prototype,"tableIcon",void 0),l([C(cc.Node)],t.prototype,"kebabList",void 0),l([C(cc.Node)],t.prototype,"guide",void 0),l([C(cc.Node)],t.prototype,"fingerBg",void 0),n=l([P],t)}(f.default);i.default=R,cc._RF.pop(),cc._RF.pop()},{}],SkinKebabItem:[function(e,t,n){"use strict";cc._RF.push(t,"de65fczjLhBPIQ49ZYormoC","SkinKebabItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"09b30oP8gNAfK02+IKWoGv8","SkinKebabItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("InfoManager"),p=o("SkinManager"),f=o("StoragerManager"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lock=null,t.icon=null,t.noselect=null,t.select=null,t.gou=null,t._data=null,t._clickCb=null,t._isSelect=!1,t._isUnLock=!1,t}return s(t,e),Object.defineProperty(t.prototype,"IsSelect",{get:function(){return this._isSelect},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ID",{get:function(){return this._data&&this._data.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Source",{get:function(){return this._data&&this._data.Source},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsLock",{get:function(){return!this._isUnLock},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this._nodeClick,this),cc.systemEvent.on(_.DistributedEvent.skinGuideId,this._skinGuideIdEvent,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this._nodeClick,this),cc.systemEvent.off(_.DistributedEvent.skinGuideId,this._skinGuideIdEvent)},t.prototype._skinGuideIdEvent=function(e){this.ID==e&&(console.error("_skinGuideIdEvent==",e),cc.systemEvent.emit(_.DistributedEvent.selectKebab,this),this._clickCb&&this._clickCb(this))},t.prototype._nodeClick=function(){p.default.Instance.scollingLimitY<=p.default.Instance.scollingY||(this.IsLock?this.Source==_.KebabsSource.midAutumn?h.default.Instance.TsInitial.ShowTips("\u5b8c\u6210\u4e2d\u79cb\u6d3b\u52a8\u89e3\u9501"):this.Source==_.KebabsSource.common&&h.default.Instance.TsInitial.ShowTips("\u5347\u7ea7\u5ba2\u6808\u7b49\u7ea7\u89e3\u9501"):cc.systemEvent.emit(_.DistributedEvent.selectKebab,this),this._clickCb&&this._clickCb(this))},t.prototype.refresh=function(e,t){if(void 0===t&&(t=null),this._data=e,e){this._clickCb=t;var n=e.id;this._isUnLock=d.default.Instance.checkKebabIsUnlock(n);var o=this.lock.getComponent(cc.Animation);this.lock.active=!0,this._isUnLock?p.default.Instance.tempNewLockKebab.includes(n)?o.play("ani_kebabItem_unlock"):this.lock.active=!1:o.play("ani_kebabItem_lock");var a=!!f.default.Instance.selectKebabs.includes(n);this.showSelect(a),u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+n,this.icon)}else console.error("\u6ca1\u6709\u6570\u636e")},t.prototype.showSelect=function(e){this._isSelect=e,this.select.active=e,this.gou.active=e,this.noselect.active=!e},l([v(cc.Node)],t.prototype,"lock",void 0),l([v(cc.Node)],t.prototype,"icon",void 0),l([v(cc.Node)],t.prototype,"noselect",void 0),l([v(cc.Node)],t.prototype,"select",void 0),l([v(cc.Node)],t.prototype,"gou",void 0),l([b],t)}(cc.Component);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],SkinManager:[function(e,t,n){"use strict";cc._RF.push(t,"543f3lmOklKWIfiN01PEwTa","SkinManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"5522fZqE2pHSYJVrlvZqlr+","SkinManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var s=o("GameManger"),l=o("TypeManager"),u=cc._decorator,d=u.ccclass,h=(u.property,function(){function e(){this.scollingY=0,this.scollingLimitY=70,this.titlePrefab={},this.tempNewLockKebab=[],this.tempNewLockBg=[],this.tempNewLockTable=[]}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),e.prototype.getBgUrl=function(e,t){return void 0===t&&(t=!0),1==e?t?s.default.Instance.NightControl?{bundle:"Bundle1UI",url:"BarbecueStandUI/ui/bg_1_night"}:{bundle:"Bundle1UI",url:"BarbecueStandUI/ui/bg_1"}:{bundle:"Bundle1UI",url:"BarbecueStandUI/ui/icon_3"}:{bundle:l.BundleName.BgIcon,url:"bg_"+e}},e.prototype.getTableUrl=function(e,t){return void 0===t&&(t=!0),1==e?t&&s.default.Instance.NightControl?{bundle:"Bundle1UI",url:"BarbecueStandUI/ui/icon_3_night"}:{bundle:"Bundle1UI",url:"BarbecueStandUI/ui/icon_3"}:{bundle:l.BundleName.TableIcon,url:"table_"+e}},e._instance=null,t=c([d],e)}());i.default=h,cc._RF.pop(),cc._RF.pop()},{}],SkinRuleInterface:[function(e,t,n){"use strict";cc._RF.push(t,"32e3dYpnwBGUaFiAMhMh5zn","SkinRuleInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"3b74eaSCDJG3bUJwwkTuwse","SkinRuleInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("TypeManager"),h=o("UIManager"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.closeBtn=null,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.closeBtn.on(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this)},t.prototype.onUIDisable=function(){this.closeBtn.on(cc.Node.EventType.TOUCH_END,this._closeBtnClick,this)},t.prototype._closeBtnClick=function(){this.close()},t.prototype.onUIStart=function(){this.ani_popup.play("ani_tongyongtanchuang_open"),this._initView()},t.prototype._initView=function(){},t.prototype.close=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),h.default.Instance.DestroyUI(n))},t.bundleName=d.BundleName.SkinPre,t.prefabUrl="prefabs/SkinRulePre",t.className="SkinRuleInterface",l([_(cc.Animation)],t.prototype,"ani_popup",void 0),l([_(cc.Node)],t.prototype,"closeBtn",void 0),n=l([f],t)}(u.default);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],SkinTableItem:[function(e,t,n){"use strict";cc._RF.push(t,"03a0aB2LRxPoal2GMsmmDHu","SkinTableItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"61a8aOWVdZAxq6/a9lXIHwz","SkinTableItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("SkinManager"),h=o("StoragerManager"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lock=null,t.title=null,t.icon=null,t.select=null,t._data=null,t._clickCb=null,t._titles=[],t._isSelect=!1,t}return s(t,e),Object.defineProperty(t.prototype,"IsSelect",{get:function(){return this._isSelect},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ID",{get:function(){return this._data&&this._data.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Source",{get:function(){return this._data&&this._data.Source},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsLock",{get:function(){return!this._data||!h.default.Instance.tableIds.includes(this.ID)&&1!=this.Source},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this._nodeClick,this),cc.systemEvent.on(p.DistributedEvent.selectTable,this._selectTableEvent,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this._nodeClick,this),cc.systemEvent.off(p.DistributedEvent.selectTable,this._selectTableEvent,this)},t.prototype._selectTableEvent=function(){var e=h.default.Instance.curTable==this.ID;this.showSelect(e)},t.prototype._nodeClick=function(){this._clickCb&&this._clickCb(this)},t.prototype.refresh=function(e,t){void 0===t&&(t=null),this._data=e,this._clickCb=t;var n=e.id,o=!h.default.Instance.tableIds.includes(n)&&1!=e.Source,a=this.lock.getComponent(cc.Animation);this.lock.active=!0,o?a.play("ani_kebabItem_lock"):d.default.Instance.tempNewLockTable.includes(n)?a.play("ani_kebabItem_unlock"):this.lock.active=!1,u.default.Instance.LoadSpriteFrame(p.BundleName.SkinUI,"table/table_"+n,this.icon),this.title.removeAllChildren();var i=d.default.Instance.titlePrefab[e.Source];if(i&&this.title&&this.title.isValid){this._titles.push(e.Source);var r=cc.instantiate(i),c=r.getChildByName("descLabel");c&&(c.getComponent(cc.Label).string=e.name),this.title.addChild(r),r.setPosition(r.width/2,-r.height/2)}var s=h.default.Instance.curTable==n;this.showSelect(s)},t.prototype.showSelect=function(e){this._isSelect=e,this.select.active=e},l([y(cc.Node)],t.prototype,"lock",void 0),l([y(cc.Node)],t.prototype,"title",void 0),l([y(cc.Node)],t.prototype,"icon",void 0),l([y(cc.Node)],t.prototype,"select",void 0),l([_],t)}(cc.Component);i.default=b,cc._RF.pop(),cc._RF.pop()},{}],SoundManager:[function(e,t,n){"use strict";cc._RF.push(t,"6725b0gwuRJ6I1oYWaRcVq5","SoundManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"507ff29p5FLv4da4NecJYh+","SoundManager");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("BundleManger"),p=o("DayChallangeManager"),f=o("InfoManager"),_=o("RoleSoundManager"),y=o("StoragerManager"),b=o("StoragerManager"),v=cc._decorator,m=v.ccclass,g=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._musicPool={},t._can_music={},t.audio_source={},t}var n;return s(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!1,configurable:!0}),t.prototype.create_audio=function(e,t){return u(this,void 0,void 0,function(){var n,o,a;return d(this,function(i){switch(i.label){case 0:return n=new cc.Node("sound"),o=n.addComponent(cc.AudioSource),a=o,[4,h.default.Instance.LoadAudioClip(""+e)];case 1:return a.clip=i.sent(),null==o.clip?[2]:(o.volume=t,o.play(),null==this._musicPool[e]?this._musicPool[e]=[o]:this._musicPool[e].push(o),[2,o])}})})},t.prototype.PlaySound=function(e,t){var n=this;if(void 0===t&&(t=y.default.Instance.soundVolume),""!=e&&0!=b.default.Instance.SoundSwitch&&0!=this._can_music[e])if(this._can_music[e]=!1,cc.tween(this).delay(.2).call(function(){n._can_music[e]=!0}).start(),null==this._musicPool[e]||0==this._musicPool[e].length)this.create_audio(e,t);else{for(var o=0;o<this._musicPool[e].length;o++)if(0==this._musicPool[e][o].isPlaying)return this._musicPool[e][o].volume=t,void this._musicPool[e][o].play();this.create_audio(e,t)}},t.prototype.playmusic=function(e,t){return void 0===t&&(t=b.default.Instance.musicVolume),u(this,void 0,void 0,function(){var n,o;return d(this,function(a){switch(a.label){case 0:return 0==b.default.Instance.MusicSwitch?[2]:(null==this.bg_music&&(n=new cc.Node("sound"),this.bg_music=n.addComponent(cc.AudioSource)),o=this.bg_music,[4,h.default.Instance.LoadAudioClip(""+e)]);case 1:return o.clip=a.sent(),this.bg_music.volume=t,this.bg_music.loop=!0,this.bg_music.play(),[2]}})})},t.prototype.stopmusic=function(){null!=this.bg_music&&this.bg_music.stop()},t.prototype.PlayLoop=function(e,t,n,o){return void 0===o&&(o=y.default.Instance.soundVolume),u(this,void 0,void 0,function(){var a,i;return d(this,function(r){switch(r.label){case 0:return this.audio_source[e]?[3,3]:1!=f.default.Instance.Web?[3,2]:(a=new cc.Node("sound"),this.audio_source[e]=a.addComponent(cc.AudioSource),i=this.audio_source[e],[4,h.default.Instance.LoadAudioClip(""+n)]);case 1:return i.clip=r.sent(),this.audio_source[e].volume=o,this.audio_source[e].loop=!0,[3,3];case 2:this.audio_source[e]=wx.createInnerAudioContext({useWebAudioImplement:!1}),this.audio_source[e].src="https://static.361mogame.com/game-static/g127/wechat2/0.0.3/BundleSound/"+n+".mp3",this.audio_source[e].volume=o,this.audio_source[e].loop=!0,r.label=3;case 3:switch(t){case!0:if(0==b.default.Instance.SoundSwitch)return[2];this.audio_source[e].volume=o,this.audio_source[e].play();break;default:this.audio_source[e].stop()}return[2]}})})},t.prototype.StopLoop=function(){for(var e in this.audio_source)this.audio_source[e].stop()},t.prototype.playRoleVoice=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=y.default.Instance.voiceVolume),u(this,void 0,void 0,function(){var o,a,i,r;return d(this,function(c){switch(c.label){case 0:return 0==b.default.Instance.SoundSwitch?[2]:p.default.Instance.inDetailPanel?[2]:(o="voice/"+e,a=null,null!=this._musicPool[o]&&0!=this._musicPool[o].length?[3,2]:[4,this.create_audio(o,n)]);case 1:return a=c.sent(),[3,5];case 2:for(i=!1,r=0;r<this._musicPool[o].length;r++)if(i=this._musicPool[o][r].isPlaying,t){if(0==this._musicPool[o][r].isPlaying){a=this._musicPool[o][r];break}}else if(i)break;return i&&!t?[2]:a?(a.volume=n,a.play(),[3,5]):[3,3];case 3:return[4,this.create_audio(o,n)];case 4:a=c.sent(),c.label=5;case 5:return a&&a.clip&&a.clip.duration&&_.default.Instance.nowTime<=a.clip.duration&&(_.default.Instance.nowTime=a.clip.duration),[2,a]}})})},t.prototype.setVolume=function(e){return(e=Number(e.toFixed(1)))||(e=0),e>=1&&(e=1),e<=0&&(e=0),e},t.prototype.setMusicVolume=function(e){e=this.setVolume(e),this.bg_music&&(this.bg_music.volume=e)},t._instance=null,n=l([m],t)}(cc.Component));i.default=g,cc._RF.pop(),cc._RF.pop()},{}],StaffBase:[function(e,t,n){"use strict";cc._RF.push(t,"8164dmaW4FCuIuaRmb7Tk9z","StaffBase");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"5efa9jfbYpP2rkAupBs5grO","StaffBase");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var s=o("DataManager"),l=o("FunctionManager"),u=o("GameManger"),d=o("TypeManager"),h=cc._decorator,p=h.ccclass,f=(h.property,function(){function e(){this.move_speed=150}return e.prototype.Update=function(){},e.prototype.JudgeJob=function(){},e.prototype.StaffSettleAccounts=function(e){1==this.StaffId&&(this.ts_table=e,this.path=s.default.Instance.StaffPath["staff_"+this.staff_id][this.ts_table.TableId+"_1"],this.ChangeBehavior(d.StaffBehavior.settle_accounts))},e.prototype.MoveStand=function(e){var t=this;void 0===e&&(e=d.StaffBehavior.wait_work);var n=cc.tween(this),o=this.PixelLogic(this.Coord,this.scene),a=s.default.Instance.StaffStandPos["staff_"+this.staff_id];if(1==this.ts_AStar.findPath(o,a)){for(var i=this.ts_AStar.path,r=1;r<i.length;r++){var c=i[r],u=this.LogicPixel(cc.v2(c.x,c.y),this.scene),h=this.LogicPixel(cc.v2(i[r-1].x,i[r-1].y),this.scene);1==r&&(h=this.Coord);var p=l.default.Instance.Distance(h,u);n=n.to(p/this.StaffSpeed(),{Coord:u}).call(function(){t.JudgeScene()})}n.call(function(){t.ChangeBehavior(e)}).start()}else console.error("\u54e1\u5de5"+this.staff_id+"\u5728"+this.scene+"\u5bfb\u8def\u5931\u8d25,\u8def\u5f84"+o+"=>"+a)},e.prototype.MoveStand2=function(e){var t=this;this.path=e;var n=cc.tween(this);this.coord=cc.v2(this.path[0].x,this.path[0].y);for(var o=1;o<this.path.length;o++){var a=this.path[o-1],i=this.path[o],r=l.default.Instance.Distance(cc.v2(a.x,a.y),cc.v2(i.x,i.y))/this.StaffSpeed();335==i.x&&(r=0),n=n.to(r,{Coord:cc.v2(i.x,i.y)}).call(function(){t.JudgeScene()})}n.call(function(){t.ChangeBehavior(d.StaffBehavior.wait_work)}).start()},e.prototype.StandMoveTable=function(){var e=this,t=this.PixelLogic(this.Coord,this.scene),n=s.default.Instance.TablePos[this.ts_table.TableId];1==this.ts_AStar.findPath(t,n)?this.path=this.ts_AStar.path:console.error("\u627e\u684c\u5b50\u5bfb\u8def\u5931\u8d25===="+t+"===="+n),this.play_tween(this.path,function(){switch(e.staff_id){case 1:case 10:e.ChangeBehavior(d.StaffBehavior.settle_accounts);break;case 2:case 9:case 11:switch(e.ts_table.TableTips){case d.WorkWarn.order_food:case d.WorkWarn.order_food2:case d.WorkWarn.order_food3:e.ChangeBehavior(d.StaffBehavior.order_food);break;case d.WorkWarn.clear_table:case d.WorkWarn.clear_table2:case d.WorkWarn.clear_table3:e.ChangeBehavior(d.StaffBehavior.clear_table)}}})},e.prototype.MoveKitchenTable=function(){var e=this,t=this.PixelLogic(this.Coord,this.scene);1==this.ts_AStar.findPath(t,this.dishes_pos)?this.path=this.ts_AStar.path:console.error("\u53bb\u53a8\u623f\u684c\u5b50\u5bfb\u8def\u5931\u8d25===="+t+"===="+this.dishes_pos),this.play_tween(this.path,function(){e.ChangeBehavior(d.StaffBehavior.serve_food)})},e.prototype.MoveCanteenTable=function(){var e=this,t=this.PixelLogic(this.Coord,this.scene),n=s.default.Instance.TablePos[this.ts_dishes.order_data.table_id];1==this.ts_AStar.findPath(t,n)?this.path=this.ts_AStar.path:console.error("\u627e\u684c\u5b50\u5bfb\u8def\u5931\u8d25===="+t+"===="+n),this.play_tween(this.path,function(){e.ChangeBehavior(d.StaffBehavior.serve_table)})},e.prototype.MoveTagetPos=function(e,t){var n=this.PixelLogic(this.Coord,this.scene);1==this.ts_AStar.findPath(n,e)?this.path=this.ts_AStar.path:console.error("\u79fb\u52a8\u5230\u76ee\u6807\u70b9\u5bfb\u8def\u5931\u8d25===="+n+"===="+e),this.play_tween(this.path,t)},e.prototype.StandMoveBed=function(){var e=this,t=this.PixelLogic(this.Coord,this.scene),n=s.default.Instance.TablePos[this.ts_bed.bed_id];1==this.ts_AStar.findPath(t,n)?this.path=this.ts_AStar.path:console.error("\u627e\u5e8a\u94fa\u5bfb\u8def\u5931\u8d25===="+t+"===="+n),this.play_tween(this.path,function(){e.ChangeBehavior(d.StaffBehavior.clear_bed)})},e.prototype.tween_array=function(e){var t=this,n=cc.tween(this);this.coord=cc.v2(e[0].x,e[0].y);for(var o=1;o<e.length;o++){var a=e[o-1],i=e[o],r=l.default.Instance.Distance(cc.v2(a.x,a.y),cc.v2(i.x,i.y))/this.StaffSpeed();n=n.to(r,{Coord:cc.v2(i.x,i.y)}).call(function(){t.JudgeScene()})}return n},e.prototype.play_tween=function(e,t){for(var n=this,o=cc.tween(this),a=1;a<e.length;a++){var i=e[a],r=this.LogicPixel(cc.v2(i.x,i.y),this.scene),c=this.LogicPixel(cc.v2(e[a-1].x,e[a-1].y),this.scene);1==a&&(c=this.coord);var s=l.default.Instance.Distance(c,r);o=o.to(s/this.StaffSpeed(),{Coord:r},{onUpdate:function(){switch(n.Behavior){case d.StaffBehavior.move_kitchen:null==n.ts_dishes||0!=n.ts_dishes.node.active&&0!=n.ts_dishes.node.opacity||(cc.Tween.stopAllByTarget(n),n.ts_dishes.ts_staff=null,n.JudgeJob());break;case d.StaffBehavior.move_table:if(null==n.ts_table)return;switch(n.staff_id){case 1:n.ts_table.TableTips!=d.WorkWarn.pay_money&&n.ts_table.TableTips!=d.WorkWarn.pay_money2&&n.StopBehavior();break;case 10:n.ts_table.TableTips!=d.WorkWarn.pay_money3&&n.StopBehavior();break;default:n.ts_table.TableTips==d.WorkWarn.null&&n.StopBehavior()}break;case d.StaffBehavior.move_bed:0==n.ts_bed.btn_click.opacity&&n.StopBehavior()}}}).call(function(){n.JudgeScene()})}o.call(function(){t()}).start()},e.prototype.StopBehavior=function(){cc.Tween.stopAllByTarget(this),this.ts_table&&(this.ts_table.TsStaff=null),this.JudgeJob()},e.prototype.WaitWork=function(){this.ts_table=null,this.ts_dishes=null,this.ChangeBehavior(d.StaffBehavior.wait_work)},e.prototype.ChangeBehavior=function(){},e.prototype.JudgeOperability=function(e){switch(e.TableTips){case d.WorkWarn.pay_money:case d.WorkWarn.pay_money2:return 1==this.staff_id;case d.WorkWarn.pay_money3:return 10==this.staff_id;case d.WorkWarn.order_food:case d.WorkWarn.clear_table:return 2==this.staff_id;case d.WorkWarn.order_food2:case d.WorkWarn.clear_table2:return 9==this.staff_id;case d.WorkWarn.order_food3:case d.WorkWarn.clear_table3:return 11==this.staff_id}return!1},e.prototype.JudgeDishes=function(e){switch(e){case 4:case 8:return 2==this.staff_id||3==this.staff_id||9==this.staff_id;case 6:return 11==this.staff_id}return!1},e.prototype.JudgeScene=function(){switch(this.scene){case d.ScenceArea.first_canteen:this.Coord.x<=-365?this.ChangeScence(d.ScenceArea.first_kitchen):this.Coord.x>=365&&this.ChangeScence(d.ScenceArea.first_room1);break;case d.ScenceArea.first_kitchen:this.Coord.x>=-365&&this.ChangeScence(d.ScenceArea.first_canteen);break;case d.ScenceArea.first_room1:this.Coord.x<=365&&this.ChangeScence(d.ScenceArea.first_canteen)}},e.prototype.ChangeScence=function(e){switch(this.scene=e,this.scene){case d.ScenceArea.first_canteen:case d.ScenceArea.first_kitchen:case d.ScenceArea.first_room1:this.ts_AStar=u.default.Instance.FirstFloorAStar;break;case d.ScenceArea.second_canteen:case d.ScenceArea.second_room1:case d.ScenceArea.second_room2:this.ts_AStar=u.default.Instance.SecondFloorAStar;break;case d.ScenceArea.exhibition:this.ts_AStar=u.default.Instance.ExhibitionAStar}},e.prototype.PixelLogic=function(e,t){var n,o,a;switch(void 0===t&&(t=d.ScenceArea.first_canteen),t){case d.ScenceArea.first_canteen:case d.ScenceArea.first_kitchen:case d.ScenceArea.first_room1:n=s.default.Instance.FirstFloorOrigin,o=s.default.Instance.FirstFloorSize.width,a=s.default.Instance.FirstFloorSize.height;break;case d.ScenceArea.second_canteen:case d.ScenceArea.second_room1:case d.ScenceArea.second_room2:n=s.default.Instance.SecondFloorOrigin,o=s.default.Instance.SecondFloorSize.width,a=s.default.Instance.SecondFloorSize.height;break;case d.ScenceArea.exhibition:n=s.default.Instance.ExhibitionOrigin,o=s.default.Instance.ExhibitionSize.width,a=s.default.Instance.ExhibitionSize.height}var i=s.default.Instance.GrideSize,r=Math.floor(Math.abs(n.x-e.x)/i),c=Math.floor(Math.abs(n.y-e.y)/i);return r>=o&&(r=o-1),c>=a&&(c=a-1),new cc.Vec2(r,c)},e.prototype.LogicPixel=function(e,t){var n;switch(void 0===t&&(t=d.ScenceArea.first_canteen),t){case d.ScenceArea.first_canteen:case d.ScenceArea.first_kitchen:case d.ScenceArea.first_room1:n=s.default.Instance.FirstFloorOrigin;break;case d.ScenceArea.second_canteen:case d.ScenceArea.second_room1:case d.ScenceArea.second_room2:n=s.default.Instance.SecondFloorOrigin;break;case d.ScenceArea.exhibition:n=s.default.Instance.ExhibitionOrigin}var o=s.default.Instance.GrideSize,a=n.x+e.x*o,i=n.y-e.y*o;return new cc.Vec2(a,i)},e.prototype.RefreshPos=function(){},e.prototype.StaffSpeed=function(){return this.move_speed},e.prototype.RefreshStaffTime=function(){this.HandlingTime=s.default.Instance.StaffWorkTime,this.time1=.5,this.time2=s.default.Instance.StaffWorkTime},e.prototype.InitStaffTime=function(){this.time1=0,this.time2=0,this.HandlingTime=0},Object.defineProperty(e.prototype,"StaffId",{get:function(){return this.staff_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Coord",{get:function(){return this.coord},set:function(e){this.coord=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TsTable",{get:function(){return this.ts_table},set:function(e){this.ts_table=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TsBed",{get:function(){return this.ts_bed},set:function(e){this.ts_bed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TsDishes",{get:function(){return this.ts_dishes},set:function(e){this.ts_dishes=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Scence",{get:function(){return this.scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HandlingTime",{get:function(){return this.handling_time},set:function(e){this.handling_time=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BoothId",{get:function(){return this.booth_id},set:function(e){this.booth_id=e},enumerable:!1,configurable:!0}),c([p],e)}());i.default=f,cc._RF.pop(),cc._RF.pop()},{}],StoragerManager:[function(e,t,n){"use strict";cc._RF.push(t,"32c2eCR6XJMS6UDdhRrtJJr","StoragerManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"965c1uA+5tIZbxPu/y67zQc","StoragerManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},s=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},l=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var u=o("Util"),d=o("DataManager"),h=o("GameManger"),p=o("InfoManager"),f=o("TypeManager"),_=cc._decorator,y=_.ccclass,b=(_.property,function(){function e(){var e,t,n,o,a;this.local=!0,this.storage_version="1.0.4",this.music_switch=!0,this.sound_switch=!0,this._musicVolume=1,this._soundVolume=1,this._voiceVolume=1,this.shake_switch=!1,this.guide_novice=!0,this.gold_num=1e4,this.barbecue_power=1,this.barbecue_lv=[3,2,3,2,3,3,3,3,3,3,3,3,3,2,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,3],this.shop_lv=2,this.second_day=0,this.BarbecueProp=((e={}).prop_1=30,e.prop_2=30,e.prop_3=30,e),this.Staff=((t={}).staff_1=!0,t.staff_2=!0,t.staff_3=!0,t.staff_4=!0,t.staff_5=!0,t.staff_7=!0,t),this.Facility=((n={})[f.FacilityType.queue_stool]={used_lv:1,buy_record:[1]},n[f.FacilityType.outdoor_ground]={used_lv:1,buy_record:[1]},n[f.FacilityType.outdoor_wall]={used_lv:1,buy_record:[1]},n[f.FacilityType.sunshade]={used_lv:1,buy_record:[1]},n[f.FacilityType.snack_platform]={used_lv:1,buy_record:[1]},n[f.FacilityType.chopping_board]={used_lv:1,buy_record:[1]},n[f.FacilityType.serving_board]={used_lv:1,buy_record:[1]},n[f.FacilityType.scullery]={used_lv:1,buy_record:[1]},n[f.FacilityType.hearth]={used_lv:1,buy_record:[1]},n[f.FacilityType.vegetable_rack1]={used_lv:1,buy_record:[1]},n[f.FacilityType.vegetable_rack2]={used_lv:1,buy_record:[1]},n[f.FacilityType.kitchen_ground]={used_lv:1,buy_record:[1]},n[f.FacilityType.kitchen_wall]={used_lv:1,buy_record:[1]},n[f.FacilityType.counter]={used_lv:1,buy_record:[1]},n[f.FacilityType.counter_decorate1]={used_lv:1,buy_record:[1]},n[f.FacilityType.counter_decorate2]={used_lv:1,buy_record:[1]},n[f.FacilityType.counter_decorate3]={used_lv:1,buy_record:[1]},n[f.FacilityType.table_1]={used_lv:1,buy_record:[1]},n[f.FacilityType.table_2]={used_lv:1,buy_record:[1]},n[f.FacilityType.table_3]={used_lv:1,buy_record:[1]},n[f.FacilityType.table_4]={used_lv:1,buy_record:[1]},n[f.FacilityType.condiment_area]={used_lv:1,buy_record:[1]},n[f.FacilityType.display_board]={used_lv:1,buy_record:[1]},n[f.FacilityType.wine_cabinet]={used_lv:1,buy_record:[1]},n[f.FacilityType.door]={used_lv:1,buy_record:[1]},n[f.FacilityType.door_decorate]={used_lv:1,buy_record:[1]},n[f.FacilityType.stairs_decorate]={used_lv:1,buy_record:[1]},n[f.FacilityType.hall_ground]={used_lv:1,buy_record:[1]},n[f.FacilityType.hall_wall]={used_lv:1,buy_record:[1]},n[f.FacilityType.room1_tabel]={used_lv:1,buy_record:[1]},n[f.FacilityType.room1_decorate1]={used_lv:1,buy_record:[1]},n[f.FacilityType.room1_decorate2]={used_lv:1,buy_record:[1]},n[f.FacilityType.room1_cabinet]={used_lv:1,buy_record:[1]},n[f.FacilityType.room1_sofa]={used_lv:1,buy_record:[1]},n[f.FacilityType.room1_ground]={used_lv:1,buy_record:[1]},n[f.FacilityType.room1_wall]={used_lv:1,buy_record:[1]},n[f.FacilityType.room2_tabel]={used_lv:1,buy_record:[1,1]},n[f.FacilityType.room2_decorate1]={used_lv:1,buy_record:[1,1]},n[f.FacilityType.room2_decorate2]={used_lv:1,buy_record:[1,1]},n[f.FacilityType.room2_cabinet]={used_lv:1,buy_record:[1,1]},n[f.FacilityType.room2_sofa]={used_lv:1,buy_record:[1,1]},n[f.FacilityType.room2_ground]={used_lv:1,buy_record:[1,1]},n[f.FacilityType.room2_wall]={used_lv:1,buy_record:[1,1]},n[f.FacilityType.room3_tabel]={used_lv:1,buy_record:[1]},n[f.FacilityType.room3_decorate1]={used_lv:1,buy_record:[1]},n[f.FacilityType.room3_decorate2]={used_lv:1,buy_record:[1]},n[f.FacilityType.room3_cabinet]={used_lv:1,buy_record:[1]},n[f.FacilityType.room3_sofa]={used_lv:1,buy_record:[1]},n[f.FacilityType.room3_ground]={used_lv:1,buy_record:[1]},n[f.FacilityType.room3_wall]={used_lv:1,buy_record:[1]},n),this.AreaUnlock=((o={})[f.ScenceArea.doorway]={unlock:!0},o[f.ScenceArea.first_canteen]={unlock:!0},o[f.ScenceArea.first_kitchen]={unlock:!0},o[f.ScenceArea.first_room1]={unlock:!0},o[f.ScenceArea.first_room2]={unlock:!0},o[f.ScenceArea.first_room3]={unlock:!0},o),this.ParkSedanTime={},this.Record=((a={})[f.RecordType.first_backyard]=!0,a[f.RecordType.game_explain1]=!0,a[f.RecordType.gudie_game]=!0,a[f.RecordType.newcomer_package1]=null,a),this.TaskRecord={},this.Tasking=[],this.FacilityCollect={},this.Illustration={},this.LevelAwardPack=[],this.newcomer_package2_time=0,this.newcomer_package2_get=0,this.adLevel=0,this.videoLevel=0,this._winActivityTime=0,this.winActivityLastTime=0,this.aiLists={},this.aiListIcon={},this.comboLevel=1,this.winActivityScore=0,this.isFisrtOpen=!1,this.isAuthorization=!1,this.gmTime=0,this.activityRewards=null,this._jengaLevel=1,this.jengaVideoNum=0,this.dayChallage={freeNum:0,dayTime:0,failNum:0,winNum:0,rate:0},this.starNum=0,this.openChallage=!1,this.unlockKebabs=[],this.bgIds=[],this.tableIds=[],this.curBg=1,this.curTable=1,this.selectKebabs=[],this.newUnlockKebab=[],this.newBg=[],this.newTable=[],this.oldKebakNum=20,this.openSkin=!1,this._isInitData=!1,this.noticeOpen=!1,this.noticeVersion="1.3.0",this._timeoutForce=!1}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t.instance||(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(e){this._musicVolume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(e){this._soundVolume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"voiceVolume",{get:function(){return this._voiceVolume},set:function(e){this._voiceVolume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"winActivityTime",{get:function(){return this._winActivityTime},set:function(e){this._winActivityTime=e},enumerable:!1,configurable:!0}),e.prototype.sysWinActivityData=function(){var e={aiListIcon:this.aiListIcon};cc.sys.localStorage.setItem(p.default.Instance.Chn+"-winActivity",JSON.stringify(e))},e.prototype.initWinActivityData=function(){console.error("\u521d\u59cb\u5316\u6570\u636e initWinActivityData");var e=cc.sys.localStorage.getItem(p.default.Instance.Chn+"-winActivity"),t={};if(e&&(t=null==JSON.parse(e)?{}:JSON.parse(e)),t.winActivityTime&&(this.winActivityTime=t.winActivityTime),t.winActivityLastTime&&(this.winActivityLastTime=t.winActivityLastTime),t.aiLists&&(this.aiLists=t.aiLists),t.comboLevel&&(this.comboLevel=t.comboLevel),t.winActivityScore&&(this.winActivityScore=t.winActivityScore),t.isFisrtOpen&&(this.isFisrtOpen=t.isFisrtOpen),t.isAuthorization&&(this.isAuthorization=t.isAuthorization),this.aiLists)for(var n in this.aiLists){var o=this.aiLists[n];if(o){var a=o.icon+"";this.aiListIcon[n]={icon:a},o.icon=""}}t.aiListIcon&&(this.aiListIcon=t.aiListIcon),this.sysWinActivityData()},Object.defineProperty(e.prototype,"jengaLevel",{get:function(){return this._jengaLevel},set:function(e){this._jengaLevel=e},enumerable:!1,configurable:!0}),e.prototype.addUnlockKebab=function(e){this.unlockKebabs.includes(e)||(this.unlockKebabs.push(e),cc.systemEvent.emit(f.DistributedEvent.updateSkinRed))},e.prototype.addBg=function(e){this.bgIds.includes(e)||(this.bgIds.push(e),this.addNewBg(e),cc.systemEvent.emit(f.DistributedEvent.updateSkinRed))},e.prototype.addTable=function(e){this.tableIds.includes(e)||(this.tableIds.push(e),this.addNewTable(e),cc.systemEvent.emit(f.DistributedEvent.updateSkinRed))},e.prototype.addSelectKebab=function(e){this.selectKebabs.includes(e)||this.selectKebabs.push(e)},e.prototype.removeSelectKebab=function(e){var t=this.selectKebabs.indexOf(e);-1!=t&&this.selectKebabs.splice(t,1)},e.prototype.addNewUnlockKebab=function(e){this.newUnlockKebab.includes(e)||this.newUnlockKebab.push(e)},e.prototype.addNewBg=function(e){this.newBg.includes(e)||this.newBg.push(e)},e.prototype.addNewTable=function(e){this.newTable.includes(e)||this.newTable.push(e)},e.prototype.Init=function(e,t){return s(this,void 0,void 0,function(){var n,o,a;return l(this,function(){return this._isInitData=!0,h.default.Instance.LoginTime=t,this._version=null==e.userConf.asset.version?0:e.userConf.asset.version,n=null==e.userConf.asset.ext?{}:e.userConf.asset.ext,console.log("\u5b58\u6863",n),null!=n.barbecue_lv&&0!=n.barbecue_lv.length||(n={}),null!=n.storage_version&&n.storage_version!=this.storage_version&&(console.log("\u5b58\u6863\u7248\u672c\u4e0d\u5bf9\uff0c\u6e05\u9664\u5b58\u6863"),n={}),o=Object.keys(n),this.last_time=null==n.last_time?h.default.Instance.LoginTime:n.last_time,console.log("\u6700\u540e\u5b58\u6863\u65f6\u95f4"+n.last_time),this._musicVolume=o.includes("musicVolume")?n.musicVolume:this._musicVolume,this._soundVolume=o.includes("soundVolume")?n.soundVolume:this._soundVolume,this._voiceVolume=o.includes("voiceVolume")?n.voiceVolume:this._voiceVolume,this.shake_switch=null==n.shake_switch||n.shake_switch,this.gold_num=null==n.gold_num?0:n.gold_num,this.gold_num<0&&(this.gold_num=0),this.barbecue_power=null==n.barbecue_power?10:n.barbecue_power,this.BarbecueProp=null==n.barbecue_prop?{}:n.barbecue_prop,this.barbecue_lv=null==n.barbecue_lv?[]:n.barbecue_lv,this.Barbecue=n.barbecue,this.shop_lv=null==n.shop_lv?1:n.shop_lv,this.second_day=null==n.second_day?0:n.second_day,this.Staff=null==n.staff?{}:n.staff,this.Facility=null==n.facility?{}:n.facility,this.AreaUnlock=null==n.area_unlock?{}:n.area_unlock,this.ParkSedanTime=null==n.park_sedan_time?{}:n.park_sedan_time,this.Record=null==n.record?{}:n.record,(a=Object.keys(this.Record)).includes(f.RecordType.add_desktop)||(this.Record[f.RecordType.add_desktop]=this.addDesltop),a.includes(f.RecordType.collect_gift)||(this.Record[f.RecordType.collect_gift]=this.addMiniGame),this.TaskRecord=null==n.task_record?{}:n.task_record,this.Tasking=null==n.tasking?[]:n.tasking,this.FacilityCollect=null==n.facility_collect?{}:n.facility_collect,this.Illustration=null==n.illustration?{}:n.illustration,this.LevelAwardPack=null==n.level_award_pack?[]:n.level_award_pack,this.newcomer_package2_time=null==n.newcomer_package2_time?0:n.newcomer_package2_time,this.newcomer_package2_get=null==n.newcomer_package2_get?0:n.newcomer_package2_get,this.adLevel=n.adLevel?n.adLevel:this.barbecue_lv.length,this.videoLevel=n.videoLevel?n.videoLevel:this.videoLevel,this._jengaLevel=n.jengaLevel?n.jengaLevel:this._jengaLevel,this.jengaVideoNum=n.jengaVideoNum?n.jengaVideoNum:this.jengaVideoNum,this.winActivityTime=n.winActivityTime?n.winActivityTime:this.winActivityTime,this.winActivityLastTime=n.winActivityLastTime?n.winActivityLastTime:this.winActivityLastTime,this.aiLists=n.aiLists?n.aiLists:this.aiLists,this.comboLevel=n.comboLevel?n.comboLevel:this.comboLevel,this.winActivityScore=n.winActivityScore?n.winActivityScore:this.winActivityScore,this.isFisrtOpen=n.isFisrtOpen?n.isFisrtOpen:this.isFisrtOpen,this.isAuthorization=n.isAuthorization?n.isAuthorization:this.isAuthorization,this.initWinActivityData(),this.starNum=n.starNum?n.starNum:this.starNum,this.dayChallage=n.dayChallage?n.dayChallage:this.dayChallage,this.bgIds=n.bgIds?n.bgIds:this.bgIds,this.tableIds=n.tableIds?n.tableIds:this.tableIds,this.curBg=n.curBg?n.curBg:this.curBg,this.curTable=n.curTable?n.curTable:this.curTable,this.unlockKebabs=n.unlockKebabs?n.unlockKebabs:this.unlockKebabs,this.newUnlockKebab=n.newUnlockKebab?n.newUnlockKebab:this.newUnlockKebab,this.openChallage=n.openChallage?n.openChallage:this.openChallage,this.newBg=n.newBg?n.newBg:this.newBg,this.newTable=n.newTable?n.newTable:this.newTable,this.openSkin=n.openSkin?n.openSkin:this.openSkin,this.activityRewards=n.activityRewards?n.activityRewards:this.activityRewards,this.oldKebakNum=n.oldKebakNum?n.oldKebakNum:this.oldKebakNum,this.noticeOpen=n.noticeOpen?n.noticeOpen:this.noticeOpen,n.noticeVersion&&this.noticeVersion==n.noticeVersion||(this.noticeOpen=!1),this.noticeVersion=n.noticeVersion?n.noticeVersion:this.noticeVersion,this.JudgeSecondDate(),this.day_refresh(this.dayChallage.dayTime,h.default.Instance.LoginTime),[2]})})},e.prototype.getArchiveInfo=function(){return{last_time:this.last_time,storage_version:this.storage_version,musicVolume:this._musicVolume,soundVolume:this._soundVolume,voiceVolume:this._voiceVolume,shake_switch:this.shake_switch,guide_novice:this.guide_novice,gold_num:this.gold_num,barbecue_power:this.barbecue_power,barbecue_prop:this.BarbecueProp,barbecue_lv:this.barbecue_lv,barbecue:this.Barbecue,shop_lv:this.shop_lv,second_day:this.second_day,staff:this.Staff,facility:this.Facility,area_unlock:this.AreaUnlock,park_sedan_time:this.ParkSedanTime,record:this.Record,task_record:this.TaskRecord,tasking:this.Tasking,facility_collect:this.FacilityCollect,illustration:this.Illustration,level_award_pack:this.LevelAwardPack,newcomer_package2_time:this.newcomer_package2_time,newcomer_package2_get:this.newcomer_package2_get,adLevel:this.adLevel,videoLevel:this.videoLevel,jengaLevel:this.jengaLevel,jengaVideoNum:this.jengaVideoNum,dayChallage:this.dayChallage,starNum:this.starNum,winActivityTime:this.winActivityTime,winActivityLastTime:this.winActivityLastTime,aiLists:this.aiLists,comboLevel:this.comboLevel,winActivityScore:this.winActivityScore,isFisrtOpen:this.isFisrtOpen,isAuthorization:this.isAuthorization,bgIds:this.bgIds,tableIds:this.tableIds,curBg:this.curBg,curTable:this.curTable,unlockKebabs:this.unlockKebabs,openChallage:this.openChallage,newUnlockKebab:this.newUnlockKebab,newBg:this.newBg,newTable:this.newTable,openSkin:this.openSkin,activityRewards:this.activityRewards,oldKebakNum:this.oldKebakNum,noticeVersion:this.noticeVersion,noticeOpen:this.noticeOpen}},e.prototype.AutoSyncData=function(e,t){var n=this;void 0===e&&(e=!1),void 0===t&&(t=!1),this._timeoutCB&&clearTimeout(this._timeoutCB),this._timeoutForce=this._timeoutForce||t,this._timeoutCB=setTimeout(function(){if(n._isInitData){n._version+=1,n.last_time=(new Date).getTime();var t=n.getArchiveInfo();LWGSDK.updateUserArchive({version:n._version,ext:t,force:n._timeoutForce,success:function(){1==e&&p.default.Instance.TsInitial.ShowTips("\u5b58\u6863\u6210\u529f")},fail:function(e){console.error("\u5b58\u6863\u5931\u8d25",e,n._version)}}),n.sysWinActivityData(),n._timeoutForce=!1}})},e.prototype.JudgeSecondDate=function(){return s(this,void 0,void 0,function(){var e,t;return l(this,function(){return console.log("\u767b\u5f55\u65f6\u95f4"+h.default.Instance.LoginTime+",\u6700\u540e\u5b58\u6863\u65f6\u95f4"+this.last_time),h.default.Instance.OfflineTime=Math.floor((h.default.Instance.LoginTime-this.last_time)/1e3),(e=Math.floor(h.default.Instance.OfflineTime/600))<0&&(e=0),this.barbecue_power<10&&(this.barbecue_power=Math.min(this.barbecue_power+e,10)),console.log("\u79bb\u7ebf\u65f6\u95f4====="+h.default.Instance.OfflineTime),t=new Date(h.default.Instance.LoginTime),0==this.second_day?this.UpdateTime(t):t.getTime()>=this.second_day&&this.UpdateTime(t),[2]})})},e.prototype.UpdateTime=function(e){var t=e.getHours()>=5;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),this.second_day=1==t?e.getTime()+1044e5:e.getTime()+18e6,h.default.Instance.SecondUpdate=!0},e.prototype.day_refresh=function(e,t){u.default.ContrastDay(e,t)||(this.dayChallage={freeNum:0,dayTime:0,failNum:0,winNum:0,rate:0},this.dayChallage.dayTime=t)},e.prototype.JudegFacility=function(){this.AreaUnlock[f.ScenceArea.doorway]={unlock:!0};var e=[];for(var n in d.default.Instance.ScenceData)e.push(n);for(var o=0;o<e.length;o++){var a=e[o],i=this.AreaUnlock[a],r=d.default.Instance.FacilityOrder[a];if(null==i||0==i.unlock)for(var c=0;c<r.length;c++){var s=r[c];null!=this.Facility[s]&&null==this.Facility[s].special_record&&delete this.Facility[s]}else for(var l=0;l<r.length;l++)if(null!=(s=r[l])){var u=d.default.Instance.Facility1Information[s];null!=u&&u.data[0].unlock_path==f.UnlockPath.default&&null==this.Facility[s]&&(this.Facility[s]={used_lv:1,buy_record:[1]})}}for(var n in this.Facility)null==(h=d.default.Instance.Facility1Information[n])&&(delete this.Facility[n],console.log("\u8fc7\u671f\u7684\u8bbe\u65bd",n));for(o=this.Tasking.length-1;o>=0;o--){var h,p=this.Tasking[o];p.task_type==f.TaskType.facility&&(h=d.default.Instance.Facility1Information[p.value1])&&p.value2>=h.data.length&&(console.error("\u5220\u9664\u5947\u602a\u4efb\u52a1===================",p),this.Tasking.splice(o,1))}t.Instance.AutoSyncData()},Object.defineProperty(e.prototype,"version",{get:function(){return this._version},set:function(e){this._version=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MusicSwitch",{get:function(){return this.music_switch},set:function(e){this.music_switch=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SoundSwitch",{get:function(){return this.sound_switch},set:function(e){this.sound_switch=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ShakeSwitch",{get:function(){return this.shake_switch},set:function(e){this.shake_switch=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GuideNovice",{get:function(){return this.guide_novice},set:function(e){this.guide_novice=e,this.AutoSyncData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GoldNum",{get:function(){return this.gold_num},set:function(e){if(1!=isNaN(e)){var t=e-this.gold_num;this.gold_num=e,this.AutoSyncData(),cc.systemEvent.emit(f.DistributedEvent.gold_num,t),cc.systemEvent.emit(f.DistributedEvent.task)}},enumerable:!1,configurable:!0}),e.prototype.addGoldNumWithout=function(e){1!=isNaN(e)&&(this.gold_num+=e,cc.systemEvent.emit(f.DistributedEvent.task))},Object.defineProperty(e.prototype,"BarbecuePower",{get:function(){return this.barbecue_power},set:function(e){this.barbecue_power=e,this.AutoSyncData(),cc.systemEvent.emit(f.DistributedEvent.power_num)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ShopLv",{get:function(){return this.shop_lv},set:function(e){this.shop_lv=e,this.AutoSyncData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BarbecueLv",{get:function(){return this.barbecue_lv},set:function(e){this.barbecue_lv=e,this.AutoSyncData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NewcomerPackage2Time",{get:function(){return this.newcomer_package2_time},set:function(e){this.newcomer_package2_time=e,this.AutoSyncData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NewcomerPackage2Get",{get:function(){return this.newcomer_package2_get},set:function(e){this.newcomer_package2_get=e,this.AutoSyncData()},enumerable:!1,configurable:!0}),t=c([y],e)}());i.default=b,cc._RF.pop(),cc._RF.pop()},{}],TaskInterface:[function(e,t,n){"use strict";cc._RF.push(t,"de66agX045BIYppyKraytB9","TaskInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"28890+Eo61NHIonzGx5+n6l","TaskInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("FunctionManager"),h=o("GameManger"),p=o("InfoManager"),f=o("StoragerManager"),_=o("TypeManager"),y=o("UIManager"),b=o("task_item"),v=cc._decorator,m=v.ccclass,g=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t.bg=null,t.container=null,t.layout=null,t.btn_close=null,t.task_array=[],t.is_close=!1,t}var n;return s(t,e),n=t,t.prototype.onUIStart=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onUIEnable=function(){this.bg.on(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onUIDisable=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.onInit=function(){this.container.y=-this.container.height;var e=this.container.height-p.default.Instance.ScreenSize.height/2;if(cc.tween(this.container).to(.3,{y:e}).start(),f.default.Instance.Tasking.length<3){for(var t=f.default.Instance.Tasking.length;t<3;t++){var n=d.default.Instance.TaskExtract();if(null==n)break;f.default.Instance.Tasking.push(n)}cc.systemEvent.emit(_.DistributedEvent.task)}switch(this.draw(),h.default.Instance.GudieStep){case 209:case 301:h.default.Instance.GudieStep++}},t.prototype.draw=function(){for(var e=0;e<f.default.Instance.Tasking.length;e++){if(null==(n=this.task_array[e])){var t=cc.instantiate(this.item);t.setParent(this.layout),n=t.getComponent(b.default),this.task_array[e]=n}n.node.active=!0,n.Init(f.default.Instance.Tasking[e],e,this)}if(f.default.Instance.Tasking.length<3)for(e=f.default.Instance.Tasking.length;e<3;e++){var n;(n=this.task_array[e])&&(n.node.active=!1)}},t.prototype.close=function(){if(1!=this.is_close){this.is_close=!0;var e=p.default.Instance.ScreenSize.height;cc.tween(this.container).to(.3,{y:-e/2-100}).call(function(){y.default.Instance.DestroyUI(n)}).start()}},t.bundleName="Bundle2Pre",t.prefabUrl="TaskPre/TaskPre",t.className="TaskInterface",l([g(cc.Prefab)],t.prototype,"item",void 0),l([g(cc.Node)],t.prototype,"bg",void 0),l([g(cc.Node)],t.prototype,"container",void 0),l([g(cc.Node)],t.prototype,"layout",void 0),l([g(cc.Node)],t.prototype,"btn_close",void 0),n=l([m],t)}(u.default);i.default=I,cc._RF.pop(),cc._RF.pop()},{}],TeamBase:[function(e,t,n){"use strict";cc._RF.push(t,"f5038utS4pA0bpa1YrYWlKV","TeamBase");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"b2518so80hMLYXcTPPhvYw2","TeamBase");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var s=o("DataManager"),l=o("TypeManager"),u=cc._decorator,d=u.ccclass,h=(u.property,function(){function e(){this.first_found=!0,this.pos_1=cc.v2(-1100,-360),this.pos_2=cc.v2(1100,-360)}return e.prototype.init_data=function(e,t){this.team_id=e,this.guest_team_type=t,this.guest_array=[],this.Useing=!0,Math.floor(998*Math.random())%10>5?this.origin=this.pos_1:this.origin=this.pos_2,Math.floor(998*Math.random())%10>5?this.destination=this.pos_1:this.destination=this.pos_2,1==this.first_found&&(this.first_found=!1,cc.systemEvent.on(l.DistributedEvent.guest_behavior_over,this.guest_behavior_over,this))},e.prototype.change_behavior=function(){},e.prototype.guest_behavior_over=function(){},e.prototype.Story=function(){},e.prototype.random_kebab=function(){var e=s.default.Instance.KebabsConfig.length,t=Math.floor(Math.random()*e);return s.default.Instance.KebabsConfig[t].name},Object.defineProperty(e.prototype,"TeamId",{get:function(){return this.team_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GuestArray",{get:function(){return this.guest_array},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GuestTeamType",{get:function(){return this.guest_team_type},enumerable:!1,configurable:!0}),c([d],e)}());i.default=h,cc._RF.pop(),cc._RF.pop()},{}],TimePlayVoiceManager:[function(e,t,n){"use strict";cc._RF.push(t,"560b9twwWtOq53MSqId0W/S","TimePlayVoiceManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"79b98XdwGxFDZYjYL5nOqyT","TimePlayVoiceManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var s=o("timePlayVoice"),l=cc._decorator,u=l.ccclass,d=(l.property,function(){function e(){this._lists=[]}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),e.prototype.addTimePlayVoice=function(e,t){var n=new s.default(e,t);this._lists.push(n)},e.prototype.resetTime=function(){for(var e=0;e<this._lists.length;e++)this._lists[e].resetTime()},e.prototype.reset=function(){this._lists=null},e.prototype.updateTime=function(e){for(var t=0;t<this._lists.length;t++)this._lists[t].tick(e)},e._instance=null,t=c([u],e)}());i.default=d,cc._RF.pop(),cc._RF.pop()},{}],TypeManager:[function(e,t,n){"use strict";cc._RF.push(t,"690163U/YpOzKLwRYAjhvox","TypeManager");var o=t,a=n;cc._RF.push(o,"facbep5qrBJkJii4zb2hfJe","TypeManager"),Object.defineProperty(a,"__esModule",{value:!0}),a.MoreGameType=a.BundleName=a.GameType=a.PanelEnum=a.RewardType=a.VoiceType=a.GameScence=a.RefreshFacilityPath=a.DishesLocation=a.RecordType=a.UnlockPath=a.FacilityType=a.TaskType=a.ScenceArea=a.FoodType=a.StaffBehavior=a.Team41Behavior=a.Team34Behavior=a.Team33Behavior=a.Team32Behavior=a.Team31Behavior=a.Team22Behavior=a.Team11Behavior=a.KebabsSource=a.KebabCondition=a.KebabType=a.OvenCondition=a.WorkWarn=a.DistributedEvent=void 0,function(e){e.day_night="day_night",e.guest_behavior_over="guest_behavior_over",e.dishes_serving="dishes_serving",e.change_facility="change_facility",e.facility_shake="facility_shake",e.gold_num="gold_num",e.gudie_step="gudie_step",e.facility_red="facility_red",e.shop_red="shop_red",e.change_scence="change_scence",e.task="task",e.illustration="illustration",e.power_num="power_num",e.star_num="star_num",e.lv="lv",e.shop_lv="shop_lv",e.dishes_finished="dishes_finished",e.hide_dialog="hide_dialog",e.work_warn="work_warn",e.visitor_statistics="visitor_statistics",e.departure_statistics="departure_statistics",e.currency_shake="currency_shake",e.winActivityInitComplete="winActivityInitComplete",e.winActivityUpdate="winActivityUpdate",e.userInfoUpdate="userInfoUpdate",e.backHome="backHome",e.jengaGameRestart="jengaGameRestart",e.jengaGameNext="jengaGameNext",e.jengaAutoGame="jengaAutoGame",e.challangeGameRestart="challangeGameRestart",e.challangeGameRecover="challangeGameRecover",e.challangeUpdateBtnState="challangeUpdateBtnState",e.selectKebab="selectKebab",e.selectBg="selectBg",e.selectTable="selectTable",e.skinGuideId="skinGuideId",e.updateSkinRed="updateSkinRed",e.updateNoticeRed="updateNoticeRed"}(a.DistributedEvent||(a.DistributedEvent={})),function(e){e.null="null",e.order_food="order_food",e.pay_money="pay_money",e.clear_table="clear_table",e.order_food2="order_food2",e.pay_money2="pay_money2",e.clear_table2="clear_table2",e.serve_dishes2="serve_dishes2",e.order_food3="order_food3",e.pay_money3="pay_money3",e.clear_table3="clear_table3",e.clear_bed1="clear_bed1",e.clear_bed2="clear_bed2",e.check_in="check_in",e.serve_dishes="serve_dishes",e.clear_dish="clear_dish",e.guest_story="guest_story",e.exhibition_ticket="exhibition_ticket",e.exhibition_souvenir="exhibition_souvenir",e.exhibition_clean="exhibition_clean"}(a.WorkWarn||(a.WorkWarn={})),function(e){e.normal="normal",e.hot="hot",e.one_grid="one_grid",e.video="video",e.cover="cover",e.tray="tray"}(a.OvenCondition||(a.OvenCondition={})),function(e){e.meat="meat",e.seafood="seafood",e.vegetable="vegetable",e.fruit="fruit",e.staple="staple",e.bean_product="bean_product",e.midAutumn="midAutumn"}(a.KebabType||(a.KebabType={})),function(e){e.normal="normal",e.frozen="frozen",e.tinfoil="tinfoil"}(a.KebabCondition||(a.KebabCondition={})),function(e){e[e.common=1]="common",e[e.midAutumn=2]="midAutumn"}(a.KebabsSource||(a.KebabsSource={})),function(e){e.move_1="move_1",e.wait_order_food="wait_order_food",e.order_food="order_food",e.wait_food="wait_food",e.food="food",e.wait_pay="wait_pay",e.leave="leave"}(a.Team11Behavior||(a.Team11Behavior={})),function(e){e.move_1="move_1",e.move_3="move_3",e.queue_counter="queue_counter",e.wait_check_in="wait_check_in",e.check_in="check_in",e.move_4="move_4",e.stroll="stroll",e.move_5="move_5",e.tea="tea",e.move_6="move_6",e.have_bath="have_bath",e.move_7="move_7",e.sleep="sleep",e.leave="leave"}(a.Team22Behavior||(a.Team22Behavior={})),function(e){e.move_1="move_1",e.theatregoing="theatregoing",e.go_counter="go_counter",e.wait_pay="wait_pay",e.leave="leave"}(a.Team31Behavior||(a.Team31Behavior={})),function(e){e.move_1="move_1",e.wait_1="wait_1",e.move_2="move_2",e.wait_2="wait_2",e.move_3="move_3",e.move_4="move_4",e.wait_3="wait_3",e.go_counter="go_counter",e.wait_pay="wait_pay",e.leave="leave"}(a.Team32Behavior||(a.Team32Behavior={})),function(e){e.move_1="move_1",e.queue_up="queue_up",e.move_2="move_2",e.drifting="drifting",e.move_3="move_3",e.wait_1="wait_1",e.go_counter="go_counter",e.wait_pay="wait_pay",e.leave="leave"}(a.Team33Behavior||(a.Team33Behavior={})),function(e){e.move_0="move_0",e.move_1="move_1",e.wait_1="wait_1",e.move_2="move_2",e.wait_2="wait_2",e.move_3="move_3",e.wait_3="wait_3",e.move_4="move_4",e.wait_4="wait_4",e.go_counter1="go_counter1",e.go_counter2="go_counter2",e.go_counter3="go_counter3",e.go_counter4="go_counter4",e.wait_pay="wait_pay",e.leave="leave"}(a.Team34Behavior||(a.Team34Behavior={})),function(e){e.move_0="move_0",e.move_1="move_1",e.move_2="move_2",e.move_3="move_3",e.pay_1="pay_1",e.booth_move="booth_move",e.booth_visiti="booth_visiti",e.booth_wait="booth_wait",e.move_shop="move_shop",e.pay_2="pay_2",e.leave1="leave1",e.leave2="leave2"}(a.Team41Behavior||(a.Team41Behavior={})),function(e){e.move_station="move_station",e.wait_work="wait_work",e.move_table="move_table",e.move_bed="move_bed",e.move_counter="move_counter",e.check_in="check_in",e.return_station="return_station",e.settle_accounts="settle_accounts",e.order_food="order_food",e.move_kitchen="move_kitchen",e.serve_food="serve_food",e.move_canteen="move_canteen",e.move_canteen2="move_canteen2",e.serve_table="serve_table",e.clear_table="clear_table",e.clear_bed="clear_bed",e.cook_dinner="cook_dinner",e.wash_dishes="wash_dishes",e.greet_guests="greet_guests",e.wait_talk="wait_talk",e.additional_cargo="additional_cargo",e.move_booth="move_booth",e.clean_rubbish="additional_cargo"}(a.StaffBehavior||(a.StaffBehavior={})),function(e){e.main_course="main_course",e.second_course="second_course",e.drink="drink"}(a.FoodType||(a.FoodType={})),function(e){e.parking="parking",e.backyard="backyard",e.doorway="doorway",e.escort="escort",e.exhibition="exhibition",e.first_kitchen="first_kitchen",e.first_canteen="first_canteen",e.first_room1="first_room1",e.first_room2="first_room2",e.first_room3="first_room3",e.second_canteen="second_canteen",e.second_room1="second_room1",e.second_room2="second_room2",e.third_canteen="third_canteen",e.third_room1="third_room1",e.third_room2="third_room2"}(a.ScenceArea||(a.ScenceArea={})),function(e){e.lv="lv",e.shop="shop",e.area="area",e.facility="facility"}(a.TaskType||(a.TaskType={})),function(e){e.queue_stool="queue_stool",e.outdoor_ground="outdoor_ground",e.sunshade="sunshade",e.outdoor_wall="outdoor_wall",e.snack_platform="snack_platform",e.outdoor_decorate1="outdoor_decorate1",e.counter="counter",e.counter_decorate1="counter_decorate1",e.counter_decorate2="counter_decorate2",e.counter_decorate3="counter_decorate3",e.table_1="table_1",e.table_2="table_2",e.table_3="table_3",e.table_4="table_4",e.condiment_area="condiment_area",e.display_board="display_board",e.wine_cabinet="wine_cabinet",e.door="door",e.door_decorate="door_decorate",e.stairs_decorate="stairs_decorate",e.hall_ground="hall_ground",e.hall_wall="hall_wall",e.chopping_board="chopping_board",e.serving_board="serving_board",e.scullery="scullery",e.hearth="hearth",e.vegetable_rack1="vegetable_rack1",e.vegetable_rack2="vegetable_rack2",e.kitchen_ground="kitchen_ground",e.kitchen_wall="kitchen_wall",e.room1_tabel="room1_tabel",e.room1_decorate1="room1_decorate1",e.room1_decorate2="room1_decorate2",e.room1_cabinet="room1_cabinet",e.room1_sofa="room1_sofa",e.room1_ground="room1_ground",e.room1_wall="room1_wall",e.room2_tabel="room2_tabel",e.room2_decorate1="room2_decorate1",e.room2_decorate2="room2_decorate2",e.room2_cabinet="room2_cabinet",e.room2_sofa="room2_sofa",e.room2_ground="room2_ground",e.room2_wall="room2_wall",e.room3_tabel="room3_tabel",e.room3_decorate1="room3_decorate1",e.room3_decorate2="room3_decorate2",e.room3_cabinet="room3_cabinet",e.room3_sofa="room3_sofa",e.room3_ground="room3_ground",e.room3_wall="room3_wall",e.second_floor_counter="second_floor_counter",e.second_floor_counter_wall="second_floor_counter_wall",e.second_floor_ground1="second_floor_ground1",e.second_floor_decorate1="second_floor_decorate1",e.second_floor_decorate2="second_floor_decorate2",e.second_floor_stool="second_floor_stool",e.second_floor_bed1="second_floor_bed1",e.second_floor_tea1="second_floor_tea1",e.second_floor_wall1="second_floor_wall1",e.second_floor_ground2="second_floor_ground2",e.second_floor_carpet1="second_floor_carpet1",e.second_floor_screen1="second_floor_screen1",e.second_floor_vase1="second_floor_vase1",e.second_floor_lantern1="second_floor_lantern1",e.second_floor_bed2="second_floor_bed2",e.second_floor_pool="second_floor_pool",e.second_floor_wall2="second_floor_wall2",e.second_floor_ground3="second_floor_ground3",e.second_floor_screen2="second_floor_screen2",e.second_floor_door="second_floor_door",e.second_floor_vase2="second_floor_vase2",e.second_floor_desk1="second_floor_desk1",e.second_floor_lantern2="second_floor_lantern2",e.second_floor_tea2="second_floor_tea2",e.second_floor_fabrication="second_floor_fabrication",e.second_floor_steamer="second_floor_steamer",e.second_floor_cabinet="second_floor_cabinet",e.second_floor_stove="second_floor_stove",e.second_floor_wall3="second_floor_wall3",e.second_floor_ground4="second_floor_ground4",e.second_floor_table1="second_floor_table1",e.second_floor_table2="second_floor_table2",e.backyard_pool="backyard_pool",e.backyard_land1="backyard_land1",e.backyard_land2="backyard_land2",e.backyard_land3="backyard_land3",e.backyard_land4="backyard_land4",e.backyard_desk="backyard_desk",e.backyard_rail="backyard_rail",e.backyard_bonsai="backyard_bonsai",e.backyard_decorate1="backyard_decorate1",e.backyard_decorate2="backyard_decorate2",e.backyard_ground="backyard_ground",e.backyard_background="backyard_background",e.third_floor_counter="third_floor_counter",e.third_floor_screen2="third_floor_screen2",e.third_floor_screen3="third_floor_screen3",e.third_floor_decorate1="third_floor_decorate1",e.third_floor_decorate2="third_floor_decorate2",e.third_floor_decorate3="third_floor_decorate3",e.third_floor_decorate4="third_floor_decorate4",e.third_floor_decorate5="third_floor_decorate5",e.third_floor_decorate6="third_floor_decorate6",e.third_floor_decorate7="third_floor_decorate7",e.third_floor_decorate8="third_floor_decorate8",e.third_floor_decorate9="third_floor_decorate9",e.third_floor_decorate10="third_floor_decorate10",e.third_floor_decorate11="third_floor_decorate11",e.third_floor_plant="third_floor_plant",e.third_floor_platform="third_floor_platform",e.third_floor_desk1="third_floor_desk1",e.third_floor_desk2="third_floor_desk2",e.third_floor_shelf="third_floor_shelf",e.third_floor_divination="third_floor_divination",e.third_floor_station="third_floor_station",e.third_floor_booth="third_floor_booth",e.third_floor_bridge="third_floor_bridge",e.third_floor_spring="third_floor_spring",e.third_floor_drifting="third_floor_drifting",e.third_floor_pavilion="third_floor_pavilion",e.third_film_screen="third_film_screen",e.third_film_stool="third_film_stool",e.third_floor_ground1="third_floor_ground1",e.third_floor_ground2="third_floor_ground2",e.third_floor_ground3="third_floor_ground3",e.third_floor_wall1="third_floor_wall1",e.third_floor_wall2="third_floor_wall2",e.third_floor_bed="third_floor_bed",e.third_floor_stool2="third_floor_stool2",e.third_floor_stone="third_floor_stone",e.third_floor_room="third_floor_room",e.third_floor_table1="third_floor_table1",e.third_floor_table2="third_floor_table2",e.park_sedan_1="park_sedan_1",e.park_sedan_2="park_sedan_2",e.park_sedan_3="park_sedan_3",e.park_sedan_4="park_sedan_4",e.park_sedan_5="park_sedan_5",e.park_ground_1="park_ground_1",e.park_ground_2="park_ground_2",e.park_ground_3="park_ground_3",e.park_ground_4="park_ground_4",e.park_ground_5="park_ground_5",e.park_decorate1="park_decorate1",e.park_decorate2="park_decorate2",e.park_plant="park_plant",e.escort_door="escort_door",e.escort_desk="escort_desk",e.escort_ground="escort_ground",e.escort_flowerpot="escort_flowerpot",e.escort_box="escort_box",e.escort_cargo="escort_cargo",e.escort_lawn1="escort_lawn1",e.escort_lawn2="escort_lawn2",e.escort_quiver="escort_quiver",e.escort_stone="escort_stone",e.escort_flagging="escort_flagging",e.escort_dumbbell1="escort_dumbbell1",e.escort_dumbbell2="escort_dumbbell2",e.escort_bonsai="escort_bonsai",e.escort_shelf="escort_shelf",e.escort_barbell="escort_barbell",e.escort_deadman="escort_deadman",e.escort_rail="escort_rail",e.escort_carriage="escort_carriage",e.escort_board="escort_board",e.exhibition_ground="exhibition_ground",e.exhibition_wall="exhibition_wall",e.exhibition_billboard="exhibition_billboard",e.exhibition_screen="exhibition_screen",e.exhibition_counter="exhibition_counter",e.exhibition_book="exhibition_book",e.exhibition_tickets="exhibition_tickets",e.exhibition_lamp="exhibition_lamp",e.exhibition_booth="exhibition_booth",e.exhibition_booth2="exhibition_booth2",e.exhibition_booth3="exhibition_booth3",e.exhibition_booth4="exhibition_booth4",e.exhibition_booth5="exhibition_booth5",e.exhibition_booth6="exhibition_booth6",e.exhibition_booth7="exhibition_booth7",e.exhibition_booth8="exhibition_booth8",e.exhibition_booth9="exhibition_booth9",e.exhibition_booth10="exhibition_booth10",e.exhibition_booth11="exhibition_booth11",e.exhibition_booth12="exhibition_booth12",e.exhibition_booth13="exhibition_booth13",e.exhibition_booth14="exhibition_booth14",e.exhibition_table="exhibition_table",e.exhibition_table2="exhibition_table2",e.exhibition_shelf="exhibition_shelf",e.exhibition_picture="exhibition_picture",e.exhibition_sugar="exhibition_sugar",e.exhibition_picture2="exhibition_picture2",e.exhibition_fan="exhibition_fan",e.exhibition_shelf2="exhibition_shelf2",e.exhibition_cucurbit="exhibition_cucurbit",e.exhibition_picture3="exhibition_picture3",e.exhibition_basket="exhibition_basket",e.exhibition_wallet="exhibition_wallet",e.exhibition_vase="exhibition_vase",e.exhibition_vase2="exhibition_vase2",e.exhibition_lamp2="exhibition_lamp2",e.exhibition_screen2="exhibition_screen2",e.exhibition_candelabrum="exhibition_candelabrum",e.exhibition_picture4="exhibition_picture4",e.exhibition_bonsai="exhibition_bonsai",e.exhibition_washbasin="exhibition_washbasin",e.exhibition_chronometer="exhibition_chronometer",e.exhibition_counter2="exhibition_counter2",e.exhibition_gate="exhibition_gate",e.exhibition_cabinet="exhibition_cabinet",e.exhibition_cabinet2="exhibition_cabinet2",e.exhibition_table3="exhibition_table3",e.exhibition_shelf3="exhibition_shelf3",e.exhibition_jade="exhibition_jade",e.exhibition_exhibits1="exhibition_exhibits1",e.exhibition_exhibits2="exhibition_exhibits2",e.exhibition_exhibits3="exhibition_exhibits3",e.exhibition_exhibits4="exhibition_exhibits4",e.exhibition_exhibits5="exhibition_exhibits5",e.exhibition_exhibits6="exhibition_exhibits6",e.exhibition_exhibits7="exhibition_exhibits7",e.exhibition_exhibits8="exhibition_exhibits8",e.exhibition_exhibits9="exhibition_exhibits9",e.exhibition_exhibits10="exhibition_exhibits10",e.exhibition_exhibits11="exhibition_exhibits11",e.exhibition_exhibits12="exhibition_exhibits12",e.exhibition_exhibits13="exhibition_exhibits13",e.exhibition_exhibits14="exhibition_exhibits14",e.exhibition_exhibits15="exhibition_exhibits15",e.exhibition_exhibits16="exhibition_exhibits16",e.exhibition_exhibits17="exhibition_exhibits17",e.exhibition_exhibits18="exhibition_exhibits18",e.exhibition_exhibits19="exhibition_exhibits19",e.exhibition_exhibits20="exhibition_exhibits20",e.exhibition_exhibits21="exhibition_exhibits21"}(a.FacilityType||(a.FacilityType={})),function(e){e.default="default",e.money="money"}(a.UnlockPath||(a.UnlockPath={})),function(e){e.first_backyard="first_backyard",e.game_explain1="game_explain1",e.game_explain2="game_explain2",e.game_explain3="game_explain3",e.game_explain4="game_explain4",e.game_explain5="game_explain5",e.game_explain6="game_explain6",e.game_explain7="game_explain7",e.game_explain8="game_explain8",e.game_explain9="game_explain9",e.guide_prop1="guide_prop1",e.guide_prop2="guide_prop2",e.guide_prop3="guide_prop3",e.gudie_game="gudie_game",e.newcomer_package1="newcomer_package1",e.into_backyard="into_backyard",e.leave_backyard="leave_backyard",e.into_escort="into_escort",e.leave_escort="leave_escort",e.into_exhibition="into_exhibition",e.leave_exhibition="leave_exhibition",e.into_first_floor="into_first_floor",e.leave_first_floor="leave_first_floor",e.into_second_floor="into_second_floor",e.leave_second_floor="leave_second_floor",e.into_third_floor="into_third_floor",e.leave_third_floor="leave_third_floor",e.leave_park="leave_park",e.add_desktop="add_desktop",e.collect_gift="collect_gift"}(a.RecordType||(a.RecordType={})),function(e){e.first_main_1="first_main_1",e.first_main_2="first_main_2",e.first_second_1="first_second_1",e.first_second_2="first_second_2",e.first_drink_1="first_drink_1",e.second_tea_1="second_tea_1",e.second_dessert_1="second_dessert_1",e.second_dessert_2="second_dessert_2"}(a.DishesLocation||(a.DishesLocation={})),function(e){e.init="init",e.unlock_default="unlock_default",e.unlock="unlock",e.upgrade="upgrade",e.change="change"}(a.RefreshFacilityPath||(a.RefreshFacilityPath={})),function(e){e.outdoor_scence="outdoor_scence",e.first_floor_scence="first_floor_scence",e.second_floor_scence="second_floor_scence",e.third_floor_scence="third_floor_scence"}(a.GameScence||(a.GameScence={})),function(e){e.taste="taste",e.efficient="efficient",e.sausage="sausage",e.chicken_wings="chicken_wings",e.oyster="oyster",e.tofu="tofu",e.tomato="tomato",e.trotters="trotters",e.urge="urge",e.oven="oven",e.prop="prop",e.time="time",e.thaw="thaw",e.scene1="scene1",e.scene2="scene2",e.scene3="scene3",e.scene4="scene4",e.scene5="scene5"}(a.VoiceType||(a.VoiceType={})),function(e){e.power="power",e.gold="gold",e.prop_1="prop_1",e.prop_2="prop_2",e.prop_3="prop_3",e.kebabs="kebabs",e.winActivityFish="winActivityFish"}(a.RewardType||(a.RewardType={})),(a.PanelEnum||(a.PanelEnum={})).set="set",function(e){e.none="none",e.barbecue="barbecue",e.jenga="jenga",e.challange="challange"}(a.GameType||(a.GameType={})),function(e){e.Bundle1UI="Bundle1UI",e.Bundle1Pre_Challange="Bundle1Pre_Challange",e.Bundle1UI_Challange="Bundle1UI_Challange",e.SkinPre="SkinPre",e.SkinUI="SkinUI",e.BgIcon="bgIcon",e.TableIcon="tableIcon"}(a.BundleName||(a.BundleName={})),(a.MoreGameType||(a.MoreGameType={})).Jenga="Jenga",cc._RF.pop(),cc._RF.pop()},{}],UIBase:[function(e,t,n){"use strict";cc._RF.push(t,"317f7Jrf5tFZ6C05CXlFAtD","UIBase");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"a5d7eMz471KzazS5Xfc4Y26","UIBase");var r,c,s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.property=a.ccclass=void 0,a.ccclass=(c=cc._decorator).ccclass,a.property=c.property;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),Object.defineProperty(t.prototype,"Tag",{get:function(){return this.tag},set:function(e){this.tag=e},enumerable:!1,configurable:!0}),t.getUrl=function(){return this.prefabUrl},t.getName=function(){return this.className},t.getBundle=function(){return this.bundleName},t.getDeps=function(){return this.bundleDeps},t.prototype.onLoad=function(){this.onUILoad()},t.prototype.onEnable=function(){this.onUIEnable()},t.prototype.start=function(){this.onUIStart()},t.prototype.update=function(e){this.onUpdate(e)},t.prototype.onDisable=function(){this.onUIDisable()},t.prototype.onDestroy=function(){this.onUIDestroy()},t.prototype.onInit=function(){},t.prototype.onUILoad=function(){},t.prototype.onUIEnable=function(){},t.prototype.onUIStart=function(){},t.prototype.onUpdate=function(){},t.prototype.onUIDisable=function(){},t.prototype.onUIDestroy=function(){},l([a.ccclass],t)}(cc.Component);a.default=u,cc._RF.pop(),cc._RF.pop()},{}],UIManager:[function(e,t,n){"use strict";cc._RF.push(t,"b1042eifp1GSamtsX8aejlb","UIManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"de138VjPvxEbq6/7DG554Tr","UIManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},s=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},l=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.UIOrder=void 0;var u=o("BundleManger"),d=o("InfoManager");(function(e){e.Interface_1="Interface_1",e.Window_1="Window_1",e.Window_2="Window_2",e.Window_3="Window_3"})(i.UIOrder||(i.UIOrder={}));var h=cc._decorator,p=h.ccclass,f=(h.property,function(){function e(){this.ts_ui={}}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new t),this.instance},enumerable:!1,configurable:!0}),e.prototype.Init=function(){this.ts_ui={}},e.prototype.GetUI=function(e){return void 0===this.ts_ui[e.getName()]?void 0:null===this.ts_ui[e.getName()]?null:this.ts_ui[e.getName()]},e.prototype.OpenUI=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];switch(this.GetUI(e)){case null:console.error(e.getName(),"\u6b63\u5728\u521b\u5efa\u4e2d================");break;case void 0:this.foundUI(e,t,n);break;default:this.showUI(e,n)}},e.prototype.HideUI=function(e){console.log("\u9690\u85cfUI",e.getName());var t=this.GetUI(e);t&&(t.node.active=!1)},e.prototype.DestroyUI=function(e){console.log("\u5220\u9664UI",e.getName()),this.GetUI(e)&&(this.ts_ui[e.getName()].node.destroy(),delete this.ts_ui[e.getName()])},e.prototype.showUI=function(e,t){var n=this.GetUI(e);n?(n.onInit(t),n.node.active=!0):console.error("\u663e\u793a ui "+e.getName()+" \u4e0d\u5b58\u5728")},e.prototype.foundUI=function(e,t,n){return s(this,void 0,void 0,function(){var o,a,i,r,c;return l(this,function(s){switch(s.label){case 0:return void 0!==this.ts_ui[e.getName()]?(console.error("\u521b\u5efa ui "+e.getName()+" \u5df2\u5b58\u5728"),[2]):(console.log("\u521b\u5efaUI",e.getName(),"bundle\u5305",e.getBundle()),this.ts_ui[e.getName()]=null,d.default.Instance.TsInitial.ShowVideoShade(!0),o=e.getDeps(),[4,u.default.Instance.PromiseAll(o)]);case 1:return s.sent(),[4,u.default.Instance.LoadPrefab(e.getUrl(),e.getBundle())];case 2:return a=s.sent(),null==(i=cc.instantiate(a))?(console.error(e.getUrl()+"\u6ca1\u6709\u9884\u5236\u4f53!!!"),delete this.ts_ui[e.getName()],d.default.Instance.TsInitial.ShowTips("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),d.default.Instance.TsInitial.ShowVideoShade(!1),[2]):null==(r=i.getComponent(e))?(console.error(e.getUrl()+"\u6ca1\u6709\u7ed1\u5b9aUI\u811a\u672c!!!"),delete this.ts_ui[e.getName()],d.default.Instance.TsInitial.ShowTips("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),d.default.Instance.TsInitial.ShowVideoShade(!1),[2]):(c=cc.find("Canvas").getChildByName(t))?(d.default.Instance.TsInitial.ShowVideoShade(!1),i.setParent(c),r.Tag=e.getName(),this.ts_ui[e.getName()]=r,r.onInit(n),[2]):(console.error(e.getUrl()+"\u7236\u8282\u70b9\u672a\u627e\u5230!!!"),delete this.ts_ui[e.getName()],d.default.Instance.TsInitial.ShowTips("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),d.default.Instance.TsInitial.ShowVideoShade(!1),[2])}})})},t=c([p],e)}());i.default=f,cc._RF.pop(),cc._RF.pop()},{}],UiAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"dffe7Ye7nZCibXlCld9X8i4","UiAnimation");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"30b708BOENNmquG2r1YSeHB","UiAnimation");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,d=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t._blockNode=null,t.playing=!0,t}return c(t,e),t.prototype.onLoad=function(){this.ani=this.node.getComponent(cc.Animation),this.addBlockNode(),this.ani.on("finished",this.ani_over,this)},t.prototype.onEnable=function(){this.playing=!0,this._blockNode.active=this.playing,this.ani.play("ani_tongyongtc_open")},t.prototype.PlayClose=function(e){this.call_back=e,this.ani.play("ani_tongyongtc_close"),this.playing=!0,this._blockNode&&(this._blockNode.active=!0)},t.prototype.ani_over=function(){this.playing=!1,this._blockNode&&(this._blockNode.active=!1),this.call_back&&(this.call_back(),this.call_back=null)},t.prototype.addBlockNode=function(){this._blockNode=new cc.Node,this._blockNode.setParent(this.node.parent),this._blockNode.x=0,this._blockNode.y=0,this._blockNode.width=750,this._blockNode.height=1800,this._blockNode.addComponent(cc.BlockInputEvents)},s([u],t)}(cc.Component));a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Util:[function(e,t,n){"use strict";cc._RF.push(t,"e2865t9j49LubC9/v1cwLYc","Util");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"1dd340lUO1FTri9O8KJFHvb","Util");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var s=o("bezier"),l=cc._decorator,u=l.ccclass,d=(l.property,function(){function e(){}return e.set_head=function(e,t,n){void 0===n&&(n=null);var o=e;if(o&&0!=o.length){var a=new Image;a.crossOrigin="anonymous",a.onload=function(){var o=new cc.Texture2D;o.initWithElement(a);var i=new cc.SpriteFrame;i.setTexture(o),t&&(t.spriteFrame=i),n&&n(e,i)},a.onerror=function(e){cc.error("Failed to load image: "+e)},a.src=o}},e.getDistance=function(e,t){var n=cc.v3(e.x-t.x,e.y-t.y,e.z-t.z);return Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z)},e.bezierTo=function(e,t,n,o,a,i,r){return(i=i||Object.create(null)).onUpdate=function(t,i){var r,c,s,l,u,d,h;e.position=(s=o,l=a,u=(1-(r=i))*(1-r)*(c=n).x+2*r*(1-r)*s.x+r*r*l.x,d=(1-r)*(1-r)*c.y+2*r*(1-r)*s.y+r*r*l.y,h=(1-r)*(1-r)*c.z+2*r*(1-r)*s.z+r*r*l.z,new cc.Vec3(u,d,h))},cc.tween(e).to(t,{},i).call(function(){r&&r()}).start()},e.bezier2Length=function(e,t,n){return s.bezier_length_with_gaussian(e,t,n)},e.bezier2=function(e,t,n,o){return{x:(1-e)*(1-e)*t.x+2*(1-e)*e*n.x+e*e*o.x,y:(1-e)*(1-e)*t.y+2*(1-e)*e*n.y+e*e*o.y,z:(1-e)*(1-e)*t.z+2*(1-e)*e*n.z+e*e*o.z}},e.getDayByTime=function(e){var t=new Date(e).getDay();return 0==t&&(t=7),t},e.ContrastDay=function(e,t){var n=new Date(e),o=new Date(t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()==n.getDate()},e.TimerFormatHour=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!0);var n="0",o=Math.floor(e/60),a=Math.floor(e%60);return(n=Math.floor(o/60))<=9&&(n="0"+n),(o=Math.floor(o%60))<=9&&(o="0"+o),a<=9&&(a="0"+a),t?n+":"+o+":"+a:o+":"+a},c([u],e)}());i.default=d,cc._RF.pop(),cc._RF.pop()},{}],VoiceLabelManager:[function(e,t,n){"use strict";cc._RF.push(t,"44e32zSgZ5KRrradsqBSd8P","VoiceLabelManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"23c4b393ShHGL/Y2p+Jhduw","VoiceLabelManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},s=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},l=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GameManger"),d=o("RoleSoundManager"),h=cc._decorator,p=h.ccclass,f=(h.property,function(){function e(){this._pool=null}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),e.prototype.initManager=function(){this._pool=new cc.NodePool},e.prototype.showTalk=function(e,t,n){return void 0===n&&(n=1),s(this,void 0,void 0,function(){var o,a,i;return l(this,function(){return(o=d.default.Instance.getWordsById(t))&&o.words?e?(a=!1,i=e,e instanceof cc.Node?e.isValid&&(a=!0):e.node&&e.node.isValid&&e.node.parent&&(i=e.node,a=!0),a&&u.default.Instance.GameController.FoundDialogueBox(!0).Show5(o.words,d.default.Instance.talkTime,i,n),[2]):[2]:(console.error("\u6ca1\u6709\u6587\u6848",t),[2])})})},e._instance=null,t=c([p],e)}());i.default=f,cc._RF.pop(),cc._RF.pop()},{}],WinActivityInterface:[function(e,t,n){"use strict";cc._RF.push(t,"e3e3f8VH2xHaoBBXDI4OQ9E","WinActivityInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"a5352+Wcc9JIpnhCOmDcwaf","WinActivityInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("BundleManger"),h=o("InfoManager"),p=o("SoundManager"),f=o("StoragerManager"),_=o("TypeManager"),y=o("UIManager"),b=o("WinActivityManager"),v=o("List"),m=o("Util"),g=o("WinActivityRankItem"),I=o("WinActivityRewardTip"),T=o("AuthorizationInterface"),k=o("ShopAwardInterface"),S=o("WinActivityOpenInterface"),w=o("WinActivityRuleInterface"),O=cc._decorator,F=O.ccclass,B=O.property,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.bg=null,t.emptyNode=null,t.detailBtn=null,t.rewardTip=null,t.ruleList=null,t.timeLabel=null,t.rankLabel=null,t.nameLabel=null,t.headIcon=null,t.box=null,t.scoreLabel=null,t.List=null,t.scrollView=null,t.GM=null,t.editBox=null,t._selfRank=0,t._selfInfo="",t._rankListDatas=[],t._rewardTipType=0,t}var n;return s(t,e),n=t,t.prototype.gmBtnClick=function(){if(Number(this.editBox.string)){if(0==Number(this.editBox.string))return console.error("\u6e05\u7a7aai"),f.default.Instance.aiLists={},void f.default.Instance.sysWinActivityData();if(-1==Number(this.editBox.string))return console.error("\u6e05\u7a7a\u5b58\u6863"),f.default.Instance.aiLists={},f.default.Instance.winActivityScore=0,f.default.Instance.comboLevel=0,f.default.Instance.isFisrtOpen=!1,f.default.Instance.isAuthorization=!1,f.default.Instance.winActivityTime=0,f.default.Instance.winActivityLastTime=0,void f.default.Instance.sysWinActivityData();f.default.Instance.gmTime=Number(this.editBox.string),console.error("\u4fdd\u5b58\u7684\u65f6\u95f4\u6233:",f.default.Instance.gmTime),f.default.Instance.sysWinActivityData()}else console.error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65f6\u95f4\u6233:",this.editBox.string)},t.prototype.onUIEnable=function(){this.bg.on(cc.Node.EventType.TOUCH_END,this._bgClick,this),this.emptyNode.on(cc.Node.EventType.TOUCH_END,this._emptyNodeClick,this),this.detailBtn.on(cc.Node.EventType.TOUCH_END,this._detailBtnClick,this),this.headIcon.node.parent.on(cc.Node.EventType.TOUCH_END,this._selfBtnClick,this),this.scrollView.node.on("scrolling",this._onScrolling,this,!0),this.scrollView.node.on(cc.Node.EventType.TOUCH_START,this._touchStart,this),this.scrollView.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMove,this),cc.systemEvent.on(_.DistributedEvent.winActivityInitComplete,this._initCompleteEvent,this),cc.systemEvent.on(_.DistributedEvent.userInfoUpdate,this._userInfoUpdateEvent,this)},t.prototype.onUIDisable=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this._bgClick,this),this.emptyNode.off(cc.Node.EventType.TOUCH_END,this._emptyNodeClick,this),this.detailBtn.off(cc.Node.EventType.TOUCH_END,this._detailBtnClick,this),this.headIcon.node.parent.off(cc.Node.EventType.TOUCH_END,this._selfBtnClick,this),this.scrollView.node.off("scrolling",this._onScrolling,this,!0),this.scrollView.node.off(cc.Node.EventType.TOUCH_START,this._touchStart,this),this.scrollView.node.off(cc.Node.EventType.TOUCH_MOVE,this._touchMove,this),cc.systemEvent.off(_.DistributedEvent.winActivityInitComplete,this._initCompleteEvent,this),cc.systemEvent.off(_.DistributedEvent.userInfoUpdate,this._userInfoUpdateEvent,this)},t.prototype._bgClick=function(){this.closeView()},t.prototype._emptyNodeClick=function(){this.hideRewardList()},t.prototype._touchStart=function(){b.default.Instance.scollingY=0},t.prototype._touchMove=function(e){b.default.Instance.scollingY+=Math.abs(e.getDeltaY())},t.prototype._detailBtnClick=function(){y.default.Instance.OpenUI(w.default,y.UIOrder.Window_2)},t.prototype._selfBtnClick=function(){var e=b.default.Instance.getLevelByRank(this._selfRank),t=b.default.Instance.getRewardByLevel(e);if(t){var n=this.rewardTip.getComponent(I.default),o=cc.v2(144,-350);if(o){this.rewardTip.active=!0,this._rewardTipType=1,this.rewardTip.setPosition(144,o.y+this.rewardTip.height/2+40,0);var a=[];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];a.push({type:i,value:r})}n.init(a)}}},t.prototype._onScrolling=function(){0==this._rewardTipType&&(b.default.Instance.scollingLimitY>=b.default.Instance.scollingY||this.hideRewardList())},t.prototype._initCompleteEvent=function(){this._initView(),this._setDayLabel()},t.prototype._userInfoUpdateEvent=function(){var e=this._selfRank-1;this.List.updateItem(e),this._initSelfRank()},t.prototype.onInit=function(){this.ani_popup.play("ani_tongyongtanchuang_open"),p.default.Instance.PlaySound("book_pop_open")},t.prototype.onUIStart=function(){if(f.default.Instance.activityRewards){var e=[].concat(f.default.Instance.activityRewards);b.default.Instance.initActivity(),y.default.Instance.OpenUI(k.default,y.UIOrder.Window_2,e,"\u70e4\u9c7c\u5927\u5e08\u5956\u52b1",function(){y.default.Instance.OpenUI(S.default,y.UIOrder.Window_2)},1)}this.GM.active=b.default.Instance.openGM,b.default.Instance.isInUpdate||(this._initView(),this._setDayLabel()),f.default.Instance.isFisrtOpen||h.default.Instance.UserHead||(f.default.Instance.isFisrtOpen=!0,f.default.Instance.sysWinActivityData(),y.default.Instance.OpenUI(T.default,y.UIOrder.Window_2))},t.prototype._initView=function(){var e=b.default.Instance.getRanks();this._rankListDatas=e.lists,this._selfRank=e.selfRank,this._selfInfo=this._selfInfo,this.List.numItems=this._rankListDatas.length,this._initRuleList(),this._initSelfRank()},t.prototype._initRuleList=function(){for(var e=this.ruleList.childrenCount,t=0;t<e;t++){var n=this.ruleList.children[t],o=n.getChildByName("icon"),a=n.getChildByName("numLabel").getComponent(cc.Label),i=n.getChildByName("descLabel").getComponent(cc.Label);i.node.color=new cc.Color(148,130,87,255);var r=t+1,c="winActivityUI/fish_0";r==f.default.Instance.comboLevel?(c="winActivityUI/fish_2",i.node.color=new cc.Color(229,94,20,255)):r<f.default.Instance.comboLevel&&(c="winActivityUI/fish_1"),d.default.Instance.LoadSpriteFrame("Bundle2UI",c,o),a.string=b.default.Instance.scores[t]+"",i.string=b.default.Instance.levels[t]+"\u8fde\u80dc"}},t.prototype._initSelfRank=function(){this.nameLabel.string=h.default.Instance.UserName?h.default.Instance.UserName:"",this.rankLabel.string=this._selfRank+"",h.default.Instance.UserHead&&m.default.set_head(h.default.Instance.UserHead,this.headIcon),this.scoreLabel.string=f.default.Instance.winActivityScore+"";var e=b.default.Instance.getLevelByRank(this._selfRank);b.default.Instance.getRewardByLevel(e)?(this.box.active=!0,d.default.Instance.LoadSpriteFrame("Bundle2UI","winActivityUI/box_"+e,this.box)):this.box.active=!1},t.prototype._setDayLabel=function(){this.timeLabel.string="\u5269\u4f59"+b.default.Instance.AcitivityDay+"\u5929"},t.prototype.showRewardList=function(){this.rewardTip.active=!0},t.prototype.hideRewardList=function(){this.rewardTip.active=!1,this._rewardTipType=0},t.prototype.onListRender=function(e,t){var n=e.getComponent(g.default),o=this._rankListDatas[t];if(o){var a=f.default.Instance.aiListIcon[t+1],i=a?a.icon:"";n.refresh({icon:i,name:o.name,score:o.score+o.addScore,levelId:o.levelId,rank:t+1},this._showBoxRewards.bind(this))}},t.prototype._showBoxRewards=function(e){if(!(b.default.Instance.scollingLimitY<=b.default.Instance.scollingY)&&e&&e.node&&e.node.isValid&&e.Rewards){var t=this.rewardTip.getComponent(I.default);if(t){var n=e.node.convertToWorldSpaceAR(cc.v2(0,0)),o=this.rewardTip.parent.convertToNodeSpaceAR(n);if(o){this.rewardTip.active=!0,this._rewardTipType=0,this.rewardTip.setPosition(144,o.y+this.rewardTip.height/2+40,0);var a=[],i=e.Rewards;for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var c=i[r];a.push({type:r,value:c})}t.init(a)}}}},t.prototype.closeView=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){y.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="winActivityPre/WinActivityPre",t.className="winActivityInterface",l([B(cc.Animation)],t.prototype,"ani_popup",void 0),l([B(cc.Node)],t.prototype,"bg",void 0),l([B(cc.Node)],t.prototype,"emptyNode",void 0),l([B(cc.Node)],t.prototype,"detailBtn",void 0),l([B(cc.Node)],t.prototype,"rewardTip",void 0),l([B(cc.Node)],t.prototype,"ruleList",void 0),l([B(cc.Label)],t.prototype,"timeLabel",void 0),l([B(cc.Label)],t.prototype,"rankLabel",void 0),l([B(cc.Label)],t.prototype,"nameLabel",void 0),l([B(cc.Sprite)],t.prototype,"headIcon",void 0),l([B(cc.Node)],t.prototype,"box",void 0),l([B(cc.Label)],t.prototype,"scoreLabel",void 0),l([B(v.default)],t.prototype,"List",void 0),l([B(cc.ScrollView)],t.prototype,"scrollView",void 0),l([B(cc.Node)],t.prototype,"GM",void 0),l([B(cc.EditBox)],t.prototype,"editBox",void 0),n=l([F],t)}(u.default);i.default=x,cc._RF.pop(),cc._RF.pop()},{}],WinActivityManager:[function(e,t,n){"use strict";cc._RF.push(t,"ab7a1lcVCFF8643RzbE/TB/","WinActivityManager");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"149ccMn9lpG8bDOYykY9MVH","WinActivityManager");var c=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},s=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},l=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var u=o("ShopAwardInterface"),d=o("WinActivityOpenInterface"),h=o("GameManger"),p=o("StoragerManager"),f=o("TypeManager"),_=o("UIManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(){function e(){var e,t,n,o,a;this.openGM=!1,this.scollingY=0,this.scollingLimitY=70,this.unLockLevel=10,this.aiNum=29,this.scores=[1,2,3,5,10],this.levels=[1,2,3,4,5],this.maxLevel=5,this.levelRewards={1:(e={},e[f.RewardType.gold]=5e3,e[f.RewardType.prop_1]=8,e[f.RewardType.prop_2]=8,e[f.RewardType.prop_3]=8,e),2:(t={},t[f.RewardType.gold]=3e3,t[f.RewardType.prop_1]=6,t[f.RewardType.prop_2]=6,t[f.RewardType.prop_3]=6,t),3:(n={},n[f.RewardType.gold]=2e3,n[f.RewardType.prop_1]=4,n[f.RewardType.prop_2]=4,n[f.RewardType.prop_3]=4,n),4:(o={},o[f.RewardType.gold]=1500,o[f.RewardType.prop_1]=1,o[f.RewardType.prop_2]=1,o[f.RewardType.prop_3]=1,o),5:(a={},a[f.RewardType.gold]=1e3,a)},this.levelRanks={1:[1],2:[2],3:[3],4:[4,10],5:[11,20]},this.aiLevelConfig={1:{level:1,num:1,range:[70,110]},2:{level:2,num:1,range:[50,90]},3:{level:3,num:1,range:[40,80]},4:{level:4,num:7,range:[20,60]},5:{level:5,num:10,range:[10,40]},6:{level:5,num:9,range:[0,30]}},this.headNum=10,this.headIcon="1",this.headSpreiteFrames={},this._activityTime=-1,this._aiTimeInterval=60,this._time=0,this._isInit=!1,this._isInUpdate=!1,this._inshowReward=!1,this.isNeedOpenAcitivity=!1,this._aiUpdateTime={}}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t.instance||(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),e.prototype.getLevelByRank=function(e){for(var t in this.levelRanks)if(Object.prototype.hasOwnProperty.call(this.levelRanks,t)){var n=this.levelRanks[t],o=n[0],a=n[0];if(2==n.length&&(a=n[1]),e<=a&&e>=o)return Number(t)}return null},e.prototype.getRewardByLevel=function(e){return this.levelRewards[e]},Object.defineProperty(e.prototype,"ActivityTime",{get:function(){return this._activityTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AcitivityDay",{get:function(){var e=this._activityTime;return e<=0&&(e=0),Math.floor(e/86400)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInUpdate",{get:function(){return this._isInUpdate},enumerable:!1,configurable:!0}),e.prototype.checkIsUnlock=function(){return p.default.Instance.BarbecueLv.length>=this.unLockLevel},e.prototype.initManager=function(){return s(this,void 0,void 0,function(){var e,n,o,a,i,r,c,s,u,d,f,_,y,b,v,m,g,I,T,k,S,w;return l(this,function(l){switch(l.label){case 0:if(!this.checkIsUnlock())return[2];if(e=!0,0!=p.default.Instance.winActivityTime?(n=h.default.Instance.LoginTime+1e3*h.default.Instance.OnlineTime,p.default.Instance.gmTime&&(n=p.default.Instance.gmTime+1e3*h.default.Instance.OnlineTime),o=p.default.Instance.winActivityLastTime,a=this.weekRefresh(n,p.default.Instance.winActivityTime),i=(n-o)/1e3,r=new Date(n),c=r.getHours(),s=r.getMinutes(),u=r.getSeconds(),d=86400-(3600*c+60*s+u),a?(0==(f=r.getDay())&&(f=7),_=new Date(o),0==(y=_.getDay())&&(y=7),b=f-y,this.updateOffLineAIListScore(b,i,d),this._activityTime=this._initActivityTime(),this._initAiUpdateTime()):(e=!1,this.showWeekRewards())):this.checkIsUnlock()&&(e=!1,console.error("\u7b2c\u4e00\u6b21\u89e3\u9501\u6210\u529f====="),t.Instance.initActivity(),this.isNeedOpenAcitivity=!0),!e)return[3,2];if(v=!1,(!p.default.Instance.aiListIcon||Object.keys(p.default.Instance.aiListIcon).length<=0)&&(v=!0),!v)for(S in p.default.Instance.aiListIcon)if(!(m=p.default.Instance.aiListIcon[S])||!m.icon){v=!0;break}return v?(g=[],[4,new Promise(function(e){LWGSDK.getLuckyUsers({size:29,success:function(t){e(t)},fail:function(){e([])}})})]):[3,2];case 1:for(g=l.sent(),p.default.Instance.aiListIcon||(p.default.Instance.aiListIcon={}),I=0;I<this.aiNum;I++)T=g[I],k=Math.ceil(Math.random()*this.headNum),S=I+1,T&&(w=T&&T.avatar?T.avatar:k,p.default.Instance.aiListIcon[S]={icon:w});l.label=2;case 2:return p.default.Instance.winActivityLastTime=h.default.Instance.LoginTime+1e3*h.default.Instance.OnlineTime,p.default.Instance.gmTime&&(p.default.Instance.winActivityLastTime=p.default.Instance.gmTime+1e3*h.default.Instance.OnlineTime),this._isInit=!0,[2]}})})},e.prototype.initActivity=function(){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return console.error("initActivity \u521d\u59cb\u5316\u6d3b\u52a8"),p.default.Instance.winActivityTime=h.default.Instance.LoginTime+1e3*h.default.Instance.OnlineTime,p.default.Instance.winActivityLastTime=p.default.Instance.winActivityTime,p.default.Instance.winActivityScore=0,p.default.Instance.comboLevel=1,p.default.Instance.aiLists={},p.default.Instance.gmTime&&(p.default.Instance.winActivityTime=p.default.Instance.gmTime+1e3*h.default.Instance.OnlineTime,p.default.Instance.winActivityLastTime=p.default.Instance.winActivityTime),this._isInUpdate=!0,this._activityTime=this._initActivityTime(),[4,this.initAILists()];case 1:return e.sent(),this._initAiUpdateTime(),this._aiTimeInterval=60,this._isInUpdate=!1,p.default.Instance.sysWinActivityData(),cc.systemEvent.emit(f.DistributedEvent.winActivityInitComplete),[2]}})})},e.prototype.initAILists=function(){return s(this,void 0,void 0,function(){var e,t,n,o,a,i,r,c,s,u,d,h,f,_,y;return l(this,function(l){switch(l.label){case 0:return e=[],[4,new Promise(function(e){LWGSDK.getLuckyUsers({size:29,success:function(t){e(t)},fail:function(){e([])}})})];case 1:e=l.sent(),t={},n=0,p.default.Instance.aiLists={};e:for(o in this.aiLevelConfig)if(Object.prototype.hasOwnProperty.call(this.aiLevelConfig,o))for(a=this.aiLevelConfig[o],i=a.num,a.level,r=a.range,c=0;c<i;c++)if(s=e[n],u=Math.ceil(Math.random()*this.headNum),d=s&&s.nickname?s.nickname:"",h=s&&s.avatar?s.avatar:u,f=r[0]+Math.random()*(r[1]-r[0]),f=Math.floor(f),_=(_=Math.floor(Math.random()*f))||0,t[y=n+1]={icon:"",name:d,levelId:o,score:0,totalScore:f,addScore:_},p.default.Instance.aiListIcon||(p.default.Instance.aiListIcon={}),p.default.Instance.aiListIcon[y]={icon:h},++n>=this.aiNum)break e;return p.default.Instance.aiLists=t,p.default.Instance.sysWinActivityData(),[2]}})})},e.prototype.updateTime=function(e){!this._isInUpdate&&this.checkIsUnlock()&&this._isInit&&(this.updateAIScoreTime(e),this.updateActivityTime(e))},e.prototype.updateAIScoreTime=function(e){if(this._aiUpdateTime&&Object.keys(this._aiUpdateTime).length>0)for(var t in this._aiUpdateTime){var n=this._aiUpdateTime[t];n&&(n.time+=e,n.totalTime<=n.time&&(n.time=0,this.updateAIListScore(n.id)))}},e.prototype.updateActivityTime=function(e){this._activityTime>0&&(this._activityTime-=e,this._activityTime<=0&&(this._activityTime=0,console.error("\u6d3b\u52a8\u65f6\u95f4\u5230\u4e86\u66f4\u65b0\u6d3b\u52a8===="),cc.systemEvent.emit(f.DistributedEvent.winActivityUpdate)))},e.prototype.updateAIListScore=function(e){void 0===e&&(e=null);var t=p.default.Instance.aiLists;if(e){var n=t[e];if(n){var o=n.totalScore,a=n.addScore;if(a<o){var i=o-a,r=[].concat(this.scores).filter(function(e){return e<=i}),c=r[Math.floor(Math.random()*r.length)];c=c||0,n.addScore=a+c>=o?o:a+c}}}else{var s=function(e){if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e];if(n){var o=n.totalScore,a=n.addScore;if(a<o){var i=o-a,r=[].concat(l.scores).filter(function(e){return e<=i}),c=r[Math.floor(Math.random()*r.length)];c=c||0,n.addScore=a+c>=o?o:a+c}}}},l=this;for(var u in t)s(u)}p.default.Instance.sysWinActivityData()},e.prototype.updateOffLineAIListScore=function(e,t){var n=p.default.Instance.aiLists;for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var a=n[o];if(a){var i=a.levelId,r=a.totalScore?a.totalScore:0,c=a.addScore?a.addScore:0,s=a.score?a.score:0,l=this.aiLevelConfig[i],u=l.range,d=r-c;if(d=d||0,e>=1)for(var h=0;h<e;h++)0==h?s+=r:(l&&(r=u[0]+Math.random()*(u[1]-u[0]),r=Math.floor(r),c=Math.floor(Math.random()*r)),(e=h+1)||(s+=r));else if(t>3600){for(var f=Math.floor(t/3600),_=0,y=0;y<f;y++){var b=[].concat(this.scores);_+=b[Math.floor(Math.random()*b.length)]}_+c>=r?c=r:c+=_}c=c||0,a.totalScore=r,a.addScore=c,a.score=s}}p.default.Instance.sysWinActivityData()},e.prototype.getRanks=function(){for(var e=p.default.Instance.aiLists,t=Object.values(e),n=(t=t.sort(function(e,t){return t.score+t.addScore-(e.score+e.addScore)})).length,o=t.length,a=0;a<o;a++){var i=t[a];if(i){var r=i.score+i.addScore;if((r=r||0)<=p.default.Instance.winActivityScore){n=a;break}}}var c={icon:"",name:"",levelId:-1,score:p.default.Instance.winActivityScore,totalScore:0,addScore:0};return t.length<=0?{lists:[c],selfInfo:c,selfRank:1}:(t.splice(n,0,c),{lists:t,selfInfo:c,selfRank:n+1})},e.prototype.showWeekRewards=function(e){var t=this;if(void 0===e&&(e=function(){t._inshowReward=!1,t.initActivity(),_.default.Instance.OpenUI(d.default,_.UIOrder.Window_2)}),!this._inshowReward&&(this._inshowReward=!0,!p.default.Instance.activityRewards)){var n=this.getRanks();if(n){var o=n.selfRank,a=this.getLevelByRank(o),i=this.getRewardByLevel(a);if(i){var r=[];for(var c in i)if(Object.prototype.hasOwnProperty.call(i,c)){var s=i[c];s&&r.push({type:c,value:s})}p.default.Instance.activityRewards=r,_.default.Instance.OpenUI(u.default,_.UIOrder.Window_2,r,"\u70e4\u9c7c\u5927\u5e08\u5956\u52b1",function(){e&&e()},1)}else e&&e()}else e&&e()}},e.prototype._initActivityTime=function(){var e=h.default.Instance.LoginTime+1e3*h.default.Instance.OnlineTime;p.default.Instance.gmTime&&(e=p.default.Instance.gmTime+1e3*h.default.Instance.OnlineTime);var t=new Date(e),n=t.getDay();0==n&&(n=7);var o=86400*(7-n)+(86400-(3600*t.getHours()+60*t.getMinutes()+t.getSeconds()));return console.error("activityTime====",o),o},e.prototype._initAiUpdateTime=function(){if(p.default.Instance.aiLists&&!(Object.keys(p.default.Instance.aiLists).length<0)){var e=[600,1200];for(var t in p.default.Instance.aiLists){var n=p.default.Instance.aiLists[t];if(n){var o=e[0]+Math.floor(Math.random()*(e[1]-e[0]));this._aiUpdateTime[n.levelId]={id:n.levelId,time:0,totalTime:o}}}}},e.prototype.weekRefresh=function(e,t){var n=new Date(e).setHours(0,0,0),o=new Date(t).setHours(0,0,0),a=Math.floor(n/864e5),i=Math.floor(o/864e5);return parseInt((a+4)/7+"")==parseInt((i+4)/7+"")},e.prototype.dayRefresh=function(e,t){var n=new Date(e),o=new Date(t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()==n.getDate()},t=c([b],e)}());i.default=v,cc._RF.pop(),cc._RF.pop()},{}],WinActivityOpenInterface:[function(e,t,n){"use strict";cc._RF.push(t,"23e2eGnCv9LXq0u4nz3C9H+","WinActivityOpenInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"75867TwXHFIXauBSXCTOCXK","WinActivityOpenInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("SoundManager"),h=o("UIManager"),p=o("WinActivityManager"),f=o("WinActivityInterface"),_=cc._decorator,y=_.ccclass,b=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.timeLabel=null,t.openBtn=null,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.openBtn.on(cc.Node.EventType.TOUCH_END,this._openBtnClick,this)},t.prototype.onUIDisable=function(){this.openBtn.off(cc.Node.EventType.TOUCH_END,this._openBtnClick,this)},t.prototype._openBtnClick=function(){h.default.Instance.OpenUI(f.default,h.UIOrder.Window_2),this.closeView()},t.prototype.onInit=function(){this.ani_popup.play("ani_tongyongtanchuang_open"),d.default.Instance.PlaySound("book_pop_open")},t.prototype.onUIStart=function(){this._initView()},t.prototype._initView=function(){this.timeLabel.string="\u5269\u4f59"+p.default.Instance.AcitivityDay+"\u5929"},t.prototype.closeView=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){h.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="winActivityPre/WinActivityOpenPre",t.className="WinActivityOpenInterface",l([b(cc.Animation)],t.prototype,"ani_popup",void 0),l([b(cc.Label)],t.prototype,"timeLabel",void 0),l([b(cc.Node)],t.prototype,"openBtn",void 0),n=l([y],t)}(u.default);i.default=v,cc._RF.pop(),cc._RF.pop()},{}],WinActivityRankItem:[function(e,t,n){"use strict";cc._RF.push(t,"0521eLvxcFJlKcBf0ZM1V4M","WinActivityRankItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"b9d56jg29hKUrQkQ6ns1tnn","WinActivityRankItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("InfoManager"),h=o("WinActivityManager"),p=o("Util"),f=cc._decorator,_=f.ccclass,y=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.rankLabel=null,t.nameLabel=null,t.headIcon=null,t.rankIcon=null,t.box=null,t.scoreLabel=null,t._data=null,t._rewards=null,t._boxClickCb=null,t}return s(t,e),Object.defineProperty(t.prototype,"Rewards",{get:function(){return this._rewards},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){this.bg.node.on(cc.Node.EventType.TOUCH_END,this._boxClick,this)},t.prototype.onDisable=function(){this.bg.node.off(cc.Node.EventType.TOUCH_END,this._boxClick,this)},t.prototype._boxClick=function(){this._boxClickCb&&this._boxClickCb(this)},t.prototype.refresh=function(e,t){void 0===t&&(t=null);var n=e.name,o=e.rank,a=e.score?e.score:0,i=e.icon,r=e.levelId;this._rewards=null,this._data=e,-1==r?(this.nameLabel.string=d.default.Instance.UserName?d.default.Instance.UserName:"",u.default.Instance.LoadSpriteFrame("Bundle2UI","winActivityUI/kuang",this.bg.node)):(this.nameLabel.string=n,u.default.Instance.LoadSpriteFrame("Bundle2UI","winActivityUI/list_bg",this.bg.node)),this.scoreLabel.string=a+"",this._showBox(o),this._setRankLabel(o),this._setIcon(i),this._boxClickCb=t},t.prototype._setRankLabel=function(e){e<=3?(this.rankIcon.active=!0,this.rankLabel.string="",u.default.Instance.LoadSpriteFrame("Bundle2UI","winActivityUI/rank_"+e,this.rankIcon)):(this.rankIcon.active=!1,this.rankLabel.string=e+"")},t.prototype._showBox=function(e){var t=h.default.Instance.getLevelByRank(e),n=h.default.Instance.getRewardByLevel(t);n?(this._rewards=n,this.box.active=!0,u.default.Instance.LoadSpriteFrame("Bundle2UI","winActivityUI/box_"+t,this.box)):this.box.active=!1},t.prototype._setIcon=function(e){if(this._data&&(-1==this._data.levelId&&(e=d.default.Instance.UserHead?d.default.Instance.UserHead:h.default.Instance.headIcon),e))if(Number(e))u.default.Instance.LoadSpriteFrame("Bundle2UI","winActivityUI/head/"+e,this.headIcon.node);else{var t=this._data.name+"";t||(t=e);var n=h.default.Instance.headSpreiteFrames[t];n?this.headIcon.spriteFrame=n:p.default.set_head(e,this.headIcon,function(n,o){n==e&&(h.default.Instance.headSpreiteFrames[t]=o)})}},l([y(cc.Sprite)],t.prototype,"bg",void 0),l([y(cc.Label)],t.prototype,"rankLabel",void 0),l([y(cc.Label)],t.prototype,"nameLabel",void 0),l([y(cc.Sprite)],t.prototype,"headIcon",void 0),l([y(cc.Node)],t.prototype,"rankIcon",void 0),l([y(cc.Node)],t.prototype,"box",void 0),l([y(cc.Label)],t.prototype,"scoreLabel",void 0),l([_],t)}(cc.Component);i.default=b,cc._RF.pop(),cc._RF.pop()},{}],WinActivityRewardTip:[function(e,t,n){"use strict";cc._RF.push(t,"f0b04xdKpBOHbOdylrRqkJi","WinActivityRewardTip");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"077c3uzN4dJpJh9P2KdiN5o","WinActivityRewardTip");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("TypeManager"),h=cc._decorator,p=h.ccclass,f=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=null,t}return s(t,e),t.prototype.init=function(e){for(var t=this.list.children.length,n=0;n<t;n++)this.list.children[n].active=!1;this.award=e;var o=154;for(1==e.length&&(o=73.8),this.list.width=o,n=0;n<this.award.length;n++)if(this.award[n]){switch(this.award[n].type){case d.RewardType.power:u.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/icon_5",this.list.children[n].children[0]),this.list.children[n].children[0].setScale(1);break;case d.RewardType.gold:u.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/icon_6",this.list.children[n].children[0]),this.list.children[n].children[0].setScale(1);break;case d.RewardType.prop_1:u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_11",this.list.children[n].children[0]),this.list.children[n].children[0].setScale(.7);break;case d.RewardType.prop_2:u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_12",this.list.children[n].children[0]),this.list.children[n].children[0].setScale(.7);break;case d.RewardType.prop_3:u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_13",this.list.children[n].children[0]),this.list.children[n].children[0].setScale(.7);break;case d.RewardType.kebabs:u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+this.award[n].value,this.list.children[n].children[0]),this.list.children[n].children[0].setScale(.6)}"kebabs"==this.award[n].type?this.list.children[n].children[1].getComponent(cc.Label).string="":this.list.children[n].children[1].getComponent(cc.Label).string="x"+this.award[n].value,this.list.children[n].active=!0}},l([f(cc.Node)],t.prototype,"list",void 0),l([p],t)}(cc.Component);i.default=_,cc._RF.pop(),cc._RF.pop()},{}],WinActivityRuleInterface:[function(e,t,n){"use strict";cc._RF.push(t,"b3592fRoRZDtJOS9IxZUqru","WinActivityRuleInterface");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"851d4702mpGPpYt1RNT13ts","WinActivityRuleInterface");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("UIBase"),d=o("UIManager"),h=o("WinActivityManager"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_popup=null,t.bg=null,t.timeLabel=null,t}var n;return s(t,e),n=t,t.prototype.onUIEnable=function(){this.bg.on(cc.Node.EventType.TOUCH_END,this._bgClick,this)},t.prototype.onUIDisable=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this._bgClick,this)},t.prototype._bgClick=function(){this.closeView()},t.prototype.onInit=function(){this.ani_popup.play("ani_tongyongtanchuang_open")},t.prototype.onUIStart=function(){this._initView()},t.prototype._initView=function(){this.timeLabel.string="\u5269\u4f59"+h.default.Instance.AcitivityDay+"\u5929"},t.prototype.closeView=function(){1!=this.is_close&&(this.is_close=!0,this.ani_popup.play("ani_tongyongtanchuang_close"),this.scheduleOnce(function(){d.default.Instance.DestroyUI(n)},.3))},t.bundleName="Bundle2Pre",t.prefabUrl="winActivityPre/WinActivityRulePre",t.className="WinActivityRuleInterface",l([_(cc.Animation)],t.prototype,"ani_popup",void 0),l([_(cc.Node)],t.prototype,"bg",void 0),l([_(cc.Label)],t.prototype,"timeLabel",void 0),n=l([f],t)}(u.default);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],bamboo_item:[function(e,t,n){"use strict";cc._RF.push(t,"64745FbCQxA4awO5jYLvg+9","bamboo_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"56dcd8TN2lF3b/rQV4QvmYg","bamboo_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GameManger"),d=o("PoolManager"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t.move_speed=120,t}return s(t,e),t.prototype.onEnable=function(){this.time>0&&(this.animation.play(),this.animation.setCurrentTime(this.time))},t.prototype.start=function(){this.node.setPosition(cc.v2(1500,828)),this.useing=!1},t.prototype.Drifting=function(e){var t=this;this.ts_team=e,this.useing=!0,this.time=0,this.animation.play(),cc.tween(this).to(7.5,{time:7.5}).call(function(){t.time=0,t.drifting_over()}).start()},t.prototype.drifting_over=function(){var e=this;null!=this.ts_team&&(this.animation.stop(),this.ts_team.judge_move3(),d.default.Instance.PlaySmokeEffect(this.node,!1,!1,!0),cc.tween(this).delay(.4).call(function(){e.useing=!1,e.ts_team=null,e.node.setPosition(cc.v2(1500,828)),u.default.Instance.TsGame.NextDrifting()}).start(),cc.systemEvent.emit(h.DistributedEvent.visitor_statistics,20))},Object.defineProperty(t.prototype,"Useing",{get:function(){return this.useing},set:function(e){this.useing=e},enumerable:!1,configurable:!0}),l([_(cc.Animation)],t.prototype,"animation",void 0),l([f],t)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],barbecue_oven_item:[function(e,t,n){"use strict";cc._RF.push(t,"92247mpzwFCJb6O38+O6ojG","barbecue_oven_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"08ed08NkWdGdZGhLdIBSxkK","barbecue_oven_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],r=0,c=i.length;r<c;r++,a++)o[a]=i[r];return o};Object.defineProperty(i,"__esModule",{value:!0});var d=o("BundleManger"),h=o("InfoManager"),p=o("SdkManager"),f=o("SoundManager"),_=o("TypeManager"),y=o("BarbecueBase"),b=cc._decorator,v=b.ccclass,m=b.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_flame=null,t.kaolu1=null,t.kaolu2=null,t.flame1=null,t.flame2=null,t.kaolu3=null,t.cover_kebabs=null,t.oven_video=null,t.ani_node_kebabs=[],t}return s(t,e),t.prototype.onLoad=function(){var e=this;this.type=1,this.oven_video.on(cc.Node.EventType.TOUCH_END,this.click,this),this.ani_flame.on(cc.Animation.EventType.FINISHED,function(){e.ani_flame.play("ani_kaolu")},this);for(var t=0;t<this.node_kebabs.length;t++)this.ani_node_kebabs[t]=this.node_kebabs[t].getComponent(cc.Animation)},t.prototype.Init=function(e,t,n){var o=this;switch(h.default.Instance.isDaren&&n.condition==_.OvenCondition.cover&&(n.condition=_.OvenCondition.normal),this.index=e,this.oven_data=n,this.kebabs_data=u(t),this.amend_kebabs(),this.node_frozen=[],this.node.x=e%3*240-240,this.node.y=210-270*Math.floor(e/3),this.ani_kebabs.node.setParent(this.ts.group_oven_plate),this.ani_kebabs.node.x=this.node.x,this.ani_kebabs.node.y=this.node.y,this.ani_kebabs.node.zIndex=300,this.KebabShake(0,!1),this.KebabShake(1,!1),this.KebabShake(2,!1),this.node_kebabs[0].setScale(0),this.node_kebabs[1].setScale(0),this.node_kebabs[2].setScale(0),this.eff_select.active=!1,this.eff_select.y=0,this.oven_data.condition){case _.OvenCondition.hot:d.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/select_2",this.eff_select);break;case _.OvenCondition.one_grid:d.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/select_4",this.eff_select);break;default:d.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/select_1",this.eff_select)}switch(cc.tween(this).delay(1).call(function(){o.ani_kebabs.play()}).start(),this.oven_data.condition==_.OvenCondition.video?this.oven_video.active=!0:this.oven_video.active=!1,this.oven_data.condition){case _.OvenCondition.cover:this.oven_data.value>0&&d.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+this.oven_data.value,this.cover_kebabs),this.cover_kebabs.parent.active=!0;break;default:this.cover_kebabs.parent.active=!1,this.node_kebabs[0].opacity=255,this.node_kebabs[1].opacity=255,this.node_kebabs[2].opacity=255}switch(this.kaolu1.active=!1,this.kaolu2.active=!1,this.kaolu3.active=!1,this.oven_data.condition){case _.OvenCondition.one_grid:this.kaolu2.y=10,this.eff_select.y=10,this.kaolu2.active=!0,d.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/eff_sk/kaolu3",this.kaolu2);break;case _.OvenCondition.tray:this.kaolu2.active=!0;break;case _.OvenCondition.hot:this.kaolu3.active=!0;break;default:this.kaolu2.y=18,this.kaolu1.active=!0,this.kaolu2.active=!0,d.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/eff_sk/kaolu2",this.kaolu2)}switch(this.oven_data.condition){case _.OvenCondition.one_grid:case _.OvenCondition.tray:case _.OvenCondition.cover:this.ani_flame.stop(),this.flame1.spriteFrame=null,this.flame2.spriteFrame=null,this.kaolu1.children[0].opacity=255;break;default:this.ani_flame.play("ani_kaolu"),this.kaolu1.children[0].opacity=0}this.node.active=!0,this.node.zIndex=10*this.index,this.ani_kebabs.node.active=!0,this.useing=!0,this.draw()},t.prototype.monitor_compound=function(e){var t=this;this.oven_data.condition==_.OvenCondition.cover&&e==this.oven_data.value&&cc.tween(this.cover_kebabs.parent).to(.3,{y:100,opacity:0}).call(function(){t.ts.PlayEffFlame(t.index,1),f.default.Instance.PlaySound("g127_match")}).delay(1).call(function(){t.oven_data.value=0,t.oven_data.condition=_.OvenCondition.normal,cc.tween(t.node_kebabs[0]).to(.5,{opacity:255}).start(),cc.tween(t.node_kebabs[1]).to(.5,{opacity:255}).start(),cc.tween(t.node_kebabs[2]).to(.5,{opacity:255}).start(),t.ani_flame.play("ani_kaolu_appear");for(var e=0;e<t.ts.plate_array.length;e++){var n=t.ts.plate_array[e];0!=n.node.active&&n.Index==t.index&&(n.node.opacity=255,cc.tween(n.node).to(.5,{opacity:255}).start())}t.cover_kebabs.parent.active=!1,t.cover_kebabs.parent.opacity=255,t.cover_kebabs.parent.y=25}).delay(2).call(function(){}).start()},t.prototype.click=function(){var e=this;this.oven_data.condition==_.OvenCondition.video&&p.default.Instance.ShareOrVideo(p.ShareLoc.advertising_oven,function(){e.Unlock(),e.ts.GameDelay()})},t.prototype.Unlock=function(){var e=this;this.oven_data.value=0,this.oven_data.condition=_.OvenCondition.normal,this.oven_video.active=!1,this.ts.PlayEffFlame(this.index,1),f.default.Instance.PlaySound("g127_match"),cc.tween(this).delay(1).call(function(){e.ani_flame.play("ani_kaolu_appear")}).delay(2).call(function(){}).start(),this.ts.icon_finger.active=!1},t.prototype.KebabShake=function(e,t){switch(t){case!0:this.ani_node_kebabs[e].play();break;default:this.ani_node_kebabs[e]&&this.ani_node_kebabs[e].stop(),this.node_kebabs[e].setScale(1.1)}},l([m(cc.Animation)],t.prototype,"ani_flame",void 0),l([m(cc.Node)],t.prototype,"kaolu1",void 0),l([m(cc.Node)],t.prototype,"kaolu2",void 0),l([m(cc.Sprite)],t.prototype,"flame1",void 0),l([m(cc.Sprite)],t.prototype,"flame2",void 0),l([m(cc.Node)],t.prototype,"kaolu3",void 0),l([m(cc.Node)],t.prototype,"cover_kebabs",void 0),l([m(cc.Node)],t.prototype,"oven_video",void 0),l([v],t)}(y.default);i.default=g,cc._RF.pop(),cc._RF.pop()},{}],barbecue_plate_item:[function(e,t,n){"use strict";cc._RF.push(t,"033f1ALwTJDbYHf0kaD4Bw4","barbecue_plate_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"7ee1bRlKMxDJLVa8caMr7Fd","barbecue_plate_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],r=0,c=i.length;r<c;r++,a++)o[a]=i[r];return o};Object.defineProperty(i,"__esModule",{value:!0});var d=o("TypeManager"),h=o("BarbecueBase"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_node_kebabs=[],t}return s(t,e),t.prototype.onLoad=function(){var e=this;this.type=2,this.node.on(cc.Node.EventType.TOUCH_END,function(){console.log(e.index+"\u53f7\u70e4\u76d8\uff0c\u5c42\u6570"+e.stack_num+",\u4f7f\u7528\u4e2d"+e.useing+",\u5b50\u8282\u70b9\u6570\u91cf"+e.node.childrenCount+"\u5750\u6807x:"+e.node.x+",y:"+e.node.y);for(var t=0;t<e.node.childrenCount;t++)console.log("\u5b50\u8282\u70b9"+t+"\u540d\u5b57"+e.node.children[t].name)},this);for(var t=0;t<this.node_kebabs.length;t++)this.ani_node_kebabs[t]=this.node_kebabs[t].getComponent(cc.Animation)},t.prototype.onDisable=function(){for(var e=0;e<this.node_frozen.length;e++)(t=this.node_frozen[e])&&(t.node.active=!1,this.node_frozen[e]=null);for(e=0;e<this.node_tinfoil.length;e++){var t;(t=this.node_tinfoil[e])&&(t.node.active=!1,this.node_tinfoil[e]=null)}},t.prototype.Init=function(e,t,n){this.index=e,this.kebabs_data=u(t),this.amend_kebabs(),this.stack_num=n,this.node_frozen=[],this.node.x=e%3*240-240,n>4&&(n=4),this.node.y=80-270*Math.floor(e/3)+7.5*n;var o=this.ts.useing_oven_tray[this.index];o&&o.OvenData.condition==d.OvenCondition.cover?this.node.opacity=0:this.node.opacity=255,this.node.active=!0,this.draw(),this.node.zIndex=10*this.index+5+this.stack_num,this.useing=!0},t.prototype.ShowKebabs=function(e){for(var t=0;t<this.node_kebabs.length;t++){var n=this.node_kebabs[t];if(0==e)n.active=!1;else{if(0==this.kebabs_data[t].id)continue;n.opacity=0,n.active=!0,cc.tween(n).to(.5,{opacity:255}).start()}}},Object.defineProperty(t.prototype,"StackNum",{get:function(){return this.stack_num},enumerable:!1,configurable:!0}),t.prototype.KebabShake=function(e,t){switch(t){case!0:this.ani_node_kebabs[e].play();break;default:this.ani_node_kebabs[e]&&this.ani_node_kebabs[e].stop(),this.node_kebabs[e].setScale(.5)}},l([f],t)}(h.default));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],barbecue_tray_item:[function(e,t,n){"use strict";cc._RF.push(t,"fed84IWLMRCSqu2DSDBkUqr","barbecue_tray_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"da5a9ZwPQlOvoLLOZBibcSM","barbecue_tray_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],r=0,c=i.length;r<c;r++,a++)o[a]=i[r];return o};Object.defineProperty(i,"__esModule",{value:!0});var d=o("SoundManager"),h=o("TypeManager"),p=o("BarbecueBase"),f=cc._decorator,_=f.ccclass,y=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_tray=null,t.ani_node_kebabs=[],t.label=null,t}return s(t,e),t.prototype.onLoad=function(){this.type=1;for(var e=0;e<this.node_kebabs.length;e++)this.ani_node_kebabs[e]=this.node_kebabs[e].getComponent(cc.Animation);this.label.node.active=!1},t.prototype.Init=function(e,t){var n=this;this.index=e,this.oven_data={condition:h.OvenCondition.tray,value:0},this.kebabs_data=u(t),this.amend_kebabs(),this.node_frozen=[],cc.Tween.stopAllByTarget(this.node),this.node.x=e%3*240-240,this.node.y=210-270*Math.floor(e/3),this.draw(),cc.tween(this).delay(1).call(function(){n.ani_kebabs.play()}).start(),this.node.active=!0,this.node.zIndex=10*this.index+300,this.KebabShake(0,!1),this.KebabShake(1,!1),this.KebabShake(2,!1),this.node_kebabs[0].setScale(0),this.node_kebabs[0].opacity=255,this.node_kebabs[0].x=-65,this.node_kebabs[1].setScale(0),this.node_kebabs[1].opacity=255,this.node_kebabs[1].x=0,this.node_kebabs[2].setScale(0),this.node_kebabs[2].opacity=255,this.node_kebabs[2].x=65,this.label.string=this.index+"\u53f7",this.ani_tray.play("ani_box_idle"),this.useing=!0,this.eff_select.active=!1},t.prototype.Init2=function(e,t,n,o){this.oven_data={condition:h.OvenCondition.tray,value:0},this.kebabs_data=u(t),this.amend_kebabs(),this.node_frozen=[],this.node.setPosition(n),this.draw(),this.node.opacity=0,this.node.active=!0,this.node.zIndex=10*e+300,this.KebabShake(0,!1),this.KebabShake(1,!1),this.KebabShake(2,!1),this.node_kebabs[0].setScale(1.1),this.node_kebabs[0].opacity=255,this.node_kebabs[0].x=-65,this.node_kebabs[1].setScale(1.1),this.node_kebabs[1].opacity=255,this.node_kebabs[1].x=0,this.node_kebabs[2].setScale(1.1),this.node_kebabs[2].opacity=255,this.node_kebabs[2].x=65,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{opacity:255}).start(),this.Move(e,o),this.ani_tray.play("ani_box_idle"),this.useing=!0,this.eff_select.active=!1},t.prototype.Hide=function(e){var t=this;this.useing=!1,this.node_kebabs[0].active=e,this.node_kebabs[1].active=e,this.node_kebabs[2].active=e,cc.Tween.stopAllByTarget(this.node),1==e?(this.ani_tray.play("ani_box_close"),cc.tween(this.node).delay(.5).to(.5,{x:-500,y:this.node.y},{easing:"cubicInOut"}).call(function(){t.node.active=!1}).start()):cc.tween(this.node).to(.5,{x:-500,y:this.node.y},{easing:"cubicInOut"}).call(function(){t.node.active=!1}).start()},t.prototype.Move=function(e,t){this.index=e,this.label.string=this.index+"\u53f7";var n=cc.v2(e%3*240-240,210-270*Math.floor(e/3));console.log("\u6258\u76d8\u79fb\u52a8\u5230"+this.index+"\u7ed3\u675f\uff0c\u9014\u5f84:"+t+"\uff0c\u9700\u8981\u8017\u65f61\u79d2"),cc.tween(this.node).delay(.5).to(.5,{x:n.x,y:n.y},{easing:"cubicInOut"}).start(),d.default.Instance.PlaySound("g127_tray"),this.node.zIndex=10*e+300,this.ts.tray_cooling=1},t.prototype.KebabShake=function(e,t){switch(t){case!0:this.ani_node_kebabs[e].play();break;default:this.ani_node_kebabs[e].stop(),this.node_kebabs[e].setScale(1.1)}},l([y(cc.Animation)],t.prototype,"ani_tray",void 0),l([y(cc.Label)],t.prototype,"label",void 0),l([_],t)}(p.default);i.default=b,cc._RF.pop(),cc._RF.pop()},{}],bed2_item:[function(e,t,n){"use strict";cc._RF.push(t,"366c1uwvjVJa7Xe6Oov91L3","bed2_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"322a7CE8etPrJDhNNy/Q0Cv","bed2_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("GameManger"),p=o("PoolManager"),f=o("SoundManager"),_=o("StoragerManager"),y=o("TypeManager"),b=cc._decorator,v=b.ccclass,m=b.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.bed=null,t.quilt=null,t.quilt2=null,t.rubbish=null,t.btn_click=null,t.spine_clean=null,t}return s(t,e),t.prototype.start=function(){this.btn_click.on(cc.Node.EventType.TOUCH_END,this.CleanBed.bind(this,6),this)},t.prototype.Init=function(e){this.bed_id=e,this.lv=_.default.Instance.Facility[""+e].used_lv;var t=d.default.Instance.Facility1Information[e];switch(this.cleaning=!1,this.bed_id){case y.FacilityType.second_floor_bed1:this.quilt.x=-45,this.quilt.y=60,this.rubbish.x=-160,this.rubbish.y=80,u.default.Instance.LoadSpriteFrame("SecondFloor","facility/icon_36",this.rubbish);break;case y.FacilityType.second_floor_bed2:this.quilt.x=50,this.quilt.y=45,this.rubbish.x=172,this.rubbish.y=30,u.default.Instance.LoadSpriteFrame("SecondFloor","facility/icon_35",this.rubbish)}this.quilt2.x=this.quilt.x,this.quilt2.y=this.quilt.y,this.node.setPosition(t.data[this.lv-1].coord),this.quilt.active=!0,this.quilt2.active=!1,this.rubbish.active=!1,this.btn_click.active=!1,this.btn_click.opacity=0,this.spine_clean.node.active=!1,this.draw_bed(),this.node.zIndex=3e3-Math.floor(this.node.y+20),this.quilt.zIndex=10,this.spine_clean.node.zIndex=20,this.btn_click.zIndex=30,this.bed_tips=y.WorkWarn.null,this.count_down=-7},t.prototype.ShowBtn=function(){this.btn_click.opacity=255,h.default.Instance.TsGame.JudgeStaffToBed(this),this.quilt.active=!1,this.quilt2.active=!0,this.rubbish.active=!0,this.bed_id==y.FacilityType.second_floor_bed1?this.bed_tips=y.WorkWarn.clear_bed1:this.bed_tips=y.WorkWarn.clear_bed2,this.count_down=7,cc.systemEvent.emit(y.DistributedEvent.work_warn,this.bed_tips,!0)},t.prototype.CleanBed=function(e){var t=this;1!=this.cleaning&&(cc.tween(this).delay(.25).call(function(){t.btn_click.opacity=0}).start(),1==this.node.activeInHierarchy&&f.default.Instance.PlayLoop("sweep_"+this.bed_id,!0,"sweep"),this.cleaning=!0,this.spine_clean.node.active=!0,cc.tween(this).delay(e).call(function(){t.ts_team=null,t.cleaning=!1,t.spine_clean.node.active=!1,f.default.Instance.PlayLoop("sweep_"+t.bed_id,!1,"sweep"),t.quilt.active=!0,t.quilt2.active=!1,t.rubbish.active=!1}).start(),this.bed_tips=y.WorkWarn.null,this.count_down=-7,cc.systemEvent.emit(y.DistributedEvent.work_warn,null,!1))},t.prototype.RefreshLv=function(e,t){this.lv=e,this.draw_bed(),1==t&&(this.ani.play(),p.default.Instance.PlaySmokeEffect(this.bed,!1,!0,!0))},t.prototype.White=function(){p.default.Instance.PlaySmokeEffect(this.bed,!0,!1,!1),p.default.Instance.PlaySmokeEffect(this.quilt,!0,!1,!1)},t.prototype.draw_bed=function(){u.default.Instance.LoadSpriteFrame("SecondFloor","facility/"+this.bed_id+"_"+this.lv,this.bed),u.default.Instance.LoadSpriteFrame("SecondFloor","facility/"+this.bed_id+"_"+this.lv+"_quilt",this.quilt),u.default.Instance.LoadSpriteFrame("SecondFloor","facility/"+this.bed_id+"_"+this.lv+"_quilt2",this.quilt2)},Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},set:function(e){this.ts_team=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Lv",{get:function(){return this.lv},set:function(e){this.lv=e},enumerable:!1,configurable:!0}),l([m(cc.Animation)],t.prototype,"ani",void 0),l([m(cc.Node)],t.prototype,"bed",void 0),l([m(cc.Node)],t.prototype,"quilt",void 0),l([m(cc.Node)],t.prototype,"quilt2",void 0),l([m(cc.Node)],t.prototype,"rubbish",void 0),l([m(cc.Node)],t.prototype,"btn_click",void 0),l([m(sp.Skeleton)],t.prototype,"spine_clean",void 0),l([v],t)}(cc.Component);i.default=g,cc._RF.pop(),cc._RF.pop()},{}],bezier:[function(e,t,n){"use strict";cc._RF.push(t,"82ae4HwrNtFjoE+yScXFMqX","bezier");var o,a=t,i=n;function r(e,t,n,o){var a=2*(1-o)*(t.x-e.x)+2*o*(n.x-t.x),i=2*(1-o)*(t.y-e.y)+2*o*(n.y-t.y),r=2*(1-o)*(t.z-e.z)+2*o*(n.z-t.z);return new cc.Vec3(a,i,r)}function c(e,t,n,o,a){var i=3*(1-a)*(1-a)*(t.x-e.x)+6*(1-a)*a*(n.x-t.x)+3*a*a*(o.x-n.x),r=3*(1-a)*(1-a)*(t.y-e.y)+6*(1-a)*a*(n.y-t.y)+3*a*a*(o.y-n.y),c=3*(1-a)*(1-a)*(t.z-e.z)+6*(1-a)*a*(n.z-t.z)+3*a*a*(o.z-n.z);return new cc.Vec3(i,r,c)}cc._RF.push(a,"15492mTb0dBoKTYuGZGSGxS","bezier"),Object.defineProperty(i,"__esModule",{value:!0}),i.bezier_cubic_length_with_gaussian=i.bezier_length_with_gaussian=i.bezier_cubic_length_with_simpson=i.bezier_length_with_simpson=i.bezier_cubic_length_with_trapezoidal=i.bezier_length_with_trapezoidal=i.bezier_cubic_derivative=i.bezier_derivative=i.bezier_cubic=i.bezier=void 0,i.bezier=function(e,t,n,o){var a=Math.pow(1-o,2)*e.x+2*(1-o)*o*t.x+Math.pow(o,2)*n.x,i=Math.pow(1-o,2)*e.y+2*(1-o)*o*t.y+Math.pow(o,2)*n.y,r=Math.pow(1-o,2)*e.z+2*(1-o)*o*t.z+Math.pow(o,2)*n.z;return new cc.Vec3(a,i,r)},i.bezier_cubic=function(e,t,n,o,a){var i=Math.pow(1-a,3)*e.x+3*Math.pow(1-a,2)*a*t.x+3*(1-a)*Math.pow(a,2)*n.x+Math.pow(a,3)*o.x,r=Math.pow(1-a,3)*e.y+3*Math.pow(1-a,2)*a*t.y+3*(1-a)*Math.pow(a,2)*n.y+Math.pow(a,3)*o.y,c=Math.pow(1-a,3)*e.z+3*Math.pow(1-a,2)*a*t.z+3*(1-a)*Math.pow(a,2)*n.z+Math.pow(a,3)*o.z;return new cc.Vec3(i,r,c)},i.bezier_derivative=r,i.bezier_cubic_derivative=c,i.bezier_length_with_trapezoidal=function(e,t,n,o){void 0===o&&(o=100);for(var a=0,i=1/o,c=0;c<o;c++){var s=(c+1)*i;a+=(r(e,t,n,c*i).len()+r(e,t,n,s).len())*i/2}return a},i.bezier_cubic_length_with_trapezoidal=function(e,t,n,o,a){void 0===a&&(a=100);for(var i=0,r=1/a,s=0;s<a;s++){var l=(s+1)*r;i+=(c(e,t,n,o,s*r).len()+c(e,t,n,o,l).len())*r/2}return i},i.bezier_length_with_simpson=function(e,t,n,o){if(void 0===o&&(o=10),o%2!=0)throw new Error("\u5206\u6bb5\u6570\u5fc5\u987b\u662f\u5076\u6570");for(var a=r(e,t,n,0).len()+r(e,t,n,1).len(),i=1/o,c=1;c<o;c++)a+=(c%2==0?2:4)*r(e,t,n,c*i).len();return a*i/3},i.bezier_cubic_length_with_simpson=function(e,t,n,o,a){if(void 0===a&&(a=10),a%2!=0)throw new Error("\u5206\u6bb5\u6570\u5fc5\u987b\u662f\u5076\u6570");for(var i=c(e,t,n,o,0).len()+c(e,t,n,o,1).len(),r=1/a,s=1;s<a;s++)i+=(s%2==0?2:4)*c(e,t,n,o,s*r).len();return i*r/3};var s=((o={})[3]={nodes:[-Math.sqrt(.6),0,Math.sqrt(.6)],weights:[5/9,8/9,5/9]},o[5]={nodes:[-Math.sqrt(5+2*Math.sqrt(10/7))/3,-Math.sqrt(5-2*Math.sqrt(10/7))/3,0,Math.sqrt(5-2*Math.sqrt(10/7))/3,Math.sqrt(5+2*Math.sqrt(10/7))/3],weights:[(322-13*Math.sqrt(70))/900,(322+13*Math.sqrt(70))/900,128/225,(322+13*Math.sqrt(70))/900,(322-13*Math.sqrt(70))/900]},o[7]={nodes:[-.9491079123427585,-.7415311855993945,-.4058451513773972,0,.4058451513773972,.7415311855993945,.9491079123427585],weights:[.1294849661688697,.2797053914892766,.3818300505051189,.4179591836734694,.3818300505051189,.2797053914892766,.1294849661688697]},o);i.bezier_length_with_gaussian=function(e,t,n,o){void 0===o&&(o=7);var a=s[o];if(!a)throw new Error("\u4e0d\u652f\u6301\u5206\u6bb5\u6570. \u4ec5\u652f\u6301 n = 3, 5, \u6216\u8005 7.");for(var i=0,c=0;c<o;c++){var l=(1+a.nodes[c])/2;i+=a.weights[c]/2*r(e,t,n,l).len()}return i},i.bezier_cubic_length_with_gaussian=function(e,t,n,o,a){void 0===a&&(a=7);var i=s[a];if(!i)throw new Error("\u4e0d\u652f\u6301\u5206\u6bb5\u6570. \u4ec5\u652f\u6301 n = 3, 5, \u6216\u8005 7.");for(var r=0,l=0;l<a;l++){var u=(1+i.nodes[l])/2;r+=i.weights[l]/2*c(e,t,n,o,u).len()}return r},cc._RF.pop(),cc._RF.pop()},{}],btn_prop_item:[function(e,t,n){"use strict";cc._RF.push(t,"ff9813HddxLU7wnc5NJRU7B","btn_prop_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"ce91apusfhJgYagSN7Mg5vZ","btn_prop_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("GameManger"),h=o("StoragerManager"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.icon=null,t.point_red=null,t.point_green=null,t.label_prop=null,t.label_unlock=null,t.label_name=null,t.prop_id=0,t}return s(t,e),t.prototype.draw=function(){switch(this.prop_id){case 1:this.label_name.string="\u6253\u5305",this.condition=2;break;case 2:this.label_name.string="\u6253\u4e71",this.condition=5;break;case 3:this.label_name.string="\u89e3\u51bb",this.condition=32}var e=this.condition,t=-1,n=-1;d.default.Instance.isJump36AB&&(t=3,n=6),-1!=t&&-1!=n&&(e>=t&&e<=n?e=t:e>n&&(e=this.condition-(n-t+1))),this.label_unlock.string="\u7b2c"+e+"\u5173\n\u89e3\u9501"},t.prototype.init=function(e){console.log("\u9053\u5177"+this.label_name.string+"\u89e3\u9501\u5173\u5361"+this.condition+"\uff0c\u5f53\u524d\u53ef\u73a9\u5173\u5361"+e),e>=this.condition?(this.label_name.node.active=!0,this.label_unlock.node.active=!1,u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_"+(10+this.prop_id),this.icon)):(this.label_name.node.active=!1,this.label_unlock.node.active=!0,this.point_red.active=!1,this.point_green.active=!1,u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_"+(10+this.prop_id)+"_1",this.icon)),this.Refresh()},t.prototype.Refresh=function(){var e=h.default.Instance.BarbecueProp["prop_"+this.prop_id];null==e||e<=0?(this.point_red.active=!0,this.point_green.active=!1):(this.point_red.active=!1,this.point_green.active=!0,this.label_prop.string=""+e)},l([_(cc.Animation)],t.prototype,"ani",void 0),l([_(cc.Node)],t.prototype,"icon",void 0),l([_(cc.Node)],t.prototype,"point_red",void 0),l([_(cc.Node)],t.prototype,"point_green",void 0),l([_(cc.Label)],t.prototype,"label_prop",void 0),l([_(cc.Label)],t.prototype,"label_unlock",void 0),l([_(cc.Label)],t.prototype,"label_name",void 0),l([_],t.prototype,"prop_id",void 0),l([f],t)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],currency_item:[function(e,t,n){"use strict";cc._RF.push(t,"348c9x1c0VGFrn2Hu0Sshvi","currency_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"6cf50czvwtI/I9104XDWDwE","currency_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("AddPowerInterface"),d=o("GameManger"),h=o("SoundManager"),p=o("StoragerManager"),f=o("TypeManager"),_=o("UIManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_currency=null,t.currency_type="",t.is_click=!1,t.ani=!0,t}return s(t,e),t.prototype.start=function(){switch(this.scale=this.node.children[1].scale,this.node.y+=d.default.Instance.ScreenAdaptive,this.currency_type){case"power":cc.systemEvent.on(f.DistributedEvent.power_num,this.monitor_power,this),this.monitor_power();break;case"gold":cc.systemEvent.on(f.DistributedEvent.gold_num,this.monitor_gold,this),this.monitor_gold();break;case"star":cc.systemEvent.on(f.DistributedEvent.star_num,this.monitor_star,this),this.monitor_star()}this.node.children[0].on(cc.Node.EventType.TOUCH_END,this.click_currency,this),cc.systemEvent.on(f.DistributedEvent.currency_shake,this.currency_shake,this)},t.prototype.monitor_power=function(){this.label_currency.string=""+p.default.Instance.BarbecuePower},t.prototype.monitor_gold=function(){this.label_currency.string=""+p.default.Instance.GoldNum},t.prototype.monitor_star=function(){this.label_currency.string=""+d.default.Instance.BarbecueStar},t.prototype.currency_shake=function(e){var t=this;switch(e){case 1:if("gold"!=this.currency_type)return;break;case 2:if("power"!=this.currency_type)return;break;case 3:if("star"!=this.currency_type)return}0!=this.ani&&(this.ani=!1,cc.tween(this.node.children[1]).to(.05,{scale:this.scale+.2}).to(.05,{scale:this.scale}).call(function(){t.ani=!0}).start(),h.default.Instance.PlaySound("g127_shake"))},t.prototype.click_currency=function(){if(0!=this.is_click)switch(this.currency_type){case"power":_.default.Instance.OpenUI(u.default,_.UIOrder.Window_1)}},l([v(cc.Label)],t.prototype,"label_currency",void 0),l([v(cc.String)],t.prototype,"currency_type",void 0),l([v(cc.Boolean)],t.prototype,"is_click",void 0),l([b],t)}(cc.Component);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],dialogue_bubble_item:[function(e,t,n){"use strict";cc._RF.push(t,"1df53RboBtMFpJvy39Hkpcs","dialogue_bubble_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"410444Hp9dPsJd50DxdH2nW","dialogue_bubble_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GameManger"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogue_bg1=null,t.dialogue_bg2=null,t.dialogue_bg3=null,t.label=null,t}return s(t,e),t.prototype.update=function(){},t.prototype.Show=function(e,t,n){var o=this;this.label.string=e,this.node.setParent(n),this.node.x=0,this.node.y=150,this.label.node.setParent(this.dialogue_bg1),this.label.node.x=0,this.label.node.y=0,this.label.node.color=cc.Color.BLACK,this.game_scence=null,this.node.scaleX=1,this.label.node.scaleX=1,this.dialogue_bg1.active=!0,this.node.active=!0,cc.Tween.stopAllByTarget(this),cc.tween(this).delay(t).call(function(){o.Hide()}).start()},t.prototype.Show2=function(e,t,n,o){var a=this;this.label.string=e,this.node.setParent(n),this.node.x=0,this.node.y=150,this.label.node.setParent(this.dialogue_bg2),this.label.node.y=4,this.label.node.color=cc.Color.BLACK,this.game_scence=o,o&&u.default.Instance.TalkNum[o]++;var i=n.convertToWorldSpaceAR(cc.v2(0,0)),r=u.default.Instance.GameController.room.convertToNodeSpaceAR(i);r.x>150&&r.x<750?(this.node.scaleX=-1,this.label.node.scaleX=-1):(this.node.scaleX=1,this.label.node.scaleX=1),this.dialogue_bg2.active=!0,this.node.active=!0,cc.Tween.stopAllByTarget(this),cc.tween(this).delay(t).call(function(){a.Hide()}).start()},t.prototype.Show3=function(e,t,n){var o=this;this.label.string=e,this.node.setParent(n),this.node.x=0,this.node.y=150,this.label.node.setParent(this.dialogue_bg3),this.label.node.y=4,this.label.node.color=cc.color(174,74,0,255),this.game_scence=null;var a=n.convertToWorldSpaceAR(cc.v2(0,0)),i=u.default.Instance.GameController.room.convertToNodeSpaceAR(a);i.x>150&&i.x<750?(this.node.scaleX=-1,this.label.node.scaleX=-1):(this.node.scaleX=1,this.label.node.scaleX=1),this.dialogue_bg3.active=!0,this.node.active=!0,cc.Tween.stopAllByTarget(this),cc.tween(this).delay(t).call(function(){o.Hide()}).start()},t.prototype.Hide3=function(){cc.Tween.stopAllByTarget(this),this.Hide()},t.prototype.Show4=function(e,t,n){var o=this;this.label.string=e,this.node.setParent(n),this.node.x=-30,this.node.y=180,this.label.node.setParent(this.dialogue_bg3),this.label.node.y=4,this.label.node.color=cc.color(174,74,0,255),this.game_scence=null;var a=n.convertToWorldSpaceAR(cc.v2(0,0)),i=u.default.Instance.GameController.room.convertToNodeSpaceAR(a);i.x>140&&i.x<750?(this.node.scaleX=-1,this.label.node.scaleX=-1):(this.node.scaleX=1,this.label.node.scaleX=1),this.dialogue_bg3.active=!0,this.node.active=!0,cc.Tween.stopAllByTarget(this),cc.tween(this).delay(t).call(function(){o.Hide()}).start()},t.prototype.Show5=function(e,t,n,o){var a=this;void 0===o&&(o=1);var i=cc.v3(this.node.scaleX,this.node.scaleY,this.node.scaleZ);this.label.string=e,this.node.setParent(n),this.label.node.setParent(this.dialogue_bg3),this.label.node.y=4,this.label.node.color=cc.Color.BLACK,n.convertToWorldSpaceAR(cc.v2(0,0)),this.node.setScale(o),this.node.scaleX=n.scaleX/Math.abs(n.scaleX)*o,this.node.setPosition(0,150,0),this.dialogue_bg3.active=!0,this.node.active=!0,cc.Tween.stopAllByTarget(this),cc.tween(this).delay(t).call(function(){a.node&&a.node.isValid&&(a.node.setScale(i),a.Hide())}).start()},t.prototype.Hide=function(){this.node.active=!1,this.dialogue_bg1.active=!1,this.dialogue_bg2.active=!1,this.dialogue_bg3.active=!1,this.game_scence&&u.default.Instance.TalkNum[this.game_scence]--},l([p(cc.Node)],t.prototype,"dialogue_bg1",void 0),l([p(cc.Node)],t.prototype,"dialogue_bg2",void 0),l([p(cc.Node)],t.prototype,"dialogue_bg3",void 0),l([p(cc.Label)],t.prototype,"label",void 0),l([h],t)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],dishes_eff:[function(e,t,n){"use strict";cc._RF.push(t,"74a6acv08ZCarG9QLwMQGy0","dishes_eff");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"356375AyIVP46s999GipbDB","dishes_eff");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TypeManager"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhu=[],t}return s(t,e),t.prototype.Init=function(e,t,n,o){for(var a=this,i=0;i<2;i++){var r=void 0;this.zhu[i].node.active=!0,this.zhu[i].resetSystem(),(r=this.zhu[i].node).setPosition(e),cc.tween(r).to(n,{x:t.x,y:t.y}).start()}cc.tween(this.node).delay(n).call(function(){a.node.active=!1,cc.systemEvent.emit(u.DistributedEvent.facility_shake,o)}).start(),this.node.active=!0},l([p([cc.ParticleSystem])],t.prototype,"zhu",void 0),l([h],t)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],eff_compound_item:[function(e,t,n){"use strict";cc._RF.push(t,"2ffb3XM+S1FPqLaBdI2cl8n","eff_compound_item");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"1e11ey3jhZOJ6KZHvgF8Pet","eff_compound_item");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eff_particle1=null,t.eff_particle2=null,t}return c(t,e),t.prototype.Init=function(e){var t=this;this.node.setPosition(e),this.node.active=!0,this.eff_particle1.resetSystem(),this.eff_particle2.resetSystem(),cc.tween(this).delay(.5).call(function(){t.node.active=!1}).start()},s([d(cc.ParticleSystem)],t.prototype,"eff_particle1",void 0),s([d(cc.ParticleSystem)],t.prototype,"eff_particle2",void 0),s([u],t)}(cc.Component);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],eff_facility:[function(e,t,n){"use strict";cc._RF.push(t,"ba5d6YQFR9Lyp3Ft46QRSBH","eff_facility");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"2f6dc7AWRxKabQ31dJFiScn","eff_facility");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GameManger"),d=o("PoolManager"),h=cc._decorator,p=h.ccclass,f=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mask=null,t.ani_white=null,t.ani_light=null,t.spine_smoke=null,t}return s(t,e),t.prototype.start=function(){var e=this;this.ani_white.on("finished",function(){e.node.active=!1,e.node.parent=null},this),this.ani_light.on("finished",function(){e.node.active=!1,e.node.parent=null},this),this.spine_smoke.setCompleteListener(function(){e.spine_smoke.node.active=!1})},t.prototype.Init=function(e,t,n,o){if(null==e)return this.node.active=!1;if(this.node.setParent(e),this.node.setPosition(0,0),this.node.setScale(1),this.node.active=!0,1==t||1==n){this.mask.node.active=!0;var a=e.getComponent(cc.Sprite).spriteFrame;if(null==a)return this.node.active=!1,void cc.tween(u.default.Instance).delay(.2).call(function(){d.default.Instance.PlaySmokeEffect(e,t,n,o)}).start();this.mask.node.width=e.width,this.mask.node.height=e.height,this.mask.node.anchorY=e.anchorY,this.mask.spriteFrame=a}else this.mask.node.active=!1;this.ani_white.node.active=t,1==t&&(this.ani_white.node.width=e.width,this.ani_white.node.height=e.height,this.ani_white.node.anchorY=e.anchorY,this.ani_white.play()),this.ani_light.node.active=n,1==n&&this.ani_light.play(),this.spine_smoke.node.active=o},l([f(cc.Mask)],t.prototype,"mask",void 0),l([f(cc.Animation)],t.prototype,"ani_white",void 0),l([f(cc.Animation)],t.prototype,"ani_light",void 0),l([f(sp.Skeleton)],t.prototype,"spine_smoke",void 0),l([p],t)}(cc.Component);i.default=_,cc._RF.pop(),cc._RF.pop()},{}],eff_frozen_tiem:[function(e,t,n){"use strict";cc._RF.push(t,"887c9UavTNOd48ka74Umijh","eff_frozen_tiem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"a1aea/JVYZOXJ4tWQyO+im+","eff_frozen_tiem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eff_ani=null,t.label_num=null,t.eff_sui1=null,t.eff_sui2=null,t.eff_sui3=null,t.eff_smoke=null,t}return s(t,e),Object.defineProperty(t.prototype,"UnlockNum",{get:function(){return this.unlock_num},enumerable:!1,configurable:!0}),t.prototype.Init=function(e){switch(this.unlock_num=3,this.label_num.string="3",u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_15_3",this.node),e){case 1:this.label_num.node.opacity=255;break;case 2:this.label_num.node.opacity=0}this.node.active=!0},t.prototype.Broken=function(){var e=this;this.unlock_num--,this.eff_sui1.resetSystem(),this.eff_sui2.resetSystem(),this.eff_sui3.resetSystem(),this.eff_smoke.resetSystem(),this.eff_ani.play(),this.unlock_num>0?(u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/ui/icon_15_"+this.unlock_num,this.node),this.label_num.string=""+this.unlock_num):cc.tween(this).delay(.2).call(function(){e.node.active=!1}).start()},t.prototype.Thaw=function(){var e=this;this.eff_sui1.resetSystem(),this.eff_sui2.resetSystem(),this.eff_sui3.resetSystem(),this.eff_smoke.resetSystem(),this.eff_ani.play(),cc.tween(this).delay(.2).call(function(){e.node.active=!1}).start()},l([p(cc.Animation)],t.prototype,"eff_ani",void 0),l([p(cc.Label)],t.prototype,"label_num",void 0),l([p(cc.ParticleSystem)],t.prototype,"eff_sui1",void 0),l([p(cc.ParticleSystem)],t.prototype,"eff_sui2",void 0),l([p(cc.ParticleSystem)],t.prototype,"eff_sui3",void 0),l([p(cc.ParticleSystem)],t.prototype,"eff_smoke",void 0),l([h],t)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],eff_kebabs_item:[function(e,t,n){"use strict";cc._RF.push(t,"42f21uuTjhGKrCy0LTsP+RS","eff_kebabs_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"44dd0ZLzbVM6pIUrq4MMbLj","eff_kebabs_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("FunctionManager"),h=cc._decorator,p=h.ccclass,f=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon_sprite=null,t.speed=5e3,t}return s(t,e),t.prototype.onDisable=function(){this.icon_sprite.spriteFrame=null},t.prototype.Init=function(e,t,n,o){var a=this;void 0===o&&(o=5e3),this.speed=o,u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+e,this.icon_sprite.node),this.node.setPosition(t),this.node.angle=0,this.node.active=!0;var i=d.default.Instance.Distance(t,n)/this.speed;return i<.05&&(i=.05),cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(i,{x:n.x,y:n.y}).call(function(){a.node.active=!1}).start(),i},t.prototype.Init2=function(e,t,n,o,a,i){void 0===a&&(a=5e3),this.speed=a,u.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebabs_"+e,this.icon_sprite.node),this.node.setPosition(t),this.node.angle=0,this.node.active=!0,cc.Tween.stopAllByTarget(this.node);var r=0,c=0;return 1==i?(r=d.default.Instance.Distance(t,o)/this.speed,cc.tween(this.node).to(r,{x:o.x,y:o.y,angle:-15}).start()):(r=.15,c=d.default.Instance.Distance(o,n)/this.speed,cc.tween(this.node).to(r,{x:n.x,y:n.y,angle:0}).to(c,{x:o.x,y:o.y,angle:-15}).start()),r+c},t.prototype.Hide2=function(){var e=this;cc.tween(this.node).to(.35,{x:490}).call(function(){e.node.active=!1}).start()},t.prototype.Hide3=function(){var e=this;cc.tween(this.node).to(.4,{opacity:0}).call(function(){e.node.active=!1,e.node.opacity=255}).start()},l([f(cc.Sprite)],t.prototype,"icon_sprite",void 0),l([p],t)}(cc.Component);i.default=_,cc._RF.pop(),cc._RF.pop()},{}],eff_tinfoil_item:[function(e,t,n){"use strict";cc._RF.push(t,"d063a2JBAVCdrV5TNfmyeAI","eff_tinfoil_item");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"8bc5dD7RKpD3IuMu8ZC0jBH","eff_tinfoil_item");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eff_ani=null,t}return c(t,e),t.prototype.start=function(){var e=this;this.eff_ani.on(cc.Animation.EventType.FINISHED,function(){e.node.active=!1},this)},t.prototype.Init=function(e){var t=this;1==e&&cc.tween(this).delay(.7).call(function(){t.eff_ani.play()}).start();for(var n=0;n<this.node.childrenCount;n++){var o=this.node.children[n];o.opacity=255,n==this.node.childrenCount-1?(o.setPosition(0,0),o.setScale(1)):o.setPosition(-1.07,1.424)}this.node.active=!0},s([d(cc.Animation)],t.prototype,"eff_ani",void 0),s([u],t)}(cc.Component);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],facility_array_item2:[function(e,t,n){"use strict";cc._RF.push(t,"dcdf0DzaQVF+4rRUUBF8fwr","facility_array_item2");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"dcc3b8PKvhCBqsa+mz8XkbZ","facility_array_item2");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("DataManager"),d=o("FunctionManager"),h=o("GameManger"),p=o("StoragerManager"),f=o("UIManager"),_=o("FacilityInterface"),y=o("facility_item2"),b=cc._decorator,v=b.ccclass,m=b.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.facility_item=null,t.label_condition_type=null,t.label_condition1=null,t.content=null,t.label_name=null,t.facility_array=[],t}return s(t,e),t.prototype.onLoad=function(){this.max=-252,this.ts_facility=f.default.Instance.GetUI(_.default)},t.prototype.start=function(){this.content.parent.on(cc.Node.EventType.TOUCH_START,this.touch_start,this),this.content.parent.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move,this),this.content.parent.on(cc.Node.EventType.TOUCH_END,this.touch_end,this),this.label_condition1.node.on(cc.Node.EventType.TOUCH_END,this.open_shop_lv,this)},t.prototype.Refresh=function(e){this.facility_type=e,this.facility_data=u.default.Instance.Facility1Information[this.facility_type],this.content.active=!1,this.label_condition1.node.parent.parent.active=!1,this.label_name.string=this.facility_data.name,p.default.Instance.Facility[this.facility_type],this.draw_item()},t.prototype.refresh_item=function(){for(var e=0;e<this.facility_array.length;e++){var t=this.facility_array[e];1==t.node.active&&t.state()}},t.prototype.draw_item=function(){var e=p.default.Instance.Facility[this.facility_type];null==e&&(e={used_lv:0,buy_record:[0]});var t=this.facility_data.data.length;t>7&&(t=7);for(var n=!0,o=0;o<t;o++){if(null==this.facility_array[o]){var a=cc.instantiate(this.facility_item).getComponent(y.default);a.node.setParent(this.content),a.Init(this,this.ts_facility),this.facility_array[o]=a}0==d.default.Instance.JudegFacilityUnlock(this.facility_type,o)&&1==n&&1!=e.buy_record[o]?(n=!1,this.facility_array[o].Refresh(this.facility_type,o,!0)):this.facility_array[o].Refresh(this.facility_type,o,!1),this.facility_array[o].node.active=!0}if(this.facility_array.length>t)for(o=t;o<this.facility_array.length;o++)this.facility_array[o].node.active=!1;this.max=-1*(182*t+24-680),this.max>0&&(this.max=0),this.useing_index=e.used_lv-1,this.useing_index>=0?(this.content.x=-1*(12+121.5*this.useing_index),this.content.x<this.max&&(this.content.x=this.max)):this.content.x=0,this.content.active=!0},t.prototype.open_shop_lv=function(){this.ts_facility.MoveDis>70||this.label_condition_type.string},t.prototype.touch_start=function(e){this.touch_pos=e.getLocation()},t.prototype.touch_move=function(e){if(null==h.default.Instance.GudieStep&&null!=this.touch_pos&&!(this.content.width<this.content.parent.width)){var t=e.getLocation();this.content.x+=t.x-this.touch_pos.x,this.touch_pos=t,this.content.x>0?this.content.x=0:this.content.x<this.max&&(this.content.x=this.max)}},t.prototype.touch_end=function(){this.touch_pos=null},l([m(cc.Prefab)],t.prototype,"facility_item",void 0),l([m(cc.Label)],t.prototype,"label_condition_type",void 0),l([m(cc.Label)],t.prototype,"label_condition1",void 0),l([m(cc.Node)],t.prototype,"content",void 0),l([m(cc.Label)],t.prototype,"label_name",void 0),l([v],t)}(cc.Component);i.default=g,cc._RF.pop(),cc._RF.pop()},{}],facility_item2:[function(e,t,n){"use strict";cc._RF.push(t,"ba692iOvihJoLp5gwab5/1r","facility_item2");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"0b164lSp31N0LIanpcgffbg","facility_item2");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("NoCoinInterface"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("InfoManager"),y=o("StoragerManager"),b=o("TypeManager"),v=o("UIManager"),m=o("FacilityTipsInterface"),g=cc._decorator,I=g.ccclass,T=g.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon_facility=null,t.btn_select=null,t.btn_buy=null,t.btn_no=null,t.label_star=null,t.label_condition=null,t.label_gold=null,t.icon_used=null,t.icon_mask=null,t}return s(t,e),t.prototype.start=function(){this.btn_select.on(cc.Node.EventType.TOUCH_END,this.select,this),this.btn_buy.on(cc.Node.EventType.TOUCH_END,this.buy,this),this.btn_no.on(cc.Node.EventType.TOUCH_END,this.no,this),this.label_condition.node.on(cc.Node.EventType.TOUCH_END,this.skip,this)},t.prototype.Init=function(e,t){this.ts_array_item2=e,this.ts_facility=t},t.prototype.Refresh=function(e,t,n){var o=this;this.facility_type=e,this.index=t,this.btn_no.active=n;var a=this.index+1;switch(this.facility_data=h.default.Instance.Facility1Information[this.facility_type],this.facility_type==b.FacilityType.outdoor_wall&&0==this.index?this.price=10:this.price=Math.floor(this.facility_data.unlock_price*(.5*this.index+1)),this.label_gold.string=""+this.price,this.icon_facility.spriteFrame=null,this.facility_type){case b.FacilityType.room1_tabel:case b.FacilityType.room2_tabel:case b.FacilityType.room3_tabel:d.default.Instance.LoadSpriteFrame2("BunldleFacility","res/table8_"+a,this.facility_type,function(e,t){o.draw(e,t)});break;case b.FacilityType.second_floor_table1:case b.FacilityType.second_floor_table2:d.default.Instance.LoadSpriteFrame2("BunldleFacility","res/second_floor_table_"+a,this.facility_type,function(e,t){o.draw(e,t)});break;case b.FacilityType.park_sedan_1:case b.FacilityType.park_sedan_2:case b.FacilityType.park_sedan_3:case b.FacilityType.park_sedan_4:d.default.Instance.LoadSpriteFrame2("BunldleFacility","res/park_sedan_1_"+a,this.facility_type,function(e,t){o.draw(e,t)});break;default:d.default.Instance.LoadSpriteFrame2("BunldleFacility","res/"+p.default.Instance.FacilityUrl(this.facility_type)+"_"+a,this.facility_type,function(e,t){o.draw(e,t)})}if(this.state(),1==n){var i=h.default.Instance.ScenceData[this.facility_data.location];this.label_star.string=""+i.facility_unlock[this.index],f.default.Instance.BarbecueStar>=i.facility_unlock[this.index]?this.label_star.node.color=cc.Color.GREEN:this.label_star.node.color=cc.Color.BLACK.fromHEX("#BF491F");for(var r=0;r<h.default.Instance.FacilityUnlockOrder.length;r++){var c=h.default.Instance.FacilityUnlockOrder[r];if(c.are==this.facility_data.location&&c.index==this.index){var s=h.default.Instance.FacilityUnlockOrder[r-1];this.tips_name=h.default.Instance.ScenceData[s.are].name,this.label_condition.string="<b>\u89e3\u9501<color=#FAFC87><u>"+h.default.Instance.ScenceData[s.are].name+"</u></c>\n\u6240\u6709\u53ef\u89e3\u9501\u8bbe\u65bd</b>";break}}}},t.prototype.state=function(){var e=y.default.Instance.Facility[this.facility_type];switch(null==e&&(e={used_lv:1,buy_record:[0]}),null==e.special_record&&(e.special_record=[]),this.btn_select.active=!1,this.icon_used.active=!1,this.btn_buy.active=!1,this.icon_mask.active=!1,1==e.buy_record[this.index]?this.index+1==e.used_lv?3:2:1){case 1:var t=p.default.Instance.JudegFacilityUnlock(this.facility_type,this.index);this.btn_buy.active=t,this.icon_mask.active=!t,this.label_condition.node.active=!p.default.Instance.JudegFacilityUnlock2(this.facility_type,this.index);break;case 2:this.btn_select.active=!0;break;case 3:this.icon_used.active=!0}1==this.btn_buy.active&&(this.facility_type==this.ts_facility.assign_facility_type&&this.index==this.ts_facility.assign_facility_index&&y.default.Instance.GoldNum>=this.price?this.btn_buy.children[2].active=!0:this.btn_buy.children[2].active=!1)},t.prototype.draw=function(e,t){e==this.facility_type&&(this.icon_facility.spriteFrame=t)},t.prototype.select=function(){var e=this;this.ts_facility.MoveDis>70?console.log("\u7981\u6b62\u6253\u5f00\u8d2d\u4e70\u754c\u9762--------------"):(y.default.Instance.Facility[this.facility_type].used_lv=this.index+1,cc.systemEvent.emit(b.DistributedEvent.change_facility,[this.facility_type],b.RefreshFacilityPath.change),cc.tween(this).delay(.1).call(function(){e.ts_array_item2.refresh_item()}).start())},t.prototype.buy=function(){if(this.ts_facility.MoveDis>70)console.log("\u7981\u6b62\u6253\u5f00\u8d2d\u4e70\u754c\u9762--------------");else{if(this.price>y.default.Instance.GoldNum)return _.default.Instance.TsInitial.ShowTips("\u91d1\u5e01\u4e0d\u8db3"),void v.default.Instance.OpenUI(u.default,v.UIOrder.Window_2);y.default.Instance.GoldNum-=this.price,null==y.default.Instance.Facility[this.facility_type]&&(y.default.Instance.Facility[this.facility_type]={used_lv:1,buy_record:[]},p.default.Instance.JudgeStaffUnlock(this.facility_type)),y.default.Instance.Facility[this.facility_type].used_lv=this.index+1,y.default.Instance.Facility[this.facility_type].buy_record[this.index]=1,this.ts_facility.close(),cc.systemEvent.emit(b.DistributedEvent.task),v.default.Instance.OpenUI(m.default,v.UIOrder.Window_2,this.facility_type,this.index+1),201==f.default.Instance.GudieStep&&(f.default.Instance.GudieStep=201.5);var e=y.default.Instance.Facility[this.facility_type].buy_record.length,t=y.default.Instance.BarbecueLv.length+1,n=h.default.Instance.Facility1Information[this.facility_type];n&&LWGSDK.reportGeneralAction({context:"",actionName:"FacilityUpgrade",actNum1:e,actNum2:t,actText1:n.name,success:function(){},fail:function(){}}),y.default.Instance.AutoSyncData(!1)}},t.prototype.no=function(){var e=h.default.Instance.ScenceData[this.facility_data.location];f.default.Instance.BarbecueStar<e.facility_unlock[this.index]?_.default.Instance.TsInitial.ShowTips("\u661f\u661f\u4e0d\u8db3\uff0c\u8bf7\u901a\u5173\u6536\u96c6\u661f\u661f"):_.default.Instance.TsInitial.ShowTips("\u8bf7\u5148\u89e3\u9501"+this.tips_name+"\u7684\u6240\u6709\u8bbe\u65bd")},t.prototype.skip=function(){for(var e=0;e<h.default.Instance.FacilityUnlockOrder.length;e++){var t=h.default.Instance.FacilityUnlockOrder[e];if(t.are==this.facility_data.location&&t.index==this.index){this.ts_facility.change_area(h.default.Instance.FacilityUnlockOrder[e-1].are);break}}},l([T(cc.Sprite)],t.prototype,"icon_facility",void 0),l([T(cc.Node)],t.prototype,"btn_select",void 0),l([T(cc.Node)],t.prototype,"btn_buy",void 0),l([T(cc.Node)],t.prototype,"btn_no",void 0),l([T(cc.Label)],t.prototype,"label_star",void 0),l([T(cc.RichText)],t.prototype,"label_condition",void 0),l([T(cc.Label)],t.prototype,"label_gold",void 0),l([T(cc.Node)],t.prototype,"icon_used",void 0),l([T(cc.Node)],t.prototype,"icon_mask",void 0),l([I],t)}(cc.Component);i.default=k,cc._RF.pop(),cc._RF.pop()},{}],fflate:[function(e,t,n){"use strict";cc._RF.push(t,"d4a454ZUGJCdItyQ871YNHA","fflate");var o=function(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};window.fflate=function(){var e={},a=(void 0!==t&&"object"==(void 0===n?"undefined":o(n))?function(e){var t;try{t=void 0}catch(t){}return n.default=t?function(e,n,o,a,i){var r=!1,c=new t(e+";var __w=undefined;__w.parentPort.on('message',function(m){onmessage({data:m})}),postMessage=function(m,t){__w.parentPort.postMessage(m,t)},close=process.exit;self=global",{eval:!0}).on("error",function(e){return i(e,null)}).on("message",function(e){return i(null,e)}).on("exit",function(e){e&&!r&&i(Error("exited with code "+e),null)});return c.postMessage(o,a),c.terminate=function(){return r=!0,t.prototype.terminate.call(c)},c}:function(e,t,n,o,a){setImmediate(function(){return a(Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});var i=function(){};return{terminate:i,postMessage:i}},e}:function(e){var t={};return e.default=function(e,n,o,a,i){var r=new Worker(t[n]||(t[n]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return r.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var o=Error(n[0]);o.code=n[1],o.stack=n[2],i(o,null)}else i(null,t)},r.postMessage(o,a),r},e})({}),i=Uint8Array,r=Uint16Array,c=Uint32Array,s=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=function(e,t){for(var n=new r(31),o=0;o<31;++o)n[o]=t+=1<<e[o-1];var a=new c(n[30]);for(o=1;o<30;++o)for(var i=n[o];i<n[o+1];++i)a[i]=i-n[o]<<5|o;return[n,a]},h=d(s,2),p=h[0],f=h[1];p[28]=258,f[258]=28;for(var _=d(l,0),y=_[0],b=_[1],v=new r(32768),m=0;m<32768;++m){var g=(43690&m)>>>1|(21845&m)<<1;v[m]=((65280&(g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4))>>>8|(255&g)<<8)>>>1}var I=function(e,t,n){for(var o=e.length,a=0,i=new r(t);a<o;++a)e[a]&&++i[e[a]-1];var c,s=new r(t);for(a=0;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;if(n){c=new r(1<<t);var l=15-t;for(a=0;a<o;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],h=s[e[a]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)c[v[h]>>>l]=u}else for(c=new r(o),a=0;a<o;++a)e[a]&&(c[a]=v[s[e[a]-1]++]>>>15-e[a]);return c},T=new i(288);for(m=0;m<144;++m)T[m]=8;for(m=144;m<256;++m)T[m]=9;for(m=256;m<280;++m)T[m]=7;for(m=280;m<288;++m)T[m]=8;var k=new i(32);for(m=0;m<32;++m)k[m]=5;var S=I(T,9,0),w=I(T,9,1),O=I(k,5,0),F=I(k,5,1),B=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},x=function(e,t,n){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(7&t)&n},P=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},C=function(e){return(e+7)/8|0},R=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var o=new(2==e.BYTES_PER_ELEMENT?r:4==e.BYTES_PER_ELEMENT?c:i)(n-t);return o.set(e.subarray(t,n)),o};e.FlateErrorCode={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14};var N=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],A=function e(t,n,o){var a=Error(n||N[t]);if(a.code=t,Error.captureStackTrace&&Error.captureStackTrace(a,e),!o)throw a;return a},D=function(e,t,n){var o=e.length;if(!o||n&&n.f&&!n.l)return t||new i(0);var a=!t||n,r=!n||n.i;n||(n={}),t||(t=new i(3*o));var c=function(e){var n=t.length;if(e>n){var o=new i(Math.max(2*n,e));o.set(t),t=o}},d=n.f||0,h=n.p||0,f=n.b||0,_=n.l,b=n.d,v=n.m,m=n.n,g=8*o;do{if(!_){d=x(e,h,1);var T=x(e,h+1,3);if(h+=3,!T){var k=e[(z=C(h)+4)-4]|e[z-3]<<8,S=z+k;if(S>o){r&&A(0);break}a&&c(f+k),t.set(e.subarray(z,S),f),n.b=f+=k,n.p=h=8*S,n.f=d;continue}if(1==T)_=w,b=F,v=9,m=5;else if(2==T){var O=x(e,h,31)+257,N=x(e,h+10,15)+4,D=O+x(e,h+5,31)+1;h+=14;for(var U=new i(D),M=new i(19),L=0;L<N;++L)M[u[L]]=x(e,h+3*L,7);h+=3*N;var E=B(M),G=(1<<E)-1,j=I(M,E,1);for(L=0;L<D;){var z,K=j[x(e,h,G)];if(h+=15&K,(z=K>>>4)<16)U[L++]=z;else{var H=0,W=0;for(16==z?(W=3+x(e,h,3),h+=2,H=U[L-1]):17==z?(W=3+x(e,h,7),h+=3):18==z&&(W=11+x(e,h,127),h+=7);W--;)U[L++]=H}}var V=U.subarray(0,O),J=U.subarray(O);v=B(V),m=B(J),_=I(V,v,1),b=I(J,m,1)}else A(1);if(h>g){r&&A(0);break}}a&&c(f+131072);for(var q=(1<<v)-1,X=(1<<m)-1,Y=h;;Y=h){var Z=(H=_[P(e,h)&q])>>>4;if((h+=15&H)>g){r&&A(0);break}if(H||A(2),Z<256)t[f++]=Z;else{if(256==Z){Y=h,_=null;break}var Q=Z-254;Z>264&&(Q=x(e,h,(1<<(te=s[L=Z-257]))-1)+p[L],h+=te);var $=b[P(e,h)&X],ee=$>>>4;if($||A(3),h+=15&$,J=y[ee],ee>3){var te=l[ee];J+=P(e,h)&(1<<te)-1,h+=te}if(h>g){r&&A(0);break}a&&c(f+131072);for(var ne=f+Q;f<ne;f+=4)t[f]=t[f-J],t[f+1]=t[f+1-J],t[f+2]=t[f+2-J],t[f+3]=t[f+3-J];f=ne}}n.l=_,n.p=Y,n.b=f,n.f=d,_&&(d=1,n.m=v,n.d=b,n.n=m)}while(!d);return f==t.length?t:R(t,0,f)},U=function(e,t,n){var o=t/8|0;e[o]|=n<<=7&t,e[o+1]|=n>>>8},M=function(e,t,n){var o=t/8|0;e[o]|=n<<=7&t,e[o+1]|=n>>>8,e[o+2]|=n>>>16},L=function(e,t){for(var n=[],o=0;o<e.length;++o)e[o]&&n.push({s:o,f:e[o]});var a=n.length,c=n.slice();if(!a)return[W,0];if(1==a){var s=new i(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var l=n[0],u=n[1],d=0,h=1,p=2;for(n[0]={s:-1,f:l.f+u.f,l:l,r:u};h!=a-1;)l=n[n[d].f<n[p].f?d++:p++],u=n[d!=h&&n[d].f<n[p].f?d++:p++],n[h++]={s:-1,f:l.f+u.f,l:l,r:u};var f=c[0].s;for(o=1;o<a;++o)c[o].s>f&&(f=c[o].s);var _=new r(f+1),y=E(n[h-1],_,0);if(y>t){o=0;var b=0,v=y-t,m=1<<v;for(c.sort(function(e,t){return _[t.s]-_[e.s]||e.f-t.f});o<a;++o){var g=c[o].s;if(!(_[g]>t))break;b+=m-(1<<y-_[g]),_[g]=t}for(b>>>=v;b>0;){var I=c[o].s;_[I]<t?b-=1<<t-_[I]++-1:++o}for(;o>=0&&b;--o){var T=c[o].s;_[T]==t&&(--_[T],++b)}y=t}return[new i(_),y]},E=function e(t,n,o){return-1==t.s?Math.max(e(t.l,n,o+1),e(t.r,n,o+1)):n[t.s]=o},G=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new r(++t),o=0,a=e[0],i=1,c=function(e){n[o++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)c(32754);i>2&&(c(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(c(a),--i;i>6;i-=6)c(8304);i>2&&(c(i-3<<5|8208),i=0)}for(;i--;)c(a);i=1,a=e[s]}return[n.subarray(0,o),t]},j=function(e,t){for(var n=0,o=0;o<t.length;++o)n+=e[o]*t[o];return n},z=function(e,t,n){var o=n.length,a=C(t+2);e[a]=255&o,e[a+1]=o>>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var i=0;i<o;++i)e[a+i+4]=n[i];return 8*(a+4+o)},K=function(e,t,n,o,a,i,c,d,h,p,f){U(t,f++,n),++a[256];for(var _=L(a,15),y=_[0],b=_[1],v=L(i,15),m=v[0],g=v[1],w=G(y),F=w[0],B=w[1],x=G(m),P=x[0],C=x[1],R=new r(19),N=0;N<F.length;++N)R[31&F[N]]++;for(N=0;N<P.length;++N)R[31&P[N]]++;for(var A=L(R,7),D=A[0],E=A[1],K=19;K>4&&!D[u[K-1]];--K);var H,W,V,J,q=p+5<<3,X=j(a,T)+j(i,k)+c,Y=j(a,y)+j(i,m)+c+14+3*K+j(R,D)+(2*R[16]+3*R[17]+7*R[18]);if(q<=X&&q<=Y)return z(t,f,e.subarray(h,h+p));if(U(t,f,1+(Y<X)),f+=2,Y<X){H=I(y,b,0),W=y,V=I(m,g,0),J=m;var Z=I(D,E,0);for(U(t,f,B-257),U(t,f+5,C-1),U(t,f+10,K-4),f+=14,N=0;N<K;++N)U(t,f+3*N,D[u[N]]);f+=3*K;for(var Q=[F,P],$=0;$<2;++$){var ee=Q[$];for(N=0;N<ee.length;++N)U(t,f,Z[te=31&ee[N]]),f+=D[te],te>15&&(U(t,f,ee[N]>>>5&127),f+=ee[N]>>>12)}}else H=S,W=T,V=O,J=k;for(N=0;N<d;++N)if(o[N]>255){var te;M(t,f,H[257+(te=o[N]>>>18&31)]),f+=W[te+257],te>7&&(U(t,f,o[N]>>>23&31),f+=s[te]);var ne=31&o[N];M(t,f,V[ne]),f+=J[ne],ne>3&&(M(t,f,o[N]>>>5&8191),f+=l[ne])}else M(t,f,H[o[N]]),f+=W[o[N]];return M(t,f,H[256]),f+W[256]},H=new c([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),W=new i(0),V=function(e,t,n,o,a,u){var d=e.length,h=new i(o+d+5*(1+Math.ceil(d/7e3))+a),p=h.subarray(o,h.length-a),_=0;if(!t||d<8)for(var y=0;y<=d;y+=65535){var v=y+65535;v>=d&&(p[_>>3]=u),_=z(p,_+1,e.subarray(y,v))}else{for(var m=H[t-1],g=m>>>13,I=8191&m,T=(1<<n)-1,k=new r(32768),S=new r(T+1),w=Math.ceil(n/3),O=2*w,F=function(t){return(e[t]^e[t+1]<<w^e[t+2]<<O)&T},B=new c(25e3),x=new r(288),P=new r(32),N=0,A=0,D=(y=0,0),U=0,M=0;y<d;++y){var L=F(y),E=32767&y,G=S[L];if(k[E]=G,S[L]=E,U<=y){var j=d-y;if((N>7e3||D>24576)&&j>423){_=K(e,p,0,B,x,P,A,D,M,y-M,_),D=N=A=0,M=y;for(var V=0;V<286;++V)x[V]=0;for(V=0;V<30;++V)P[V]=0}var J=2,q=0,X=I,Y=E-G&32767;if(j>2&&L==F(y-Y))for(var Z=Math.min(g,j)-1,Q=Math.min(32767,y),$=Math.min(258,j);Y<=Q&&--X&&E!=G;){if(e[y+J]==e[y+J-Y]){for(var ee=0;ee<$&&e[y+ee]==e[y+ee-Y];++ee);if(ee>J){if(J=ee,q=Y,ee>Z)break;var te=Math.min(Y,ee-2),ne=0;for(V=0;V<te;++V){var oe=y-Y+V+32768&32767,ae=oe-k[oe]+32768&32767;ae>ne&&(ne=ae,G=oe)}}}Y+=(E=G)-(G=k[E])+32768&32767}if(q){B[D++]=268435456|f[J]<<18|b[q];var ie=31&f[J],re=31&b[q];A+=s[ie]+l[re],++x[257+ie],++P[re],U=y+J,++N}else B[D++]=e[y],++x[e[y]]}}_=K(e,p,u,B,x,P,A,D,M,y-M,_),!u&&7&_&&(_=z(p,_+1,W))}return R(h,0,o+C(_)+a)},J=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,o=9;--o;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),q=function(){var e=-1;return{p:function(t){for(var n=e,o=0;o<t.length;++o)n=J[255&n^t[o]]^n>>>8;e=n},d:function(){return~e}}},X=function(){var e=1,t=0;return{p:function(n){for(var o=e,a=t,i=0|n.length,r=0;r!=i;){for(var c=Math.min(r+2655,i);r<c;++r)a+=o+=n[r];o=(65535&o)+15*(o>>16),a=(65535&a)+15*(a>>16)}e=o,t=a},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}},Y=function(e,t,n,o,a){return V(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,o,!a)},Z=function(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)n[o]=t[o];return n},Q=function(e,t,n){for(var o=e(),a=""+e,i=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/\s+/g,"").split(","),r=0;r<o.length;++r){var c=o[r],s=i[r];if("function"==typeof c){t+=";"+s+"=";var l=""+c;if(c.prototype)if(-1!=l.indexOf("[native code]")){var u=l.indexOf(" ",8)+1;t+=l.slice(u,l.indexOf("(",u))}else for(var d in t+=l,c.prototype)t+=";"+s+".prototype."+d+"="+c.prototype[d];else t+=l}else n[s]=c}return[t,n]},$=[],ee=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},te=function(e,t,n,o){var i;if(!$[n]){for(var r="",c={},s=e.length-1,l=0;l<s;++l)r=(i=Q(e[l],r,c))[0],c=i[1];$[n]=Q(e[s],r,c)}var u=Z({},$[n][1]);return a.default($[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t+"}",n,u,ee(u),o)},ne=function(){return[i,r,c,s,l,u,p,y,w,F,v,N,I,B,x,P,C,R,A,D,Ce,se,le]},oe=function(){return[i,r,c,s,l,u,f,b,S,T,O,k,v,H,W,I,U,M,L,E,G,j,z,K,C,R,V,Y,Fe,se]},ae=function(){return[be,ge,ye,q,J]},ie=function(){return[ve,me]},re=function(){return[Ie,ye,X]},ce=function(){return[Te]},se=function(e){return postMessage(e,[e.buffer])},le=function(e){return e&&e.size&&new i(e.size)},ue=function(e,t,n,o,a,i){var r=te(n,o,a,function(e,t){r.terminate(),i(e,t)});return r.postMessage([e,t],t.consume?[e.buffer]:[]),function(){r.terminate()}},de=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},he=function(e,t,n,o,a){var i,r=te(e,o,a,function(e,n){e?(r.terminate(),t.ondata.call(t,e)):(n[1]&&r.terminate(),t.ondata.call(t,e,n[0],n[1]))});r.postMessage(n),t.push=function(e,n){t.ondata||A(5),i&&t.ondata(A(4,0,1),null,!!n),r.postMessage([e,i=n],[e.buffer])},t.terminate=function(){r.terminate()}},pe=function(e,t){return e[t]|e[t+1]<<8},fe=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},_e=function(e,t){return fe(e,t)+4294967296*fe(e,t+4)},ye=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},be=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&ye(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var o=0;o<=n.length;++o)e[o+10]=n.charCodeAt(o)}},ve=function(e){31==e[0]&&139==e[1]&&8==e[2]||A(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[n++]);return n+(2&t)},me=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ge=function(e){return 10+(e.filename&&e.filename.length+1||0)},Ie=function(e,t){var n=t.level,o=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=o<<6|(o?32-2*o:1)},Te=function(e){(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&A(6,"invalid zlib data"),32&e[1]&&A(6,"invalid zlib data: preset dictionaries not supported")};function ke(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var Se=function(){function e(e,t){t||"function"!=typeof e||(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(Y(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){this.ondata||A(5),this.d&&A(4),this.d=t,this.p(e,t||!1)},e}();e.Deflate=Se;var we=function(e,t){he([oe,function(){return[de,Se]}],this,ke.call(this,e,t),function(e){var t=new Se(e.data);onmessage=de(t)},6)};function Oe(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&A(7),ue(e,t,[oe],function(e){return se(Fe(e.data[0],e.data[1]))},0,n)}function Fe(e,t){return Y(e,t||{},0,0)}e.AsyncDeflate=we,e.deflate=Oe,e.deflateSync=Fe;var Be=function(){function e(e){this.s={},this.p=new i(0),this.ondata=e}return e.prototype.e=function(e){this.ondata||A(5),this.d&&A(4);var t=this.p.length,n=new i(t+e.length);n.set(this.p),n.set(e,t),this.p=n},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=D(this.p,this.o,this.s);this.ondata(R(n,t,this.s.b),this.d),this.o=R(n,this.s.b-32768),this.s.b=this.o.length,this.p=R(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}();e.Inflate=Be;var xe=function(e){this.ondata=e,he([ne,function(){return[de,Be]}],this,0,function(){var e=new Be;onmessage=de(e)},7)};function Pe(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&A(7),ue(e,t,[ne],function(e){return se(Ce(e.data[0],le(e.data[1])))},1,n)}function Ce(e,t){return D(e,t)}e.AsyncInflate=xe,e.inflate=Pe,e.inflateSync=Ce;var Re=function(){function e(e,t){this.c=q(),this.l=0,this.v=1,Se.call(this,e,t)}return e.prototype.push=function(e,t){Se.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=Y(e,this.o,this.v&&ge(this.o),t&&8,!t);this.v&&(be(n,this.o),this.v=0),t&&(ye(n,n.length-8,this.c.d()),ye(n,n.length-4,this.l)),this.ondata(n,t)},e}();e.Gzip=Re,e.Compress=Re;var Ne=function(e,t){he([oe,ae,function(){return[de,Se,Re]}],this,ke.call(this,e,t),function(e){var t=new Re(e.data);onmessage=de(t)},8)};function Ae(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&A(7),ue(e,t,[oe,ae,function(){return[De]}],function(e){return se(De(e.data[0],e.data[1]))},2,n)}function De(e,t){t||(t={});var n=q(),o=e.length;n.p(e);var a=Y(e,t,ge(t),8),i=a.length;return be(a,t),ye(a,i-8,n.d()),ye(a,i-4,o),a}e.AsyncGzip=Ne,e.AsyncCompress=Ne,e.gzip=Ae,e.compress=Ae,e.gzipSync=De,e.compressSync=De;var Ue=function(){function e(e){this.v=1,Be.call(this,e)}return e.prototype.push=function(e,t){if(Be.prototype.e.call(this,e),this.v){var n=this.p.length>3?ve(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}t&&(this.p.length<8&&A(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),Be.prototype.c.call(this,t)},e}();e.Gunzip=Ue;var Me=function(e){this.ondata=e,he([ne,ie,function(){return[de,Be,Ue]}],this,0,function(){var e=new Ue;onmessage=de(e)},9)};function Le(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&A(7),ue(e,t,[ne,ie,function(){return[Ee]}],function(e){return se(Ee(e.data[0]))},3,n)}function Ee(e,t){return D(e.subarray(ve(e),-8),t||new i(me(e)))}e.AsyncGunzip=Me,e.gunzip=Le,e.gunzipSync=Ee;var Ge=function(){function e(e,t){this.c=X(),this.v=1,Se.call(this,e,t)}return e.prototype.push=function(e,t){Se.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=Y(e,this.o,this.v&&2,t&&4,!t);this.v&&(Ie(n,this.o),this.v=0),t&&ye(n,n.length-4,this.c.d()),this.ondata(n,t)},e}();function je(e,t){t||(t={});var n=X();n.p(e);var o=Y(e,t,2,4);return Ie(o,t),ye(o,o.length-4,n.d()),o}e.Zlib=Ge,e.AsyncZlib=function(e,t){he([oe,re,function(){return[de,Se,Ge]}],this,ke.call(this,e,t),function(e){var t=new Ge(e.data);onmessage=de(t)},10)},e.zlib=function(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&A(7),ue(e,t,[oe,re,function(){return[je]}],function(e){return se(je(e.data[0],e.data[1]))},4,n)},e.zlibSync=je;var ze=function(){function e(e){this.v=1,Be.call(this,e)}return e.prototype.push=function(e,t){if(Be.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}t&&(this.p.length<4&&A(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),Be.prototype.c.call(this,t)},e}();e.Unzlib=ze;var Ke=function(e){this.ondata=e,he([ne,ce,function(){return[de,Be,ze]}],this,0,function(){var e=new ze;onmessage=de(e)},11)};function He(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&A(7),ue(e,t,[ne,ce,function(){return[We]}],function(e){return se(We(e.data[0],le(e.data[1])))},5,n)}function We(e,t){return D((Te(e),e.subarray(2,-4)),t)}e.AsyncUnzlib=Ke,e.unzlib=He,e.unzlibSync=We;var Ve=function(){function e(e){this.G=Ue,this.I=Be,this.Z=ze,this.ondata=e}return e.prototype.push=function(e,t){if(this.ondata||A(5),this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var n=new i(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,a=function(){o.ondata.apply(o,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(a):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,t),this.p=null}}},e}();e.Decompress=Ve;var Je=function(){function e(e){this.G=Me,this.I=xe,this.Z=Ke,this.ondata=e}return e.prototype.push=function(e,t){Ve.prototype.push.call(this,e,t)},e}();e.AsyncDecompress=Je,e.decompress=function(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&A(7),31==e[0]&&139==e[1]&&8==e[2]?Le(e,t,n):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Pe(e,t,n):He(e,t,n)},e.decompressSync=function(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?Ee(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Ce(e,t):We(e,t)};var qe=function e(t,n,o,a){for(var r in t){var c=t[r],s=n+r,l=a;Array.isArray(c)&&(l=Z(a,c[1]),c=c[0]),c instanceof i?o[s]=[c,l]:(o[s+="/"]=[new i(0),l],e(c,s,o,a))}},Xe="undefined"!=typeof TextEncoder&&new TextEncoder,Ye="undefined"!=typeof TextDecoder&&new TextDecoder,Ze=0;try{Ye.decode(W,{stream:!0}),Ze=1}catch(a){}var Qe=function(e){for(var t="",n=0;;){var o=e[n++],a=(o>127)+(o>223)+(o>239);if(n+a>e.length)return[t,R(e,n-1)];a?3==a?(o=((15&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|o>>10,56320|1023&o)):t+=String.fromCharCode(1&a?(31&o)<<6|63&e[n++]:(15&o)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(o)}},$e=function(){function e(e){this.ondata=e,Ze?this.t=new TextDecoder:this.p=W}return e.prototype.push=function(e,t){if(this.ondata||A(5),t=!!t,this.t)return this.ondata(this.t.decode(e,{stream:!0}),t),void(t&&(this.t.decode().length&&A(8),this.t=null));this.p||A(4);var n=new i(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length);var o=Qe(n),a=o[0],r=o[1];t?(r.length&&A(8),this.p=null):this.p=r,this.ondata(a,t)},e}();e.DecodeUTF8=$e;var et=function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){this.ondata||A(5),this.d&&A(4),this.ondata(tt(e),this.d=t||!1)},e}();function tt(e,t){if(t){for(var n=new i(e.length),o=0;o<e.length;++o)n[o]=e.charCodeAt(o);return n}if(Xe)return Xe.encode(e);var a=e.length,r=new i(e.length+(e.length>>1)),c=0,s=function(e){r[c++]=e};for(o=0;o<a;++o){if(c+5>r.length){var l=new i(c+8+(a-o<<1));l.set(r),r=l}var u=e.charCodeAt(o);u<128||t?s(u):u<2048?(s(192|u>>6),s(128|63&u)):u>55295&&u<57344?(s(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++o))>>18),s(128|u>>12&63),s(128|u>>6&63),s(128|63&u)):(s(224|u>>12),s(128|u>>6&63),s(128|63&u))}return R(r,0,c)}function nt(e,t){if(t){for(var n="",o=0;o<e.length;o+=16384)n+=String.fromCharCode.apply(null,e.subarray(o,o+16384));return n}if(Ye)return Ye.decode(e);var a=Qe(e),i=a[0];return a[1].length&&A(8),i}e.EncodeUTF8=et,e.strToU8=tt,e.strFromU8=nt;var ot=function(e){return 1==e?3:e<6?2:9==e?1:0},at=function(e,t){return t+30+pe(e,t+26)+pe(e,t+28)},it=function(e,t,n){var o=pe(e,t+28),a=nt(e.subarray(t+46,t+46+o),!(2048&pe(e,t+8))),i=t+46+o,r=fe(e,t+20),c=n&&4294967295==r?rt(e,i):[r,fe(e,t+24),fe(e,t+42)],s=c[0],l=c[1],u=c[2];return[pe(e,t+10),s,l,a,i+pe(e,t+30)+pe(e,t+32),u]},rt=function(e,t){for(;1!=pe(e,t);t+=4+pe(e,t+2));return[_e(e,t+12),_e(e,t+4),_e(e,t+20)]},ct=function(e){var t=0;if(e)for(var n in e){var o=e[n].length;o>65535&&A(9),t+=o+4}return t},st=function(e,t,n,o,a,i,r,c){var s=o.length,l=n.extra,u=c&&c.length,d=ct(l);ye(e,t,null!=r?33639248:67324752),t+=4,null!=r&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==i&&8),e[t++]=a&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var h=new Date(null==n.mtime?Date.now():n.mtime),p=h.getFullYear()-1980;if((p<0||p>119)&&A(10),ye(e,t,p<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),t+=4,null!=i&&(ye(e,t,n.crc),ye(e,t+4,i),ye(e,t+8,n.size)),ye(e,t+12,s),ye(e,t+14,d),t+=16,null!=r&&(ye(e,t,u),ye(e,t+6,n.attrs),ye(e,t+10,r),t+=14),e.set(o,t),t+=s,d)for(var f in l){var _=l[f],y=_.length;ye(e,t,+f),ye(e,t+2,y),e.set(_,t+4),t+=4+y}return u&&(e.set(c,t),t+=u),t},lt=function(e,t,n,o,a){ye(e,t,101010256),ye(e,t+8,n),ye(e,t+10,n),ye(e,t+12,o),ye(e,t+16,a)},ut=function(){function e(e){this.filename=e,this.c=q(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){this.ondata||A(5),this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e}();e.ZipPassThrough=ut;var dt=function(){function e(e,t){var n=this;t||(t={}),ut.call(this,e),this.d=new Se(t,function(e,t){n.ondata(null,e,t)}),this.compression=8,this.flag=ot(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){ut.prototype.push.call(this,e,t)},e}();e.ZipDeflate=dt;var ht=function(){function e(e,t){var n=this;t||(t={}),ut.call(this,e),this.d=new we(t,function(e,t,o){n.ondata(e,t,o)}),this.compression=8,this.flag=ot(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){ut.prototype.push.call(this,e,t)},e}();e.AsyncZipDeflate=ht;var pt=function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var t=this;if(this.ondata||A(5),2&this.d)this.ondata(A(4+8*(1&this.d),0,1),null,!1);else{var n=tt(e.filename),o=n.length,a=e.comment,r=a&&tt(a),c=o!=e.filename.length||r&&a.length!=r.length,s=o+ct(e.extra)+30;o>65535&&this.ondata(A(11,0,1),null,!1);var l=new i(s);st(l,0,e,n,c);var u=[l],d=function(){for(var e=0,n=u;e<n.length;e++)t.ondata(null,n[e],!1);u=[]},h=this.d;this.d=0;var p=this.u.length,f=Z(e,{f:n,u:c,o:r,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),h){var e=t.u[p+1];e?e.r():t.d=1}h=1}}),_=0;e.ondata=function(n,o,a){if(n)t.ondata(n,o,a),t.terminate();else if(_+=o.length,u.push(o),a){var r=new i(16);ye(r,0,134695760),ye(r,4,e.crc),ye(r,8,_),ye(r,12,e.size),u.push(r),f.c=_,f.b=s+_+16,f.crc=e.crc,f.size=e.size,h&&f.r(),h=1}else h&&d()},this.u.push(f)}},e.prototype.end=function(){var e=this;2&this.d?this.ondata(A(4+8*(1&this.d),0,1),null,!0):(this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3)},e.prototype.e=function(){for(var e=0,t=0,n=0,o=0,a=this.u;o<a.length;o++)n+=46+(l=a[o]).f.length+ct(l.extra)+(l.o?l.o.length:0);for(var r=new i(n+22),c=0,s=this.u;c<s.length;c++){var l;st(r,e,l=s[c],l.f,l.u,l.c,t,l.o),e+=46+l.f.length+ct(l.extra)+(l.o?l.o.length:0),t+=l.b}lt(r,e,this.u.length,n,t),this.ondata(null,r,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++)t[e].t();this.d=2},e}();e.Zip=pt,e.zip=function(e,t,n){n||(n=t,t={}),"function"!=typeof n&&A(7);var o={};qe(e,"",o,t);var a=Object.keys(o),r=a.length,c=0,s=0,l=r,u=Array(r),d=[],h=function(){for(var e=0;e<d.length;++e)d[e]()},p=function(e,t){vt(function(){n(e,t)})};vt(function(){p=n});var f=function(){var e=new i(s+22),t=c,n=s-c;s=0;for(var o=0;o<l;++o){var a=u[o];try{var r=a.c.length;st(e,s,a,a.f,a.u,r);var d=30+a.f.length+ct(a.extra),h=s+d;e.set(a.c,h),st(e,c,a,a.f,a.u,r,s,a.m),c+=16+d+(a.m?a.m.length:0),s=h+r}catch(e){return p(e,null)}}lt(e,c,u.length,n,t),p(null,e)};r||f();for(var _=function(e){var t=a[e],n=o[t],i=n[0],l=n[1],_=q(),y=i.length;_.p(i);var b=tt(t),v=b.length,m=l.comment,g=m&&tt(m),I=g&&g.length,T=ct(l.extra),k=0==l.level?0:8,S=function(n,o){if(n)h(),p(n,null);else{var a=o.length;u[e]=Z(l,{size:y,crc:_.d(),c:o,f:b,m:g,u:v!=t.length||g&&m.length!=I,compression:k}),c+=30+v+T+a,s+=76+2*(v+T)+(I||0)+a,--r||f()}};if(v>65535&&S(A(11,0,1),null),k)if(y<16e4)try{S(null,Fe(i,l))}catch(e){S(e,null)}else d.push(Oe(i,l,S));else S(null,i)},y=0;y<l;++y)_(y);return h},e.zipSync=function(e,t){t||(t={});var n={},o=[];qe(e,"",n,t);var a=0,r=0;for(var c in n){var s=n[c],l=s[0],u=s[1],d=0==u.level?0:8,h=(S=tt(c)).length,p=u.comment,f=p&&tt(p),_=f&&f.length,y=ct(u.extra);h>65535&&A(11);var b=d?Fe(l,u):l,v=b.length,m=q();m.p(l),o.push(Z(u,{size:l.length,crc:m.d(),c:b,f:S,m:f,u:h!=c.length||f&&p.length!=_,o:a,compression:d})),a+=30+h+y+v,r+=76+2*(h+y)+(_||0)+v}for(var g=new i(r+22),I=a,T=r-a,k=0;k<o.length;++k){var S;st(g,(S=o[k]).o,S,S.f,S.u,S.c.length);var w=30+S.f.length+ct(S.extra);g.set(S.c,S.o+w),st(g,a,S,S.f,S.u,S.c.length,S.o,S.m),a+=16+w+(S.m?S.m.length:0)}return lt(g,a,o.length,T,I),g};var ft=function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e}();e.UnzipPassThrough=ft;var _t=function(){function e(){var e=this;this.i=new Be(function(t,n){e.ondata(null,t,n)})}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(e){this.ondata(e,null,t)}},e.compression=8,e}();e.UnzipInflate=_t;var yt=function(){function e(e,t){var n=this;t<32e4?this.i=new Be(function(e,t){n.ondata(null,e,t)}):(this.i=new xe(function(e,t,o){n.ondata(e,t,o)}),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=R(e,0)),this.i.push(e,t)},e.compression=8,e}();e.AsyncUnzipInflate=yt;var bt=function(){function e(e){this.onfile=e,this.k=[],this.o={0:ft},this.p=W}return e.prototype.push=function(e,t){var n=this;if(this.onfile||A(5),this.p||A(4),this.c>0){var o=Math.min(this.c,e.length),a=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(a,!this.c):this.k[0].push(a),(e=e.subarray(o)).length)return this.push(e,t)}else{var r=0,c=0,s=void 0,l=void 0;this.p.length?e.length?((l=new i(this.p.length+e.length)).set(this.p),l.set(e,this.p.length)):l=this.p:l=e;for(var u=l.length,d=this.c,h=d&&this.d,p=function(){var e,t=fe(l,c);if(67324752==t){r=1,s=c,f.d=null,f.c=0;var o=pe(l,c+6),a=pe(l,c+8),i=2048&o,h=8&o,p=pe(l,c+26),_=pe(l,c+28);if(u>c+30+p+_){var y=[];f.k.unshift(y),r=2;var b,v=fe(l,c+18),m=fe(l,c+22),g=nt(l.subarray(c+30,c+=30+p),!i);4294967295==v?(e=h?[-2]:rt(l,c),v=e[0],m=e[1]):h&&(v=-1),c+=_,f.c=v;var I={name:g,compression:a,start:function(){if(I.ondata||A(5),v){var e=n.o[a];e||I.ondata(A(14,"unknown compression type "+a,1),null,!1),(b=v<0?new e(g):new e(g,v,m)).ondata=function(e,t,n){I.ondata(e,t,n)};for(var t=0,o=y;t<o.length;t++)b.push(o[t],!1);n.k[0]==y&&n.c?n.d=b:b.push(W,!0)}else I.ondata(null,W,!0)},terminate:function(){b&&b.terminate&&b.terminate()}};v>=0&&(I.size=v,I.originalSize=m),f.onfile(I)}return"break"}if(d){if(134695760==t)return s=c+=12+(-2==d&&8),r=3,f.c=0,"break";if(33639248==t)return s=c-=4,r=3,f.c=0,"break"}},f=this;c<u-4&&"break"!==p();++c);if(this.p=W,d<0){var _=l.subarray(0,r?s-12-(-2==d&&8)-(134695760==fe(l,s-16)&&4):c);h?h.push(_,!!r):this.k[+(2==r)].push(_)}if(2&r)return this.push(l.subarray(c),t);this.p=l.subarray(c)}t&&(this.c&&A(13),this.p=null)},e.prototype.register=function(e){this.o[e.compression]=e},e}();e.Unzip=bt;var vt="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(e){e()};return e.unzip=function(e,t,n){n||(n=t,t={}),"function"!=typeof n&&A(7);var o=[],a=function(){for(var e=0;e<o.length;++e)o[e]()},r={},c=function(e,t){vt(function(){n(e,t)})};vt(function(){c=n});for(var s=e.length-22;101010256!=fe(e,s);--s)if(!s||e.length-s>65558)return c(A(13,0,1),null),a;var l=pe(e,s+8);if(l){var u=l,d=fe(e,s+16),h=4294967295==d;if(h){if(s=fe(e,s-12),101075792!=fe(e,s))return c(A(13,0,1),null),a;u=l=fe(e,s+32),d=fe(e,s+48)}for(var p=t&&t.filter,f=function(){var t=it(e,d,h),n=t[0],s=t[1],u=t[2],f=t[3],_=t[4],y=at(e,t[5]);d=_;var b=function(e,t){e?(a(),c(e,null)):(t&&(r[f]=t),--l||c(null,r))};if(!p||p({name:f,size:s,originalSize:u,compression:n}))if(n)if(8==n){var v=e.subarray(y,y+s);if(s<32e4)try{b(null,Ce(v,new i(u)))}catch(e){b(e,null)}else o.push(Pe(v,{size:u},b))}else b(A(14,"unknown compression type "+n,1),null);else b(null,R(e,y,y+s));else b(null,null)},_=0;_<u;++_)f()}else c(null,{});return a},e.unzipSync=function(e,t){for(var n={},o=e.length-22;101010256!=fe(e,o);--o)(!o||e.length-o>65558)&&A(13);var a=pe(e,o+8);if(!a)return{};var r=fe(e,o+16),c=4294967295==r;c&&(o=fe(e,o-12),101075792!=fe(e,o)&&A(13),a=fe(e,o+32),r=fe(e,o+48));for(var s=t&&t.filter,l=0;l<a;++l){var u=it(e,r,c),d=u[0],h=u[1],p=u[2],f=u[3],_=u[4],y=at(e,u[5]);r=_,s&&!s({name:f,size:h,originalSize:p,compression:d})||(d?8==d?n[f]=Ce(e.subarray(y,y+h),new i(p)):A(14,"unknown compression type "+d):n[f]=R(e,y,y+h))}return n},e}(),cc._RF.pop()},{}],gameGuestItem:[function(e,t,n){"use strict";cc._RF.push(t,"7e47cRASoxO+YrEFsN3RxeG","gameGuestItem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"8d850+2/WdN4bQIxk8MgakH","gameGuestItem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("SoundManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._spine=null,t._totolTime=0,t._time=0,t._state=0,t._voiceLists=[],t._index=0,t._completeCb=null,t._needMove=!1,t._isCanTime=!1,t._guestCountId=0,t}return s(t,e),Object.defineProperty(t.prototype,"IsCanMove",{get:function(){return 0==this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"NeedMove",{get:function(){return this._needMove},set:function(e){this._needMove=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GuestCountId",{get:function(){return this._guestCountId},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._spine=this.node.getComponent(sp.Skeleton)},t.prototype.update=function(e){this._isCanTime&&(this._time+=e,this._time>=this._totolTime&&(this._time=0,this._isCanTime=!1,this._generateAudio(++this._index)))},t.prototype.init=function(e){this._guestCountId=e,this.reset()},t.prototype.addPlayVoice=function(e,t){return this._voiceLists.push(e),this._completeCb=t,this._voiceLists.length==this._index+1&&this._generateAudio(),!0},t.prototype.reset=function(){this.stopTween(),this._isCanTime=!1,this._state=0,this._needMove=!1,this._index=0,this._voiceLists=[],this._time=0,this._totolTime=0,this._completeCb=null},t.prototype._generateAudio=function(e){void 0===e&&(e=this._index);var t=this._voiceLists[e];if(t){var n=t.voice;this._playVoice(n)}else this._doComplete()},t.prototype._playVoice=function(e){return u(this,void 0,void 0,function(){var t,n;return d(this,function(o){switch(o.label){case 0:return this._state=2,[4,h.default.Instance.playRoleVoice(e)];case 1:return(t=o.sent())&&t.clip?(this._spine&&this._spine.findAnimation("standby_speak")&&this._spine.setAnimation(0,"standby_speak",!0),this._totolTime=t.clip.duration?t.clip.duration:0,this._state=1,this._isCanTime=!0,this._time=0,(n=this._voiceLists[this._index])&&n.cb&&n.cb(n.voice,this.node)):((n=this._voiceLists[this._index])&&(n.cb&&n.cb(n.voice,this.node),n.finishCb&&n.finishCb(n.voice,this._guestCountId)),this._time=0,this._isCanTime=!1,this._index>=this._voiceLists.length-1&&this._generateAudio(++this._index)),[2]}})})},t.prototype._doComplete=function(){this._spine&&this._spine.setAnimation(0,"standby_1",!0),this._completeCb&&this._completeCb(this),this._needMove?this.leave():this.reset()},t.prototype.leave=function(e){var t=this;void 0===e&&(e=null),this.node&&this.node.isValid&&cc.tween(this.node).to(1.8,{x:-500}).call(function(){t.node&&(t.node.active=!1),t.reset(),e&&e()}).start()},t.prototype.stopTween=function(){cc.Tween.stopAllByTarget(this.node)},l([f],t)}(cc.Component));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],group_backyard:[function(e,t,n){"use strict";cc._RF.push(t,"f5b0bRtsg9NlZoSj3wExCV2","group_backyard");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"f4dd813filIJ6bsDsg11Z5B","group_backyard");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("GameManger"),p=o("InfoManager"),f=o("StoragerManager"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t.group_night=null,t.node_water=null,t.icon_tree=[],t.node_eff=null,t.eff_snowflake=null,t.btn_door=null,t.arrows_backyard=null,t}return s(t,e),t.prototype.start=function(){if(p.default.Instance.ScreenSize.height>1400){var e=(1650-p.default.Instance.ScreenSize.height)/2;this.node.y+=e}else this.node.y=60;this.btn_door.on(cc.Node.EventType.TOUCH_END,this.click_doorway,this),this.arrows_backyard.on(cc.Node.EventType.TOUCH_END,this.click_doorway,this),cc.systemEvent.on(_.DistributedEvent.day_night,this.Refresh.bind(this,!0),this);var t=f.default.Instance.Record[_.RecordType.leave_backyard];t&&t>=h.default.Instance.TipsArrowsNum?this.arrows_backyard.active=!1:this.arrows_backyard.active=!0},t.prototype.Init=function(){this.node_water.zIndex=1e4;for(var e=0;e<this.icon_tree.length;e++)this.icon_tree[e].zIndex=11;this.node_eff.active=!1,this.Refresh(!1)},t.prototype.Refresh=function(e){void 0===e&&(e=!1),0!=f.default.Instance.GuideNovice&&(1==e?1==h.default.Instance.NightControl?this.refresh_node(this.group_night,255):this.refresh_node(this.group_night,0):1==h.default.Instance.NightControl?this.group_night.opacity=255:this.group_night.opacity=0)},t.prototype.refresh_node=function(e,t){0==e.activeInHierarchy?e.opacity=t:cc.tween(e).to(1,{opacity:t}).start()},t.prototype.RefreshGround=function(e){u.default.Instance.LoadSpriteFrame("Backyard","facility/backyard_ground_"+e+"_2",this.group_night.children[0]),this.eff_snowflake.active=3==e},t.prototype.RefreshBackground=function(e){u.default.Instance.LoadSpriteFrame("Backyard","facility/backyard_background_"+e+"_2",this.group_night.children[1]),u.default.Instance.LoadSpriteFrame("Backyard","facility/backyard_tree_left"+e+"_1",this.icon_tree[0]),u.default.Instance.LoadSpriteFrame("Backyard","facility/backyard_tree_right"+e+"_1",this.icon_tree[1])},t.prototype.call_back=function(){d.default.Instance.ScenceData[_.ScenceArea.backyard],f.default.Instance.AreaUnlock[_.ScenceArea.backyard]={unlock:!1},f.default.Instance.AutoSyncData()},t.prototype.Unlock=function(){f.default.Instance.AreaUnlock[_.ScenceArea.backyard]={unlock:!0},this.unlock_facility(_.ScenceArea.backyard),f.default.Instance.AutoSyncData()},t.prototype.unlock_facility=function(e){for(var t=[],n=[],o=d.default.Instance.FacilityOrder[e],a=0;a<o.length;a++)d.default.Instance.Facility1Information[o[a]].data[0].unlock_path==_.UnlockPath.default?(f.default.Instance.Facility[o[a]]={used_lv:1,buy_record:[1]},t.push(o[a])):d.default.Instance.FacilityDefault.indexOf(o[a])>=0&&n.push(o[a]);n.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,n,_.RefreshFacilityPath.init),t.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,t,_.RefreshFacilityPath.unlock_default)},t.prototype.click_doorway=function(){h.default.Instance.GameController.SwitchingScence(_.ScenceArea.doorway),h.default.Instance.GameController.room.x=-600,null==f.default.Instance.Record[_.RecordType.leave_backyard]?f.default.Instance.Record[_.RecordType.leave_backyard]=1:(f.default.Instance.Record[_.RecordType.leave_backyard]++,f.default.Instance.Record[_.RecordType.leave_backyard]>=h.default.Instance.TipsArrowsNum&&(this.arrows_backyard.active=!1)),f.default.Instance.AutoSyncData()},l([v(cc.Node)],t.prototype,"container1",void 0),l([v(cc.Node)],t.prototype,"container2",void 0),l([v(cc.Node)],t.prototype,"group_night",void 0),l([v(cc.Node)],t.prototype,"node_water",void 0),l([v(cc.Node)],t.prototype,"icon_tree",void 0),l([v(cc.Node)],t.prototype,"node_eff",void 0),l([v(cc.Node)],t.prototype,"eff_snowflake",void 0),l([v(cc.Node)],t.prototype,"btn_door",void 0),l([v(cc.Node)],t.prototype,"arrows_backyard",void 0),l([b],t)}(cc.Component);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],group_canteen1:[function(e,t,n){"use strict";cc._RF.push(t,"ff9c29gRSRMi7frqFW6QqEo","group_canteen1");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"bb4cbByzbhNkqHkWAQ5GsZx","group_canteen1");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GameGuideInterface"),d=o("DataManager"),h=o("GameManger"),p=o("SoundManager"),f=o("StoragerManager"),_=o("TypeManager"),y=o("UIManager"),b=cc._decorator,v=b.ccclass,m=b.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t.node_dishes=null,t.btn_second_floor=null,t.btn_doorway=null,t.slide_tips=null,t.arrows_first_floor=null,t.arrows_second_floor=null,t}return s(t,e),t.prototype.start=function(){this.btn_doorway.on(cc.Node.EventType.TOUCH_END,this.click_doorway,this),this.arrows_first_floor.on(cc.Node.EventType.TOUCH_END,this.click_doorway,this),this.btn_second_floor.on(cc.Node.EventType.TOUCH_END,this.click_second_floor,this),this.arrows_second_floor.on(cc.Node.EventType.TOUCH_END,this.click_second_floor,this),this.btn_second_floor.zIndex=3e3-Math.floor(this.btn_second_floor.y),this.slide_tips.active=!1;var e=f.default.Instance.Record[_.RecordType.leave_first_floor];e&&e>=h.default.Instance.TipsArrowsNum?this.arrows_first_floor.active=!1:this.arrows_first_floor.active=!0;var t=f.default.Instance.Record[_.RecordType.into_second_floor];t&&t>=h.default.Instance.TipsArrowsNum?this.arrows_second_floor.active=!1:this.arrows_second_floor.active=!0},t.prototype.Init=function(){},t.prototype.onEnable=function(){if(h.default.Instance.TsGame.table10_array)for(var e in h.default.Instance.TsGame.table10_array){var t=h.default.Instance.TsGame.table10_array[e];null!=t&&1==t.Cleaning&&p.default.Instance.PlayLoop("sweep_"+t.TableId,!0,"sweep")}},t.prototype.onDisable=function(){if(h.default.Instance.TsGame.table10_array)for(var e in h.default.Instance.TsGame.table10_array){var t=h.default.Instance.TsGame.table10_array[e];null!=t&&p.default.Instance.PlayLoop("sweep_"+t.TableId,!1,"sweep")}},t.prototype.click_doorway=function(){h.default.Instance.GameController.SwitchingScence(_.ScenceArea.doorway),null==f.default.Instance.Record[_.RecordType.leave_first_floor]?f.default.Instance.Record[_.RecordType.leave_first_floor]=1:(f.default.Instance.Record[_.RecordType.leave_first_floor]++,f.default.Instance.Record[_.RecordType.leave_first_floor]>=h.default.Instance.TipsArrowsNum&&(this.arrows_first_floor.active=!1)),f.default.Instance.AutoSyncData()},t.prototype.click_second_floor=function(){h.default.Instance.GameController.SwitchingScence(_.ScenceArea.second_room1,!0),null==f.default.Instance.Record[_.RecordType.into_second_floor]?f.default.Instance.Record[_.RecordType.into_second_floor]=1:(f.default.Instance.Record[_.RecordType.into_second_floor]++,f.default.Instance.Record[_.RecordType.into_second_floor]>=h.default.Instance.TipsArrowsNum&&(this.arrows_second_floor.active=!1)),f.default.Instance.AutoSyncData()},t.prototype.Unlock=function(){h.default.Instance.GudieStep=300,y.default.Instance.OpenUI(u.default,y.UIOrder.Window_3),f.default.Instance.AreaUnlock[_.ScenceArea.first_canteen]={unlock:!0},this.unlock_facility(),f.default.Instance.AutoSyncData()},t.prototype.unlock_facility=function(){for(var e=[],t=[],n=d.default.Instance.FacilityOrder[_.ScenceArea.first_canteen],o=0;o<n.length;o++)d.default.Instance.Facility1Information[n[o]].data[0].unlock_path==_.UnlockPath.default?(f.default.Instance.Facility[n[o]]={used_lv:1,buy_record:[1]},e.push(n[o])):d.default.Instance.FacilityDefault.indexOf(n[o])>=0&&t.push(n[o]);t.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,t,_.RefreshFacilityPath.init),e.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,e,_.RefreshFacilityPath.unlock_default)},l([m(cc.Node)],t.prototype,"container1",void 0),l([m(cc.Node)],t.prototype,"container2",void 0),l([m(cc.Node)],t.prototype,"node_dishes",void 0),l([m(cc.Node)],t.prototype,"btn_second_floor",void 0),l([m(cc.Node)],t.prototype,"btn_doorway",void 0),l([m(cc.Node)],t.prototype,"slide_tips",void 0),l([m(cc.Node)],t.prototype,"arrows_first_floor",void 0),l([m(cc.Node)],t.prototype,"arrows_second_floor",void 0),l([v],t)}(cc.Component);i.default=g,cc._RF.pop(),cc._RF.pop()},{}],group_canteen2:[function(e,t,n){"use strict";cc._RF.push(t,"87213ScymBIB5v7RrzBITen","group_canteen2");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"55dec0blw9Fg4gaRnIGrIMV","group_canteen2");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("DataManager"),d=o("StoragerManager"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t}return s(t,e),t.prototype.start=function(){var e=this.container2.getChildByName("icon_1");e.zIndex=3e3-e.y+150;var t=this.container2.getChildByName("icon_2");t.zIndex=3e3-t.y+150},t.prototype.Init=function(){},t.prototype.Unlock=function(){d.default.Instance.AreaUnlock[h.ScenceArea.first_room1]={unlock:!0},d.default.Instance.AreaUnlock[h.ScenceArea.first_room2]={unlock:!0},d.default.Instance.AreaUnlock[h.ScenceArea.first_room3]={unlock:!0},this.unlock_facility(),d.default.Instance.AutoSyncData()},t.prototype.unlock_facility=function(){for(var e=[],t=[],n=[].concat(u.default.Instance.FacilityOrder[h.ScenceArea.first_room1]).concat(u.default.Instance.FacilityOrder[h.ScenceArea.first_room2]).concat(u.default.Instance.FacilityOrder[h.ScenceArea.first_room3]),o=0;o<n.length;o++)u.default.Instance.Facility1Information[n[o]].data[0].unlock_path==h.UnlockPath.default?(d.default.Instance.Facility[n[o]]={used_lv:1,buy_record:[1]},e.push(n[o])):u.default.Instance.FacilityDefault.indexOf(n[o])>=0&&t.push(n[o]);t.length>0&&cc.systemEvent.emit(h.DistributedEvent.change_facility,t,h.RefreshFacilityPath.init),e.length>0&&cc.systemEvent.emit(h.DistributedEvent.change_facility,e,h.RefreshFacilityPath.unlock_default)},l([_(cc.Node)],t.prototype,"container1",void 0),l([_(cc.Node)],t.prototype,"container2",void 0),l([f],t)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],group_doorway:[function(e,t,n){"use strict";cc._RF.push(t,"2f5e4UIuipPz40dqTCGOSsj","group_doorway");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"4e8cdCm7m5Iipdxvnq3+XVL","group_doorway");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("GameManger"),h=o("SoundManager"),p=o("StoragerManager"),f=o("TypeManager"),_=cc._decorator,y=_.ccclass,b=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t.icon_4=null,t.icon_night=null,t.icon_7=null,t.icon_8=null,t.icon_9=null,t.btn_door=null,t.btn_backyard=null,t.btn_escort=null,t.btn_park=null,t.btn_park2=null,t.arrows_escort=null,t.arrows_first_floor=null,t.arrows_backyard=null,t}return s(t,e),t.prototype.start=function(){this.btn_door.on(cc.Node.EventType.TOUCH_END,this.click_canteen1,this),this.arrows_first_floor.on(cc.Node.EventType.TOUCH_END,this.click_canteen1,this),this.btn_backyard.on(cc.Node.EventType.TOUCH_END,this.click_backyard,this),this.arrows_backyard.on(cc.Node.EventType.TOUCH_END,this.click_backyard,this),this.btn_park.on(cc.Node.EventType.TOUCH_END,this.click_park,this),this.btn_park2.on(cc.Node.EventType.TOUCH_END,this.click_park,this),this.btn_escort.on(cc.Node.EventType.TOUCH_END,this.click_armed_escort,this),this.arrows_escort.on(cc.Node.EventType.TOUCH_END,this.click_armed_escort,this),cc.systemEvent.on(f.DistributedEvent.day_night,this.Refresh.bind(this,!0),this),this.icon_7.zIndex=2,this.icon_8.zIndex=2,this.btn_park.zIndex=3e3-Math.floor(this.btn_park.y),this.icon_night.opacity=0,this.icon_night.active,this.icon_8.opacity=0,this.icon_8.active=!0,this.JudgeSnow(),this.Refresh(!1);var e=p.default.Instance.Record[f.RecordType.into_escort];e&&e>=d.default.Instance.TipsArrowsNum?this.arrows_escort.active=!1:this.arrows_escort.active=!0;var t=p.default.Instance.Record[f.RecordType.into_first_floor];t&&t>=d.default.Instance.TipsArrowsNum?this.arrows_first_floor.active=!1:this.arrows_first_floor.active=!0;var n=p.default.Instance.Record[f.RecordType.into_backyard];n&&n>=d.default.Instance.TipsArrowsNum?this.arrows_backyard.active=!1:this.arrows_backyard.active=!0},t.prototype.JudgeSnow=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();0==t&&e.getDate()>=4&&n<=31||1==t&&e.getDate()>=1&&n<=15?(u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon2",this.node.children[0]),u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon2_n",this.icon_night),this.icon_7.active=!0,this.icon_9.active=!0):(this.icon_7.active=!1,this.icon_9.active=!1)},t.prototype.Refresh=function(e){void 0===e&&(e=!1),1==d.default.Instance.NightControl?u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon4_n",this.icon_4):u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon4",this.icon_4),1==e?1==d.default.Instance.NightControl?(this.refresh_node(this.icon_night,255),this.refresh_node(this.icon_8,255)):(this.refresh_node(this.icon_night,0),this.refresh_node(this.icon_8,0)):1==d.default.Instance.NightControl?(this.icon_night.opacity=255,this.icon_8.opacity=255):(this.icon_night.opacity=0,this.icon_8.opacity=0),this.refresh_doorway_building(0)},t.prototype.refresh_node=function(e,t){0==e.activeInHierarchy?e.opacity=t:cc.tween(e).to(1,{opacity:t}).start()},t.prototype.refresh_doorway_building=function(e){var t,n="";switch(1==d.default.Instance.NightControl&&(n="_n"),e){case 2:null!=(t=p.default.Instance.AreaUnlock[f.ScenceArea.backyard])&&1==t.unlock?u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon21"+n,this.btn_backyard):u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon20"+n,this.btn_backyard);break;case 3:null!=(t=p.default.Instance.AreaUnlock[f.ScenceArea.escort])&&1==t.unlock?(u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon25",this.icon_8),u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon41"+n,this.btn_escort)):(u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon24",this.icon_8),u.default.Instance.LoadSpriteFrame("Bundle2UI","doorway/doorway_icon40"+n,this.btn_escort));break;case 0:this.refresh_doorway_building(2),this.refresh_doorway_building(3)}},t.prototype.FrameUpdate=function(){},t.prototype.click_armed_escort=function(){d.default.Instance.GameController.move_num>25||(d.default.Instance.GameController.SwitchingScence(f.ScenceArea.escort,!0),null==p.default.Instance.Record[f.RecordType.into_escort]?p.default.Instance.Record[f.RecordType.into_escort]=1:(p.default.Instance.Record[f.RecordType.into_escort]++,p.default.Instance.Record[f.RecordType.into_escort]>=d.default.Instance.TipsArrowsNum&&(this.arrows_escort.active=!1)),p.default.Instance.AutoSyncData())},t.prototype.click_canteen1=function(){d.default.Instance.GameController.move_num>25||(d.default.Instance.GameController.SwitchingScence(f.ScenceArea.first_canteen),null==p.default.Instance.Record[f.RecordType.into_first_floor]?p.default.Instance.Record[f.RecordType.into_first_floor]=1:(p.default.Instance.Record[f.RecordType.into_first_floor]++,p.default.Instance.Record[f.RecordType.into_first_floor]>=d.default.Instance.TipsArrowsNum&&(this.arrows_first_floor.active=!1)),p.default.Instance.AutoSyncData())},t.prototype.click_backyard=function(){d.default.Instance.GameController.move_num>25||(d.default.Instance.GameController.SwitchingScence(f.ScenceArea.backyard,!0),null==p.default.Instance.Record[f.RecordType.into_backyard]?p.default.Instance.Record[f.RecordType.into_backyard]=1:(p.default.Instance.Record[f.RecordType.into_backyard]++,p.default.Instance.Record[f.RecordType.into_backyard]>=d.default.Instance.TipsArrowsNum&&(this.arrows_backyard.active=!1)),p.default.Instance.AutoSyncData())},t.prototype.click_park=function(){d.default.Instance.GameController.move_num>25||d.default.Instance.GameController.SwitchingScence(f.ScenceArea.parking,!0)},t.prototype.onEnable=function(){h.default.Instance.PlayLoop("bustling",!0,"bustling")},t.prototype.onDisable=function(){h.default.Instance.PlayLoop("bustling",!1,"bustling")},l([b(cc.Node)],t.prototype,"container1",void 0),l([b(cc.Node)],t.prototype,"container2",void 0),l([b(cc.Node)],t.prototype,"icon_4",void 0),l([b(cc.Node)],t.prototype,"icon_night",void 0),l([b(cc.Node)],t.prototype,"icon_7",void 0),l([b(cc.Node)],t.prototype,"icon_8",void 0),l([b(cc.Node)],t.prototype,"icon_9",void 0),l([b(cc.Node)],t.prototype,"btn_door",void 0),l([b(cc.Node)],t.prototype,"btn_backyard",void 0),l([b(cc.Node)],t.prototype,"btn_escort",void 0),l([b(cc.Node)],t.prototype,"btn_park",void 0),l([b(cc.Node)],t.prototype,"btn_park2",void 0),l([b(cc.Node)],t.prototype,"arrows_escort",void 0),l([b(cc.Node)],t.prototype,"arrows_first_floor",void 0),l([b(cc.Node)],t.prototype,"arrows_backyard",void 0),l([y],t)}(cc.Component);i.default=v,cc._RF.pop(),cc._RF.pop()},{}],group_escort:[function(e,t,n){"use strict";cc._RF.push(t,"6d195m7DnVGcJ/cG2gLx4hn","group_escort");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"e463a4p3v5Lo7QE7iSqHEnf","group_escort");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("GameManger"),p=o("StoragerManager"),f=o("TypeManager"),_=cc._decorator,y=_.ccclass,b=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t.group_night=null,t.group_zero=null,t.btn_exhibition=null,t.btn_doorway=null,t.arrows_escort=null,t.arrows_exhibition=null,t.node_roof=null,t}return s(t,e),t.prototype.start=function(){this.btn_exhibition.on(cc.Node.EventType.TOUCH_END,this.open_exhibition,this),this.arrows_exhibition.on(cc.Node.EventType.TOUCH_END,this.open_exhibition,this),this.btn_doorway.on(cc.Node.EventType.TOUCH_END,this.doorway,this),this.arrows_escort.on(cc.Node.EventType.TOUCH_END,this.doorway,this);var e=p.default.Instance.Record[f.RecordType.leave_escort];e&&e>=h.default.Instance.TipsArrowsNum?this.arrows_escort.active=!1:this.arrows_escort.active=!0;var t=p.default.Instance.Record[f.RecordType.into_escort];t&&t>=h.default.Instance.TipsArrowsNum?this.arrows_exhibition.active=!1:this.arrows_exhibition.active=!0},t.prototype.Init=function(){this.Refresh(!1);var e=p.default.Instance.AreaUnlock[f.ScenceArea.escort];e&&1==e.unlock?this.group_zero.active=!1:this.group_zero.active=!0},t.prototype.call_back=function(){d.default.Instance.ScenceData[f.ScenceArea.escort],p.default.Instance.AreaUnlock[f.ScenceArea.escort]={unlock:!1},p.default.Instance.AutoSyncData()},t.prototype.Unlock=function(){p.default.Instance.AreaUnlock[f.ScenceArea.escort]={unlock:!0},this.unlock_facility(f.ScenceArea.escort),p.default.Instance.AutoSyncData()},t.prototype.unlock_facility=function(e){this.group_zero.active=!1;for(var t=[],n=[],o=d.default.Instance.FacilityOrder[e],a=0;a<o.length;a++)d.default.Instance.Facility1Information[o[a]].data[0].unlock_path==f.UnlockPath.default?(p.default.Instance.Facility[o[a]]={used_lv:1,buy_record:[1]},t.push(o[a])):d.default.Instance.FacilityDefault.indexOf(o[a])>=0&&n.push(o[a]);n.length>0&&cc.systemEvent.emit(f.DistributedEvent.change_facility,n,f.RefreshFacilityPath.init),t.length>0&&cc.systemEvent.emit(f.DistributedEvent.change_facility,t,f.RefreshFacilityPath.unlock_default)},t.prototype.Refresh=function(e){void 0===e&&(e=!1),0!=p.default.Instance.GuideNovice&&(1==e?1==h.default.Instance.NightControl?this.refresh_node(this.group_night,255):this.refresh_node(this.group_night,0):1==h.default.Instance.NightControl?this.group_night.opacity=255:this.group_night.opacity=0)},t.prototype.refresh_node=function(e,t){0==e.activeInHierarchy?e.opacity=t:cc.tween(e).to(1,{opacity:t}).start()},t.prototype.RefreshEscort=function(e,t){switch(e){case f.FacilityType.escort_ground:u.default.Instance.LoadSpriteFrame("EscortUI","facility/escort_ground_"+t,this.group_night.children[0]);break;case f.FacilityType.escort_door:u.default.Instance.LoadSpriteFrame("EscortUI","facility/"+e+"_"+t,this.group_night.children[1]),u.default.Instance.LoadSpriteFrame("EscortUI","facility/escort_eaves_"+t,this.node_roof)}},t.prototype.open_exhibition=function(){h.default.Instance.GameController.move_num>15||(h.default.Instance.GameController.SwitchingScence(f.ScenceArea.exhibition,!0),null==p.default.Instance.Record[f.RecordType.into_exhibition]?p.default.Instance.Record[f.RecordType.into_exhibition]=1:(p.default.Instance.Record[f.RecordType.into_exhibition]++,p.default.Instance.Record[f.RecordType.into_exhibition]>=h.default.Instance.TipsArrowsNum&&(this.arrows_exhibition.active=!1)),p.default.Instance.AutoSyncData())},t.prototype.doorway=function(){h.default.Instance.GameController.move_num>15||(h.default.Instance.GameController.SwitchingScence(f.ScenceArea.doorway),h.default.Instance.GameController.room.x=425,null==p.default.Instance.Record[f.RecordType.leave_escort]?p.default.Instance.Record[f.RecordType.leave_escort]=1:(p.default.Instance.Record[f.RecordType.leave_escort]++,p.default.Instance.Record[f.RecordType.leave_escort]>=h.default.Instance.TipsArrowsNum&&(this.arrows_escort.active=!1)),p.default.Instance.AutoSyncData())},l([b(cc.Node)],t.prototype,"container1",void 0),l([b(cc.Node)],t.prototype,"container2",void 0),l([b(cc.Node)],t.prototype,"group_night",void 0),l([b(cc.Node)],t.prototype,"group_zero",void 0),l([b(cc.Node)],t.prototype,"btn_exhibition",void 0),l([b(cc.Node)],t.prototype,"btn_doorway",void 0),l([b(cc.Node)],t.prototype,"arrows_escort",void 0),l([b(cc.Node)],t.prototype,"arrows_exhibition",void 0),l([b(cc.Node)],t.prototype,"node_roof",void 0),l([y],t)}(cc.Component);i.default=v,cc._RF.pop(),cc._RF.pop()},{}],group_exhibition:[function(e,t,n){"use strict";cc._RF.push(t,"11d6ftVHGtCzKkQ51lUhVyP","group_exhibition");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"554971X2P5CW6wOXXV61j8/","group_exhibition");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("GameManger"),p=o("InfoManager"),f=o("StoragerManager"),_=o("TypeManager"),y=o("MapControl3"),b=cc._decorator,v=b.ccclass,m=b.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t.btn_escort=null,t.btn_pay1=null,t.btn_pay2=null,t.btn_stock=null,t.icon_stock=null,t.node_roof=null,t.arrows_exhibition=null,t}return s(t,e),t.prototype.onLoad=function(){this.node.height=p.default.Instance.ScreenSize.height,this.ts_map=this.node.getComponent(y.MapControl3),this.ts_map.Init()},t.prototype.start=function(){this.btn_stock.on(cc.Node.EventType.TOUCH_END,this.stock,this),this.btn_escort.on(cc.Node.EventType.TOUCH_END,this.escort,this),this.arrows_exhibition.on(cc.Node.EventType.TOUCH_END,this.escort,this),this.btn_pay1.on(cc.Node.EventType.TOUCH_END,this.pay1,this),this.btn_pay2.on(cc.Node.EventType.TOUCH_END,this.pay2,this);var e=f.default.Instance.Record[_.RecordType.leave_exhibition];e&&e>=h.default.Instance.TipsArrowsNum?this.arrows_exhibition.active=!1:this.arrows_exhibition.active=!0},t.prototype.Updata=function(){},t.prototype.Init=function(){this.goods_num=20,this.btn_pay1.active=!1,this.btn_pay2.active=!1,this.btn_stock.active=!1,this.btn_pay1.opacity=0,this.btn_pay2.opacity=0,this.btn_stock.opacity=0,this.icon_stock.active=!0,this.icon_stock.zIndex=3e3-this.icon_stock.y,null==f.default.Instance.Facility[_.FacilityType.exhibition_table]?this.icon_stock.active=!1:this.icon_stock.active=!0},t.prototype.ShowPayBtn=function(e){switch(e){case 1:this.btn_pay1.opacity=255,(t=h.default.Instance.TsGame.GetStaffById(104))&&t.Behavior==_.StaffBehavior.wait_work?t.ChangeBehavior(_.StaffBehavior.settle_accounts):cc.systemEvent.emit(_.DistributedEvent.work_warn,_.WorkWarn.exhibition_ticket,!0);break;case 2:this.btn_pay2.opacity=255,(t=h.default.Instance.TsGame.GetStaffById(106))&&t.Behavior==_.StaffBehavior.wait_work?t.ChangeBehavior(_.StaffBehavior.settle_accounts):cc.systemEvent.emit(_.DistributedEvent.work_warn,_.WorkWarn.exhibition_souvenir,!0);break;case 3:var t;this.btn_pay2.setScale(0),this.btn_stock.opacity=255,this.icon_stock.active=!1,(t=h.default.Instance.TsGame.GetStaffById(106))&&t.Behavior==_.StaffBehavior.wait_work?t.ChangeBehavior(_.StaffBehavior.additional_cargo):cc.systemEvent.emit(_.DistributedEvent.work_warn,_.WorkWarn.exhibition_souvenir,!0)}},t.prototype.HidePayBtn=function(e){switch(e){case 1:break;case 2:this.btn_pay2.opacity=0,cc.systemEvent.emit(_.DistributedEvent.work_warn,null,!1)}},t.prototype.stock=function(){this.goods_num=20,this.btn_pay2.setScale(1),this.btn_stock.opacity=0,this.icon_stock.active=!0,cc.systemEvent.emit(_.DistributedEvent.work_warn,null,!1)},t.prototype.pay1=function(){for(var e=0;e<h.default.Instance.TsGame.team41_array.length;e++){var t=h.default.Instance.TsGame.team41_array[e];if(t.Behavior==_.Team41Behavior.pay_1){t.JudgeNextVisit("\u95e8\u53e3\u4ed8\u94b1\u540e");break}}this.btn_pay1.opacity=0,cc.systemEvent.emit(_.DistributedEvent.work_warn,null,!1)},t.prototype.pay2=function(){if(!(this.goods_num<=0))for(var e=0;e<h.default.Instance.TsGame.team41_array.length;e++){var t=h.default.Instance.TsGame.team41_array[e];if(t.Behavior==_.Team41Behavior.pay_2)return this.goods_num-=t.souvenir_num,this.btn_pay2.opacity=0,cc.systemEvent.emit(_.DistributedEvent.work_warn,null,!1),t.change_behavior(_.Team41Behavior.leave2),void(this.goods_num<=0&&this.ShowPayBtn(3))}},t.prototype.escort=function(){h.default.Instance.GameController.SwitchingScence(_.ScenceArea.escort,!0),null==f.default.Instance.Record[_.RecordType.leave_exhibition]?f.default.Instance.Record[_.RecordType.leave_exhibition]=1:(f.default.Instance.Record[_.RecordType.leave_exhibition]++,f.default.Instance.Record[_.RecordType.leave_exhibition]>=h.default.Instance.TipsArrowsNum&&(this.arrows_exhibition.active=!1)),f.default.Instance.AutoSyncData()},t.prototype.call_back=function(){d.default.Instance.ScenceData[_.ScenceArea.exhibition],f.default.Instance.AreaUnlock[_.ScenceArea.exhibition]={unlock:!1},f.default.Instance.AutoSyncData()},t.prototype.Unlock=function(){f.default.Instance.AreaUnlock[_.ScenceArea.exhibition]={unlock:!0},this.unlock_facility(_.ScenceArea.exhibition),f.default.Instance.AutoSyncData()},t.prototype.unlock_facility=function(e){for(var t=[],n=[],o=d.default.Instance.FacilityOrder[e],a=0;a<o.length;a++)d.default.Instance.Facility1Information[o[a]].data[0].unlock_path==_.UnlockPath.default?(f.default.Instance.Facility[o[a]]={used_lv:1,buy_record:[1]},t.push(o[a])):d.default.Instance.FacilityDefault.indexOf(o[a])>=0&&n.push(o[a]);n.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,n,_.RefreshFacilityPath.init),t.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,t,_.RefreshFacilityPath.unlock_default)},t.prototype.RefreshExhibition=function(e,t){switch(e){case _.FacilityType.exhibition_table:u.default.Instance.LoadSpriteFrame("EscortUI","facility/icon_table_"+t,this.icon_stock.children[0]),u.default.Instance.LoadSpriteFrame("EscortUI","facility/icon_table2_"+t,this.icon_stock.children[1]),this.icon_stock.y=1==t?100:120;break;case _.FacilityType.exhibition_wall:u.default.Instance.LoadSpriteFrame("ExhibitionUI","facility/exhibition_eaves_"+t,this.node_roof)}},l([m(cc.Node)],t.prototype,"container1",void 0),l([m(cc.Node)],t.prototype,"container2",void 0),l([m(cc.Node)],t.prototype,"btn_escort",void 0),l([m(cc.Node)],t.prototype,"btn_pay1",void 0),l([m(cc.Node)],t.prototype,"btn_pay2",void 0),l([m(cc.Node)],t.prototype,"btn_stock",void 0),l([m(cc.Node)],t.prototype,"icon_stock",void 0),l([m(cc.Node)],t.prototype,"node_roof",void 0),l([m(cc.Node)],t.prototype,"arrows_exhibition",void 0),l([v],t)}(cc.Component);i.default=g,cc._RF.pop(),cc._RF.pop()},{}],group_kitchen:[function(e,t,n){"use strict";cc._RF.push(t,"f1293/Tc5JPoql7IopUg13o","group_kitchen");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"bff9671qKZM4JPT3URc76J5","group_kitchen");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("DataManager"),d=o("GameManger"),h=o("SoundManager"),p=o("StoragerManager"),f=o("TypeManager"),_=cc._decorator,y=_.ccclass,b=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t.dishes_table=null,t.layout_main1=null,t.layout_main2=null,t.btn_wash=null,t.node_clean=null,t.dishes_list={},t}return s(t,e),t.prototype.start=function(){this.btn_wash.on(cc.Node.EventType.TOUCH_END,this.click_wash,this)},t.prototype.Init=function(){this.WashBtn(!1)},t.prototype.kitchen_sound=function(e){switch(e){case!0:if(1==d.default.Instance.IsWash&&h.default.Instance.PlayLoop("wash",!0,"sweep"),d.default.Instance.TsGame.dishes_array)for(var t=0;t<d.default.Instance.TsGame.dishes_array.length&&!(d.default.Instance.TsGame.dishes_array[t].cook_time>0);t++);break;case!1:h.default.Instance.PlayLoop("wash",!1,"sweep")}},t.prototype.click_wash=function(){var e=this;d.default.Instance.TsGame.BowlNum=0,d.default.Instance.IsWash=!0,this.node_clean.active=!0,h.default.Instance.PlayLoop("wash",!0,"sweep"),cc.tween(this).delay(6).call(function(){d.default.Instance.IsWash=!1,e.node_clean.active=!1,h.default.Instance.PlayLoop("wash",!1,"sweep")}).start()},t.prototype.WashBtn=function(){this.btn_wash.active=!1},t.prototype.Unlock=function(){for(var e in p.default.Instance.AreaUnlock[f.ScenceArea.first_kitchen]={unlock:!0},this.unlock_facility(),d.default.Instance.TsGame.table10_array){var t=d.default.Instance.TsGame.table10_array[e];switch(t.TableTips){case f.WorkWarn.order_food:case f.WorkWarn.order_food2:case f.WorkWarn.order_food3:t.click()}}303==d.default.Instance.GudieStep&&d.default.Instance.GudieStep++,p.default.Instance.AutoSyncData()},t.prototype.unlock_facility=function(){for(var e=[],t=[],n=u.default.Instance.FacilityOrder[f.ScenceArea.first_kitchen],o=0;o<n.length;o++)u.default.Instance.Facility1Information[n[o]].data[0].unlock_path==f.UnlockPath.default?(p.default.Instance.Facility[n[o]]={used_lv:1,buy_record:[1]},e.push(n[o])):u.default.Instance.FacilityDefault.indexOf(n[o])>=0&&t.push(n[o]);t.length>0&&cc.systemEvent.emit(f.DistributedEvent.change_facility,t,f.RefreshFacilityPath.init),e.length>0&&cc.systemEvent.emit(f.DistributedEvent.change_facility,e,f.RefreshFacilityPath.unlock_default)},l([b(cc.Node)],t.prototype,"container1",void 0),l([b(cc.Node)],t.prototype,"container2",void 0),l([b(cc.Node)],t.prototype,"dishes_table",void 0),l([b(cc.Node)],t.prototype,"layout_main1",void 0),l([b(cc.Node)],t.prototype,"layout_main2",void 0),l([b(cc.Node)],t.prototype,"btn_wash",void 0),l([b(cc.Node)],t.prototype,"node_clean",void 0),l([y],t)}(cc.Component);i.default=v,cc._RF.pop(),cc._RF.pop()},{}],group_park:[function(e,t,n){"use strict";cc._RF.push(t,"f1456zQFGRCCop7l3k7umo8","group_park");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"68b99p6hgtMJK/B3mxe08ya","group_park");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("GameManger"),p=o("StoragerManager"),f=o("TypeManager"),_=cc._decorator,y=_.ccclass,b=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t.group_night=null,t.icon_ground=null,t.btn_doorway=null,t.default_1=null,t.default_2=null,t.default_3=[],t.default_4=[],t.default_5=null,t.eff_snowflake=null,t.eff_light=null,t.group_zero=null,t.arrows_park=null,t}return s(t,e),t.prototype.start=function(){this.btn_doorway.on(cc.Node.EventType.TOUCH_END,this.click_doorway,this),this.arrows_park.on(cc.Node.EventType.TOUCH_END,this.click_doorway,this),cc.systemEvent.on(f.DistributedEvent.day_night,this.Refresh.bind(this,!0),this);var e=p.default.Instance.Record[f.RecordType.leave_park];e&&e>=h.default.Instance.TipsArrowsNum?this.arrows_park.active=!1:this.arrows_park.active=!0},t.prototype.Init=function(){this.default_4[0].zIndex=3e3-Math.floor(this.default_4[0].y),this.eff_light.zIndex=3e3-Math.floor(this.eff_light.y),this.FacilityLight(!1),this.Refresh(!1)},t.prototype.RefreshGround=function(e){0==e&&(e=1),u.default.Instance.LoadSpriteFrame("ParkUI","game/outdoor_ground_"+e,this.icon_ground)},t.prototype.JudgeSnow=function(){for(var e=!1,t=1;t<=5;t++)if(null!=p.default.Instance.Facility["park_ground_"+t]&&3==p.default.Instance.Facility["park_ground_"+t].used_lv){e=!0;break}1==e&&0==this.eff_snowflake.active?this.eff_snowflake.active=!0:0==e&&1==this.eff_snowflake.active&&(this.eff_snowflake.active=!1)},t.prototype.RefreshGround5=function(){var e=p.default.Instance.Facility[f.FacilityType.park_ground_5];null==e&&(e={used_lv:1,buy_record:[1]});var t=e.used_lv;u.default.Instance.LoadSpriteFrame("ParkUI","game/park_default_2_"+t,this.default_2),u.default.Instance.LoadSpriteFrame("ParkUI","game/park_default_5_"+t,this.default_5);for(var n=0;n<this.default_3.length;n++)u.default.Instance.LoadSpriteFrame("ParkUI","game/park_default_3_"+t,this.default_3[n]);for(n=0;n<this.default_4.length;n++)u.default.Instance.LoadSpriteFrame("ParkUI","game/park_default_4_"+t,this.default_4[n]);3==t?u.default.Instance.LoadSpriteFrame("ParkUI","game/park_default_1_3",this.default_1):u.default.Instance.LoadSpriteFrame("ParkUI","game/park_default_1_1",this.default_1)},t.prototype.FacilityLight=function(e){this.group_night.children[0].active=e},t.prototype.Refresh=function(e){void 0===e&&(e=!1),1==e?1==h.default.Instance.NightControl?(this.refresh_node(this.group_night,255),this.refresh_node(this.eff_light,255)):(this.refresh_node(this.group_night,0),this.refresh_node(this.eff_light,0)):1==h.default.Instance.NightControl?(this.group_night.opacity=255,this.eff_light.opacity=255):(this.group_night.opacity=0,this.eff_light.opacity=0)},t.prototype.RefreshParkSedan=function(e){switch(e){case f.FacilityType.park_sedan_1:this.group_zero.children[0].active=!1;break;case f.FacilityType.park_sedan_2:this.group_zero.children[1].active=!1;break;case f.FacilityType.park_sedan_3:this.group_zero.children[2].active=!1;break;case f.FacilityType.park_sedan_4:this.group_zero.children[3].active=!1;break;case f.FacilityType.park_sedan_5:this.group_zero.children[4].active=!1}},t.prototype.refresh_node=function(e,t){0==e.activeInHierarchy?e.opacity=t:cc.tween(e).to(1,{opacity:t}).start()},t.prototype.call_back=function(){d.default.Instance.ScenceData[f.ScenceArea.parking],p.default.Instance.AreaUnlock[f.ScenceArea.parking]={unlock:!1},p.default.Instance.AreaUnlock[f.ScenceArea.parking],p.default.Instance.AutoSyncData()},t.prototype.Unlock=function(){p.default.Instance.AreaUnlock[f.ScenceArea.parking]={unlock:!0},this.unlock_facility(f.ScenceArea.parking),p.default.Instance.AutoSyncData()},t.prototype.unlock_facility=function(e){for(var t=[],n=[],o=d.default.Instance.FacilityOrder[e],a=0;a<o.length;a++)d.default.Instance.Facility1Information[o[a]].data[0].unlock_path==f.UnlockPath.default?(p.default.Instance.Facility[o[a]]={used_lv:1,buy_record:[1]},t.push(o[a])):d.default.Instance.FacilityDefault.indexOf(o[a])>=0&&n.push(o[a]);n.length>0&&cc.systemEvent.emit(f.DistributedEvent.change_facility,n,f.RefreshFacilityPath.init),t.length>0&&cc.systemEvent.emit(f.DistributedEvent.change_facility,t,f.RefreshFacilityPath.unlock_default)},t.prototype.click_doorway=function(){h.default.Instance.GameController.SwitchingScence(f.ScenceArea.doorway),null==p.default.Instance.Record[f.RecordType.leave_park]?p.default.Instance.Record[f.RecordType.leave_park]=1:(p.default.Instance.Record[f.RecordType.leave_park]++,p.default.Instance.Record[f.RecordType.leave_park]>=h.default.Instance.TipsArrowsNum&&(this.arrows_park.active=!1)),p.default.Instance.AutoSyncData()},l([b(cc.Node)],t.prototype,"container1",void 0),l([b(cc.Node)],t.prototype,"container2",void 0),l([b(cc.Node)],t.prototype,"group_night",void 0),l([b(cc.Node)],t.prototype,"icon_ground",void 0),l([b(cc.Node)],t.prototype,"btn_doorway",void 0),l([b(cc.Node)],t.prototype,"default_1",void 0),l([b(cc.Node)],t.prototype,"default_2",void 0),l([b(cc.Node)],t.prototype,"default_3",void 0),l([b(cc.Node)],t.prototype,"default_4",void 0),l([b(cc.Node)],t.prototype,"default_5",void 0),l([b(cc.Node)],t.prototype,"eff_snowflake",void 0),l([b(cc.Node)],t.prototype,"eff_light",void 0),l([b(cc.Node)],t.prototype,"group_zero",void 0),l([b(cc.Node)],t.prototype,"arrows_park",void 0),l([y],t)}(cc.Component);i.default=v,cc._RF.pop(),cc._RF.pop()},{}],group_second_floor:[function(e,t,n){"use strict";cc._RF.push(t,"f9411gUAcZJzo4HvIEAVnAI","group_second_floor");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"a3637k4a9lB4rZApeIq2BTc","group_second_floor");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("GameManger"),p=o("InfoManager"),f=o("StoragerManager"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t.btn_stairs=null,t.btn_stairs2=null,t.btn_check_in=null,t.group_dishes=null,t.icon_dishes=null,t.layout_dishes=null,t.icon_stairs_first=null,t.icon_stairs_third=null,t.arrows_second_floor=null,t.arrows_third_floor=null,t}return s(t,e),t.prototype.start=function(){this.btn_stairs.on(cc.Node.EventType.TOUCH_END,this.click_stairs,this),this.arrows_second_floor.on(cc.Node.EventType.TOUCH_END,this.click_stairs,this),this.btn_stairs2.on(cc.Node.EventType.TOUCH_END,this.click_stairs2,this),this.arrows_third_floor.on(cc.Node.EventType.TOUCH_END,this.click_stairs2,this),this.btn_check_in.on(cc.Node.EventType.TOUCH_END,this.CheckIn.bind(this,!1),this);var e=f.default.Instance.Record[_.RecordType.leave_second_floor];e&&e>=h.default.Instance.TipsArrowsNum?this.arrows_second_floor.active=!1:this.arrows_second_floor.active=!0;var t=f.default.Instance.Record[_.RecordType.into_third_floor];t&&t>=h.default.Instance.TipsArrowsNum?this.arrows_third_floor.active=!1:this.arrows_third_floor.active=!0},t.prototype.Init=function(){this.tips=_.WorkWarn.null,this.count_down=-7,p.default.Instance.ScreenSize.height>1400?this.node.y=10:this.node.y=0,this.group_dishes.zIndex=2712,this.icon_dishes.active=!1,this.btn_check_in.active=!1,this.btn_check_in.opacity=0,this.icon_stairs_first.active=!1,this.icon_stairs_third.active=!1},t.prototype.RefreshStairs=function(e){0!=e&&u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_icon3_"+e,this.icon_stairs_first)},t.prototype.RefreshWall=function(e){0!=e&&(u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_icon1_"+e,this.icon_stairs_third),u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_icon2_"+e,this.icon_stairs_third.children[0]))},t.prototype.call_back=function(e){d.default.Instance.ScenceData[e],f.default.Instance.AreaUnlock[e]={unlock:!1},f.default.Instance.AutoSyncData()},t.prototype.Unlock=function(e){f.default.Instance.AreaUnlock[e]={unlock:!0},this.unlock_facility(e),f.default.Instance.AutoSyncData()},t.prototype.unlock_facility=function(e){for(var t=[],n=[],o=d.default.Instance.FacilityOrder[e],a=0;a<o.length;a++)d.default.Instance.Facility1Information[o[a]].data[0].unlock_path==_.UnlockPath.default?(f.default.Instance.Facility[o[a]]={used_lv:1,buy_record:[1]},t.push(o[a])):d.default.Instance.FacilityDefault.indexOf(o[a])>=0&&n.push(o[a]);n.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,n,_.RefreshFacilityPath.init),t.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,t,_.RefreshFacilityPath.unlock_default)},t.prototype.click_stairs=function(){h.default.Instance.GameController.SwitchingScence(_.ScenceArea.first_canteen),null==f.default.Instance.Record[_.RecordType.leave_second_floor]?f.default.Instance.Record[_.RecordType.leave_second_floor]=1:(f.default.Instance.Record[_.RecordType.leave_second_floor]++,f.default.Instance.Record[_.RecordType.leave_second_floor]>=h.default.Instance.TipsArrowsNum&&(this.arrows_second_floor.active=!1)),f.default.Instance.AutoSyncData()},t.prototype.click_stairs2=function(){h.default.Instance.GameController.SwitchingScence(_.ScenceArea.third_canteen,!0),null==f.default.Instance.Record[_.RecordType.into_third_floor]?f.default.Instance.Record[_.RecordType.into_third_floor]=1:(f.default.Instance.Record[_.RecordType.into_third_floor]++,f.default.Instance.Record[_.RecordType.into_third_floor]>=h.default.Instance.TipsArrowsNum&&(this.arrows_third_floor.active=!1)),f.default.Instance.AutoSyncData()},t.prototype.ShowBtn=function(e){this.team=e,this.btn_check_in.opacity=255,this.tips=_.WorkWarn.check_in,this.count_down=7,cc.systemEvent.emit(_.DistributedEvent.work_warn,this.tips,!0);var t=h.default.Instance.TsGame.GetStaffById(10);if(t&&(t.Behavior==_.StaffBehavior.wait_work||t.Behavior==_.StaffBehavior.move_station))switch(t.Behavior){case _.StaffBehavior.wait_work:t.ChangeBehavior(_.StaffBehavior.check_in);break;case _.StaffBehavior.move_station:t.ChangeBehavior(_.StaffBehavior.move_counter)}},t.prototype.CheckIn=function(e){void 0===e&&(e=!1),this.tips=_.WorkWarn.null,this.count_down=-7,cc.systemEvent.emit(_.DistributedEvent.work_warn,null,!1),0==e?this.team.change_behavior(_.Team22Behavior.move_4):this.team.change_behavior(_.Team22Behavior.check_in),this.btn_check_in.opacity=0},l([v(cc.Node)],t.prototype,"container1",void 0),l([v(cc.Node)],t.prototype,"container2",void 0),l([v(cc.Node)],t.prototype,"btn_stairs",void 0),l([v(cc.Node)],t.prototype,"btn_stairs2",void 0),l([v(cc.Node)],t.prototype,"btn_check_in",void 0),l([v(cc.Node)],t.prototype,"group_dishes",void 0),l([v(cc.Node)],t.prototype,"icon_dishes",void 0),l([v(cc.Node)],t.prototype,"layout_dishes",void 0),l([v(cc.Node)],t.prototype,"icon_stairs_first",void 0),l([v(cc.Node)],t.prototype,"icon_stairs_third",void 0),l([v(cc.Node)],t.prototype,"arrows_second_floor",void 0),l([v(cc.Node)],t.prototype,"arrows_third_floor",void 0),l([b],t)}(cc.Component);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],group_third_floor:[function(e,t,n){"use strict";cc._RF.push(t,"c119c9d+ORDJqqxdgVZGo/V","group_third_floor");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"b2d95dDfxFKfZDzFXWJXVNX","group_third_floor");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("GameManger"),p=o("InfoManager"),f=o("StoragerManager"),_=o("TypeManager"),y=o("MapControl3"),b=o("bamboo_item"),v=cc._decorator,m=v.ccclass,g=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container1=null,t.container2=null,t.ts_bamboo=null,t.icon_drifting0=null,t.icon_drifting1=[],t.icon_counter0=null,t.icon_stage0=null,t.icon_sauna0=null,t.icon_mahjong0=null,t.group_night=null,t.icon_stool1=null,t.icon_stool2=null,t.icon_bridge=null,t.btn_bedroom=null,t.eff_petal=null,t.eff_petal2=null,t.eff_petal3=null,t.eff_sauna=null,t.eff_spring=null,t.icon_flim=null,t.spine_love=null,t.icon_ground1=null,t.icon_ground2=null,t.icon_rail=null,t.eff_snow=null,t.eff_wenquan=null,t.btn_drama=null,t.btn_drifting=null,t.btn_divination=null,t.btn_mahjong=null,t.btn_sauna=null,t.btn_pay=null,t.arrows_third_floor=null,t}return s(t,e),t.prototype.onLoad=function(){this.node.height=p.default.Instance.ScreenSize.height,this.ts_map=this.node.getComponent(y.MapControl3),this.ts_map.Init(),this.icon_drifting1[2].zIndex=1,this.icon_drifting1[3].zIndex=1,this.icon_drifting1[4].zIndex=1,this.icon_counter0.active=!0,this.icon_stage0.active=!0,this.icon_sauna0.active=!0,this.icon_mahjong0.active=!0,this.container2.getChildByName("third_floor_icon_2").zIndex=2349,this.icon_bridge.zIndex=3e3-this.icon_bridge.y,this.icon_rail.zIndex=3e3-this.icon_rail.y,this.icon_flim.zIndex=2146,this.icon_mahjong0.zIndex=3e3-this.icon_mahjong0.y,this.icon_sauna0.zIndex=3e3-this.icon_sauna0.y,this.icon_stool1.zIndex=3e3-this.icon_stool1.y,this.icon_stool2.zIndex=3e3-this.icon_stool2.y,this.icon_stool1.active=!1,this.icon_stool2.active=!1,this.icon_bridge.active=!1,this.eff_petal.active=!1,this.eff_petal2.active=!1,this.eff_petal3.active=!1,this.eff_sauna.active=!1,this.eff_spring.active=!1,this.icon_flim.active=!1,this.spine_love.node.active=!1,this.eff_snow.active=!1,this.eff_wenquan.active=!1},t.prototype.start=function(){var e=this;this.btn_bedroom.on(cc.Node.EventType.TOUCH_END,this.click_stairs,this),this.arrows_third_floor.on(cc.Node.EventType.TOUCH_END,this.click_stairs,this),this.btn_drama.on(cc.Node.EventType.TOUCH_END,this.drama,this),this.btn_drifting.on(cc.Node.EventType.TOUCH_END,this.drifting,this),this.btn_sauna.on(cc.Node.EventType.TOUCH_END,this.sauna,this),this.btn_mahjong.on(cc.Node.EventType.TOUCH_END,this.mahjong,this),this.btn_divination.on(cc.Node.EventType.TOUCH_END,this.divination,this),this.btn_pay.on(cc.Node.EventType.TOUCH_END,this.pay,this),this.spine_love.setCompleteListener(function(){e.spine_love.node.active=!1});var t=f.default.Instance.Record[_.RecordType.leave_third_floor];t&&t>=h.default.Instance.TipsArrowsNum?this.arrows_third_floor.active=!1:this.arrows_third_floor.active=!0},t.prototype.onUpdate=function(){},t.prototype.Init=function(){this.btn_drifting.active=!1,this.btn_mahjong.active=!1,this.btn_sauna.active=!1,this.btn_divination.active=!1,this.btn_pay.active=!1,this.btn_drama.active=!1,this.sauna_num=0,this.mahjong_num=0,this.queue_up_pay=[]},t.prototype.drama=function(){null==f.default.Instance.Staff.staff_19?this.drama_time=50:this.drama_time=36e3,this.btn_drama.active=!1,null!=f.default.Instance.Facility[_.FacilityType.third_film_screen]&&(this.icon_flim.active=!0)},t.prototype.drifting=function(){this.ts_bamboo.drifting_over(),this.btn_drifting.active=!1},t.prototype.divination=function(){this.btn_divination.active=!1,this.ts_team32&&this.ts_team32.change_behavior(_.Team32Behavior.wait_1)},t.prototype.sauna=function(){this.sauna_num=0,this.btn_sauna.active=!1,this.eff_sauna.active=!0},t.prototype.mahjong=function(){this.mahjong_num=0,this.btn_mahjong.active=!1},t.prototype.pay=function(){this.btn_pay.active=!1;for(var e=h.default.Instance.TsGame,t=0;t<e.team31_array.length;t++)(n=e.team31_array[t]).Behavior==_.Team31Behavior.wait_pay&&n.count_down<0&&(n.count_down=5);for(t=0;t<e.team32_array.length;t++)(n=e.team32_array[t]).Behavior==_.Team32Behavior.wait_pay&&n.count_down<0&&(n.count_down=5);for(t=0;t<e.team33_array.length;t++)(n=e.team33_array[t]).Behavior==_.Team33Behavior.wait_pay&&n.count_down<0&&(n.count_down=5);for(t=0;t<e.team34_array.length;t++){var n;(n=e.team34_array[t]).Behavior==_.Team34Behavior.wait_pay&&n.count_down<0&&(n.count_down=5)}},t.prototype.AddQueueUp=function(){for(var e,t=0;t<100;t++)if(1!=this.queue_up_pay[t]){this.queue_up_pay[t]=!0,e=t;break}return{id:e,pos:e<=6?cc.v2(70*e-1e3,570):cc.v2(-580,570-70*(e-8))}},t.prototype.LeaveQueueUp=function(e){null!=e&&(this.queue_up_pay[e]=null)},t.prototype.AddSauna=function(){this.sauna_num++},t.prototype.AddMahjong=function(){this.mahjong_num++},t.prototype.onEnable=function(){this.spine_love.node.active=!1},t.prototype.JudgeFacility=function(e,t){if(0!=t){switch(e){case _.FacilityType.third_film_stool:case _.FacilityType.second_floor_lantern2:break;case _.FacilityType.third_floor_counter:case _.FacilityType.third_floor_screen2:case _.FacilityType.third_floor_decorate1:case _.FacilityType.third_floor_decorate2:case _.FacilityType.third_floor_decorate3:case _.FacilityType.third_floor_decorate4:case _.FacilityType.third_floor_decorate5:1==this.icon_counter0.active&&(this.icon_counter0.active=!1);break;case _.FacilityType.third_film_screen:case _.FacilityType.third_floor_desk2:case _.FacilityType.third_film_stool:case _.FacilityType.third_floor_decorate6:case _.FacilityType.third_floor_decorate7:1==this.icon_stage0.active&&(this.icon_stage0.active=!1);break;case _.FacilityType.third_floor_bed:case _.FacilityType.third_floor_stool2:case _.FacilityType.third_floor_stone:case _.FacilityType.third_floor_decorate8:case _.FacilityType.third_floor_decorate9:case _.FacilityType.third_floor_room:1==this.icon_sauna0.active&&(this.icon_sauna0.active=!1),e==_.FacilityType.third_floor_stool2&&0==this.eff_sauna.active&&(this.eff_sauna.active=!0);break;case _.FacilityType.third_floor_table1:case _.FacilityType.third_floor_table2:case _.FacilityType.third_floor_decorate10:case _.FacilityType.third_floor_decorate11:1==this.icon_mahjong0.active&&(this.icon_mahjong0.active=!1);break;case _.FacilityType.third_floor_bridge:switch(0==this.icon_bridge.active&&(this.icon_bridge.active=!0),t){case 1:this.icon_bridge.setPosition(558,-296);break;case 2:this.icon_bridge.active=!1;break;case 3:this.icon_bridge.setPosition(518,-372)}1==this.icon_bridge.active&&u.default.Instance.LoadSpriteFrame("ThirdFloor","game/third_floor_icon_12_"+t,this.icon_bridge);break;case _.FacilityType.third_floor_plant:switch(this.eff_petal.active=!1,this.eff_petal2.active=!1,this.eff_petal3.active=!1,t){case 1:this.eff_petal.active=!0;break;case 2:this.eff_petal2.active=!0;break;case 3:this.eff_petal3.active=!0}break;case _.FacilityType.third_floor_spring:0==this.eff_spring.active&&(this.eff_spring.active=!0,this.eff_wenquan.active=!0)}switch(e){case _.FacilityType.third_film_screen:null==this.drama_time&&this.drama();var n=f.default.Instance.Facility[_.FacilityType.third_film_screen].used_lv;switch(null==n&&(n=1),n){case 1:this.icon_flim.children[0].y=15;break;case 2:this.icon_flim.children[0].y=-15;break;case 3:this.icon_flim.children[0].y=-25}u.default.Instance.LoadSpriteFrame("ThirdFloor","facility/third_film_"+n,this.icon_flim.children[0])}}},t.prototype.Refresh=function(e){void 0===e&&(e=!1),1==e?1==h.default.Instance.NightControl?this.refresh_node(this.group_night,255):this.refresh_node(this.group_night,0):1==h.default.Instance.NightControl?this.group_night.opacity=255:this.group_night.opacity=0},t.prototype.refresh_node=function(e,t){0==e.activeInHierarchy?e.opacity=t:cc.tween(e).to(1,{opacity:t}).start()},t.prototype.Unlock=function(e){f.default.Instance.AreaUnlock[e]={unlock:!0},this.unlock_facility(e),f.default.Instance.AutoSyncData()},t.prototype.call_back=function(e){d.default.Instance.ScenceData[e],f.default.Instance.AreaUnlock[e]={unlock:!1},f.default.Instance.AutoSyncData()},t.prototype.unlock_facility=function(e){for(var t=[],n=[],o=d.default.Instance.FacilityOrder[e],a=0;a<o.length;a++)d.default.Instance.Facility1Information[o[a]].data[0].unlock_path==_.UnlockPath.default?(f.default.Instance.Facility[o[a]]={used_lv:1,buy_record:[1]},t.push(o[a])):d.default.Instance.FacilityDefault.indexOf(o[a])>=0&&n.push(o[a]);n.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,n,_.RefreshFacilityPath.init),t.length>0&&cc.systemEvent.emit(_.DistributedEvent.change_facility,t,_.RefreshFacilityPath.unlock_default)},t.prototype.RefreshGround=function(e){switch(0==e&&(e=1),u.default.Instance.LoadSpriteFrame("ThirdFloor","game/third_floor_icon_1_"+e,this.icon_ground1),u.default.Instance.LoadSpriteFrame("ThirdFloor","game/third_floor_icon_23_"+e,this.icon_rail),e){case 1:this.icon_ground1.setPosition(cc.v2(108,-19));break;case 2:this.icon_ground1.setPosition(cc.v2(96,-7));break;case 3:this.icon_ground1.setPosition(cc.v2(77,-2))}},t.prototype.RefreshDrifting=function(e){switch(0==e&&(e=1),u.default.Instance.LoadSpriteFrame("ThirdFloor","game/third_floor_icon_6_"+e,this.icon_drifting1[0]),u.default.Instance.LoadSpriteFrame("ThirdFloor","game/third_floor_icon_7_"+e,this.icon_drifting1[4]),e){case 1:this.icon_drifting1[4].setPosition(cc.v2(775,-220)),this.icon_drifting1[1].y=-226;break;case 2:this.icon_drifting1[4].setPosition(cc.v2(755,-234)),this.icon_drifting1[1].y=-226;break;case 3:this.icon_drifting1[4].setPosition(cc.v2(753,-262)),this.icon_drifting1[1].y=-200}},t.prototype.RefreshGround2=function(e){0==e&&(e=1),u.default.Instance.LoadSpriteFrame("ThirdFloor","game/third_floor_icon_27_"+e,this.icon_ground2)},t.prototype.click_stairs=function(){this.ts_map.MoveDis>70||(h.default.Instance.GameController.SwitchingScence(_.ScenceArea.second_canteen,!0),null==f.default.Instance.Record[_.RecordType.leave_third_floor]?f.default.Instance.Record[_.RecordType.leave_third_floor]=1:(f.default.Instance.Record[_.RecordType.leave_third_floor]++,f.default.Instance.Record[_.RecordType.leave_third_floor]>=h.default.Instance.TipsArrowsNum&&(this.arrows_third_floor.active=!1)),f.default.Instance.AutoSyncData())},l([g(cc.Node)],t.prototype,"container1",void 0),l([g(cc.Node)],t.prototype,"container2",void 0),l([g(b.default)],t.prototype,"ts_bamboo",void 0),l([g(cc.Node)],t.prototype,"icon_drifting0",void 0),l([g(cc.Node)],t.prototype,"icon_drifting1",void 0),l([g(cc.Node)],t.prototype,"icon_counter0",void 0),l([g(cc.Node)],t.prototype,"icon_stage0",void 0),l([g(cc.Node)],t.prototype,"icon_sauna0",void 0),l([g(cc.Node)],t.prototype,"icon_mahjong0",void 0),l([g(cc.Node)],t.prototype,"group_night",void 0),l([g(cc.Node)],t.prototype,"icon_stool1",void 0),l([g(cc.Node)],t.prototype,"icon_stool2",void 0),l([g(cc.Node)],t.prototype,"icon_bridge",void 0),l([g(cc.Node)],t.prototype,"btn_bedroom",void 0),l([g(cc.Node)],t.prototype,"eff_petal",void 0),l([g(cc.Node)],t.prototype,"eff_petal2",void 0),l([g(cc.Node)],t.prototype,"eff_petal3",void 0),l([g(cc.Node)],t.prototype,"eff_sauna",void 0),l([g(cc.Node)],t.prototype,"eff_spring",void 0),l([g(cc.Node)],t.prototype,"icon_flim",void 0),l([g(sp.Skeleton)],t.prototype,"spine_love",void 0),l([g(cc.Node)],t.prototype,"icon_ground1",void 0),l([g(cc.Node)],t.prototype,"icon_ground2",void 0),l([g(cc.Node)],t.prototype,"icon_rail",void 0),l([g(cc.Node)],t.prototype,"eff_snow",void 0),l([g(cc.Node)],t.prototype,"eff_wenquan",void 0),l([g(cc.Node)],t.prototype,"btn_drama",void 0),l([g(cc.Node)],t.prototype,"btn_drifting",void 0),l([g(cc.Node)],t.prototype,"btn_divination",void 0),l([g(cc.Node)],t.prototype,"btn_mahjong",void 0),l([g(cc.Node)],t.prototype,"btn_sauna",void 0),l([g(cc.Node)],t.prototype,"btn_pay",void 0),l([g(cc.Node)],t.prototype,"arrows_third_floor",void 0),l([m],t)}(cc.Component);i.default=I,cc._RF.pop(),cc._RF.pop()},{}],guest11_item:[function(e,t,n){"use strict";cc._RF.push(t,"c5a70OitbpLr4NZV5XvFSqL","guest11_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"88642cCLENEZ54UvrUvEzkf","guest11_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GuestBase"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.onEnable=function(){this.animation&&this.spine.animation!=this.animation&&this.spine.setAnimation(0,this.animation,!0)},t.prototype.Init=function(e,t,n,o,a){var i=this;this.init_data(e,n,a),this.seat=t,this.ts_team=o,this.team_id=this.ts_team.TeamId,this.have_eat_pos=null,this.talk_time=p.default.Instance.Random(25,35),this.change_scene(_.ScenceArea.doorway),this.ChangeBehavior(this.ts_team.Behavior),this.node.active=!0,d.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){i.change_animation(i.animation)})},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case _.Team11Behavior.move_1:var n=this.ts_team.TsTable;if(this.path=h.default.Instance.GuestPath[n.TableId+"_"+this.seat].path,this.path2=null,f.default.Instance.GudieStep>=300)this.move_path(!0);else{var o=[];this.coord.x>330?o.push(this.pos_2):o.push(this.pos_1),o.push(this.pos_3),this.tween(o).call(function(){t.move_path(!0)}).start()}break;case _.Team11Behavior.wait_order_food:case _.Team11Behavior.order_food:break;case _.Team11Behavior.food:this.table_eat(),this.eat_time=10;break;case _.Team11Behavior.wait_pay:break;case _.Team11Behavior.leave:this.change_animation("walk_1"),this.move_path(!1)}},t.prototype.BeganSing=function(e){this.sing_time=2,f.default.Instance.GameController.FoundDialogueBox().Show(e,1,this.node)},t.prototype.Update=function(e){this.move(),this.sing_time>0?this.sing_time-=e:this.talk_time>0&&(this.talk_time-=e,this.talk_time<=0&&(null==this.talk_str&&null!=h.default.Instance.GuestTalkData[this.behavior]?(this.talk_time=5,this.talk_str=p.default.Instance.Choice(h.default.Instance.GuestTalkData[this.behavior]),this.Talk()):(this.talk_str=null,this.talk_time=p.default.Instance.Random(25,35)))),this.eat_time>0&&(this.ts_team.TeamId==-1*f.default.Instance.GuestStory||(this.eat_time-=e,this.eat_time<=0&&(this.table_speak(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,this,_.Team11Behavior.food))))},t.prototype.move_path=function(e){var t=this;cc.Tween.stopAllByTarget(this);var n=cc.tween(this);switch(e){case!0:this.change_scene(_.ScenceArea.first_canteen,this.pos_4);for(var o=1;o<this.path.length;o++){var a=this.path[o-1],i=this.path[o],r=p.default.Instance.Distance(cc.v2(a.x,a.y),cc.v2(i.x,i.y))/this.move_speed;n=n.to(r,{Coord:cc.v2(i.x,i.y)})}if(null!=this.path2)for(n=n.call(function(){t.change_scene(_.ScenceArea.first_room1,cc.v2(t.path2[0].x,t.path2[0].y))}),o=1;o<this.path2.length;o++)a=this.path2[o-1],i=this.path2[o],r=p.default.Instance.Distance(cc.v2(a.x,a.y),cc.v2(i.x,i.y))/this.move_speed,n=n.to(r,{Coord:cc.v2(i.x,i.y)});n.call(function(){var e,n=t.ts_team.TsTable,o=n.stool_array[t.seat-1].convertToWorldSpaceAR(cc.v2(0,0)),a=n.node.parent.convertToNodeSpaceAR(o);e=null==t.path2?cc.v2(t.path[t.path.length-1].x,t.path[t.path.length-1].y):cc.v2(t.path2[t.path2.length-1].x,t.path2[t.path2.length-1].y);var i=p.default.Instance.Distance(e,a)/t.move_speed;cc.tween(t).to(i,{Coord:a}).call(function(){t.sit_down(),t.table_speak(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team11Behavior.move_1)}).start()}).start();break;case!1:if(this.change_scene(_.ScenceArea.first_canteen,this.have_eat_pos),null!=this.path2){for(o=this.path2.length-1;o>=0;o--)null==(a=this.path2[o+1])&&(a=this.coord),i=this.path2[o],r=p.default.Instance.Distance(cc.v2(a.x,a.y),cc.v2(i.x,i.y))/this.move_speed,n=n.to(r,{Coord:cc.v2(i.x,i.y)});n=n.call(function(){t.change_scene(_.ScenceArea.first_canteen)})}for(o=this.path.length-2;o>=0;o--)a=this.path[o+1],i=this.path[o],r=p.default.Instance.Distance(cc.v2(a.x,a.y),cc.v2(i.x,i.y))/this.move_speed,n=n.to(r,{Coord:cc.v2(i.x,i.y)});n.call(function(){t.change_scene(_.ScenceArea.doorway,t.pos_3);var e=[];t.ts_team.destination.x>0?e.push(t.pos_3):e.push(t.pos_1),e.push(t.ts_team.destination),t.tween(e).call(function(){t.ChangeBehavior(null),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team11Behavior.leave)}).start()}).start()}},t.prototype.sit_down=function(){this.have_eat_pos=this.coord.clone();var e=this.ts_team.TsTable,t=e.stool_array[this.Seat-1];this.node.setParent(e.node);var n=t.getPosition();switch(n.y-=10,this.change_scene(null,n),this.node.zIndex=t.zIndex,this.TsTeam.TsTable.TableVolume){case 4:switch(this.Seat){case 2:this.spine.node.scaleX=1;break;case 4:this.spine.node.scaleX=-1}break;case 8:if(1==e.IsSide)switch(this.Seat){case 4:this.spine.node.scaleX=1;break;case 8:this.spine.node.scaleX=-1}else switch(this.Seat){case 4:case 5:this.spine.node.scaleX=1;break;case 7:case 8:this.spine.node.scaleX=-1}}},t.prototype.table_eat=function(){var e=this.ts_team.TsTable;switch(e.TableVolume){case 4:switch(this.seat){case 1:this.change_animation("eat_2");break;case 2:case 4:this.change_animation("eat_1");break;case 3:this.change_animation("standby_2")}break;case 8:if(1==e.IsSide)switch(this.seat){case 1:case 2:case 3:this.change_animation("eat_2");break;case 4:case 8:this.change_animation("eat_1");break;case 5:case 6:case 7:this.change_animation("standby_2")}else switch(this.seat){case 1:case 2:case 3:this.change_animation("eat_2");break;case 4:case 8:this.change_animation("eat_1");break;case 5:case 7:this.change_animation("standby_3");break;case 6:this.change_animation("standby_2")}}},t.prototype.table_speak=function(){var e=this.ts_team.TsTable;switch(e.TableVolume){case 4:switch(this.seat){case 1:this.change_animation("movement_2");break;case 2:case 4:this.change_animation("movement_1");break;case 3:this.change_animation("standby_2")}break;case 8:if(1==e.IsSide)switch(this.seat){case 1:case 2:case 3:this.change_animation("movement_2");break;case 4:case 8:this.change_animation("movement_1");break;case 5:case 6:case 7:this.change_animation("standby_2")}else switch(this.seat){case 1:case 2:case 3:this.change_animation("movement_2");break;case 4:case 8:this.change_animation("movement_1");break;case 5:case 7:this.change_animation("standby_3");break;case 6:this.change_animation("standby_2")}}},t.prototype.Talk=function(){f.default.Instance.TalkNum[this.scence]>1||f.default.Instance.GuestStory<0||null==f.default.Instance.GudieStep&&f.default.Instance.GameController.FoundDialogueBox().Show2(this.talk_str,5,this.node,this.scence)},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},enumerable:!1,configurable:!0}),l([b],t)}(u.default));i.default=v,cc._RF.pop(),cc._RF.pop()},{}],guest12_item:[function(e,t,n){"use strict";cc._RF.push(t,"6a6f2zIQvRD56Ae2Cp/Yyzz","guest12_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"c8102Ax8DZGBJFLstuj8+LT","guest12_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GuestBase"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.onEnable=function(){this.animation&&this.spine.animation!=this.animation&&this.spine.setAnimation(0,this.animation,!0)},t.prototype.Init=function(e,t,n,o,a){var i=this;this.init_data(e,n,a),this.seat=t,this.ts_team=o,this.team_id=this.ts_team.TeamId,this.have_eat_pos=null,this.talk_time=p.default.Instance.Random(25,35),this.change_scene(_.ScenceArea.doorway),this.ChangeBehavior(this.ts_team.Behavior),this.node.active=!0,d.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){i.change_animation(i.animation)})},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case _.Team11Behavior.move_1:var n=[];this.coord.x>330?n.push(this.pos_2):n.push(this.pos_1),n.push(this.pos_3),this.tween(n).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_4);var e=t.ts_team.TsTable.TableId;t.path=h.default.Instance.Guest12Path["go_"+e].path,t.tween(t.path).call(function(){t.change_scene(_.ScenceArea.first_room1),t.path2=h.default.Instance.Guest12Path[e+"_"+t.seat].path;var n=t.ts_team.TsTable.stool_array[t.seat-1].convertToWorldSpaceAR(cc.v2(0,0)),o=t.ts_team.TsTable.node.parent.convertToNodeSpaceAR(n);t.tween([].concat(t.path2).concat(o)).call(function(){t.sit_down(),t.table_speak(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team11Behavior.move_1)}).start()}).start()}).start();break;case _.Team11Behavior.wait_order_food:case _.Team11Behavior.order_food:break;case _.Team11Behavior.food:this.table_eat(),this.eat_time=10;break;case _.Team11Behavior.wait_pay:break;case _.Team11Behavior.leave:this.change_animation("walk_1"),this.change_scene(_.ScenceArea.first_room1,this.have_eat_pos),this.have_eat_pos=null;for(var o=[],a=this.path2.length-1;a>=0;a--)o.push(this.path2[a]);var i=[];for(a=this.path.length-1;a>=0;a--)i.push(this.path[a]);i.push(this.pos_4),this.tween(o).call(function(){t.change_scene(_.ScenceArea.first_canteen),t.tween(i).call(function(){t.change_scene(_.ScenceArea.doorway,t.pos_3);var e=[];t.ts_team.destination.x>0?e.push(t.pos_2):e.push(t.pos_1),e.push(t.ts_team.destination),t.tween(e).call(function(){cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team11Behavior.leave)}).start()}).start()}).start()}},t.prototype.BeganSing=function(e){this.sing_time=2,f.default.Instance.GameController.FoundDialogueBox().Show(e,1,this.node)},t.prototype.Update=function(e){this.move(),this.sing_time>0?this.sing_time-=e:this.talk_time>0&&(this.talk_time-=e,this.talk_time<=0&&(null==this.talk_str&&null!=h.default.Instance.GuestTalkData[this.behavior]?(this.talk_time=5,this.talk_str=p.default.Instance.Choice(h.default.Instance.GuestTalkData[this.behavior]),this.Talk()):(this.talk_str=null,this.talk_time=p.default.Instance.Random(25,35)))),this.eat_time>0&&(this.ts_team.TeamId==-1*f.default.Instance.GuestStory||(this.eat_time-=e,this.eat_time<=0&&(this.table_speak(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,this,_.Team11Behavior.food))))},t.prototype.sit_down=function(){this.have_eat_pos=this.coord.clone();var e=this.ts_team.TsTable,t=e.stool_array[this.Seat-1];this.node.setParent(e.node);var n=t.getPosition();if(n.y-=5,this.change_scene(null,n),this.node.zIndex=t.zIndex,1==e.IsSide)switch(this.Seat){case 4:this.spine.node.scaleX=1;break;case 8:this.spine.node.scaleX=-1}else switch(this.Seat){case 4:case 5:this.spine.node.scaleX=1;break;case 7:case 8:this.spine.node.scaleX=-1}},t.prototype.table_eat=function(){if(1==this.ts_team.TsTable.IsSide)switch(this.seat){case 1:case 2:case 3:this.change_animation("eat_2");break;case 4:case 8:this.change_animation("eat_1");break;case 5:case 6:case 7:this.change_animation("standby_2")}else switch(this.seat){case 1:case 2:case 3:this.change_animation("eat_2");break;case 4:case 8:this.change_animation("eat_1");break;case 5:case 7:this.change_animation("standby_3");break;case 6:this.change_animation("standby_2")}},t.prototype.table_speak=function(){if(1==this.ts_team.TsTable.IsSide)switch(this.seat){case 1:case 2:case 3:this.change_animation("movement_2");break;case 4:case 8:this.change_animation("movement_1");break;case 5:case 6:case 7:this.change_animation("standby_2")}else switch(this.seat){case 1:case 2:case 3:this.change_animation("movement_2");break;case 4:case 8:this.change_animation("movement_1");break;case 5:case 7:this.change_animation("standby_3");break;case 6:this.change_animation("standby_2")}},t.prototype.Talk=function(){f.default.Instance.TalkNum[this.scence]>1||f.default.Instance.GuestStory<0||null==f.default.Instance.GudieStep&&f.default.Instance.GameController.FoundDialogueBox().Show2(this.talk_str,5,this.node,this.scence)},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TalkStr",{get:function(){return this.talk_str},enumerable:!1,configurable:!0}),l([b],t)}(u.default));i.default=v,cc._RF.pop(),cc._RF.pop()},{}],guest21_item:[function(e,t,n){"use strict";cc._RF.push(t,"76bc4ynuDdCCY2i6MXxuYRl","guest21_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"8fdd3h2LXVHK4I5rM0bASVd","guest21_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GuestBase"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.onEnable=function(){this.animation!=this.spine.animation&&this.spine.setAnimation(0,this.animation,!0)},t.prototype.Init=function(e,t,n,o,a){var i=this;this.init_data(e,n,a),this.seat=t,this.ts_team=o,this.team_id=this.ts_team.TeamId,this.have_eat_pos=null,this.talk_time=p.default.Instance.Random(25,35),this.change_scene(_.ScenceArea.doorway),this.ChangeBehavior(this.ts_team.Behavior),this.node.active=!0,d.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){i.change_animation(i.animation)})},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case _.Team11Behavior.move_1:var n=[];this.coord.x>330?n.push(this.pos_2):n.push(this.pos_1),n.push(this.pos_3),this.tween(n).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_4),t.tween(t.pos_7_array).call(function(){t.change_scene(_.ScenceArea.second_canteen,t.pos_6),t.tween(h.default.Instance.Guest21Path[t.TsTeam.TsTable.TableId+"_"+t.seat].path).call(function(){t.sit_down(),t.table_speak(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team11Behavior.move_1)}).start()}).start()}).start();break;case _.Team11Behavior.wait_order_food:case _.Team11Behavior.order_food:break;case _.Team11Behavior.wait_food:cc.tween(this).delay(2).call(function(){cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team11Behavior.wait_food)}).start();break;case _.Team11Behavior.food:this.table_eat(),this.eat_time=10;break;case _.Team11Behavior.wait_pay:break;case _.Team11Behavior.leave:this.change_animation("walk_1"),this.change_scene(_.ScenceArea.second_canteen,this.have_eat_pos);for(var o=[],a=h.default.Instance.Guest21Path[this.TsTeam.TsTable.TableId+"_"+this.seat].path.length-2;a>=0;a--)o.push(h.default.Instance.Guest21Path[this.TsTeam.TsTable.TableId+"_"+this.seat].path[a]);o.push(this.pos_6);var i=[];for(a=this.pos_7_array.length-1;a>=0;a--)i.push(this.pos_7_array[a]);i.push(this.pos_4),this.tween(o).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_5),t.tween(i).call(function(){t.change_scene(_.ScenceArea.doorway,t.pos_3);var e=[];t.ts_team.destination.x>0?e.push(t.pos_2):e.push(t.pos_1),e.push(t.ts_team.destination),t.tween(e).call(function(){cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team11Behavior.leave)}).start()}).start()}).start()}},t.prototype.BeganSing=function(e){this.sing_str=e,this.sing_time=2,f.default.Instance.GameController.FoundDialogueBox().Show(e,1,this.node)},t.prototype.Update=function(e){this.move(),this.sing_time>0?this.sing_time-=e:this.talk_time>0&&(this.talk_time-=e,this.talk_time<=0&&(null==this.talk_str&&null!=h.default.Instance.GuestTalkData[this.behavior]?(this.talk_time=5,this.talk_str=p.default.Instance.Choice(h.default.Instance.GuestTalkData[this.behavior]),this.Talk()):(this.talk_str=null,this.talk_time=p.default.Instance.Random(25,35)))),this.eat_time>0&&(this.ts_team.TeamId==-1*f.default.Instance.GuestStory||(this.eat_time-=e,this.eat_time<=0&&(this.table_speak(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,this,_.Team11Behavior.food))))},t.prototype.sit_down=function(){this.have_eat_pos=this.coord.clone();var e=this.ts_team.TsTable;this.node.setParent(e.node);var t=e.stool_array[this.seat-1],n=t.getPosition();switch(n.y-=15,this.change_scene(null,n),this.node.zIndex=t.zIndex,this.Seat){case 1:this.spine.node.scaleX=1;break;case 2:case 3:case 4:case 5:case 6:this.spine.node.scaleX=-1}},t.prototype.table_eat=function(){switch(this.seat){case 1:case 4:this.change_animation("eat_1");break;case 2:case 3:this.change_animation("eat_2");break;case 5:case 6:this.change_animation("standby_2")}},t.prototype.table_speak=function(){switch(this.seat){case 1:case 4:this.change_animation("movement_1");break;case 2:case 3:this.change_animation("movement_2");break;case 5:case 6:this.change_animation("standby_2")}},t.prototype.Talk=function(){0!=this.node.activeInHierarchy&&(f.default.Instance.TalkNum[this.scence]>1||f.default.Instance.GuestStory<0||f.default.Instance.GameController.FoundDialogueBox().Show2(this.talk_str,5,this.node,this.scence))},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},enumerable:!1,configurable:!0}),l([b],t)}(u.default));i.default=v,cc._RF.pop(),cc._RF.pop()},{}],guest22_item:[function(e,t,n){"use strict";cc._RF.push(t,"7d77c5CBd5GU4bOsUFB2Spb","guest22_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"64a4f3JeUdJRpRE7AA3DPLW","guest22_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GuestBase"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos_101=cc.v2(-200,-300),t.pos_102=cc.v2(-100,-300),t.pos_103=cc.v2(-200,-400),t.pos_104=cc.v2(-100,-400),t}return s(t,e),t.prototype.Init=function(e,t,n,o,a){var i=this;this.init_data(e,n,a),this.seat=t,this.ts_team=o,this.talk_time=p.default.Instance.Random(25,35),this.change_scene(_.ScenceArea.doorway),this.ChangeBehavior(this.ts_team.Behavior),this.node.active=!0,d.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){i.change_animation(i.animation)})},t.prototype.onEnable=function(){this.animation!=this.spine.animation&&this.spine.setAnimation(0,this.animation,!0),null!=this.talk_str&&this.Talk()},t.prototype.ChangeBehavior=function(e){var t=this;cc.Tween.stopAllByTarget(this);var n=this.behavior;switch(this.behavior=e,this.behavior){case _.Team22Behavior.move_1:var o=[];this.coord.x>330?o.push(this.pos_2):o.push(this.pos_1),o.push(this.pos_3),this.tween(o).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_4),t.tween(t.pos_7_array).call(function(){t.change_scene(_.ScenceArea.second_canteen,t.pos_6),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team22Behavior.move_1)}).start()}).start();break;case _.Team22Behavior.move_3:var a=[];a.push(cc.v2(this.coord.x,-470)),a.push(this["pos_"+(101+this.ts_team.counter_id+this.index)]),this.change_animation("walk_1"),this.tween(a).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team22Behavior.move_3)}).start();break;case _.Team22Behavior.wait_check_in:n==_.Team22Behavior.queue_counter?(this.change_animation("walk_1"),this.tween([this["pos_"+(101+this.index)]]).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team22Behavior.wait_check_in)}).start()):cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,this,_.Team22Behavior.wait_check_in);break;case _.Team22Behavior.check_in:this.count_down=5;break;case _.Team22Behavior.move_4:this.change_animation("walk_1"),this.tween(h.default.Instance.Guest22Path[""+this.ts_team.area].path).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team22Behavior.move_4)}).start();break;case _.Team22Behavior.stroll:this.change_animation("walk_1");var i=h.default.Instance.Guest22Path[this.ts_team.area+"_stroll"].path;this.tween(i).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team22Behavior.stroll)}).start();break;case _.Team22Behavior.move_5:this.change_animation("walk_1");var r=h.default.Instance.Guest22Path[this.ts_team.area+"_stroll_go_tea_"+this.seat].path;this.tween(r).call(function(){t.sit_down_tea(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team22Behavior.move_5)}).start();break;case _.Team22Behavior.tea:this.count_down=15;break;case _.Team22Behavior.move_6:var c;switch(n){case _.Team22Behavior.stroll:c=h.default.Instance.Guest22Path[this.ts_team.area+"_stroll_go_pool_"+this.seat].path;break;case _.Team22Behavior.tea:this.get_up_object(),c=h.default.Instance.Guest22Path[this.ts_team.area+"_tea_go_pool_"+this.seat].path}this.change_animation("walk_1"),this.tween(c).call(function(){t.have_a_bath(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team22Behavior.move_6)}).start();break;case _.Team22Behavior.have_bath:this.count_down=25;break;case _.Team22Behavior.move_7:var s;switch(n){case _.Team22Behavior.stroll:case _.Team22Behavior.move_4:s=h.default.Instance.Guest22Path[this.ts_team.area+"_stroll_go_bed_"+this.seat].path;break;case _.Team22Behavior.tea:this.get_up_object(),s=h.default.Instance.Guest22Path[this.ts_team.area+"_tea_go_bed_"+this.seat].path;break;case _.Team22Behavior.have_bath:this.get_up_object(),s=h.default.Instance.Guest22Path[this.ts_team.area+"_pool_go_bed_"+this.seat].path}this.change_animation("walk_1"),this.tween(s).call(function(){t.sit_down_bed(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team22Behavior.move_7)}).start();break;case _.Team22Behavior.sleep:this.count_down=50;break;case _.Team22Behavior.leave:this.get_up_object(),this.change_animation("walk_1");var l=h.default.Instance.Guest22Path[this.ts_team.area+"_leave"].path;this.tween([].concat(l).concat(this.pos_6)).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_5);for(var e=[],n=t.pos_7_array.length-1;n>=0;n--)e.push(t.pos_7_array[n]);e.push(t.pos_4),t.tween(e).call(function(){t.change_scene(_.ScenceArea.doorway,t.pos_3);var e=[];t.ts_team.destination.x>0?e.push(t.pos_2):e.push(t.pos_1),e.push(t.ts_team.destination),t.tween(e).call(function(){cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team22Behavior.leave)}).start()}).start()}).start()}},t.prototype.Update=function(e){this.sing_time>0?(this.sing_time-=e,this.sing_time<=0&&(this.sing_str=null)):this.talk_time>0&&(this.talk_time-=e,this.talk_time<=0&&(null==this.talk_str&&null!=h.default.Instance.GuestTalkData[this.behavior]?(this.talk_time=5,this.talk_str=p.default.Instance.Choice(h.default.Instance.GuestTalkData[this.behavior]),this.Talk()):(this.talk_str=null,this.talk_time=p.default.Instance.Random(25,35)))),this.count_down>0&&(this.count_down-=e,this.count_down<=0&&cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,this,this.behavior))},t.prototype.update=function(){this.move()},t.prototype.tween=function(e){for(var t=this,n=cc.tween(this),o=0;o<e.length;o++){var a;if(a=0==o?p.default.Instance.Distance(this.coord,e[o]):p.default.Instance.Distance(e[o-1],e[o]),this.behavior==_.Team22Behavior.stroll){var i=cc.v2(e[o].x,e[o].y);i.x+=50*this.index*Math.random()>.5?1:-1,i.y+=50*this.index*Math.random()>.5?1:-1,n=Math.random()>.5?n.to(a/this.move_speed,{Coord:i}).call(function(){t.change_animation("standby_1")}).delay(2.5).call(function(){t.change_animation("walk_1")}):n.to(a/this.move_speed,{Coord:i})}else n=n.to(a/this.move_speed,{Coord:e[o]})}return n},t.prototype.sit_down_tea=function(){this.get_up_pos=this.coord.clone();var e=this.ts_team.ts_tea;this.node.setParent(e.node),this.change_animation("movement_1");var t=e.stool_array[this.seat-1];switch(this.coord=t.getPosition(),this.move(),this.seat){case 1:this.spine.node.scaleX=1;break;case 2:this.spine.node.scaleX=-1}this.node.zIndex=t.zIndex},t.prototype.sit_down_bed=function(){this.get_up_pos=this.coord.clone();var e=this.ts_team.ts_bed;switch(this.node.setParent(e.node),this.change_animation("sleep"),e.bed_id){case _.FacilityType.second_floor_bed1:switch(this.coord.x=-25,this.seat){case 1:this.coord.y=130;break;case 2:this.coord.y=35}this.move(),this.spine.node.scaleX=-1;break;case _.FacilityType.second_floor_bed2:switch(this.coord.x=25,this.seat){case 1:this.coord.y=105;break;case 2:this.coord.y=-15}this.move(),this.spine.node.scaleX=1}this.node.zIndex=5},t.prototype.have_a_bath=function(){this.get_up_pos=this.coord.clone();var e=this.ts_team.ts_pool;switch(e.eff.active=!0,this.node.setParent(e.node),this.change_animation("soak"),this.coord.y=35,this.seat){case 1:this.coord.x=-40,this.spine.node.scaleX=1;break;case 2:this.coord.x=40,this.spine.node.scaleX=-1}this.move(),this.node.zIndex=5},t.prototype.get_up_object=function(){null!=this.get_up_pos&&(this.scence=null,this.change_scene(_.ScenceArea.second_canteen,this.get_up_pos),this.get_up_pos=null)},t.prototype.Talk=function(){0!=this.node.activeInHierarchy&&(f.default.Instance.TalkNum[this.scence]>1||f.default.Instance.GuestStory<0||f.default.Instance.GameController.FoundDialogueBox().Show2(this.talk_str,5,this.node,this.scence))},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Seat",{get:function(){return this.seat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TalkStr",{get:function(){return this.talk_str},enumerable:!1,configurable:!0}),l([b],t)}(u.default));i.default=v,cc._RF.pop(),cc._RF.pop()},{}],guest31_item:[function(e,t,n){"use strict";cc._RF.push(t,"b8a67/8IG9MFL1QirwflCl2","guest31_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"14dbdD/FlZBkrErG4sSZWQ3","guest31_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GuestBase"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(e,t,n,o,a){var i=this;this.init_data(e,n,a),this.seat=t,this.ts_team=o,this.talk_time=p.default.Instance.Random(25,35),this.change_scene(_.ScenceArea.doorway),this.ChangeBehavior(this.ts_team.Behavior),this.node.active=!0,d.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){i.change_animation(i.animation)})},t.prototype.onEnable=function(){this.animation!=this.spine.animation&&this.spine.setAnimation(0,this.animation,!0),null!=this.talk_str&&this.Talk()},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case _.Team31Behavior.move_1:var n=[];this.coord.x>330?n.push(this.pos_2):n.push(this.pos_1),n.push(this.pos_3),this.tween(n).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_4),t.tween(t.pos_7_array).call(function(){t.change_scene(_.ScenceArea.third_canteen,t.pos_7);var e=h.default.Instance.Guest31Path["seat_"+t.seat].path.concat(h.default.Instance.third_floor_stool[t.seat]);t.tween(e).call(function(){t.sit_down_food(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team31Behavior.move_1)}).start()}).start()}).start();break;case _.Team31Behavior.theatregoing:this.count_down=13+4*Math.random();break;case _.Team31Behavior.go_counter:this.get_up_object(),this.change_animation("walk_1"),f.default.Instance.TsGame.film_stool_record[this.seat]=!1;var o=[].concat(h.default.Instance.Guest31Path["go_counter_"+this.seat].path);o.splice(o.length-1,1),this.tween(o).call(function(){var e=f.default.Instance.TsGame.group_third_floor.AddQueueUp();t.queue_pay_id=e.id,t.tween([e.pos]).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team31Behavior.go_counter)}).start()}).start();break;case _.Team31Behavior.leave:this.change_animation("walk_1"),f.default.Instance.TsGame.group_third_floor.LeaveQueueUp(this.queue_pay_id);for(var a=[],i=this.pos_7_array.length-1;i>=0;i--)a.push(this.pos_7_array[i]);a.push(this.pos_4);var r=[];this.coord.y<550&&r.push(cc.v2(this.coord.x,570)),r.push(this.pos_7),this.tween(r).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_5),t.tween(a).call(function(){t.change_scene(_.ScenceArea.doorway,t.pos_3);var e=[];t.ts_team.destination.x>0?e.push(t.pos_2):e.push(t.pos_1),e.push(t.ts_team.destination),t.tween(e).call(function(){cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team31Behavior.leave)}).start()}).start()}).start()}},t.prototype.Update=function(e){this.move(),this.talk_time>0&&(this.talk_time-=e,this.talk_time<=0&&(null==this.talk_str&&null!=h.default.Instance.GuestTalkData[this.behavior]?(this.talk_time=5,this.talk_str=p.default.Instance.Choice(h.default.Instance.GuestTalkData[this.behavior]),this.Talk()):(this.talk_str=null,this.talk_time=p.default.Instance.Random(25,35)))),this.count_down>0&&f.default.Instance.TsGame.group_third_floor.drama_time>0&&(this.count_down-=e,this.count_down<=0&&cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,this,_.Team31Behavior.theatregoing))},t.prototype.sit_down_food=function(){this.get_up_pos=this.coord.clone(),this.coord.y-=18,this.change_animation("standby_2")},t.prototype.get_up_object=function(){null!=this.get_up_pos&&(this.coord=this.get_up_pos,this.get_up_pos=null,this.move())},t.prototype.Talk=function(){0!=this.node.activeInHierarchy&&(f.default.Instance.TalkNum[this.scence]>1||f.default.Instance.GameController.FoundDialogueBox().Show2(this.talk_str,5,this.node,this.scence))},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},enumerable:!1,configurable:!0}),l([b],t)}(u.default));i.default=v,cc._RF.pop(),cc._RF.pop()},{}],guest32_item:[function(e,t,n){"use strict";cc._RF.push(t,"cf4bawJg0xP3bz4q2AtutjD","guest32_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"59104URIuRDOaMFRoBA+d1f","guest32_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GuestBase"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(e,t,n,o){var a=this;this.init_data(e,t,o),this.ts_team=n,this.talk_time=p.default.Instance.Random(25,35),this.change_scene(_.ScenceArea.doorway),this.ChangeBehavior(this.ts_team.Behavior),this.node.active=!0,d.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){a.change_animation(a.animation)})},t.prototype.onEnable=function(){this.animation!=this.spine.animation&&this.spine.setAnimation(0,this.animation,!0),null!=this.talk_str&&this.Talk()},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case _.Team32Behavior.move_1:var n=[];this.coord.x>330?n.push(this.pos_2):n.push(this.pos_1),n.push(this.pos_3),this.tween(n).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_4),t.tween(t.pos_7_array).call(function(){t.change_scene(_.ScenceArea.third_canteen,t.pos_7);var e=h.default.Instance.Guest32Path["move_1_"+t.index].path;t.tween(e).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team32Behavior.move_1)}).start()}).start()}).start();break;case _.Team32Behavior.move_2:case _.Team32Behavior.move_3:case _.Team32Behavior.move_4:this.change_animation("walk_1");var o=h.default.Instance.Guest32Path[this.behavior+"_"+this.index].path;this.tween(o).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,t.behavior)}).start();break;case _.Team32Behavior.wait_1:case _.Team32Behavior.wait_2:case _.Team32Behavior.wait_3:this.count_down=3+3*Math.random();break;case _.Team32Behavior.go_counter:this.change_animation("walk_1");var a=[].concat(h.default.Instance.Guest32Path["go_counter_"+this.index].path);a.splice(a.length-1,1),this.tween(a).call(function(){var e=f.default.Instance.TsGame.group_third_floor.AddQueueUp();t.queue_pay_id=e.id,t.tween([e.pos]).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team32Behavior.go_counter)}).start()}).start();break;case _.Team32Behavior.leave:this.change_animation("walk_1"),f.default.Instance.TsGame.group_third_floor.LeaveQueueUp(this.queue_pay_id);for(var i=[],r=this.pos_7_array.length-1;r>=0;r--)i.push(this.pos_7_array[r]);i.push(this.pos_4);var c=[];this.coord.y<550&&c.push(cc.v2(this.coord.x,570)),c.push(this.pos_7),this.tween(c).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_5),t.tween(i).call(function(){t.change_scene(_.ScenceArea.doorway,t.pos_3);var e=[];t.ts_team.destination.x>0?e.push(t.pos_2):e.push(t.pos_1),e.push(t.ts_team.destination),t.tween(e).call(function(){cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team32Behavior.leave)}).start()}).start()}).start()}},t.prototype.Update=function(e){this.move(),this.talk_time>0&&(this.talk_time-=e,this.talk_time<=0&&(null==this.talk_str&&null!=h.default.Instance.GuestTalkData[this.behavior]?(this.talk_time=5,this.talk_str=p.default.Instance.Choice(h.default.Instance.GuestTalkData[this.behavior]),this.Talk()):(this.talk_str=null,this.talk_time=p.default.Instance.Random(25,35)))),this.count_down>0&&(this.count_down-=e,this.count_down<=0&&cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,this,this.behavior))},t.prototype.Talk=function(){0!=this.node.activeInHierarchy&&(f.default.Instance.TalkNum[this.scence]>1||f.default.Instance.GameController.FoundDialogueBox().Show2(this.talk_str,5,this.node,this.scence))},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Seat",{get:function(){return this.index},enumerable:!1,configurable:!0}),l([b],t)}(u.default));i.default=v,cc._RF.pop(),cc._RF.pop()},{}],guest33_item:[function(e,t,n){"use strict";cc._RF.push(t,"d3317O75W1CgbCfjnz4Jwdi","guest33_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"636afp9O5pG5ph03tey07a0","guest33_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GuestBase"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.onEnable=function(){this.animation!=this.spine.animation&&this.spine.setAnimation(0,this.animation,!0),null!=this.talk_str&&this.Talk()},t.prototype.Init=function(e,t,n,o){var a=this;this.init_data(e,t,o),this.ts_team=n,this.talk_time=p.default.Instance.Random(25,35),this.drifting=!1,this.change_scene(_.ScenceArea.doorway),this.ChangeBehavior(this.ts_team.Behavior),this.node.active=!0,d.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){a.change_animation(a.animation)})},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case _.Team33Behavior.move_1:var n=[];this.coord.x>330?n.push(this.pos_2):n.push(this.pos_1),n.push(this.pos_3),this.tween(n).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_4),t.tween(t.pos_7_array).call(function(){t.change_scene(_.ScenceArea.third_canteen,t.pos_7);var e=h.default.Instance.Guest33Path["move_1_"+t.index].path;t.tween(e).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team33Behavior.move_1)}).start()}).start()}).start();break;case _.Team33Behavior.queue_up:break;case _.Team33Behavior.move_2:this.change_animation("walk_1");var o=[];this.coord.y<520&&o.push(cc.v2(540,520)),o.push(cc.v2(540,850)),o.push(cc.v2(710,930)),this.tween(o).call(function(){t.sit_down(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team33Behavior.move_2)}).start();break;case _.Team33Behavior.drifting:break;case _.Team33Behavior.move_3:this.get_up(),this.change_animation("walk_1");var a=h.default.Instance.Guest33Path["move_3_"+this.index].path;this.tween(a).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team33Behavior.move_3)}).start();break;case _.Team33Behavior.wait_1:this.count_down=5;break;case _.Team33Behavior.go_counter:this.get_up(),this.change_animation("walk_1");var i=[].concat(h.default.Instance.Guest33Path["go_counter_"+this.index].path);i.splice(i.length-1,1),this.tween(i).call(function(){var e=f.default.Instance.TsGame.group_third_floor.AddQueueUp();t.queue_pay_id=e.id,t.tween([e.pos]).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team33Behavior.go_counter)}).start()}).start();break;case _.Team33Behavior.leave:this.change_animation("walk_1"),f.default.Instance.TsGame.group_third_floor.LeaveQueueUp(this.queue_pay_id);for(var r=[],c=this.pos_7_array.length-1;c>=0;c--)r.push(this.pos_7_array[c]);r.push(this.pos_4);var s=[];this.coord.y<550&&s.push(cc.v2(this.coord.x,570)),s.push(this.pos_7),this.tween(s).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_5),t.tween(r).call(function(){t.change_scene(_.ScenceArea.doorway,t.pos_3);var e=[];t.ts_team.destination.x>0?e.push(t.pos_2):e.push(t.pos_1),e.push(t.ts_team.destination),t.tween(e).call(function(){cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team33Behavior.leave)}).start()}).start()}).start()}},t.prototype.QueueUp=function(e){var t=this;cc.Tween.stopAllByTarget(this);var n=h.default.Instance.third_drifting_queue[e];this.change_animation("walk_1"),this.tween([n]).call(function(){t.change_animation("standby_1")}).start()},t.prototype.Update=function(e){this.move(),this.talk_time>0&&(this.talk_time-=e,this.talk_time<=0&&(null==this.talk_str&&null!=h.default.Instance.GuestTalkData[this.behavior]?(this.talk_time=5,this.talk_str=p.default.Instance.Choice(h.default.Instance.GuestTalkData[this.behavior]),this.Talk()):(this.talk_str=null,this.talk_time=p.default.Instance.Random(25,35)))),this.count_down>0&&(this.count_down-=e,this.count_down<=0&&cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,this,this.behavior))},t.prototype.sit_down=function(){this.drifting=!0,this.change_animation("movement_1");var e=f.default.Instance.TsGame.group_third_floor.ts_bamboo;this.node.setParent(e.node),0==this.index?this.coord=cc.v2(50,-30):this.coord=cc.v2(-40,-30),this.move(),this.spine.node.scaleX=-1},t.prototype.get_up=function(){0!=this.drifting&&(this.drifting=!1,this.node.setParent(f.default.Instance.TsGame.group_third_floor.container2),0==this.index?this.coord=cc.v2(680,-600):this.coord=cc.v2(780,-600),this.move())},t.prototype.Talk=function(){0!=this.node.activeInHierarchy&&(f.default.Instance.TalkNum[this.scence]>1||f.default.Instance.GameController.FoundDialogueBox().Show2(this.talk_str,5,this.node,this.scence))},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Seat",{get:function(){return this.index},enumerable:!1,configurable:!0}),l([b],t)}(u.default));i.default=v,cc._RF.pop(),cc._RF.pop()},{}],guest34_item:[function(e,t,n){"use strict";cc._RF.push(t,"7d335x9bfZHS4KlJjRMwASq","guest34_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"413b5ozY+5FPLOQJR8DkYrN","guest34_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GuestBase"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.onEnable=function(){this.animation!=this.spine.animation&&this.spine.setAnimation(0,this.animation,!0),null!=this.talk_str&&this.Talk()},t.prototype.Init=function(e,t,n,o,a){var i=this;this.init_data(e,n,a),this.seat=t,this.ts_team=o,this.talk_time=p.default.Instance.Random(25,35),this.change_scene(_.ScenceArea.doorway),this.ChangeBehavior(this.ts_team.Behavior),this.node.active=!0,d.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){i.change_animation(i.animation)})},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case _.Team34Behavior.move_1:var n=[];this.coord.x>330?n.push(this.pos_2):n.push(this.pos_1),n.push(this.pos_3),this.tween(n).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_4),t.tween(t.pos_7_array).call(function(){t.change_scene(_.ScenceArea.third_canteen,t.pos_7);var e=h.default.Instance.Guest34Path.move_1.path;t.tween(e).call(function(){t.sit_down(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team34Behavior.move_1)}).start()}).start()}).start();break;case _.Team34Behavior.wait_1:this.count_down=13+4*Math.random();break;case _.Team34Behavior.move_2:this.get_up();var o=h.default.Instance.Guest34Path["move_2_"+this.seat].path;this.tween(o).call(function(){t.sit_down(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team34Behavior.move_2)}).start();break;case _.Team34Behavior.wait_2:this.count_down=8+4*Math.random();break;case _.Team34Behavior.move_3:case _.Team34Behavior.move_4:this.get_up();var a=h.default.Instance.Guest34Path[this.behavior+"_"+this.seat].path;this.tween(a).call(function(){t.sit_down(),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,t.behavior)}).start();break;case _.Team34Behavior.wait_3:case _.Team34Behavior.wait_4:this.count_down=8+4*Math.random();break;case _.Team34Behavior.go_counter1:case _.Team34Behavior.go_counter2:case _.Team34Behavior.go_counter3:case _.Team34Behavior.go_counter4:this.get_up();var i=[].concat(h.default.Instance.Guest34Path[this.behavior+"_"+this.seat].path);i.splice(i.length-1,1),this.tween(i).call(function(){var e=f.default.Instance.TsGame.group_third_floor.AddQueueUp();t.queue_pay_id=e.id,t.tween([e.pos]).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,t.behavior)}).start()}).start();break;case _.Team34Behavior.leave:this.change_animation("walk_1"),f.default.Instance.TsGame.group_third_floor.LeaveQueueUp(this.queue_pay_id);for(var r=[],c=this.pos_7_array.length-1;c>=0;c--)r.push(this.pos_7_array[c]);r.push(this.pos_4);var s=[];this.coord.y<550&&s.push(cc.v2(this.coord.x,570)),s.push(this.pos_7),this.tween(s).call(function(){t.change_scene(_.ScenceArea.first_canteen,t.pos_5),t.tween(r).call(function(){t.change_scene(_.ScenceArea.doorway,t.pos_3);var e=[];t.ts_team.destination.x>0?e.push(t.pos_2):e.push(t.pos_1),e.push(t.ts_team.destination),t.tween(e).call(function(){cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,t,_.Team34Behavior.leave)}).start()}).start()}).start()}},t.prototype.Update=function(e){switch(this.move(),this.talk_time>0&&(this.talk_time-=e,this.talk_time<=0&&(null==this.talk_str&&null!=h.default.Instance.GuestTalkData[this.behavior]?(this.talk_time=5,this.talk_str=p.default.Instance.Choice(h.default.Instance.GuestTalkData[this.behavior]),this.Talk()):(this.talk_str=null,this.talk_time=p.default.Instance.Random(25,35)))),this.count_down>0&&(this.count_down-=e,this.count_down<=0&&cc.systemEvent.emit(_.DistributedEvent.guest_behavior_over,this,this.behavior)),this.behavior){case _.Team34Behavior.move_2:"walk_1"==this.animation&&this.coord.x<-750&&this.change_animation("walk_3");break;case _.Team34Behavior.go_counter2:"walk_3"==this.animation&&this.coord.x>-750&&this.change_animation("walk_1")}},t.prototype.sit_down=function(){switch(this.get_up_pos=this.coord.clone(),this.behavior){case _.Team34Behavior.move_1:this.change_animation("soak"),this.coord=this.ts_team.wait_1_pos[this.seat],this.move();break;case _.Team34Behavior.move_2:this.change_animation("movement_3"),this.coord=this.ts_team.wait_2_pos[this.seat],this.move(),0==this.seat?this.spine.node.scaleX=-1:this.spine.node.scaleX=1;break;case _.Team34Behavior.move_3:case _.Team34Behavior.move_4:var e;switch(e=this.behavior==_.Team34Behavior.move_3?f.default.Instance.TsGame.table_array[_.FacilityType.third_floor_table1]:f.default.Instance.TsGame.table_array[_.FacilityType.third_floor_table2],this.node.setParent(e.stool_array[this.seat]),this.node.setScale(.96),this.coord=cc.v2(0,0),this.move(),this.seat){case 0:this.change_animation("movement_1"),this.spine.node.scaleX=-1;break;case 1:this.change_animation("movement_2");break;case 2:this.change_animation("movement_1"),this.spine.node.scaleX=1;break;case 3:this.change_animation("standby_2")}}},t.prototype.get_up=function(){if(null!=this.get_up_pos){switch(this.behavior){case _.Team34Behavior.move_2:case _.Team34Behavior.move_3:case _.Team34Behavior.move_4:case _.Team34Behavior.go_counter1:this.change_animation("walk_1");break;case _.Team34Behavior.go_counter2:this.change_animation("walk_3");break;case _.Team34Behavior.go_counter3:case _.Team34Behavior.go_counter4:this.node.setParent(f.default.Instance.TsGame.group_third_floor.container2),this.node.setScale(1.25),this.change_animation("walk_1")}this.coord=this.get_up_pos,this.get_up_pos=null,this.move()}},t.prototype.Talk=function(){0!=this.node.activeInHierarchy&&(f.default.Instance.TalkNum[this.scence]>1||f.default.Instance.GameController.FoundDialogueBox().Show2(this.talk_str,5,this.node,this.scence))},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Seat",{get:function(){return this.seat},set:function(e){this.seat=e},enumerable:!1,configurable:!0}),l([b],t)}(u.default));i.default=v,cc._RF.pop(),cc._RF.pop()},{}],guest41_item:[function(e,t,n){"use strict";cc._RF.push(t,"82171S6oexEMrKBCaKV8SJQ","guest41_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"e2c1cBG//xLE76kzFN9VS9K","guest41_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("GuestBase"),d=o("BundleManger"),h=o("DataManager"),p=o("GameManger"),f=o("TypeManager"),_=cc._decorator,y=_.ccclass,b=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos_10=cc.v2(-400,-60),t.pos_11=cc.v2(0,420),t.pos_12=cc.v2(-400,-480),t.pos_13=cc.v2(1100,-600),t.pos_14=cc.v2(770,-530),t.pos_10_array=[cc.v2(-240,280),cc.v2(-120,120),cc.v2(-120,-50)],t.talk_pool=["\u53f2\u65e0\u5148\u4f8b\u7684\u58ee\u89c2","\u957f\u89c1\u8bc6\u4e86","\u539f\u6765\u771f\u8ff9\u957f\u8fd9\u6837","\u592a\u7f8e\u4e86","\u6211\u5976\u8bf4\u4f5c\u8005\u662f\u5979\u670b\u53cb","\u8fd9\u95e8\u7968\u503c\u4e86","\u505a\u5de5\u771f\u7ec6\u81f4","\u4f5c\u8005\u662f\u600e\u4e48\u60f3\u51fa\u6765\u7684","\u6211\u5bb6\u6709\u4e2a\u4e00\u6a21\u4e00\u6837\u7684","\u89e6\u53d1\u6211\u7684\u521b\u4f5c\u7075\u611f\u4e86"],t}return s(t,e),t.prototype.onEnable=function(){this.animation!=this.spine.animation&&this.spine.setAnimation(0,this.animation,!0)},t.prototype.Init=function(e,t,n,o){var a=this;this.init_data(e,t,o),this.ts_team=n,this.visit_path=0,this.talk_str=null,this.change_scene(f.ScenceArea.doorway,o),this.ChangeBehavior(f.Team41Behavior.move_1),this.node.active=!0,d.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){a.change_animation(a.animation)})},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,cc.Tween.stopAllByTarget(this),this.behavior){case f.Team41Behavior.move_0:this.tween([cc.v2(210,this.coord.y),cc.v2(210,750)]).call(function(){t.change_scene(f.ScenceArea.doorway,t.pos_0),t.ChangeBehavior(f.Team41Behavior.move_1)}).start();break;case f.Team41Behavior.move_1:this.tween([cc.v2(-400,-360),this.pos_10]).call(function(){t.change_scene(f.ScenceArea.escort,t.pos_11),t.tween(t.pos_10_array).call(function(){cc.systemEvent.emit(f.DistributedEvent.guest_behavior_over,t,f.Team41Behavior.move_1)}).start()}).start();break;case f.Team41Behavior.move_2:var n=h.default.Instance.EscortQueueData[this.ts_team.queue_index+this.index],o=[];this.coord.y>-450&&n.y<-450&&o.push(cc.v2(-130,-460)),o.push(n),this.tween(o).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(f.DistributedEvent.guest_behavior_over,t,t.behavior)}).start();break;case f.Team41Behavior.move_3:o=[],this.coord.y>-450&&o.push(cc.v2(-130,-460)),o.push(this.pos_12),this.tween(o).call(function(){t.change_animation("walk_1"),t.change_scene(f.ScenceArea.exhibition,t.pos_13),t.tween([cc.v2(t.pos_14.x+80*t.index,t.pos_14.y)]).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(f.DistributedEvent.guest_behavior_over,t,t.behavior)}).start()}).start();break;case f.Team41Behavior.booth_move:this.change_animation("walk_1");var a=void 0;20==this.ts_team.visit_index&&-1==this.ts_team.last_booth?(a=[cc.v2(530,-550),cc.v2(570,120)],this.visit_path=20):a=h.default.Instance.ExhibitionPath[this.visit_path],this.tween(a).call(function(){t.visit_path++,t.visit_path-1<t.ts_team.visit_index?t.ChangeBehavior(f.Team41Behavior.booth_move,"\u7ee7\u7eed\u8d70\u5230\u70b9===="+t.visit_path):cc.systemEvent.emit(f.DistributedEvent.guest_behavior_over,t,t.behavior,t.visit_path-1)}).start();break;case f.Team41Behavior.booth_wait:this.change_animation("standby_1");break;case f.Team41Behavior.booth_visiti:this.change_animation("standby_1");var i=Math.floor(999*Math.random())%this.talk_pool.length;this.Talk(this.talk_pool[i]);break;case f.Team41Behavior.move_shop:this.change_animation("walk_1"),this.tween([cc.v2(670,80)]).call(function(){t.change_animation("standby_1"),cc.systemEvent.emit(f.DistributedEvent.guest_behavior_over,t,t.behavior)}).start();break;case f.Team41Behavior.leave2:this.change_animation("walk_1"),this.tween([cc.v2(670,350),cc.v2(930,350),cc.v2(930,-40),cc.v2(540,-40),cc.v2(540,-580),cc.v2(1150,-580)]).call(function(){t.change_scene(f.ScenceArea.escort,t.pos_12),t.tween([cc.v2(-30,-480),cc.v2(210,280),cc.v2(0,400)]).call(function(){t.change_scene(f.ScenceArea.doorway,t.pos_10),t.tween([cc.v2(-400,-400),cc.v2(1050,-400)]).call(function(){cc.systemEvent.emit(f.DistributedEvent.guest_behavior_over,t,t.behavior)}).start()}).start()}).start();break;case f.Team41Behavior.leave1:this.change_animation("walk_1"),this.tween([cc.v2(530,-130),cc.v2(530,-580),cc.v2(1150,-580)]).call(function(){t.change_scene(f.ScenceArea.escort,t.pos_12),t.tween([cc.v2(-30,-480),cc.v2(210,280),cc.v2(0,400)]).call(function(){t.change_scene(f.ScenceArea.doorway,t.pos_10),t.tween([cc.v2(-400,-400),cc.v2(1050,-400)]).call(function(){cc.systemEvent.emit(f.DistributedEvent.guest_behavior_over,t,t.behavior)}).start()}).start()}).start()}},t.prototype.Update=function(e){this.move(),this.count_down>0&&(this.count_down-=e)},t.prototype.Talk=function(e){var t=this;0!=this.node.activeInHierarchy&&(p.default.Instance.TalkNum[this.scence]>1||null==this.talk_str&&(this.talk_str=e,p.default.Instance.GameController.FoundDialogueBox().Show2(this.talk_str,4,this.node,this.scence),cc.tween(this).delay(4).call(function(){t.talk_str=null})))},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Seat",{get:function(){return this.seat},set:function(e){this.seat=e},enumerable:!1,configurable:!0}),l([y],t)}(u.default));i.default=b,cc._RF.pop(),cc._RF.pop()},{}],illustration1_item:[function(e,t,n){"use strict";cc._RF.push(t,"de401CxoRJKhJ3FF/Ottqrl","illustration1_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"697b7PzV2lBSoPRGsP0p7eu","illustration1_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("StoragerManager"),h=o("UIManager"),p=o("Illustration2Interface"),f=cc._decorator,_=f.ccclass,y=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.bar_2=null,t.icon_type=null,t.icon_red=null,t.label_num=null,t._tagType=0,t}return s(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.click,this)},t.prototype.Init=function(e,t,n,o,a){void 0===a&&(a=0),this.type=e,this.ts=o,this.label_num.string=t+"/"+n,this.bar_2.width=175*t/n,this.unlock_num=t,this.max_num=n,u.default.Instance.LoadSpriteFrame("Bundle2UI","IllustrationUI/label_"+this.type,this.icon_type),u.default.Instance.LoadSpriteFrame("Bundle2UI","IllustrationUI/type_"+this.type,this.icon),this._tagType=a,1==a?this.icon_red.active=!1:t>=n&&1!=d.default.Instance.Illustration[this.type]?this.icon_red.active=!0:this.icon_red.active=!1},t.prototype.click=function(){h.default.Instance.OpenUI(p.default,h.UIOrder.Window_2,this.type,this.unlock_num,this.max_num,this._tagType)},l([y(cc.Node)],t.prototype,"icon",void 0),l([y(cc.Node)],t.prototype,"bar_2",void 0),l([y(cc.Node)],t.prototype,"icon_type",void 0),l([y(cc.Node)],t.prototype,"icon_red",void 0),l([y(cc.Label)],t.prototype,"label_num",void 0),l([_],t)}(cc.Component);i.default=b,cc._RF.pop(),cc._RF.pop()},{}],illustration2_item:[function(e,t,n){"use strict";cc._RF.push(t,"4ff57AOsIFI5qEwqRCQJ1AJ","illustration2_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"092c8aYPA5Pu7qqfoUb/i/w","illustration2_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("BundleManger"),p=o("FunctionManager"),f=o("StoragerManager"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.maskIcon=null,t.label_name=null,t}return s(t,e),t.prototype.Init=function(e){return u(this,void 0,void 0,function(){var t;return d(this,function(){return this.config=e,t=p.default.Instance.UnlockKebabsNum(),h.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebab_"+this.config.id,this.maskIcon),h.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueStandUI/kebab/kebab_"+this.config.id,this.icon),this.config.Source==_.KebabsSource.midAutumn?f.default.Instance.unlockKebabs.includes(this.config.id)?(this.label_name.node.color=cc.Color.BLACK.fromHEX("#61583B"),this.label_name.string=this.config.name,this.maskIcon.active=!1):(this.label_name.node.color=cc.Color.BLACK.fromHEX("#9B998A"),this.label_name.string="???",this.maskIcon.active=!0):this.config.Source==_.KebabsSource.common&&(this.config.id<=t?(this.label_name.node.color=cc.Color.BLACK.fromHEX("#61583B"),this.label_name.string=this.config.name,this.maskIcon.active=!1):(this.label_name.node.color=cc.Color.BLACK.fromHEX("#9B998A"),this.label_name.string="???",this.maskIcon.active=!0)),this.node.active=!0,[2]})})},l([v(cc.Node)],t.prototype,"icon",void 0),l([v(cc.Node)],t.prototype,"maskIcon",void 0),l([v(cc.Label)],t.prototype,"label_name",void 0),l([b],t)}(cc.Component);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],lv_tiem:[function(e,t,n){"use strict";cc._RF.push(t,"80353H91UlIUZFQjNzAtX3R","lv_tiem");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"2fb6fZ25NFE3bZq2aAv5iMW","lv_tiem");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("AddPowerInterface"),d=o("BundleManger"),h=o("GameManger"),p=o("InfoManager"),f=o("StoragerManager"),_=o("UIManager"),y=o("BarbecueLvInterface"),b=o("MainInterface"),v=cc._decorator,m=v.ccclass,g=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_lv=null,t.icon_unlock=null,t.star=[],t}return s(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.click,this)},t.prototype.Init=function(e){this.ts=e},t.prototype.Refresh=function(e){if(this.lv=e,this.lv>h.default.Instance.BarbecueMaxLv)return this.node.active=!1;var t=f.default.Instance.BarbecueLv[this.lv-1];if(this.icon_unlock.active=!1,d.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueLvUI/icon_bg4",this.node),0==this.icon_unlock.active){this.label_lv.string=""+this.lv,null==t&&(t=0);for(var n=0;n<this.star.length;n++)this.star[n].active=!0,t>=n+1?d.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueLvUI/icon_4",this.star[n]):d.default.Instance.LoadSpriteFrame("Bundle1UI","BarbecueLvUI/icon_3",this.star[n])}else this.label_lv.string="",this.star[0].active=!1,this.star[1].active=!1,this.star[2].active=!1;this.node.active=!0},t.prototype.click=function(){this.ts.move_dis>30||(0==this.icon_unlock.active?f.default.Instance.BarbecuePower>0?(_.default.Instance.GetUI(b.default).OpenGame(this.lv),_.default.Instance.DestroyUI(y.default)):(_.default.Instance.OpenUI(u.default,_.UIOrder.Window_2),p.default.Instance.TsInitial.ShowTips("\u4f53\u529b\u4e0d\u8db3")):p.default.Instance.TsInitial.ShowTips("\u5173\u5361\u672a\u89e3\u9501"))},l([g(cc.Label)],t.prototype,"label_lv",void 0),l([g(cc.Node)],t.prototype,"icon_unlock",void 0),l([g(cc.Node)],t.prototype,"star",void 0),l([m],t)}(cc.Component);i.default=I,cc._RF.pop(),cc._RF.pop()},{}],moreClickUtil:[function(e,t,n){"use strict";cc._RF.push(t,"5c1eflBBgdHcb0395bBzc36","moreClickUtil");var o=t,a=n,i=function(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(o,"ac5b5QS52xHhoGiw7qjEI0f","moreClickUtil");var r,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==i(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(a,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clickCount=1,t.clickTime=0,t._nowTime=0,t._nowClickCount=0,t._cb=null,t}return c(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.init=function(e,t,n){void 0===t&&(t=this.clickCount),void 0===n&&(n=this.clickTime),this._cb=e,this.clickCount=t,this.clickTime=n},t.prototype.onTouchStart=function(){var e=(new Date).getTime();0==this._nowClickCount?(this._nowClickCount=1,this._nowTime=e):((e-this._nowTime)/1e3<this.clickTime?this._nowClickCount++:this._nowClickCount=0,this._nowTime=e),this._nowClickCount>=this.clickCount&&(this._nowClickCount=0,this._cb&&this._cb())},s([d],t.prototype,"clickCount",void 0),s([d],t.prototype,"clickTime",void 0),s([u],t)}(cc.Component);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],node_dishes:[function(e,t,n){"use strict";cc._RF.push(t,"3e006J1WNNPVpTnJirekdM9","node_dishes");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"59bdeKKbGhKAYq3leJGjRja","node_dishes");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_food=null,t.btn_serving=null,t.pro_circle=null,t.label_time=null,t.cook_max=5,t}return s(t,e),t.prototype.start=function(){this.btn_serving.on(cc.Node.EventType.TOUCH_END,this.click_serving,this),this.node.zIndex=3e3},t.prototype.Init=function(e){switch(this.order_data=e,this.order_data.table_id){case h.FacilityType.table_1:case h.FacilityType.table_2:case h.FacilityType.table_3:case h.FacilityType.table_4:case h.FacilityType.room1_tabel:case h.FacilityType.room2_tabel:case h.FacilityType.room3_tabel:this.dishes_scence=h.ScenceArea.first_canteen,this.node.setParent(d.default.Instance.TsGame.group_kitchen.container2),this.node.setPosition(cc.v2(-720,240));break;case h.FacilityType.second_floor_table1:case h.FacilityType.second_floor_table2:this.dishes_scence=h.ScenceArea.second_canteen,this.node.setParent(d.default.Instance.TsGame.group_second_floor.container2),this.node.setPosition(cc.v2(665,410))}this.cook_time=this.cook_max,this.node_food.active=!1,this.btn_serving.active=!1,this.pro_circle.node.active=!0,this.label_time.node.parent.active=!0,u.default.Instance.LoadSpriteFrame("course","main_course_"+this.order_data.main_dishes[0],this.node_food)},t.prototype.Update=function(e){if(this.cook_time>0){this.cook_time-=e;var t=""+Math.ceil(this.cook_time);if(this.label_time.string!=t&&(this.label_time.string=t),this.pro_circle.progress=this.cook_time/this.cook_max,this.cook_time<=0){this.CookComplete();for(var n=!1,o=0;o<d.default.Instance.TsGame.dishes_array.length;o++)if(d.default.Instance.TsGame.dishes_array[o].cook_time>0){n=!0;break}0==n&&(d.default.Instance.ScenceArea,h.ScenceArea.first_kitchen),0==n&&"idle"!=d.default.Instance.TsGame.spine_guo.animation&&d.default.Instance.TsGame.spine_guo.setAnimation(0,"idle",!0)}}},t.prototype.CookComplete=function(){switch(this.dishes_scence){case h.ScenceArea.first_canteen:this.node.setPosition(cc.v2(-700,-200));break;case h.ScenceArea.second_canteen:this.node.setPosition(cc.v2(845,0))}this.node_food.active=!0,this.pro_circle.node.active=!1,this.label_time.node.parent.active=!1,0==d.default.Instance.TsGame.JudgeStaffToKitchen(this)&&this.click_serving(),d.default.Instance.TsGame.JudgeStaffJob(4)},t.prototype.ServeFood=function(){this.node.opacity=0},t.prototype.click_serving=function(){this.node.active=!1,this.node.opacity=255,cc.systemEvent.emit(h.DistributedEvent.dishes_serving,this.order_data.table_id)},t.prototype.GetTableVolume=function(){switch(this.order_data.table_id){case h.FacilityType.table_1:case h.FacilityType.table_2:case h.FacilityType.table_3:case h.FacilityType.table_4:return 4;case h.FacilityType.room1_tabel:case h.FacilityType.room2_tabel:case h.FacilityType.room3_tabel:return 8;case h.FacilityType.second_floor_table1:case h.FacilityType.second_floor_table2:return 6}},l([_(cc.Node)],t.prototype,"node_food",void 0),l([_(cc.Node)],t.prototype,"btn_serving",void 0),l([_(cc.ProgressBar)],t.prototype,"pro_circle",void 0),l([_(cc.Label)],t.prototype,"label_time",void 0),l([f],t)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],node_facility:[function(e,t,n){"use strict";cc._RF.push(t,"77146ZB8QdF4oHteweyAyF4","node_facility");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"80a14R+ixhFo4/wNHMlpGEg","node_facility");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("FunctionManager"),p=o("GameManger"),f=o("PoolManager"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t}return s(t,e),t.prototype.Init=function(e,t){switch(void 0===t&&(t=null),this.facility_type=e,this.facility_index=t,e){case _.FacilityType.outdoor_wall:case _.FacilityType.snack_platform:this.node.setParent(p.default.Instance.TsGame.group_doorway.container1),this.node.anchorY=0;break;case _.FacilityType.outdoor_ground:case _.FacilityType.sunshade:case _.FacilityType.outdoor_decorate1:this.node.setParent(p.default.Instance.TsGame.group_doorway.container1);break;case _.FacilityType.queue_stool:this.node.setParent(p.default.Instance.TsGame.group_doorway.container2);break;case _.FacilityType.counter:case _.FacilityType.condiment_area:this.node.setParent(p.default.Instance.TsGame.group_canteen1.container2),this.node.anchorY=0;break;case _.FacilityType.display_board:case _.FacilityType.wine_cabinet:case _.FacilityType.hall_wall:case _.FacilityType.door:case _.FacilityType.door_decorate:case _.FacilityType.hall_ground:this.node.setParent(p.default.Instance.TsGame.group_canteen1.container1);break;case _.FacilityType.stairs_decorate:case _.FacilityType.counter_decorate1:case _.FacilityType.counter_decorate2:case _.FacilityType.counter_decorate3:this.node.setParent(p.default.Instance.TsGame.group_canteen1.container2);break;case _.FacilityType.chopping_board:case _.FacilityType.hearth:case _.FacilityType.kitchen_ground:this.node.setParent(p.default.Instance.TsGame.group_kitchen.container1);break;case _.FacilityType.vegetable_rack1:case _.FacilityType.vegetable_rack2:this.node.setParent(p.default.Instance.TsGame.group_kitchen.container1),this.node.anchorY=0;break;case _.FacilityType.kitchen_wall:this.node.setParent(p.default.Instance.TsGame.group_kitchen.container1),this.node.anchorY=1;break;case _.FacilityType.serving_board:case _.FacilityType.scullery:this.node.setParent(p.default.Instance.TsGame.group_kitchen.container2),e==_.FacilityType.serving_board&&(p.default.Instance.TsGame.spine_guo.node.setParent(this.node),p.default.Instance.TsGame.spine_guo.node.setScale(.8),p.default.Instance.TsGame.spine_guo.node.scaleX=-.8);break;case _.FacilityType.room1_cabinet:case _.FacilityType.room1_decorate1:case _.FacilityType.room1_decorate2:case _.FacilityType.room2_cabinet:case _.FacilityType.room2_decorate1:case _.FacilityType.room2_decorate2:case _.FacilityType.room3_cabinet:case _.FacilityType.room3_decorate1:case _.FacilityType.room3_decorate2:this.node.setParent(p.default.Instance.TsGame.group_canteen2.container2),this.node.anchorY=0;break;case _.FacilityType.room1_sofa:case _.FacilityType.room1_wall:case _.FacilityType.room2_sofa:case _.FacilityType.room2_wall:case _.FacilityType.room3_sofa:case _.FacilityType.room3_wall:this.node.setParent(p.default.Instance.TsGame.group_canteen2.container2);break;case _.FacilityType.room1_ground:case _.FacilityType.room2_ground:case _.FacilityType.room3_ground:this.node.setParent(p.default.Instance.TsGame.group_canteen2.container1);break;case _.FacilityType.second_floor_ground1:case _.FacilityType.second_floor_ground2:case _.FacilityType.second_floor_ground3:case _.FacilityType.second_floor_ground4:case _.FacilityType.second_floor_wall1:case _.FacilityType.second_floor_wall2:case _.FacilityType.second_floor_carpet1:case _.FacilityType.second_floor_wall3:this.node.setParent(p.default.Instance.TsGame.group_second_floor.container1);break;case _.FacilityType.second_floor_counter_wall:this.node.setParent(p.default.Instance.TsGame.group_second_floor.container2),this.node.anchorY=.25;break;case _.FacilityType.second_floor_decorate1:case _.FacilityType.second_floor_decorate2:this.node.setParent(p.default.Instance.TsGame.group_second_floor.container2),this.node.anchorY=0;break;case _.FacilityType.second_floor_counter:case _.FacilityType.second_floor_screen1:case _.FacilityType.second_floor_vase1:case _.FacilityType.second_floor_desk1:case _.FacilityType.second_floor_door:case _.FacilityType.second_floor_wall2:case _.FacilityType.second_floor_screen2:case _.FacilityType.second_floor_vase2:case _.FacilityType.second_floor_fabrication:case _.FacilityType.second_floor_steamer:case _.FacilityType.second_floor_cabinet:case _.FacilityType.second_floor_stove:case _.FacilityType.second_floor_lantern1:case _.FacilityType.second_floor_lantern2:this.node.setParent(p.default.Instance.TsGame.group_second_floor.container2),this.node.anchorY=0;break;case _.FacilityType.second_floor_stool:this.node.setParent(p.default.Instance.TsGame.group_second_floor.container2);break;case _.FacilityType.backyard_land1:case _.FacilityType.backyard_land2:case _.FacilityType.backyard_land3:case _.FacilityType.backyard_land4:this.node.setParent(p.default.Instance.TsGame.group_backyard.container1);break;case _.FacilityType.backyard_pool:case _.FacilityType.backyard_rail:this.node.setParent(p.default.Instance.TsGame.group_backyard.container2);break;case _.FacilityType.backyard_desk:case _.FacilityType.backyard_bonsai:this.node.setParent(p.default.Instance.TsGame.group_backyard.container2),this.node.anchorY=0;break;case _.FacilityType.backyard_ground:case _.FacilityType.backyard_background:this.node.setParent(p.default.Instance.TsGame.group_backyard.container1.children[0]);break;case _.FacilityType.backyard_decorate1:case _.FacilityType.backyard_decorate2:this.node.setParent(p.default.Instance.TsGame.group_backyard.container1);break;case _.FacilityType.third_film_stool:this.node.setParent(p.default.Instance.TsGame.group_third_floor.container2);break;case _.FacilityType.third_film_screen:case _.FacilityType.third_floor_bridge:case _.FacilityType.third_floor_platform:case _.FacilityType.third_floor_decorate11:case _.FacilityType.third_floor_screen2:case _.FacilityType.third_floor_screen3:case _.FacilityType.third_floor_spring:this.node.setParent(p.default.Instance.TsGame.group_third_floor.container2);break;case _.FacilityType.third_floor_counter:case _.FacilityType.third_floor_plant:case _.FacilityType.third_floor_desk1:case _.FacilityType.third_floor_shelf:case _.FacilityType.third_floor_desk2:case _.FacilityType.third_floor_decorate6:case _.FacilityType.third_floor_decorate7:case _.FacilityType.third_floor_wall1:case _.FacilityType.third_floor_wall2:case _.FacilityType.third_floor_bed:case _.FacilityType.third_floor_stone:case _.FacilityType.third_floor_room:case _.FacilityType.third_floor_decorate8:case _.FacilityType.third_floor_decorate10:case _.FacilityType.third_floor_decorate1:case _.FacilityType.third_floor_decorate2:case _.FacilityType.third_floor_decorate3:case _.FacilityType.third_floor_decorate4:case _.FacilityType.third_floor_decorate5:case _.FacilityType.third_floor_stool2:case _.FacilityType.third_floor_divination:this.node.setParent(p.default.Instance.TsGame.group_third_floor.container2),this.node.anchorY=0;break;case _.FacilityType.third_floor_decorate9:this.node.setParent(p.default.Instance.TsGame.group_third_floor.container2),this.node.anchorY=1;break;case _.FacilityType.third_floor_ground1:case _.FacilityType.third_floor_ground2:case _.FacilityType.third_floor_drifting:case _.FacilityType.third_floor_ground3:case _.FacilityType.third_floor_pavilion:this.node.setParent(p.default.Instance.TsGame.group_third_floor.container1),this.facility_type==_.FacilityType.third_floor_ground3&&this.node.setSiblingIndex(2);break;case _.FacilityType.park_ground_1:case _.FacilityType.park_ground_2:case _.FacilityType.park_ground_3:case _.FacilityType.park_ground_4:case _.FacilityType.park_ground_5:this.node.setParent(p.default.Instance.TsGame.group_park.container1);break;case _.FacilityType.park_decorate1:case _.FacilityType.park_decorate2:case _.FacilityType.park_plant:this.node.setParent(p.default.Instance.TsGame.group_park.container2);break;case _.FacilityType.escort_door:case _.FacilityType.escort_ground:case _.FacilityType.escort_lawn1:case _.FacilityType.escort_lawn2:case _.FacilityType.escort_flagging:this.node.setParent(p.default.Instance.TsGame.group_escort.container1.children[0]);break;case _.FacilityType.escort_desk:case _.FacilityType.escort_flowerpot:case _.FacilityType.escort_box:case _.FacilityType.escort_cargo:case _.FacilityType.escort_quiver:case _.FacilityType.escort_stone:case _.FacilityType.escort_dumbbell1:case _.FacilityType.escort_dumbbell2:case _.FacilityType.escort_bonsai:case _.FacilityType.escort_shelf:case _.FacilityType.escort_barbell:case _.FacilityType.escort_deadman:case _.FacilityType.escort_rail:case _.FacilityType.escort_carriage:case _.FacilityType.escort_board:this.node.setParent(p.default.Instance.TsGame.group_escort.container2),this.node.anchorY=0;break;case _.FacilityType.exhibition_ground:case _.FacilityType.exhibition_wall:case _.FacilityType.exhibition_gate:this.node.setParent(p.default.Instance.TsGame.group_exhibition.container1);break;case _.FacilityType.exhibition_book:case _.FacilityType.exhibition_tickets:case _.FacilityType.exhibition_table:case _.FacilityType.exhibition_counter2:case _.FacilityType.exhibition_exhibits1:case _.FacilityType.exhibition_exhibits2:case _.FacilityType.exhibition_exhibits3:case _.FacilityType.exhibition_exhibits4:case _.FacilityType.exhibition_exhibits5:case _.FacilityType.exhibition_exhibits7:case _.FacilityType.exhibition_exhibits8:case _.FacilityType.exhibition_exhibits9:case _.FacilityType.exhibition_exhibits11:case _.FacilityType.exhibition_exhibits12:case _.FacilityType.exhibition_exhibits14:case _.FacilityType.exhibition_exhibits15:case _.FacilityType.exhibition_exhibits16:case _.FacilityType.exhibition_exhibits17:case _.FacilityType.exhibition_exhibits19:case _.FacilityType.exhibition_exhibits20:case _.FacilityType.exhibition_exhibits21:case _.FacilityType.exhibition_jade:this.node.setParent(p.default.Instance.TsGame.group_exhibition.container2);break;case _.FacilityType.exhibition_billboard:case _.FacilityType.exhibition_screen:case _.FacilityType.exhibition_counter:case _.FacilityType.exhibition_lamp:case _.FacilityType.exhibition_table2:case _.FacilityType.exhibition_shelf:case _.FacilityType.exhibition_picture:case _.FacilityType.exhibition_sugar:case _.FacilityType.exhibition_picture2:case _.FacilityType.exhibition_fan:case _.FacilityType.exhibition_shelf2:case _.FacilityType.exhibition_cucurbit:case _.FacilityType.exhibition_picture3:case _.FacilityType.exhibition_basket:case _.FacilityType.exhibition_booth:case _.FacilityType.exhibition_booth2:case _.FacilityType.exhibition_booth3:case _.FacilityType.exhibition_booth4:case _.FacilityType.exhibition_booth5:case _.FacilityType.exhibition_booth6:case _.FacilityType.exhibition_booth7:case _.FacilityType.exhibition_booth8:case _.FacilityType.exhibition_booth9:case _.FacilityType.exhibition_booth10:case _.FacilityType.exhibition_booth11:case _.FacilityType.exhibition_booth12:case _.FacilityType.exhibition_booth13:case _.FacilityType.exhibition_booth14:case _.FacilityType.exhibition_wallet:case _.FacilityType.exhibition_vase:case _.FacilityType.exhibition_vase2:case _.FacilityType.exhibition_lamp2:case _.FacilityType.exhibition_screen2:case _.FacilityType.exhibition_candelabrum:case _.FacilityType.exhibition_picture4:case _.FacilityType.exhibition_bonsai:case _.FacilityType.exhibition_washbasin:case _.FacilityType.exhibition_chronometer:case _.FacilityType.exhibition_exhibits6:case _.FacilityType.exhibition_exhibits10:case _.FacilityType.exhibition_exhibits13:case _.FacilityType.exhibition_exhibits18:case _.FacilityType.exhibition_cabinet:case _.FacilityType.exhibition_cabinet2:case _.FacilityType.exhibition_table3:case _.FacilityType.exhibition_shelf3:this.node.setParent(p.default.Instance.TsGame.group_exhibition.container2),this.node.anchorY=0}this.node.name=e},t.prototype.Refresh=function(e,t){var n,o=this;switch(this.facility_type){case _.FacilityType.third_floor_ground1:case _.FacilityType.third_floor_ground2:case _.FacilityType.third_floor_ground3:case _.FacilityType.third_floor_wall1:case _.FacilityType.third_floor_wall2:case _.FacilityType.backyard_ground:case _.FacilityType.backyard_background:case _.FacilityType.park_ground_1:case _.FacilityType.park_ground_2:case _.FacilityType.park_ground_3:case _.FacilityType.park_ground_4:case _.FacilityType.park_ground_5:e<1&&(e=1)}switch(this.facility_data=d.default.Instance.Facility1Information[this.facility_type],this.facility_data.location){case _.ScenceArea.third_canteen:case _.ScenceArea.third_room1:case _.ScenceArea.third_room2:this.facility_type==_.FacilityType.third_floor_drifting&&0==e?this.node.active=!1:this.facility_type==_.FacilityType.third_floor_decorate10&&e>=2?u.default.Instance.LoadSpriteFrame("ThirdFloor","facility/"+this.facility_type+"_"+e+"_"+(this.facility_index+1),this.node):this.facility_type==_.FacilityType.third_floor_screen3&&3==e?u.default.Instance.LoadSpriteFrame("ThirdFloor","facility/"+this.facility_type+"_"+e+"_"+(this.facility_index+1),this.node):u.default.Instance.LoadSpriteFrame("ThirdFloor","facility/"+h.default.Instance.FacilityUrl(this.facility_type)+"_"+e,this.node);break;case _.ScenceArea.second_canteen:case _.ScenceArea.second_room1:case _.ScenceArea.second_room2:u.default.Instance.LoadSpriteFrame("SecondFloor","facility/"+this.facility_type+"_"+e,this.node);break;case _.ScenceArea.backyard:switch(this.facility_type){case _.FacilityType.backyard_land1:case _.FacilityType.backyard_land2:case _.FacilityType.backyard_land3:case _.FacilityType.backyard_land4:default:u.default.Instance.LoadSpriteFrame("Backyard","facility/"+h.default.Instance.FacilityUrl(this.facility_type)+"_"+e,this.node)}break;case _.ScenceArea.parking:u.default.Instance.LoadSpriteFrame("ParkUI","game/"+this.facility_type+"_"+e,this.node);break;case _.ScenceArea.escort:u.default.Instance.LoadSpriteFrame("EscortUI","facility/"+this.facility_type+"_"+e,this.node);break;case _.ScenceArea.exhibition:u.default.Instance.LoadSpriteFrame("ExhibitionUI","facility/"+h.default.Instance.FacilityUrl(this.facility_type)+"_"+e,this.node);break;default:0==e?u.default.Instance.LoadSpriteFrame("furniture_"+e,this.facility_type+"_"+e,this.node):1==p.default.Instance.NightControl&&this.facility_type==_.FacilityType.outdoor_wall?u.default.Instance.LoadSpriteFrame("furniture_"+e,h.default.Instance.FacilityUrl(this.facility_type)+"_"+e+"_2",this.node):u.default.Instance.LoadSpriteFrame("furniture_"+e,h.default.Instance.FacilityUrl(this.facility_type)+"_"+e,this.node)}if(this.judge_special(e),e>=20)n=this.facility_data.data[e-20].coord;else{var a=e-1;a<0&&(a=0),n=this.facility_data.data[a].coord}switch(this.facility_type){case _.FacilityType.queue_stool:this.node.setPosition(d.default.Instance.DoorwayStoolPos[this.facility_index]);break;case _.FacilityType.stairs_decorate:this.node.setPosition(n.x,n.y+200*this.facility_index);break;case _.FacilityType.second_floor_stool:this.node.setPosition(d.default.Instance.SecondStool[this.facility_index]);break;case _.FacilityType.third_film_stool:this.node.setPosition(d.default.Instance.third_floor_stool[this.facility_index]);break;case _.FacilityType.second_floor_lantern2:this.node.setPosition(cc.v2(n.x+597*this.facility_index,n.y));break;case _.FacilityType.third_floor_screen3:this.node.setPosition(cc.v2(n.x+430*this.facility_index,n.y));break;case _.FacilityType.third_floor_decorate9:this.node.setPosition(cc.v2(n.x+400*this.facility_index,n.y));break;case _.FacilityType.third_floor_decorate10:this.node.setPosition(cc.v2(n.x+350*this.facility_index,n.y));break;case _.FacilityType.escort_flagging:this.node.setPosition(cc.v2(n.x+376*this.facility_index,n.y)),1==this.facility_index&&(this.node.scaleX=-1.25,this.node.active=2!=e);break;case _.FacilityType.escort_bonsai:this.node.setPosition(cc.v2(n.x,n.y-247*this.facility_index));break;case _.FacilityType.exhibition_bonsai:this.node.setPosition(cc.v2(n.x-397*this.facility_index,n.y));break;case _.FacilityType.exhibition_lamp2:switch(e){case 1:this.node.setPosition(cc.v2(n.x-590*this.facility_index,n.y));break;case 2:this.node.setPosition(cc.v2(n.x-495*this.facility_index,n.y))}break;case _.FacilityType.hall_wall:0==e?this.node.setPosition(cc.v2(0,577)):this.node.setPosition(n);break;case _.FacilityType.serving_board:this.node.setPosition(n),1==e?p.default.Instance.TsGame.spine_guo.node.setPosition(cc.v2(-20,185)):p.default.Instance.TsGame.spine_guo.node.setPosition(cc.v2(-27,170));break;default:this.node.setPosition(n)}var i=h.default.Instance.GetFacilityIndex(this.facility_type,this.node);if(null!=i&&(this.node.zIndex=i),1==t){switch(this.facility_type){case _.FacilityType.outdoor_ground:case _.FacilityType.hall_ground:case _.FacilityType.hall_wall:case _.FacilityType.kitchen_wall:case _.FacilityType.kitchen_ground:break;default:var r=this.node.scaleX;this.ani.play("ani_facility"),this.scheduleOnce(function(){o.node.scaleX=r},.5)}f.default.Instance.PlaySmokeEffect(this.node,!1,!0,!0)}},t.prototype.judge_special=function(e){switch(this.facility_type){case _.FacilityType.third_floor_drifting:if(e>0){this.node.active=!0,p.default.Instance.TsGame.group_third_floor.icon_drifting0.active=!1;for(var t=0;t<p.default.Instance.TsGame.group_third_floor.icon_drifting1.length;t++)p.default.Instance.TsGame.group_third_floor.icon_drifting1[t].active=!0;p.default.Instance.TsGame.group_third_floor.RefreshDrifting(e)}else for(p.default.Instance.TsGame.group_third_floor.icon_drifting0.active=!0,t=0;t<p.default.Instance.TsGame.group_third_floor.icon_drifting1.length;t++)p.default.Instance.TsGame.group_third_floor.icon_drifting1[t].active=!1;break;case _.FacilityType.second_floor_ground1:e>0&&0==p.default.Instance.TsGame.group_second_floor.icon_stairs_first.active&&(p.default.Instance.TsGame.group_second_floor.icon_stairs_first.active=!0),p.default.Instance.TsGame.group_second_floor.RefreshStairs(e);break;case _.FacilityType.second_floor_wall3:e>0&&0==p.default.Instance.TsGame.group_second_floor.icon_stairs_third.active&&(p.default.Instance.TsGame.group_second_floor.icon_stairs_third.active=!0),p.default.Instance.TsGame.group_second_floor.RefreshWall(e);break;case _.FacilityType.third_floor_bridge:p.default.Instance.TsGame.group_third_floor&&p.default.Instance.TsGame.group_third_floor.RefreshGround(e);break;case _.FacilityType.third_floor_ground1:p.default.Instance.TsGame.group_third_floor&&p.default.Instance.TsGame.group_third_floor.RefreshGround2(e);break;case _.FacilityType.third_floor_ground3:p.default.Instance.TsGame.group_third_floor.eff_snow.active=3==e;break;case _.FacilityType.third_floor_screen3:1==e&&2==this.facility_index?this.node.active=!1:this.node.active=!0;break;case _.FacilityType.backyard_background:p.default.Instance.TsGame.group_backyard.RefreshBackground(e);break;case _.FacilityType.backyard_ground:p.default.Instance.TsGame.group_backyard.RefreshGround(e);break;case _.FacilityType.backyard_pool:if(e>0)switch(p.default.Instance.TsGame.group_backyard.node_water.active=!0,e){case 1:p.default.Instance.TsGame.group_backyard.node_water.y=-455;break;case 2:p.default.Instance.TsGame.group_backyard.node_water.y=-445}else p.default.Instance.TsGame.group_backyard.node_water.active=!1;break;case _.FacilityType.backyard_decorate1:case _.FacilityType.backyard_decorate2:0==p.default.Instance.TsGame.group_backyard.node_eff.active&&(p.default.Instance.TsGame.group_backyard.node_eff.active=!0);break;case _.FacilityType.outdoor_ground:p.default.Instance.TsGame.group_park&&p.default.Instance.TsGame.group_park.RefreshGround(e);break;case _.FacilityType.park_ground_5:p.default.Instance.TsGame.group_park&&p.default.Instance.TsGame.group_park.RefreshGround5();case _.FacilityType.park_ground_1:case _.FacilityType.park_ground_2:case _.FacilityType.park_ground_3:case _.FacilityType.park_ground_4:p.default.Instance.TsGame.group_park.JudgeSnow();break;case _.FacilityType.park_decorate2:p.default.Instance.TsGame.group_park.FacilityLight(!0);break;case _.FacilityType.escort_door:case _.FacilityType.escort_ground:p.default.Instance.TsGame.group_escort.RefreshEscort(this.facility_type,e);break;case _.FacilityType.exhibition_table:case _.FacilityType.exhibition_wall:p.default.Instance.TsGame.group_exhibition.RefreshExhibition(this.facility_type,e)}},l([v(cc.Animation)],t.prototype,"ani",void 0),l([b],t)}(cc.Component);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],node_park_sedan:[function(e,t,n){"use strict";cc._RF.push(t,"59b75D/t0BM7pbY/QlKv2wt","node_park_sedan");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"3e577jo8G9G7bNwEcORfXOM","node_park_sedan");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("FunctionManager"),p=o("GameManger"),f=o("PoolManager"),_=o("StoragerManager"),y=o("TypeManager"),b=cc._decorator,v=b.ccclass,m=b.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.spine=null,t.btn_interact=null,t.group_bar=null,t.bar_2=null,t.label_time=null,t.move_speed=120,t.pos_3=cc.v2(195,-1200),t.max_time=21600,t}return s(t,e),t.prototype.start=function(){this.btn_interact.on(cc.Node.EventType.TOUCH_END,this.click,this)},t.prototype.onEnable=function(){1==this.spine.node.activeInHierarchy&&(this.ChangeAni(this.animation),this.ChangeSkin(this.skin)),null!=this.animation&&this.spine.animation!=this.animation&&1==this.spine.node.active&&this.spine.setAnimation(0,this.animation,!0)},t.prototype.Update=function(e){if(this.node.x==this.coord.x&&this.node.y==this.coord.y||(this.node.setPosition(this.coord),this.node.zIndex=3e3-Math.floor(this.node.y)),1==this.group_bar.active){_.default.Instance.ParkSedanTime[this.facility_type]-=e;var t=Math.ceil(_.default.Instance.ParkSedanTime[this.facility_type]);if(t<=0)t=0,this.group_bar.active=!1,this.come_back();else{var n=h.default.Instance.TimecFormat2(t);this.label_time.string!=n&&(this.label_time.string=n,this.bar_2.fillRange=1-t/this.max_time)}}},t.prototype.Init=function(e){this.facility_type=e;var t=_.default.Instance.Facility[this.facility_type];switch(null==t&&(t={used_lv:1,buy_record:[1]}),this.pos_1=d.default.Instance.Facility1Information[this.facility_type].data[t.used_lv-1].coord.clone(),this.pos_2=cc.v2(195,this.pos_1.y),this.facility_type){case y.FacilityType.park_sedan_1:this.birth=1;break;case y.FacilityType.park_sedan_2:this.birth=2;break;case y.FacilityType.park_sedan_3:this.birth=3;break;case y.FacilityType.park_sedan_4:this.birth=4;break;case y.FacilityType.park_sedan_5:this.birth=5}this.spine.node.active=!1;var n=_.default.Instance.ParkSedanTime[this.facility_type];null==n?this.change_state(1):n>0?this.change_state(2):this.change_state(3),this.group_bar.setParent(p.default.Instance.TsGame.group_park.node),this.group_bar.setPosition(this.pos_1),this.group_bar.y+=50},t.prototype.change_state=function(e){switch(this.state=e,this.coord=this.pos_1,this.state){case 1:this.coord=this.pos_1,this.spine.node.active=!0,this.group_bar.active=!1,this.facility_type==y.FacilityType.park_sedan_5?u.default.Instance.LoadSpriteFrame("ParkUI","game/btn_3",this.btn_interact.children[0]):u.default.Instance.LoadSpriteFrame("ParkUI","game/btn_2",this.btn_interact.children[0]),this.ChangeAni("standby_1"),this.lake();break;case 2:this.group_bar.active=!0,this.btn_interact.active=!1;var t=Math.ceil(_.default.Instance.ParkSedanTime[this.facility_type]);this.label_time.string=h.default.Instance.TimecFormat2(t),this.bar_2.fillRange=1-t/this.max_time;break;case 3:this.coord=this.pos_1,this.spine.node.active=!0,this.group_bar.active=!1,u.default.Instance.LoadSpriteFrame("ParkUI","game/btn_1",this.btn_interact.children[0]),this.ChangeAni("standby_1"),this.zhaodai()}},t.prototype.zhaodai=function(){return this.btn_interact.active=!0},t.prototype.lake=function(){return this.btn_interact.active=!0},t.prototype.click=function(){switch(this.state){case 1:break;case 3:this.guest(),this.btn_interact.active=!1,_.default.Instance.ParkSedanTime[this.facility_type]=null}},t.prototype.go=function(){var e=this;this.btn_interact.active=!1,this.spine.node.scaleX=1,this.ChangeAni("walk"),this.tween([this.pos_2,this.pos_3]).call(function(){e.spine.node.active=!1,_.default.Instance.ParkSedanTime[e.facility_type]=e.max_time,_.default.Instance.AutoSyncData(!1),e.change_state(2)}).start()},t.prototype.come_back=function(){var e=this;this.spine.node.scaleX=-1,this.coord=this.pos_3,this.node.setPosition(this.coord),this.spine.node.active=!0,this.ChangeAni("walk"),this.tween([this.pos_2,this.pos_1]).call(function(){e.ChangeAni("standby_1"),e.change_state(3),e.spine.node.scaleX=1}).start()},t.prototype.guest=function(){cc.tween(this).delay(2).call(this.change_state.bind(this,1)).start(),this.award()},t.prototype.award=function(){},t.prototype.RefreshLv=function(e,t){this.facility_type==y.FacilityType.park_sedan_5?this.ChangeSkin("skin_"+e):this.ChangeSkin("skin"+e),1==t&&(f.default.Instance.PlaySmokeEffect(this.node,!1,!1,!0),this.ani.play())},t.prototype.ChangeAni=function(e){null!=e&&(this.animation=e,1==this.spine.node.activeInHierarchy&&this.animation!=this.spine.animation&&this.spine.setAnimation(0,this.animation,!0))},t.prototype.ChangeSkin=function(e){null!=e&&(this.skin=e,1==this.spine.node.activeInHierarchy&&this.spine.setSkin(this.skin))},t.prototype.tween=function(e){for(var t=cc.tween(this),n=this.move_speed,o=0;o<e.length;o++){var a;a=0==o?h.default.Instance.Distance(this.coord,e[o]):h.default.Instance.Distance(e[o-1],e[o]),t=t.to(a/n,{Coord:e[o]})}return t},Object.defineProperty(t.prototype,"Coord",{get:function(){return this.coord},set:function(e){this.coord=e},enumerable:!1,configurable:!0}),l([m(cc.Animation)],t.prototype,"ani",void 0),l([m(sp.Skeleton)],t.prototype,"spine",void 0),l([m(cc.Node)],t.prototype,"btn_interact",void 0),l([m(cc.Node)],t.prototype,"group_bar",void 0),l([m(cc.Sprite)],t.prototype,"bar_2",void 0),l([m(cc.Label)],t.prototype,"label_time",void 0),l([v],t)}(cc.Component);i.default=g,cc._RF.pop(),cc._RF.pop()},{}],node_staff:[function(e,t,n){"use strict";cc._RF.push(t,"2d9535IY51LEp+Dhq32w6fp","node_staff");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"545f6lhxYpMMrdzKuxcTjZz","node_staff");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("TypeManager"),h=cc._decorator,p=h.ccclass,f=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.node_main=null,t.node_click=null,t.spine_receive=null,t.node_dialog=null,t.ani_fish=null,t.icon_eff=null,t.tips_rest=null,t.pro_handling=null,t}return s(t,e),t.prototype.start=function(){this.node_click.on(cc.Node.EventType.TOUCH_END,this.click,this),cc.systemEvent.on(d.DistributedEvent.hide_dialog,this.hide_dialog,this)},t.prototype.onEnable=function(){this.animation&&this.spine.animation!=this.animation&&this.spine.setAnimation(0,this.animation,!0)},t.prototype.hide_dialog=function(){0!=this.node_dialog.active&&(this.node_dialog.active=!1)},t.prototype.click=function(){},t.prototype.Init=function(e,t,n){var o=this;switch(this.staff_id=e,this.ts=t,this.node.setPosition(n),this.last_pos_x=this.node.x,this.animation="walk_1",7!=e&&(this.node_click.active=!1),this.node_main.active=!1,this.spine_receive.active=!1,this.node_dialog.active=!1,this.ani_fish.node.active=!1,this.pro_handling.node.active=!1,this.node.zIndex=3e3-Math.floor(this.node.y),this.staff_id){case 1:this.node.children[0].setPosition(-5.6,6);break;case 7:case 8:this.animation="standby_1";break;case 12:case 13:this.node.zIndex=8e3;break;case 16:case 17:case 18:case 19:case 20:case 22:case 24:this.spine.node.setScale(1.25);break;case 21:case 23:this.spine.node.setScale(1.3);break;case 25:this.spine.node.setScale(1.35);break;case 26:this.spine.node.setScale(1);break;case 104:case 105:case 106:this.spine.node.setScale(1.3)}this.icon_eff.active=!1,this.tips_rest.active=!1,this.RefreshEffect(),u.default.Instance.LoadRoleSpine("staff_spine","staff_"+e,this.spine,function(){1==o.node.activeInHierarchy&&o.spine.setAnimation(0,o.animation,!0)})},t.prototype.RefreshEffect=function(){7!=this.staff_id&&(this.icon_eff.active=!1)},t.prototype.RefreshIcon=function(){0==this.node_main.active&&(this.node_main.active=!0);try{u.default.Instance.LoadSpriteFrame("course","main_course_"+this.ts.TsDishes.order_data.main_dishes[0],this.node_main.children[0])}catch(e){u.default.Instance.LoadSpriteFrame("course","main_course_5",this.node_main.children[0])}},t.prototype.change_behavior=function(){switch(this.behavior){case d.StaffBehavior.move_kitchen:case d.StaffBehavior.move_station:case d.StaffBehavior.move_table:case d.StaffBehavior.return_station:case d.StaffBehavior.move_bed:case d.StaffBehavior.move_counter:case d.StaffBehavior.move_canteen2:case d.StaffBehavior.move_booth:this.ChnageAnimation("walk_1"),1==this.pro_handling.node.active&&(this.pro_handling.node.active=!1),this.hide_tips();break;case d.StaffBehavior.move_canteen:switch(this.staff_id){case 2:case 11:this.ChnageAnimation("movement_2");break;case 3:case 9:this.ChnageAnimation("movement_1")}break;case d.StaffBehavior.wait_work:case d.StaffBehavior.wait_talk:this.IdleAnimation(),this.JudgeReceiveSpine(!1),4==this.staff_id&&(this.pro_handling.node.active=!1);break;case d.StaffBehavior.clear_table:switch(this.staff_id){case 2:this.ChnageAnimation("movement_5"),this.spine.node.scaleX=Math.abs(this.spine.node.scaleX);break;case 9:this.ChnageAnimation("movement_3"),this.spine.node.scaleX=Math.abs(this.spine.node.scaleX);break;case 11:this.ChnageAnimation("movement_4")}break;case d.StaffBehavior.clean_rubbish:switch(this.ts.BoothId){case 2:case 3:case 5:case 10:case 11:case 17:this.spine.node.scaleX=-Math.abs(this.spine.node.scaleX);break;case 9:case 13:case 18:case 19:this.spine.node.scaleX=Math.abs(this.spine.node.scaleX)}this.ChnageAnimation("movement_1");break;case d.StaffBehavior.clear_bed:this.ChnageAnimation("movement_1");break;case d.StaffBehavior.order_food:switch(this.staff_id){case 2:this.ChnageAnimation("movement_1");break;case 9:this.ChnageAnimation("movement_2");break;case 11:this.ChnageAnimation("movement_1")}break;case d.StaffBehavior.settle_accounts:case d.StaffBehavior.check_in:case d.StaffBehavior.additional_cargo:this.ChnageAnimation("movement_1");break;case d.StaffBehavior.cook_dinner:switch(this.ChnageAnimation("movement_1"),this.staff_id){case 12:case 13:case 14:case 15:this.spine.node.scaleX=-Math.abs(this.spine.node.scaleX);break;default:this.spine.node.scaleX=Math.abs(this.spine.node.scaleX)}4!=this.staff_id&&27!=this.staff_id||(this.pro_handling.node.active=!0),this.hide_tips();break;case d.StaffBehavior.wash_dishes:case d.StaffBehavior.greet_guests:this.ChnageAnimation("movement_1"),this.hide_tips();break;case d.StaffBehavior.serve_table:1==this.node_main.active&&(this.node_main.active=!1)}},t.prototype.IdleAnimation=function(){switch(this.staff_id){case 106:this.ChnageAnimation("movement_2");break;default:this.ChnageAnimation("standby_1")}if(this.behavior==d.StaffBehavior.wait_work){switch(this.staff_id){case 2:case 4:case 5:case 11:case 28:this.spine.node.scaleX=Math.abs(this.spine.node.scaleX);break;case 12:case 13:case 106:this.spine.node.scaleX=-Math.abs(this.spine.node.scaleX)}this.tips_rest.active=!1,this.ani_fish.node.active=!1,7!=this.staff_id&&(this.node_click.active=!1)}},t.prototype.ChnageAnimation=function(e,t){void 0===t&&(t=!0),this.animation=e,1==this.node.activeInHierarchy&&this.spine.setAnimation(0,this.animation,t)},t.prototype.Move=function(e){this.last_pos_x>e.x&&this.spine.node.scaleX>0?(this.spine.node.scaleX=-Math.abs(this.spine.node.scaleX),null!=this.node_main&&(this.node_main.scaleX=-Math.abs(this.node_main.scaleX),this.node_main.x=-34)):this.last_pos_x<e.x&&this.spine.node.scaleX<0&&(this.spine.node.scaleX=Math.abs(this.spine.node.scaleX),null!=this.node_main&&(this.node_main.scaleX=Math.abs(this.node_main.scaleX),this.node_main.x=34)),this.node.zIndex=3e3-Math.floor(this.node.y),this.node.setPosition(e),this.last_pos_x=e.x},t.prototype.RefreshBar=function(e,t){e>0&&0==this.pro_handling.node.active?(this.pro_handling.node.active=!0,this.pro_handling.progress=1,this.node.activeInHierarchy):0==e&&1==this.pro_handling.node.active&&(this.pro_handling.node.active=!1),this.pro_handling.progress=e/t},t.prototype.hide_tips=function(){1==this.tips_rest.active&&(this.tips_rest.active=!1,this.ani_fish.node.active=!1,this.node_click.active=!1)},t.prototype.JudgeReceiveSpine=function(e){7==this.staff_id&&this.spine_receive.active!=e&&(this.spine_receive.active=e,this.node_dialog.active=e)},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},set:function(e){this.behavior=e,this.change_behavior()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Scence",{get:function(){return this.scence},set:function(e){this.scence=e},enumerable:!1,configurable:!0}),l([f(sp.Skeleton)],t.prototype,"spine",void 0),l([f(cc.Node)],t.prototype,"node_main",void 0),l([f(cc.Node)],t.prototype,"node_click",void 0),l([f(cc.Node)],t.prototype,"spine_receive",void 0),l([f(cc.Node)],t.prototype,"node_dialog",void 0),l([f(cc.Animation)],t.prototype,"ani_fish",void 0),l([f(cc.Node)],t.prototype,"icon_eff",void 0),l([f(cc.Node)],t.prototype,"tips_rest",void 0),l([f(cc.ProgressBar)],t.prototype,"pro_handling",void 0),l([p],t)}(cc.Component);i.default=_,cc._RF.pop(),cc._RF.pop()},{}],passerby_item:[function(e,t,n){"use strict";cc._RF.push(t,"5cddbI0hDhMupQh5qRVRja4","passerby_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"240c5ACZZ5Cu7iQyJ3rGhmd","passerby_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("FunctionManager"),h=o("GameManger"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.animation="walk_1",t.origin=cc.v2(),t.destination=cc.v2(),t.path1=[cc.v2(-1100,-360),cc.v2(1100,-360)],t.path2=[cc.v2(-600,-600),cc.v2(-140,-600),cc.v2(-140,-350),cc.v2(-330,-300),cc.v2(-330,60),cc.v2(600,60)],t}return s(t,e),t.prototype.onEnable=function(){this.spine.setAnimation(0,this.animation,!0)},t.prototype.Init=function(e){var t,n=this;switch(this.scence_area=e,this.scence_area){case p.ScenceArea.doorway:t=this.path1,this.node.setParent(h.default.Instance.TsGame.group_doorway.container2);break;case p.ScenceArea.backyard:t=this.path2,this.node.setParent(h.default.Instance.TsGame.group_backyard.container2)}this.origin.y=-360-100*Math.random(),this.destination.y=this.origin.y+40*Math.random()-20,this.coord=this.origin;var o=[1,4,5,6,7],a=Math.floor(998*Math.random())%o.length;switch(this.skin_id=o[a],this.skin_id){case 5:case 6:this.move_speed=100;break;default:this.move_speed=150}this.last_pos_x=this.coord.x,this.node.setPosition(this.coord),this.node.active=!0,u.default.Instance.LoadRoleSpine("guest_spine","guest_"+this.skin_id,this.spine,function(){n.spine.setAnimation(0,n.animation,!0)});var i=[];if(Math.random()>.5)for(var r=0;r<t.length;r++)i.push(t[r]);else for(r=t.length-1;r>=0;r--)i.push(t[r]);this.coord=i[0].clone(),this.node.setPosition(this.coord),this.node.zIndex=3e3-Math.floor(this.node.y),i.splice(0,1),this.tween(i).call(function(){n.node.active=!1}).start()},t.prototype.update=function(){this.move()},t.prototype.move=function(){this.node.x==this.coord.x&&this.node.y==this.coord.y||(this.last_pos_x>this.coord.x&&this.spine.node.scaleX>0?this.spine.node.scaleX=-1:this.last_pos_x<this.coord.x&&this.spine.node.scaleX<0&&(this.spine.node.scaleX=1),this.node.setPosition(this.coord),this.last_pos_x=this.coord.x,this.node.zIndex=3e3-Math.floor(this.node.y))},t.prototype.tween=function(e){for(var t=cc.tween(this),n=0;n<e.length;n++){var o,a=e[n].clone();switch(this.scence_area){case p.ScenceArea.doorway:a.y+=Math.floor(100*Math.random()-50);break;case p.ScenceArea.backyard:a.x+=Math.floor(100*Math.random()-40),a.y+=Math.floor(100*Math.random()-40)}o=0==n?d.default.Instance.Distance(this.coord,a):d.default.Instance.Distance(e[n-1],a),t=t.to(o/this.move_speed,{Coord:a})}return t},Object.defineProperty(t.prototype,"Coord",{get:function(){return this.coord},set:function(e){this.coord=e},enumerable:!1,configurable:!0}),l([y(sp.Skeleton)],t.prototype,"spine",void 0),l([_],t)}(cc.Component);i.default=b,cc._RF.pop(),cc._RF.pop()},{}],pool2_item:[function(e,t,n){"use strict";cc._RF.push(t,"89b61nRNa1P9I8FdgVBOraH","pool2_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"2b80dhqEFJEkIzCsHfF+860","pool2_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("PoolManager"),p=cc._decorator,f=p.ccclass,_=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.pool_1=null,t.pool_2=null,t.eff=null,t}return s(t,e),t.prototype.Init=function(e){this.facility_data=d.default.Instance.Facility1Information[e],this.pool_2.zIndex=10,this.eff.zIndex=15},t.prototype.RefreshLv=function(e,t){switch(this.lv=e,this.node.setPosition(this.facility_data.data[this.lv-1].coord),this.node.zIndex=3e3-Math.floor(this.node.y+20),u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_pool_"+this.lv+"_1",this.pool_1),u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_pool_"+this.lv+"_2",this.pool_2),this.lv){case 3:this.pool_1.setPosition(-3.7,82);break;default:this.pool_1.setPosition(-6,88.5)}1==t&&(h.default.Instance.PlaySmokeEffect(this.pool_2,!1,!0,!0),this.ani.play())},t.prototype.White=function(){h.default.Instance.PlaySmokeEffect(this.pool_1,!0,!1,!1),h.default.Instance.PlaySmokeEffect(this.pool_2,!0,!1,!1)},Object.defineProperty(t.prototype,"Lv",{get:function(){return this.lv},set:function(e){this.lv=e},enumerable:!1,configurable:!0}),l([_(cc.Animation)],t.prototype,"ani",void 0),l([_(cc.Node)],t.prototype,"pool_1",void 0),l([_(cc.Node)],t.prototype,"pool_2",void 0),l([_(cc.Node)],t.prototype,"eff",void 0),l([f],t)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],staff104_item:[function(e,t,n){"use strict";cc._RF.push(t,"8fa171RUE9IRbydWho3SwcL","staff104_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"76121ST4AFDdZYeEvdCsXnw","staff104_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=104,this.coord=cc.v2(965,-530),this.ChangeScence(h.ScenceArea.exhibition),this.ChangeBehavior(h.StaffBehavior.move_station)},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case h.StaffBehavior.move_station:this.MoveStand();break;case h.StaffBehavior.wait_work:this.JudgeJob();break;case h.StaffBehavior.settle_accounts:this.InitStaffTime(),255==d.default.Instance.TsGame.group_exhibition.btn_pay1.opacity&&(d.default.Instance.TsGame.group_exhibition.pay1(),this.RefreshStaffTime()),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start()}},t.prototype.JudgeJob=function(){255==d.default.Instance.TsGame.group_exhibition.btn_pay1.opacity?this.ChangeBehavior(h.StaffBehavior.settle_accounts):this.Behavior!=h.StaffBehavior.wait_work&&this.ChangeBehavior(h.StaffBehavior.wait_work)},l([f],t)}(u.default));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],staff105_item:[function(e,t,n){"use strict";cc._RF.push(t,"a8200+IQjFHGJ2YDu609orZ","staff105_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"551e37wtfZIVKKKZ32JaWsz","staff105_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("DataManager"),h=o("FunctionManager"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=105,this.coord=cc.v2(965,-530),this.ChangeScence(p.ScenceArea.exhibition),this.JudgeJob()},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case p.StaffBehavior.move_station:this.MoveStand();break;case p.StaffBehavior.wait_work:this.JudgeJob();break;case p.StaffBehavior.move_booth:null!=this.booth_id?this.MoveTagetPos(d.default.Instance.ExhibitionCleanPos[this.booth_id],function(){t.ChangeBehavior(p.StaffBehavior.clean_rubbish)}):this.JudgeJob();break;case p.StaffBehavior.clean_rubbish:null!=this.booth_id?(this.InitStaffTime(),this.RefreshStaffTime(),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start()):this.JudgeJob()}},t.prototype.JudgeJob=function(){this.booth_id=h.default.Instance.Random(0,d.default.Instance.ExhibitionCleanPos.length),null!=this.booth_id?this.ChangeBehavior(p.StaffBehavior.move_booth):this.Behavior!=p.StaffBehavior.wait_work&&this.ChangeBehavior(p.StaffBehavior.move_station)},l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],staff106_item:[function(e,t,n){"use strict";cc._RF.push(t,"25835iU8PFJu7i1aj7R/Idv","staff106_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"68ffd/0z8RFFIZLeMmHvUv0","staff106_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=106,this.coord=cc.v2(965,-530),this.ChangeScence(h.ScenceArea.exhibition),this.ChangeBehavior(h.StaffBehavior.move_station)},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case h.StaffBehavior.move_station:this.MoveStand();break;case h.StaffBehavior.wait_work:this.JudgeJob();break;case h.StaffBehavior.settle_accounts:this.InitStaffTime(),d.default.Instance.TsGame.group_exhibition.btn_pay2.scale>0&&255==d.default.Instance.TsGame.group_exhibition.btn_pay2.opacity&&this.RefreshStaffTime(),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.ChangeBehavior(h.StaffBehavior.wait_work)}).start();break;case h.StaffBehavior.additional_cargo:this.InitStaffTime(),255==d.default.Instance.TsGame.group_exhibition.btn_stock.opacity&&(d.default.Instance.TsGame.group_exhibition.stock(),this.RefreshStaffTime()),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.ChangeBehavior(h.StaffBehavior.wait_work)}).start()}},t.prototype.JudgeJob=function(){d.default.Instance.TsGame.group_exhibition.btn_pay2.scale>0&&255==d.default.Instance.TsGame.group_exhibition.btn_pay2.opacity?this.ChangeBehavior(h.StaffBehavior.settle_accounts):255==d.default.Instance.TsGame.group_exhibition.btn_stock.opacity?this.ChangeBehavior(h.StaffBehavior.additional_cargo):this.Behavior!=h.StaffBehavior.wait_work&&this.ChangeBehavior(h.StaffBehavior.wait_work)},l([f],t)}(u.default));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],staff10_item:[function(e,t,n){"use strict";cc._RF.push(t,"e35f4xWQsJPtqfuOsW/+/tv","staff10_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"ba05egih2JGHJcdthflQOeI","staff10_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=10,this.coord=cc.v2(-266,-476),this.ChangeScence(h.ScenceArea.second_room1),this.JudgeJob()},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case h.StaffBehavior.move_station:this.MoveStand();break;case h.StaffBehavior.wait_work:this.JudgeJob();break;case h.StaffBehavior.move_table:this.StandMoveTable();break;case h.StaffBehavior.move_counter:this.MoveStand(h.StaffBehavior.check_in);break;case h.StaffBehavior.check_in:this.InitStaffTime(),255==d.default.Instance.TsGame.group_second_floor.btn_check_in.opacity&&(d.default.Instance.TsGame.group_second_floor.CheckIn(!0),this.RefreshStaffTime()),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start();break;case h.StaffBehavior.settle_accounts:this.InitStaffTime(),null!=this.ts_table&&null!=this.ts_table.TsTeam&&0==this.ts_table.Paying&&(this.ts_table.Pay(!1),this.RefreshStaffTime()),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){var e=t.ts_table;t.JudgeJob(),d.default.Instance.TsGame.JudgeStaffToTable(h.WorkWarn.clear_table3,e)}).start()}},t.prototype.JudgeJob=function(){null!=this.ts_table&&(this.ts_table.TsStaff=null),null!=this.ts_dishes&&(this.ts_dishes.ts_staff=null);var e=d.default.Instance.TsGame.GetTableByState(h.WorkWarn.pay_money3);null!=e?(e.TsStaff=this,this.ts_table=e,this.ChangeBehavior(h.StaffBehavior.move_table)):255==d.default.Instance.TsGame.group_second_floor.btn_check_in.opacity?this.ChangeBehavior(h.StaffBehavior.move_counter):this.Behavior!=h.StaffBehavior.wait_work&&this.ChangeBehavior(h.StaffBehavior.move_station)},l([f],t)}(u.default));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],staff11_item:[function(e,t,n){"use strict";cc._RF.push(t,"22c3464FadCO5NpE5LmrlKr","staff11_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"8197chy4m1LipINQN460YM6","staff11_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("FunctionManager"),h=o("GameManger"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=11,this.coord=cc.v2(-266,-476),this.dishes_pos=cc.v2(40,13),this.ChangeScence(p.ScenceArea.second_canteen),this.JudgeJob()},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case p.StaffBehavior.move_station:this.MoveStand();break;case p.StaffBehavior.wait_work:this.JudgeJob();break;case p.StaffBehavior.move_table:this.StandMoveTable();break;case p.StaffBehavior.move_kitchen:this.MoveKitchenTable();break;case p.StaffBehavior.order_food:this.InitStaffTime(),null!=this.ts_table&&(this.ts_table.OrderFood(),this.RefreshStaffTime()),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start();break;case p.StaffBehavior.move_canteen:this.MoveCanteenTable();break;case p.StaffBehavior.serve_food:null!=this.ts_dishes?(this.ts_dishes.ServeFood(),this.ChangeBehavior(p.StaffBehavior.move_canteen)):this.JudgeJob();break;case p.StaffBehavior.serve_table:null!=this.ts_dishes&&this.ts_dishes.click_serving(),cc.tween(this).delay(.3).call(function(){t.JudgeJob()}).start();break;case p.StaffBehavior.clear_table:this.InitStaffTime(),null!=this.ts_table&&this.ts_table.TableTips==p.WorkWarn.clear_table3&&(this.RefreshStaffTime(),this.ts_table.ClearTable(this.time1+this.time2)),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start()}},t.prototype.JudgeJob=function(){null!=this.ts_table&&(this.ts_table.TsStaff=null),null!=this.ts_dishes&&(this.ts_dishes.ts_staff=null);var e=h.default.Instance.TsGame.GetTableByState(p.WorkWarn.order_food3),t=h.default.Instance.TsGame.GetDishesByState(-1,p.ScenceArea.second_canteen),n=h.default.Instance.TsGame.GetTableByState(p.WorkWarn.clear_table3),o=1e5,a=1e5,i=1e5,r=0;if(null!=e&&null==e.TsStaff&&(o=d.default.Instance.Distance(this.coord,e.Coord),r=1),null!=t&&null==t.ts_staff&&(a=d.default.Instance.Distance(this.coord,t.node.getPosition()))<o&&(r=2),null!=n&&null==n.TsStaff)switch(i=d.default.Instance.Distance(this.coord,n.Coord),r){case 0:case 1:i<o&&(r=3);break;case 2:i<a&&(r=3)}switch(r){case 1:e.TsStaff=this,this.TsTable=e,this.ChangeBehavior(p.StaffBehavior.move_table);break;case 2:t.ts_staff=this,this.TsDishes=t,this.ChangeBehavior(p.StaffBehavior.move_kitchen);break;case 3:n.TsStaff=this,this.TsTable=n,this.ChangeBehavior(p.StaffBehavior.move_table);break;default:this.Behavior!=p.StaffBehavior.wait_work&&this.ChangeBehavior(p.StaffBehavior.move_station)}},l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],staff15_item:[function(e,t,n){"use strict";cc._RF.push(t,"3c3f4uMrqlOmrjlt0r2UsWV","staff15_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"cd1cdvJjA5FvZgmoYLc9i9K","staff15_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){var t,n=null!==e&&e.apply(this,arguments)||this;return n.staff_pos=((t={})[15]=cc.v2(140,516),t[16]=cc.v2(-65,555),t[17]=cc.v2(-453,710),t[18]=cc.v2(-333,654),t[19]=cc.v2(-180,754),t[20]=cc.v2(613,-706),t[21]=cc.v2(-672,385),t[22]=cc.v2(45,-425),t[23]=cc.v2(-762,750),t[24]=cc.v2(-35,65),t[25]=cc.v2(-305,-223),t[26]=cc.v2(25,470),t),n}return s(t,e),t.prototype.Init=function(e){switch(this.staff_id=e,this.guest_num=0,this.coord=this.staff_pos[""+this.staff_id],this.staff_id){case 17:d.default.Instance.TsGame&&d.default.Instance.TsGame.group_third_floor&&d.default.Instance.TsGame.group_third_floor.icon_stool2&&(d.default.Instance.TsGame.group_third_floor.icon_stool2.active=!0);break;case 18:d.default.Instance.TsGame&&d.default.Instance.TsGame.group_third_floor&&d.default.Instance.TsGame.group_third_floor.icon_stool1&&(d.default.Instance.TsGame.group_third_floor.icon_stool1.active=!0)}this.ChangeScence(h.ScenceArea.third_canteen),cc.systemEvent.on(h.DistributedEvent.visitor_statistics,this.visitor_statistics,this),cc.systemEvent.on(h.DistributedEvent.departure_statistics,this.departure_statistics,this),this.ChangeBehavior(h.StaffBehavior.wait_work)},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case h.StaffBehavior.wait_work:this.HandlingTime=0,this.JudgeJob();break;case h.StaffBehavior.cook_dinner:this.InitStaffTime(),this.RefreshStaffTime();var n=cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.InitStaffTime(),t.RefreshStaffTime()});cc.tween(this).repeatForever(n).start()}},t.prototype.visitor_statistics=function(e){var t=this;if(this.staff_id==e&&(this.guest_num++,this.behavior==h.StaffBehavior.wait_work))switch(this.ChangeBehavior(h.StaffBehavior.cook_dinner),this.staff_id){case 20:cc.tween(this).delay(1.5).call(function(){t.departure_statistics(t.staff_id)}).start()}},t.prototype.departure_statistics=function(e){this.staff_id==e&&(this.guest_num--,this.guest_num<=0&&this.ChangeBehavior(h.StaffBehavior.wait_work))},t.prototype.JudgeJob=function(){var e=this;if(this.guest_num>0)switch(this.ChangeBehavior(h.StaffBehavior.cook_dinner),this.staff_id){case 20:cc.tween(this).delay(1.5).call(function(){e.departure_statistics(e.staff_id)}).start()}},l([f],t)}(u.default));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],staff1_item:[function(e,t,n){"use strict";cc._RF.push(t,"74381gbgmxM8bEpMSqo9R7G","staff1_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"997a39pVWpDxbYxDORKTXlY","staff1_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},u=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,a,i,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==("undefined"==typeof Symbol?"undefined":r(Symbol))&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var h=o("StaffBase"),p=o("FunctionManager"),f=o("GameManger"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){return u(this,void 0,void 0,function(){return d(this,function(){return this.staff_id=1,this.coord=cc.v2(250,405),this.ChangeScence(_.ScenceArea.first_canteen),this.ChangeBehavior(_.StaffBehavior.move_station),[2]})})},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case _.StaffBehavior.move_station:this.MoveStand();break;case _.StaffBehavior.wait_work:this.JudgeJob();break;case _.StaffBehavior.move_table:this.StandMoveTable();break;case _.StaffBehavior.settle_accounts:this.InitStaffTime(),null!=this.ts_table&&null!=this.ts_table.TsTeam&&0==this.ts_table.Paying?(this.ts_table.Pay(!1),this.RefreshStaffTime(),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){var e=t.ts_table;t.JudgeJob(),4==e.TableVolume?f.default.Instance.TsGame.JudgeStaffToTable(_.WorkWarn.clear_table,e):f.default.Instance.TsGame.JudgeStaffToTable(_.WorkWarn.clear_table2,e)}).start()):this.JudgeJob()}},t.prototype.JudgeJob=function(){null!=this.ts_table&&(this.ts_table.TsStaff=null);var e=f.default.Instance.TsGame.GetTableByState(_.WorkWarn.pay_money),t=f.default.Instance.TsGame.GetTableByState(_.WorkWarn.pay_money2),n=1e5,o=0;switch(null!=e&&null==e.TsStaff&&0==e.Paying&&(n=p.default.Instance.Distance(this.coord,e.node.getPosition()),o=1),null!=t&&null==t.TsStaff&&0==t.Paying&&p.default.Instance.Distance(this.coord,t.node.getPosition())<n&&(o=2),o){case 1:e.TsStaff=this,this.TsTable=e,this.ChangeBehavior(_.StaffBehavior.move_table);break;case 2:t.TsStaff=this,this.TsTable=t,this.ChangeBehavior(_.StaffBehavior.move_table);break;default:this.Behavior!=_.StaffBehavior.wait_work&&this.ChangeBehavior(_.StaffBehavior.move_station)}},l([b],t)}(h.default));i.default=v,cc._RF.pop(),cc._RF.pop()},{}],staff27_item:[function(e,t,n){"use strict";cc._RF.push(t,"af90bgeX41NQYdHX2w7KvSW","staff27_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"a8440F7AJFKC56eWjp+0P5H","staff27_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=27,this.coord=cc.v2(667,410),this.ChangeScence(h.ScenceArea.second_canteen),this.ChangeBehavior(h.StaffBehavior.wait_work)},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case h.StaffBehavior.move_station:break;case h.StaffBehavior.wait_work:this.HandlingTime=0,this.JudgeJob();break;case h.StaffBehavior.cook_dinner:this.InitStaffTime(),this.RefreshStaffTime();var n=cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.InitStaffTime(),t.RefreshStaffTime()});cc.tween(this).repeatForever(n).start()}},t.prototype.JudgeJob=function(){d.default.Instance.TsGame.JudgeStaffJob(27)},l([f],t)}(u.default));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],staff28_item:[function(e,t,n){"use strict";cc._RF.push(t,"5d7a87AqL9DxZ9K50PBp2Sx","staff28_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"36fa9sRJn1GI7ycNAA3oCqb","staff28_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=28,this.coord=cc.v2(-266,-476),this.ChangeScence(h.ScenceArea.second_room1),this.ChangeBehavior(h.StaffBehavior.move_station)},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case h.StaffBehavior.move_station:this.MoveStand();break;case h.StaffBehavior.wait_work:this.JudgeJob();break;case h.StaffBehavior.move_bed:this.StandMoveBed();break;case h.StaffBehavior.clear_bed:this.InitStaffTime(),null!=this.ts_bed&&0==this.ts_bed.cleaning&&255==this.ts_bed.btn_click.opacity&&(this.RefreshStaffTime(),this.ts_bed.CleanBed(this.time1+this.time2)),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start()}},t.prototype.JudgeJob=function(){null!=this.ts_bed&&(this.ts_bed=null);var e=null;for(var t in d.default.Instance.TsGame.bed2_array)if(255==d.default.Instance.TsGame.bed2_array[t].btn_click.opacity&&0==d.default.Instance.TsGame.bed2_array[t].cleaning){e=d.default.Instance.TsGame.bed2_array[t];break}null!=e?(this.ts_bed=e,this.ChangeBehavior(h.StaffBehavior.move_bed)):this.Behavior!=h.StaffBehavior.wait_work&&this.ChangeBehavior(h.StaffBehavior.move_station)},l([f],t)}(u.default));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],staff2_item:[function(e,t,n){"use strict";cc._RF.push(t,"3d57awtNfNKv5l5VuV7OLoI","staff2_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"789bapkJvJGCo1cqcmusp9j","staff2_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("FunctionManager"),h=o("GameManger"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=2,this.dishes_pos=cc.v2(12,12),this.coord=cc.v2(250,405),this.ChangeScence(p.ScenceArea.first_canteen),this.ChangeBehavior(p.StaffBehavior.move_station)},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case p.StaffBehavior.move_station:this.MoveStand();break;case p.StaffBehavior.wait_work:this.JudgeJob();break;case p.StaffBehavior.move_table:this.StandMoveTable();break;case p.StaffBehavior.order_food:this.InitStaffTime(),null!=this.ts_table&&(this.ts_table.OrderFood(),this.RefreshStaffTime()),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start();break;case p.StaffBehavior.move_kitchen:this.MoveKitchenTable();break;case p.StaffBehavior.serve_food:null!=this.ts_dishes?(this.ts_dishes.ServeFood(),this.ChangeBehavior(p.StaffBehavior.move_canteen)):this.JudgeJob();break;case p.StaffBehavior.move_canteen:this.MoveCanteenTable();break;case p.StaffBehavior.serve_table:null!=this.ts_dishes&&this.ts_dishes.click_serving(),cc.tween(this).delay(.3).call(function(){t.JudgeJob()}).start();break;case p.StaffBehavior.clear_table:this.InitStaffTime(),null!=this.ts_table&&(this.RefreshStaffTime(),this.ts_table.ClearTable(this.time1+this.time2)),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start()}},t.prototype.JudgeJob=function(){null!=this.ts_table&&(this.ts_table.TsStaff=null),null!=this.ts_dishes&&(this.ts_dishes.ts_staff=null);var e=h.default.Instance.TsGame.GetTableByState(p.WorkWarn.order_food),t=h.default.Instance.TsGame.GetDishesByState(-1,p.ScenceArea.first_canteen),n=h.default.Instance.TsGame.GetTableByState(p.WorkWarn.clear_table),o=1e5,a=1e5,i=1e5,r=0;if(null!=e&&null==e.TsStaff&&(o=d.default.Instance.Distance(this.coord,e.Coord),r=1),null!=t&&null==t.ts_staff&&(a=d.default.Instance.Distance(this.coord,t.node.getPosition()))<o&&(r=2),null!=n&&null==n.TsStaff)switch(i=d.default.Instance.Distance(this.coord,n.Coord),r){case 0:case 1:i<o&&(r=3);break;case 2:i<a&&(r=3)}switch(r){case 1:e.TsStaff=this,this.TsTable=e,this.ChangeBehavior(p.StaffBehavior.move_table);break;case 2:t.ts_staff=this,this.TsDishes=t,this.ChangeBehavior(p.StaffBehavior.move_kitchen);break;case 3:n.TsStaff=this,this.TsTable=n,this.ChangeBehavior(p.StaffBehavior.move_table);break;default:this.Behavior!=p.StaffBehavior.wait_work&&this.ChangeBehavior(p.StaffBehavior.move_station)}},l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],staff3_item:[function(e,t,n){"use strict";cc._RF.push(t,"a4768+4gRdPIo8SPMG46aQa","staff3_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"bb6c7SqN0dMWZDFXCCGQW8F","staff3_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=3,this.coord=cc.v2(250,405),this.dishes_pos=cc.v2(6,12),this.ChangeScence(h.ScenceArea.first_canteen),this.ChangeBehavior(h.StaffBehavior.move_station)},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case h.StaffBehavior.move_station:this.MoveStand();break;case h.StaffBehavior.wait_work:this.JudgeJob();break;case h.StaffBehavior.move_table:this.StandMoveTable();break;case h.StaffBehavior.move_kitchen:this.MoveKitchenTable();break;case h.StaffBehavior.serve_food:null!=this.ts_dishes?(this.ts_dishes.ServeFood(),this.ChangeBehavior(h.StaffBehavior.move_canteen)):this.JudgeJob();break;case h.StaffBehavior.move_canteen:this.MoveCanteenTable();break;case h.StaffBehavior.serve_table:null!=this.ts_dishes&&this.ts_dishes.click_serving(),cc.tween(this).delay(.3).call(function(){t.JudgeJob()}).start()}},t.prototype.judge_plot=function(){},t.prototype.JudgeJob=function(){null!=this.ts_table&&(this.ts_table.TsStaff=null),null!=this.ts_dishes&&(this.ts_dishes.ts_staff=null);var e=d.default.Instance.TsGame.GetDishesByState(-1,h.ScenceArea.first_canteen);null!=e?(e.ts_staff=this,this.TsDishes=e,this.ChangeBehavior(h.StaffBehavior.move_kitchen)):this.Behavior!=h.StaffBehavior.wait_work&&this.ChangeBehavior(h.StaffBehavior.move_station)},l([f],t)}(u.default));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],staff4_item:[function(e,t,n){"use strict";cc._RF.push(t,"f4dbaaECQxE9aHjZ1TPFrqF","staff4_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"6d562nABxpBeazUux7CgwkW","staff4_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("DataManager"),h=o("GameManger"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=4,this.coord=cc.v2(250,405),this.ChangeScence(p.ScenceArea.first_canteen),this.ChangeBehavior(p.StaffBehavior.move_station)},t.prototype.ChangeBehavior=function(e){var t=this;switch(cc.Tween.stopAllByTarget(this),this.behavior=e,this.behavior){case p.StaffBehavior.move_station:this.MoveStand2(d.default.Instance.StaffPath["staff_"+this.staff_id].stand);break;case p.StaffBehavior.wait_work:this.HandlingTime=0,this.JudgeJob();break;case p.StaffBehavior.cook_dinner:this.InitStaffTime(),this.RefreshStaffTime();var n=cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.InitStaffTime(),t.RefreshStaffTime()});cc.tween(this).repeatForever(n).start();break;case p.StaffBehavior.move_canteen2:this.Coord=cc.v2(-470,200);var o=this.PixelLogic(this.Coord,this.scene),a=cc.v2(21,6);1==this.ts_AStar.findPath(o,a)&&(this.path=this.ts_AStar.path),this.play_tween(this.path,function(){t.ChangeBehavior(p.StaffBehavior.wait_talk)})}},t.prototype.JudgeJob=function(){h.default.Instance.TsGame.JudgeStaffJob(4)},l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],staff5_item:[function(e,t,n){"use strict";cc._RF.push(t,"b5069CSlnpB771325SZNBMy","staff5_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"77497RebHBP/qNFoo1Dc6rC","staff5_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("DataManager"),h=o("FunctionManager"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=5,this.coord=cc.v2(-570,-190),this.ChangeScence(p.ScenceArea.doorway),this.ChangeBehavior(p.StaffBehavior.move_station)},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case p.StaffBehavior.move_station:this.MoveStand2(d.default.Instance.StaffPath["staff_"+this.staff_id].stand);break;case p.StaffBehavior.wait_work:cc.tween(this).delay(10).call(function(){t.behavior==p.StaffBehavior.wait_work&&h.default.Instance.Random(0,100)>=20&&t.ChangeBehavior(p.StaffBehavior.greet_guests)}).start();break;case p.StaffBehavior.greet_guests:cc.tween(this).delay(5).call(function(){t.ChangeBehavior(p.StaffBehavior.wait_work)}).start()}},l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],staff7_item:[function(e,t,n){"use strict";cc._RF.push(t,"e05e38l6A9C/qx8psPFl2Fv","staff7_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"9b5a4/AsthGAZ0QNiZB/ZD6","staff7_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("TypeManager"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=7,this.coord=cc.v2(100,210),this.ChangeScence(d.ScenceArea.first_canteen),this.ChangeBehavior(d.StaffBehavior.wait_work)},t.prototype.ChangeBehavior=function(e){switch(this.behavior=e,this.behavior){case d.StaffBehavior.wait_work:}},l([p],t)}(u.default));i.default=f,cc._RF.pop(),cc._RF.pop()},{}],staff8_item:[function(e,t,n){"use strict";cc._RF.push(t,"9aa85RmOJRGw4ke6Un77dMx","staff8_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"d11d9dOw59AAro78KwKCu4U","staff8_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("GameManger"),h=o("TypeManager"),p=cc._decorator,f=p.ccclass,_=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=8,this.coord=cc.v2(-750,-500),this.ChangeScence(h.ScenceArea.first_kitchen),this.JudgeJob()},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case h.StaffBehavior.wait_work:this.JudgeJob();break;case h.StaffBehavior.wash_dishes:d.default.Instance.TsGame.BowlNum=0,d.default.Instance.IsWash=!0,d.default.Instance.TsGame.group_kitchen.node_clean.active=!0,this.InitStaffTime(),this.RefreshStaffTime(),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){d.default.Instance.IsWash=!1,d.default.Instance.TsGame.group_kitchen.node_clean.active=!1,t.JudgeJob()}).start()}},t.prototype.JudgeJob=function(){d.default.Instance.TsGame.BowlNum>0?this.ChangeBehavior(h.StaffBehavior.wash_dishes):this.Behavior!=h.StaffBehavior.wait_work&&this.ChangeBehavior(h.StaffBehavior.wait_work)},l([f],t)}(u.default));i.default=_,cc._RF.pop(),cc._RF.pop()},{}],staff9_item:[function(e,t,n){"use strict";cc._RF.push(t,"9343fJGGPBNMbx9mKpeJSKh","staff9_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"ea044nwoUdFhqvOeH4euRIw","staff9_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("StaffBase"),d=o("FunctionManager"),h=o("GameManger"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(){this.staff_id=9,this.coord=cc.v2(250,405),this.dishes_pos=cc.v2(12,12),this.ChangeScence(p.ScenceArea.first_canteen),this.ChangeBehavior(p.StaffBehavior.move_station)},t.prototype.ChangeBehavior=function(e){var t=this;switch(this.behavior=e,this.behavior){case p.StaffBehavior.move_station:this.MoveStand();break;case p.StaffBehavior.wait_work:this.JudgeJob();break;case p.StaffBehavior.move_table:this.StandMoveTable();break;case p.StaffBehavior.move_kitchen:this.MoveKitchenTable();break;case p.StaffBehavior.order_food:this.InitStaffTime(),null!=this.ts_table&&(this.ts_table.OrderFood(),this.RefreshStaffTime()),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start();break;case p.StaffBehavior.move_canteen:this.MoveCanteenTable();break;case p.StaffBehavior.serve_food:null!=this.ts_dishes?(this.ts_dishes.ServeFood(),this.ChangeBehavior(p.StaffBehavior.move_canteen)):this.JudgeJob();break;case p.StaffBehavior.serve_table:null!=this.ts_dishes&&this.ts_dishes.click_serving(),cc.tween(this).delay(.3).call(function(){t.JudgeJob()}).start();break;case p.StaffBehavior.clear_table:this.InitStaffTime(),null!=this.ts_table&&(this.RefreshStaffTime(),this.ts_table.ClearTable(this.time1+this.time2)),cc.tween(this).to(this.time1,{HandlingTime:this.time2}).to(this.time2,{HandlingTime:0}).call(function(){t.JudgeJob()}).start()}},t.prototype.JudgeJob=function(){null!=this.ts_table&&(this.ts_table.TsStaff=null),null!=this.ts_dishes&&(this.ts_dishes.ts_staff=null);var e=h.default.Instance.TsGame.GetTableByState(p.WorkWarn.order_food2),t=h.default.Instance.TsGame.GetDishesByState(-1,p.ScenceArea.first_canteen),n=h.default.Instance.TsGame.GetTableByState(p.WorkWarn.clear_table2),o=1e5,a=1e5,i=1e5,r=0;if(null!=e&&null==e.TsStaff&&(o=d.default.Instance.Distance(this.coord,e.Coord),r=1),null!=t&&null==t.ts_staff&&(a=d.default.Instance.Distance(this.coord,t.node.getPosition()))<o&&(r=2),null!=n&&null==n.TsStaff)switch(i=d.default.Instance.Distance(this.coord,n.Coord),r){case 0:case 1:i<o&&(r=3);break;case 2:i<a&&(r=3)}switch(r){case 1:e.TsStaff=this,this.TsTable=e,this.ChangeBehavior(p.StaffBehavior.move_table);break;case 2:t.ts_staff=this,this.TsDishes=t,this.ChangeBehavior(p.StaffBehavior.move_kitchen);break;case 3:n.TsStaff=this,this.TsTable=n,this.ChangeBehavior(p.StaffBehavior.move_table);break;default:this.Behavior!=p.StaffBehavior.wait_work&&this.ChangeBehavior(p.StaffBehavior.move_station)}},l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],table4_item:[function(e,t,n){"use strict";cc._RF.push(t,"fcf7bZ/aCJKmJD+BuFH/7Et","table4_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"077696TGjhEz4YyfXJe63KA","table4_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("PoolManager"),p=o("StoragerManager"),f=cc._decorator,_=f.ccclass,y=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.table=null,t.stool_array=[],t}return s(t,e),t.prototype.Init=function(e){this.lv=p.default.Instance.Facility[e].used_lv,this.facility_data=d.default.Instance.Facility1Information[e],this.table.zIndex=this.table.getSiblingIndex();for(var t=0;t<this.stool_array.length;t++)this.stool_array[t].zIndex=this.stool_array[t].getSiblingIndex()},t.prototype.RefreshLv=function(e,t){this.lv=e,this.node.setPosition(this.facility_data.data[this.lv-1].coord),this.node.zIndex=3e3-Math.floor(this.node.y+20),u.default.Instance.LoadSpriteFrame("ThirdFloor","facility/third_floor_table_"+this.lv,this.table);for(var n=0;n<this.stool_array.length;n++){var o=this.stool_array[n];switch(n){case 0:case 2:u.default.Instance.LoadSpriteFrame("ThirdFloor","facility/stool_vertical_"+this.lv,o);break;case 1:case 3:u.default.Instance.LoadSpriteFrame("ThirdFloor","facility/stool_across_"+this.lv,o)}}1==t&&(this.ani.play(),h.default.Instance.PlaySmokeEffect(this.table,!1,!0,!0))},t.prototype.White=function(){h.default.Instance.PlaySmokeEffect(this.table,!0,!1,!1);for(var e=0;e<this.stool_array.length;e++)h.default.Instance.PlaySmokeEffect(this.stool_array[e],!0,!1,!1)},l([y(cc.Animation)],t.prototype,"ani",void 0),l([y(cc.Node)],t.prototype,"table",void 0),l([y([cc.Node])],t.prototype,"stool_array",void 0),l([_],t)}(cc.Component);i.default=b,cc._RF.pop(),cc._RF.pop()},{}],table_item:[function(e,t,n){"use strict";cc._RF.push(t,"b2eabZ/kR1CX5vV6/kUpztI","table_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"cf61823RhNFNK1AhcVx70/I","table_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("GameManger"),p=o("PoolManager"),f=o("SoundManager"),_=o("TypeManager"),y=cc._decorator,b=y.ccclass,v=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.btn_click=null,t.icon_btn=null,t.table=null,t.stool_array=[],t.main_course=[],t.second_course=[],t.rice=[],t.icon_leftovers=null,t.spine_clean=null,t}return s(t,e),t.prototype.start=function(){this.btn_click.on(cc.Node.EventType.TOUCH_END,this.click,this)},t.prototype.Init=function(e,t){this.table_id=e,this.table_volume=t,this.paying=!1,this.cleaning=!1,this.warn_time=-8,this.RefreshCourse1(!1),this.RefreshCourse2(!1),this.refresh_rice(!1),this.ChangeTips(_.WorkWarn.null),this.btn_click.zIndex=15,this.spine_clean.node.zIndex=20,this.spine_clean.node.active=!1,this.icon_leftovers.active=!1,this.table.zIndex=this.table.getSiblingIndex();for(var n=0;n<this.stool_array.length;n++)this.stool_array[n].zIndex=this.stool_array[n].getSiblingIndex();this.spine_clean.node.zIndex=this.spine_clean.node.getSiblingIndex(),cc.systemEvent.on(_.DistributedEvent.dishes_serving,this.serve_food,this)},t.prototype.OrderFood=function(){this.ChangeTips(_.WorkWarn.null),this.ts_team.change_behavior(_.Team11Behavior.order_food)},t.prototype.SetOrderData=function(e){this.order_data={table_id:this.table_id,main_dishes:e.main_dishes}},t.prototype.serve_food=function(e){this.table_id==e&&(this.RefreshCourse1(!0),this.RefreshCourse2(!0),this.ts_team.change_behavior(_.Team11Behavior.food))},t.prototype.EmptyCourse=function(){this.RefreshCourse1(null),this.RefreshCourse2(null)},t.prototype.RefreshCourse1=function(e){switch(this.table_main_course=e,this.table_main_course){case!0:this.main_course[0].active=!0,u.default.Instance.LoadSpriteFrame("course","main_course_"+this.OrderData.main_dishes,this.main_course[0]),8==this.table_volume&&(this.main_course[1].active=!0);break;default:for(var t=0;t<this.main_course.length;t++)this.main_course[t].active=!1;null==this.table_main_course&&(this.icon_leftovers.active=!0)}1==this.table_main_course&&this.refresh_rice(this.table_main_course)},t.prototype.RefreshCourse2=function(e){this.table_second_course=e;for(var t=0;t<this.second_course.length;t++)switch(this.table_second_course){case!0:this.second_course[t].active=!0;var n=Math.floor(996*Math.random())%35+1;u.default.Instance.LoadSpriteFrame("course","second_course_"+n,this.second_course[t]);break;default:this.second_course[t].active=!1}1==this.table_second_course&&this.refresh_rice(this.table_second_course)},t.prototype.refresh_rice=function(e){if(this.table_rice!=e&&0!=this.rice.length)if(this.table_rice=e,1==this.table_rice)try{for(var t=0;t<this.TsTeam.GuestArray.length;t++){var n=this.TsTeam.GuestArray[t];this.rice[n.Seat-1].active=!0}}catch(s){console.error("\u7c73\u996d\u663e\u793a\u62a5\u9519===",s)}else for(var o=0;o<this.rice.length;o++)this.rice[o].active=!1},t.prototype.RefreshLv=function(e,t){this.lv=e;var n=this.lv-1;switch(n<0&&(n=0),this.coord=d.default.Instance.Facility1Information[this.TableId].data[n].coord,this.node.setPosition(this.coord),this.table_volume){case 4:this.node.zIndex=3e3-Math.floor(this.node.y+20);break;case 8:case 6:this.node.zIndex=3e3-Math.floor(this.node.y-20)}1==t&&(this.ani.play(),p.default.Instance.PlaySmokeEffect(this.table,!1,!0,!0)),this.judeg_side_circle(),this.draw_table()},t.prototype.White=function(){p.default.Instance.PlaySmokeEffect(this.table,!0,!1,!1);for(var e=0;e<this.stool_array.length;e++)p.default.Instance.PlaySmokeEffect(this.stool_array[e],!0,!1,!1)},t.prototype.Pay=function(){switch(this.table_volume){case 4:this.ChangeTips(_.WorkWarn.clear_table);break;case 8:this.ChangeTips(_.WorkWarn.clear_table2);break;case 6:this.ChangeTips(_.WorkWarn.clear_table3)}this.ts_team.change_behavior(_.Team11Behavior.leave)},t.prototype.ClearTable=function(e){var t=this;this.cleaning=!0,this.spine_clean.node.active=!0,this.ChangeTips(_.WorkWarn.null),1==this.node.activeInHierarchy&&f.default.Instance.PlayLoop("sweep_"+this.table_id,!0,"sweep"),cc.tween(this).delay(e).call(function(){t.ts_team=null,t.paying=!1,t.cleaning=!1,t.spine_clean.node.active=!1,t.icon_leftovers.active=!1,h.default.Instance.TsGame.BowlNum+=1,t.RefreshCourse1(!1),t.RefreshCourse2(!1),t.refresh_rice(!1),f.default.Instance.PlayLoop("sweep_"+t.table_id,!1,"sweep")}).start()},t.prototype.click=function(){if(1!=this.click_cooling)switch(this.table_tips){case _.WorkWarn.order_food:case _.WorkWarn.order_food2:case _.WorkWarn.order_food3:this.OrderFood();break;case _.WorkWarn.pay_money:case _.WorkWarn.pay_money2:case _.WorkWarn.pay_money3:this.Pay(!0);break;case _.WorkWarn.clear_table:case _.WorkWarn.clear_table2:case _.WorkWarn.clear_table3:this.ClearTable(6);break;case _.WorkWarn.guest_story:this.ChangeTips(_.WorkWarn.null),this.ts_team.Story()}},t.prototype.ChangeTips=function(e){var t=this;if(this.table_tips!=e){switch(this.table_tips=e,this.table_tips){case _.WorkWarn.null:1==this.btn_click.active&&(this.click_cooling=!0,null==this.btn_ani&&(this.btn_ani=this.btn_click.getComponent(cc.Animation)),this.btn_ani.play(),cc.tween(this).delay(.25).call(function(){t.btn_click.active=!1,t.click_cooling=!1}).start()),this.count_down=-7;break;case _.WorkWarn.order_food:case _.WorkWarn.order_food2:case _.WorkWarn.order_food3:u.default.Instance.LoadSpriteFrame("Bundle2UI","GameUI/game/icon_1",this.icon_btn),this.btn_click.active=!0,this.count_down=7;break;case _.WorkWarn.pay_money:case _.WorkWarn.pay_money2:case _.WorkWarn.pay_money3:u.default.Instance.LoadSpriteFrame("Bundle2UI","GameUI/game/icon_3",this.icon_btn),this.btn_click.active=!0,this.count_down=7;break;case _.WorkWarn.clear_table:case _.WorkWarn.clear_table2:case _.WorkWarn.clear_table3:u.default.Instance.LoadSpriteFrame("Bundle2UI","GameUI/game/icon_4",this.icon_btn),this.btn_click.active=!0,this.count_down=7;break;case _.WorkWarn.guest_story:u.default.Instance.LoadSpriteFrame("Bundle2UI","GameUI/game/icon_9",this.icon_btn),this.btn_click.active=!0,this.count_down=-7}this.btn_click.active=!1}},t.prototype.draw_table=function(){switch(this.TableId){case _.FacilityType.table_1:case _.FacilityType.table_2:case _.FacilityType.table_3:case _.FacilityType.table_4:u.default.Instance.LoadSpriteFrame("furniture_"+this.lv,"table4_"+this.lv,this.table);for(var e=0;e<this.stool_array.length;e++){var t=this.stool_array[e];switch(e){case 0:case 2:u.default.Instance.LoadSpriteFrame("furniture_"+this.lv,"stool_across4_"+this.lv,t);break;case 1:case 3:u.default.Instance.LoadSpriteFrame("furniture_"+this.lv,"stool_vertical4_"+this.lv,t)}}break;case _.FacilityType.room1_tabel:case _.FacilityType.room2_tabel:case _.FacilityType.room3_tabel:for(u.default.Instance.LoadSpriteFrame("furniture_"+this.lv,"room_tabel_"+this.lv,this.table),e=0;e<this.stool_array.length;e++)t=this.stool_array[e],u.default.Instance.LoadSpriteFrame("furniture_"+this.lv,"room_stool_"+this.lv,t);break;case _.FacilityType.second_floor_table1:case _.FacilityType.second_floor_table2:for(u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_table_"+this.lv,this.table),e=0;e<this.stool_array.length;e++)switch(t=this.stool_array[e],e){case 0:case 3:u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_table_"+this.lv+"_stool2",t);break;default:u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_table_"+this.lv+"_stool1",t)}}this.ts_team&&this.ts_team.JudgeTable&&this.ts_team.JudgeTable()},t.prototype.judeg_side_circle=function(){if(8==this.table_volume){var e;switch(this.lv){case 1:case 3:case 5:case 6:case 7:e=!0;break;case 2:case 4:e=!1}if(this.is_side!=e){this.is_side=e;var t=void 0;switch(this.is_side){case!0:t=d.default.Instance.SideData,u.default.Instance.LoadSpriteFrame("Bundle2UI","GameUI/game/icon_12",this.icon_leftovers);break;default:t=d.default.Instance.CircleData,u.default.Instance.LoadSpriteFrame("Bundle2UI","GameUI/game/icon_13",this.icon_leftovers)}for(var n=0;n<this.stool_array.length;n++)this.stool_array[n].setPosition(t.stool[n]);for(var o=0;o<this.main_course.length;o++)this.main_course[o].setPosition(t.main_course[o]);for(var a=0;a<this.second_course.length;a++)this.second_course[a].setPosition(t.second_course[a]);for(var i=0;i<this.rice.length;i++)this.rice[i].setPosition(t.rice[i])}}},Object.defineProperty(t.prototype,"TableId",{get:function(){return this.table_id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TableVolume",{get:function(){return this.table_volume},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TableMainSourse",{get:function(){return this.table_main_course},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TableSecondCourse",{get:function(){return this.table_second_course},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TableTips",{get:function(){return this.table_tips},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"OrderData",{get:function(){return this.order_data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Paying",{get:function(){return this.paying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Coord",{get:function(){return this.coord},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Lv",{get:function(){return this.lv},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsSide",{get:function(){return this.is_side},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTeam",{get:function(){return this.ts_team},set:function(e){this.ts_team=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsStaff",{get:function(){return this.ts_staff},set:function(e){this.ts_staff=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cleaning",{get:function(){return this.cleaning},set:function(e){this.cleaning=e},enumerable:!1,configurable:!0}),l([v(cc.Animation)],t.prototype,"ani",void 0),l([v(cc.Node)],t.prototype,"btn_click",void 0),l([v(cc.Node)],t.prototype,"icon_btn",void 0),l([v(cc.Node)],t.prototype,"table",void 0),l([v([cc.Node])],t.prototype,"stool_array",void 0),l([v([cc.Node])],t.prototype,"main_course",void 0),l([v([cc.Node])],t.prototype,"second_course",void 0),l([v([cc.Node])],t.prototype,"rice",void 0),l([v(cc.Node)],t.prototype,"icon_leftovers",void 0),l([v(sp.Skeleton)],t.prototype,"spine_clean",void 0),l([b],t)}(cc.Component);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],task_item:[function(e,t,n){"use strict";cc._RF.push(t,"2bb8aYX6aVOBo5DX7q5fZrd","task_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"15577uen49K64/Xc0FMTy9/","task_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("MainInterface"),d=o("BundleManger"),h=o("DataManager"),p=o("FunctionManager"),f=o("GameManger"),_=o("InfoManager"),y=o("PoolManager"),b=o("StoragerManager"),v=o("TypeManager"),m=o("UIManager"),g=o("FacilityInterface"),I=o("ShopLvInterface"),T=cc._decorator,k=T.ccclass,S=T.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon_sprite=null,t.icon_finish=null,t.btn=null,t.label_tips=null,t.label_award=null,t}return s(t,e),t.prototype.start=function(){this.btn.on(cc.Node.EventType.TOUCH_END,this.click,this)},t.prototype.Init=function(e,t,n){this.task_data=e,this.index=t,this.ts=n,this.label_award.string="x"+this.task_data.award_gold;var o=!1;switch(this.task_data.task_type){case v.TaskType.shop:if(b.default.Instance.ShopLv>=this.task_data.value1)this.icon_finish.active=!0;else{this.icon_finish.active=!1;var a=h.default.Instance.ShopUpgradeData[e.value1];f.default.Instance.BarbecueStar>=a.upgrade_condition&&(o=!0)}this.label_tips.string="\u5ba2\u6808\u7b49\u7ea7\u5230\u8fbe\uff1a"+this.task_data.value1,d.default.Instance.LoadSpriteFrame("Bundle1UI","MainUI/badge_"+(Math.floor(this.task_data.value1/10)+1),this.icon_sprite);break;case v.TaskType.lv:b.default.Instance.BarbecueLv.length>=this.task_data.value1?this.icon_finish.active=!0:this.icon_finish.active=!1;var i=f.default.Instance.getRealLevel(this.task_data.value1);this.label_tips.string="\u5b8c\u6210\u5173\u5361\uff1a\u7b2c"+i+"\u5173",d.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/icon_lv",this.icon_sprite);break;case v.TaskType.area:var r=b.default.Instance.AreaUnlock[this.task_data.value1];if(r&&1==r.unlock)this.icon_finish.active=!0;else{this.icon_finish.active=!1;var c=p.default.Instance.JudgeAreaUnlock(e.value1),s=h.default.Instance.ScenceData[e.value1];1==c&&f.default.Instance.BarbecueStar>=s.facility_unlock[0]&&(o=!0)}var l=h.default.Instance.ScenceData[this.task_data.value1].name;this.label_tips.string="\u89e3\u9501\u533a\u57df\uff1a"+l,d.default.Instance.LoadSpriteFrame("Bundle2UI","ShopLvUI/icon_"+this.task_data.value1,this.icon_sprite);break;case v.TaskType.facility:var u=b.default.Instance.Facility[this.task_data.value1];if(u&&1==u.buy_record[this.task_data.value2])this.icon_finish.active=!0;else{this.icon_finish.active=!1,c=p.default.Instance.JudegFacilityUnlock(e.value1,e.value2);var _=h.default.Instance.Facility1Information[e.value1];1==c&&b.default.Instance.GoldNum>=_.unlock_price*(.5*e.value2+1)&&(o=!0)}var y=h.default.Instance.Facility1Information[this.task_data.value1],m=h.default.Instance.ScenceData[y.location].name;this.label_tips.string="\u89e3\u9501\uff1a"+m+"-"+y.data[this.task_data.value2].name;var g=this.task_data.value2+1;switch(this.task_data.value1){case v.FacilityType.room1_tabel:case v.FacilityType.room2_tabel:case v.FacilityType.room3_tabel:d.default.Instance.LoadSpriteFrame("BunldleFacility","res/table8_"+g,this.icon_sprite);break;case v.FacilityType.second_floor_table1:case v.FacilityType.second_floor_table2:d.default.Instance.LoadSpriteFrame("BunldleFacility","res/second_floor_table_"+g,this.icon_sprite);break;case v.FacilityType.park_sedan_1:case v.FacilityType.park_sedan_2:case v.FacilityType.park_sedan_3:case v.FacilityType.park_sedan_4:d.default.Instance.LoadSpriteFrame("BunldleFacility","res/park_sedan_1_"+g,this.icon_sprite);break;default:d.default.Instance.LoadSpriteFrame("BunldleFacility","res/"+p.default.Instance.FacilityUrl(this.task_data.value1)+"_"+g,this.icon_sprite)}}switch(this.icon_finish.active){case!0:this.btn.children[1].active=!1,d.default.Instance.LoadSpriteFrame("Bundle1UI","CommonUI/common/btn_bg7",this.btn),d.default.Instance.LoadSpriteFrame("Bundle2UI","FacilityUI/text_4",this.btn.children[0]);break;case!1:this.btn.children[1].active=o,d.default.Instance.LoadSpriteFrame("Bundle1UI","CommonUI/common/btn_bg6",this.btn),d.default.Instance.LoadSpriteFrame("Bundle2UI","FacilityUI/text_5",this.btn.children[0])}},t.prototype.click=function(){switch(this.icon_finish.active){case!0:this.award();break;case!1:this.skip()}},t.prototype.award=function(){var e;switch(this.task_data.task_type){case v.TaskType.facility:e=this.task_data.task_type+"_"+this.task_data.value1+"_"+this.task_data.value2;break;default:e=this.task_data.task_type+"_"+this.task_data.value1}var t=b.default.Instance.BarbecueLv.length+1;LWGSDK.reportGeneralAction({context:"",actionName:"taskReward",actNum1:t,actText1:e,success:function(){},fail:function(){}}),b.default.Instance.TaskRecord[e]=!0,b.default.Instance.Tasking.splice(this.index,1),b.default.Instance.GoldNum+=this.task_data.award_gold;var n=this.node.convertToWorldSpaceAR(cc.v2(0,0)),o=_.default.Instance.TsInitial.node.convertToNodeSpaceAR(n);y.default.Instance.PlayCurrencyEffects2(1,o,cc.v2(20,580+f.default.Instance.ScreenAdaptive),null);var a=p.default.Instance.TaskExtract();a&&b.default.Instance.Tasking.push(a),this.ts.draw(),b.default.Instance.AutoSyncData(!1,!0),cc.systemEvent.emit(v.DistributedEvent.task)},t.prototype.skip=function(){switch(this.task_data.task_type){case v.TaskType.shop:m.default.Instance.OpenUI(I.default,m.UIOrder.Window_2);break;case v.TaskType.lv:var e=m.default.Instance.GetUI(u.default);e&&e.OpenGame(b.default.Instance.BarbecueLv.length+1);break;case v.TaskType.area:m.default.Instance.OpenUI(g.default,m.UIOrder.Window_2,this.task_data.value1);break;case v.TaskType.facility:m.default.Instance.OpenUI(g.default,m.UIOrder.Window_2,null,this.task_data.value1,this.task_data.value2)}this.ts.close()},l([S(cc.Node)],t.prototype,"icon_sprite",void 0),l([S(cc.Node)],t.prototype,"icon_finish",void 0),l([S(cc.Node)],t.prototype,"btn",void 0),l([S(cc.Label)],t.prototype,"label_tips",void 0),l([S(cc.Label)],t.prototype,"label_award",void 0),l([k],t)}(cc.Component);i.default=w,cc._RF.pop(),cc._RF.pop()},{}],tea2_item:[function(e,t,n){"use strict";cc._RF.push(t,"441f9l38LdPW4KlVaSfs85q","tea2_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"98510RMH/VLo6ZKrYWBOWRZ","tea2_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("BundleManger"),d=o("DataManager"),h=o("PoolManager"),p=o("StoragerManager"),f=o("TypeManager"),_=cc._decorator,y=_.ccclass,b=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.table=null,t.stool_array=[],t}return s(t,e),t.prototype.Init=function(e){switch(this.lv=p.default.Instance.Facility[""+e].used_lv,this.facility_data=d.default.Instance.Facility1Information[e],this.tea_id=e,e){case f.FacilityType.second_floor_tea1:this.stool_array[0].setPosition(-126,-51),this.stool_array[1].setPosition(115,-51);break;case f.FacilityType.second_floor_tea2:this.stool_array[0].setPosition(-130,-15),this.stool_array[1].setPosition(125,-15)}},t.prototype.RefreshLv=function(e,t){switch(this.lv=e,this.node.setPosition(this.facility_data.data[this.lv-1].coord),this.node.zIndex=3e3-Math.floor(this.node.y+20),this.tea_id){case f.FacilityType.second_floor_tea1:u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_tea1_"+this.lv,this.table),u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_stool1_"+this.lv,this.stool_array[0]),u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_stool1_"+this.lv,this.stool_array[1]);break;case f.FacilityType.second_floor_tea2:u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_tea2_"+this.lv,this.table),u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_stool2_"+this.lv,this.stool_array[0]),u.default.Instance.LoadSpriteFrame("SecondFloor","facility/second_floor_stool2_"+this.lv,this.stool_array[1])}1==t&&(this.ani.play(),h.default.Instance.PlaySmokeEffect(this.table,!1,!0,!0))},t.prototype.White=function(){h.default.Instance.PlaySmokeEffect(this.table,!0,!1,!1);for(var e=0;e<this.stool_array.length;e++)h.default.Instance.PlaySmokeEffect(this.stool_array[e],!0,!1,!1)},Object.defineProperty(t.prototype,"Lv",{get:function(){return this.lv},set:function(e){this.lv=e},enumerable:!1,configurable:!0}),l([b(cc.Animation)],t.prototype,"ani",void 0),l([b(cc.Node)],t.prototype,"table",void 0),l([b([cc.Node])],t.prototype,"stool_array",void 0),l([y],t)}(cc.Component);i.default=v,cc._RF.pop(),cc._RF.pop()},{}],team11_item:[function(e,t,n){"use strict";cc._RF.push(t,"43718BTyANIvL+NpPMYTAIE","team11_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"72abcDCJ+pG5JiX5OVZxeL7","team11_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TeamBase"),d=o("DataManager"),h=o("GameManger"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.is_order=!1,t}return s(t,e),t.prototype.Init=function(e,t,n){var o=this;this.init_data(e,t.id),this.ts_table=n,this.ts_table.TsTeam=this,this.is_order=!1,this.behavior=null,this.change_behavior(p.Team11Behavior.move_1);var a=[1,2,3,4];a.sort(function(){return Math.random()-.5});for(var i=function(e){var n=e;cc.tween(r).delay(.8*n).call(function(){var i=h.default.Instance.GameController.FoundGuesr("guest11_item");i.Init(n,a[n],t.array[e],o,o.origin),o.guest_array.push(i)}).start()},r=this,c=0;c<t.array.length;c++)i(c)},t.prototype.Update=function(e){for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].Update(e);this.story_time>0&&(this.story_time-=e,this.story_time<=0&&(null!=this.DialogueBox&&this.DialogueBox.Hide3(),this.DialogueBox=this.storysing(this.speak_data[this.story_index].str,this.guest_array[this.speak_data[this.story_index].index].node),this.story_index++,this.story_index>=this.speak_data.length?(this.story_time=-1.5,h.default.Instance.GuestStory=null,h.default.Instance.TsGame.story_time=120):this.story_time=1.5))},t.prototype.change_behavior=function(e){var t=this;if(this.behavior!=e){switch(this.behavior=e,this.guest_behavior_num=0,this.behavior){case p.Team11Behavior.wait_order_food:this.ts_table.ChangeTips(p.WorkWarn.order_food);break;case p.Team11Behavior.order_food:this.random_order();break;case p.Team11Behavior.wait_pay:this.ts_table.EmptyCourse(),this.ts_table.ChangeTips(p.WorkWarn.pay_money),h.default.Instance.TsGame.JudgeStaffToTable(p.WorkWarn.pay_money,this.ts_table);break;case p.Team11Behavior.leave:h.default.Instance.TsGame.JudgeStaffToTable(p.WorkWarn.clear_table)}for(var n=function(e){var n=o.guest_array[e],a=.3+.3*Math.random();cc.tween(o).delay(a).call(function(){n.ChangeBehavior(t.behavior)}).start()},o=this,a=0;a<this.guest_array.length;a++)n(a)}},t.prototype.guest_behavior_over=function(e,t){if(this.team_id==e.TsTeam.TeamId&&this.behavior==t&&(this.guest_behavior_num++,this.guest_behavior_num>=this.guest_array.length)){switch(t){case p.Team11Behavior.move_1:this.change_behavior(p.Team11Behavior.wait_order_food),h.default.Instance.TsGame.JudgeStaffToTable(p.WorkWarn.order_food,this.ts_table),h.default.Instance.TsGame.story_time>0||null==h.default.Instance.GuestStory&&null!=d.default.Instance.GuestStorySpeak["guest_array_"+this.guest_team_type]&&Math.random()>.5&&(h.default.Instance.GuestStory=this.team_id);break;case p.Team11Behavior.wait_food:h.default.Instance.GuestStory==this.team_id&&this.ts_table.ChangeTips(p.WorkWarn.guest_story);break;case p.Team11Behavior.food:this.change_behavior(p.Team11Behavior.wait_pay),h.default.Instance.GuestStory==this.team_id&&(h.default.Instance.GuestStory=null,h.default.Instance.TsGame.story_time=120);break;case p.Team11Behavior.leave:for(var n=0;n<this.guest_array.length;n++){var o=this.guest_array[n];o.node.active=!1,o.node.setParent(null)}h.default.Instance.TsGame.TeamLeave(this.team_id,11),this.ts_table.TsTeam,this.ts_table=null}this.guest_behavior_num=0}},t.prototype.random_order=function(){var e=this;if(1!=this.is_order){this.is_order=!0;var t=Math.floor(600*Math.random())%30+1,n={table_id:this.ts_table.TableId,main_dishes:[t]};this.ts_table.SetOrderData(n);for(var o=1.6*this.guest_array.length,a=function(t){var n=i.guest_array[t];cc.tween(n).delay(.8*t).call(function(){n.BeganSing(e.random_kebab())}).delay(.8*i.guest_array.length).call(function(){n.BeganSing(e.random_kebab())}).start()},i=this,r=0;r<this.guest_array.length;r++)a(r);cc.tween(this).delay(o).call(function(){e.change_behavior(p.Team11Behavior.wait_food),h.default.Instance.TsGame.addCookFood(n)}).start()}},t.prototype.sing_order=function(){for(var e=this,t=1.6*this.guest_array.length,n=function(t){var n=o.guest_array[t];cc.tween(n).delay(.8*t).call(function(){n.BeganSing(e.random_kebab())}).delay(.8*o.guest_array.length).call(function(){n.BeganSing(e.random_kebab())}).start()},o=this,a=0;a<this.guest_array.length;a++)n(a);cc.tween(this).delay(t).call(function(){h.default.Instance.GudieStep=301}).start()},t.prototype.storysing=function(e,t){var n=h.default.Instance.GameController.FoundDialogueBox();return null!=h.default.Instance.GudieStep?n.Show3(e,1.5,t):n.Show3(e,2,t),n},t.prototype.Story=function(){var e=this;h.default.Instance.GameController.HideDialogueBox(),h.default.Instance.GuestStory=-1*Math.abs(h.default.Instance.GuestStory);var t=cc.tween(this).delay(1),n=d.default.Instance.GuestStorySpeak["guest_array_"+this.guest_team_type],o=3;null!=h.default.Instance.GudieStep&&(o=1.5);for(var a=function(a){var i=n[a];t=t.call(function(){e.storysing(i.str,e.guest_array[i.index].node)}).delay(o)},i=0;i<n.length;i++)a(i);t.call(function(){h.default.Instance.GuestStory=null,h.default.Instance.TsGame.story_time=120}).start()},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTable",{get:function(){return this.ts_table},enumerable:!1,configurable:!0}),l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],team12_item:[function(e,t,n){"use strict";cc._RF.push(t,"c1ae0Ekrx1P4q6Gg6YDz9z5","team12_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"6c430/ldslLH5H4Ttd+8hL0","team12_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TeamBase"),d=o("DataManager"),h=o("GameManger"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.is_order=!1,t}return s(t,e),t.prototype.Init=function(e,t,n){var o=this;this.init_data(e,n.id),this.ts_table=t,this.ts_table.TsTeam=this,this.is_order=!1,this.behavior=null,this.change_behavior(p.Team11Behavior.move_1);var a=[1,2,3,4,5,6,7,8];a.sort(function(){return Math.random()-.5});for(var i=function(e){var t=e;cc.tween(r).delay(.5*t).call(function(){var i=h.default.Instance.GameController.FoundGuesr("guest12_item");i.Init(t,a[t],n.array[e],o,o.origin),o.guest_array.push(i)}).start()},r=this,c=0;c<n.array.length;c++)i(c)},t.prototype.Update=function(e){for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].Update(e)},t.prototype.change_behavior=function(e){var t=this;if(this.behavior!=e){switch(this.behavior=e,this.guest_behavior_num=0,this.behavior){case p.Team11Behavior.wait_order_food:this.ts_table.ChangeTips(p.WorkWarn.order_food2),h.default.Instance.TsGame.JudgeStaffToTable(p.WorkWarn.order_food2,this.ts_table);break;case p.Team11Behavior.order_food:this.random_order();break;case p.Team11Behavior.wait_pay:this.ts_table.EmptyCourse(),h.default.Instance.TsGame.JudgeStaffToTable(p.WorkWarn.pay_money2,this.ts_table);break;case p.Team11Behavior.leave:h.default.Instance.TsGame.JudgeStaffToTable(p.WorkWarn.clear_table2,this.ts_table)}for(var n=function(e){var n=o.guest_array[e],a=.3+.3*Math.random();cc.tween(o).delay(a).call(function(){n.ChangeBehavior(t.behavior)}).start()},o=this,a=0;a<this.guest_array.length;a++)n(a)}},t.prototype.guest_behavior_over=function(e,t){if(this.team_id==e.TsTeam.TeamId&&this.behavior==t&&(this.guest_behavior_num++,this.guest_behavior_num>=this.guest_array.length)){switch(t){case p.Team11Behavior.move_1:this.change_behavior(p.Team11Behavior.wait_order_food),h.default.Instance.TsGame.story_time>0||null==h.default.Instance.GuestStory&&null!=d.default.Instance.GuestStorySpeak["guest_array_"+this.guest_team_type]&&Math.random()>.5&&(h.default.Instance.GuestStory=this.team_id);break;case p.Team11Behavior.wait_food:h.default.Instance.GuestStory==this.team_id&&null==h.default.Instance.GudieStep&&this.ts_table.ChangeTips(p.WorkWarn.guest_story);break;case p.Team11Behavior.food:this.ts_table.ChangeTips(p.WorkWarn.pay_money2),this.change_behavior(p.Team11Behavior.wait_pay),h.default.Instance.GuestStory==this.team_id&&(h.default.Instance.GuestStory=null,h.default.Instance.TsGame.story_time=120);break;case p.Team11Behavior.leave:for(var n=0;n<this.guest_array.length;n++){var o=this.guest_array[n];o.node.active=!1,o.node.setParent(null)}h.default.Instance.TsGame.TeamLeave(this.team_id,12),this.ts_table.TsTeam,this.ts_table=null}this.guest_behavior_num=0}},t.prototype.random_order=function(){var e=this;if(1!=this.is_order){this.is_order=!0;var t={table_id:this.ts_table.TableId,main_dishes:[1]};this.ts_table.SetOrderData(t);var n=0;if(null!=h.default.Instance.GudieStep){n=.8*this.guest_array.length;for(var o=function(t){var n=a.guest_array[t];cc.tween(n).delay(.8*t).call(function(){n.BeganSing(e.random_kebab())}).start()},a=this,i=0;i<this.guest_array.length;i++)o(i)}else{n=1.6*this.guest_array.length;var r=function(t){var n=c.guest_array[t];cc.tween(n).delay(.8*t).call(function(){n.BeganSing(e.random_kebab())}).delay(.8*c.guest_array.length).call(function(){n.BeganSing(e.random_kebab())}).start()},c=this;for(i=0;i<this.guest_array.length;i++)r(i)}cc.tween(this).delay(n).call(function(){e.change_behavior(p.Team11Behavior.wait_food),h.default.Instance.TsGame.addCookFood(t)}).start()}},t.prototype.storysing=function(e,t){var n=h.default.Instance.GameController.FoundDialogueBox();null!=h.default.Instance.GudieStep?n.Show3(e,1.5,t):n.Show3(e,2,t)},t.prototype.Story=function(){var e=this;h.default.Instance.GameController.HideDialogueBox(),h.default.Instance.GuestStory=-1*Math.abs(h.default.Instance.GuestStory);for(var t=cc.tween(this).delay(1),n=d.default.Instance.GuestStorySpeak["guest_array_"+this.guest_team_type],o=function(o){var a=n[o];t=t.call(function(){e.storysing(a.str,e.guest_array[a.index].node)}).delay(3)},a=0;a<n.length;a++)o(a);t.call(function(){h.default.Instance.GuestStory=null,h.default.Instance.TsGame.story_time=120}).start()},t.prototype.JudgeTable=function(){for(var e=0;e<this.guest_array.length;e++){var t=this.guest_array[e];null!=t.have_eat_pos&&t.sit_down()}},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTable",{get:function(){return this.ts_table},enumerable:!1,configurable:!0}),l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],team21_item:[function(e,t,n){"use strict";cc._RF.push(t,"a3933pK8PZHrbCYmVC2Ncfq","team21_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"1b8a5E2UFBPXJgvT3S4yDuI","team21_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TeamBase"),d=o("DataManager"),h=o("GameManger"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.is_order=!1,t}return s(t,e),t.prototype.Init=function(e,t,n){var o=this;this.init_data(e,t.id),this.ts_table=n,this.ts_table.TsTeam=this,this.is_order=!1,this.behavior=null,this.change_behavior(p.Team11Behavior.move_1);var a=[1,2,3,4,5,6];a.sort(function(){return Math.random()-.5});for(var i=function(e){var n=e;cc.tween(r).delay(.8*n).call(function(){var i=h.default.Instance.GameController.FoundGuesr("guest21_item");o.guest_array.push(i),i.Init(n,a[n],t.array[e],o,o.origin)}).start()},r=this,c=0;c<t.array.length;c++)i(c)},t.prototype.Update=function(e){for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].Update(e)},t.prototype.change_behavior=function(e){var t=this;if(this.behavior!=e){switch(this.behavior=e,this.guest_behavior_num=0,this.behavior){case p.Team11Behavior.wait_order_food:this.ts_table.ChangeTips(p.WorkWarn.order_food3),h.default.Instance.TsGame.JudgeStaffToTable(p.WorkWarn.order_food3,this.ts_table);break;case p.Team11Behavior.order_food:this.random_order();break;case p.Team11Behavior.wait_pay:this.ts_table.EmptyCourse(),h.default.Instance.TsGame.JudgeStaffToTable(p.WorkWarn.pay_money3,this.ts_table);break;case p.Team11Behavior.leave:h.default.Instance.TsGame.JudgeStaffToTable(p.WorkWarn.clear_table3,this.ts_table)}for(var n=function(e){var n=o.guest_array[e],a=.3+.3*Math.random();cc.tween(o).delay(a).call(function(){n.ChangeBehavior(t.behavior)}).start()},o=this,a=0;a<this.guest_array.length;a++)n(a)}},t.prototype.guest_behavior_over=function(e,t){if(this.team_id==e.TsTeam.TeamId&&this.behavior==t&&(this.guest_behavior_num++,this.guest_behavior_num>=this.guest_array.length)){switch(t){case p.Team11Behavior.move_1:this.change_behavior(p.Team11Behavior.wait_order_food),h.default.Instance.TsGame.story_time>0||null==h.default.Instance.GuestStory&&null!=d.default.Instance.GuestStorySpeak["guest_array_"+this.guest_team_type]&&Math.random()>.5&&(h.default.Instance.GuestStory=this.team_id);break;case p.Team11Behavior.wait_food:h.default.Instance.GuestStory==this.team_id&&this.ts_table.ChangeTips(p.WorkWarn.guest_story);break;case p.Team11Behavior.food:this.ts_table.ChangeTips(p.WorkWarn.pay_money3),this.change_behavior(p.Team11Behavior.wait_pay),h.default.Instance.GuestStory==this.team_id&&(h.default.Instance.GuestStory=null,h.default.Instance.TsGame.story_time=120);break;case p.Team11Behavior.leave:for(var n=0;n<this.guest_array.length;n++){var o=this.guest_array[n];o.node.active=!1,o.node.setParent(null)}h.default.Instance.TsGame.TeamLeave(this.team_id,21),this.ts_table.TsTeam,this.ts_table=null;break;default:return}this.guest_behavior_num=0}},t.prototype.random_order=function(){var e=this;if(1!=this.is_order){this.is_order=!0;var t={table_id:this.ts_table.TableId,main_dishes:[1]};this.ts_table.SetOrderData(t);for(var n=1.6*this.guest_array.length,o=function(t){var n=a.guest_array[t];cc.tween(n).delay(.8*t).call(function(){n.BeganSing(e.random_kebab())}).delay(.8*a.guest_array.length).call(function(){n.BeganSing(e.random_kebab())}).start()},a=this,i=0;i<this.guest_array.length;i++)o(i);cc.tween(this).delay(n).call(function(){e.change_behavior(p.Team11Behavior.wait_food),h.default.Instance.TsGame.addCookFood2(t)}).start()}},t.prototype.storysing=function(e,t){h.default.Instance.GameController.FoundDialogueBox().Show3(e,2,t)},t.prototype.Story=function(){var e=this;h.default.Instance.GameController.HideDialogueBox(),h.default.Instance.GuestStory=-1*Math.abs(h.default.Instance.GuestStory);for(var t=cc.tween(this).delay(1),n=d.default.Instance.GuestStorySpeak["guest_array_"+this.guest_team_type],o=function(o){var a=n[o];t=t.call(function(){e.storysing(a.str,e.guest_array[a.index].node)}).delay(3)},a=0;a<n.length;a++)o(a);t.call(function(){h.default.Instance.GuestStory=null,h.default.Instance.TsGame.story_time=120}).start()},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TsTable",{get:function(){return this.ts_table},enumerable:!1,configurable:!0}),l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],team22_item:[function(e,t,n){"use strict";cc._RF.push(t,"4930dzwH4FGv6RRCthQdM/1","team22_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"1ae9a9BlFtPI4x1wyzfKiFB","team22_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TeamBase"),d=o("DataManager"),h=o("GameManger"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(e,t,n){var o=this;this.init_data(e,t.id),this.counter_id=null,this.LookRoom(n),this.behavior=null,this.change_behavior(p.Team22Behavior.move_1);var a=[1,2];a.sort(function(){return Math.random()-.5});for(var i=function(e){var n=e;cc.tween(r).delay(.8*n).call(function(){var i=h.default.Instance.GameController.FoundGuesr("guest22_item");o.guest_array.push(i),i.Init(n,a[n],t.array[e],o,o.origin)}).start()},r=this,c=0;c<t.array.length;c++)i(c)},t.prototype.LookRoom=function(e){switch(this.ts_bed=e,this.area=d.default.Instance.Facility1Information[this.ts_bed.bed_id].location,this.ts_bed.TsTeam=this,this.area){case p.ScenceArea.second_room1:this.ts_tea=h.default.Instance.TsGame.tea2_array[p.FacilityType.second_floor_tea1],this.ts_pool=null;break;case p.ScenceArea.second_room2:this.ts_tea=h.default.Instance.TsGame.tea2_array[p.FacilityType.second_floor_tea2],this.ts_pool=h.default.Instance.TsGame.pool2_array[p.FacilityType.second_floor_pool]}},t.prototype.Update=function(e){for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].Update(e)},t.prototype.change_behavior=function(e){var t=this;if(this.behavior!=e){switch(this.behavior=e,this.guest_behavior_num=0,this.behavior){case p.Team22Behavior.move_4:this.next();break;case p.Team22Behavior.queue_counter:this.judge_counter(),0==this.counter_id&&this.change_behavior(p.Team22Behavior.wait_check_in);break;case p.Team22Behavior.leave:}for(var n=function(e){var n=o.guest_array[e],a=.1+1*Math.random();switch(o.behavior){case p.Team22Behavior.move_7:a=.1}cc.tween(o).delay(a).call(function(){n.ChangeBehavior(t.behavior)}).start()},o=this,a=0;a<this.guest_array.length;a++)n(a)}},t.prototype.guest_behavior_over=function(e,t){var n=this;if(this.team_id==e.TsTeam.TeamId&&this.behavior==t&&(this.guest_behavior_num++,this.guest_behavior_num>=this.guest_array.length)){switch(t){case p.Team22Behavior.move_1:this.judge_counter(),this.change_behavior(p.Team22Behavior.move_3);break;case p.Team22Behavior.move_3:0==this.counter_id?this.change_behavior(p.Team22Behavior.wait_check_in):this.change_behavior(p.Team22Behavior.queue_counter);break;case p.Team22Behavior.wait_check_in:h.default.Instance.TsGame.group_second_floor.ShowBtn(this);break;case p.Team22Behavior.check_in:this.change_behavior(p.Team22Behavior.move_4);break;case p.Team22Behavior.move_4:this.change_behavior(p.Team22Behavior.stroll);break;case p.Team22Behavior.stroll:null!=this.ts_tea?this.change_behavior(p.Team22Behavior.move_5):null!=this.ts_pool?this.change_behavior(p.Team22Behavior.move_6):this.change_behavior(p.Team22Behavior.move_7);break;case p.Team22Behavior.move_5:null==this.ts_tea?null!=this.ts_pool?this.change_behavior(p.Team22Behavior.move_6):this.change_behavior(p.Team22Behavior.move_7):this.change_behavior(p.Team22Behavior.tea);break;case p.Team22Behavior.tea:null!=this.ts_pool?this.change_behavior(p.Team22Behavior.move_6):this.change_behavior(p.Team22Behavior.move_7);break;case p.Team22Behavior.move_6:this.change_behavior(p.Team22Behavior.have_bath);break;case p.Team22Behavior.have_bath:this.change_behavior(p.Team22Behavior.move_7),this.ts_pool.eff.active=!1;break;case p.Team22Behavior.move_7:this.change_behavior(p.Team22Behavior.sleep);break;case p.Team22Behavior.sleep:cc.tween(this).delay(2).call(function(){n.ts_bed.ShowBtn()}).start(),this.change_behavior(p.Team22Behavior.leave);break;case p.Team22Behavior.leave:for(var o=0;o<this.guest_array.length;o++){var a=this.guest_array[o];a.node.active=!1,a.node.setParent(null)}h.default.Instance.TsGame.TeamLeave(this.team_id,22)}this.guest_behavior_num=0}},t.prototype.next=function(){for(var e=0;e<h.default.Instance.TsGame.team22_array.length;e++){var t=h.default.Instance.TsGame.team22_array[e];if(t.team_id!=this.team_id)switch(t.behavior){case p.Team22Behavior.queue_counter:t.change_behavior(p.Team22Behavior.wait_check_in)}}},t.prototype.judge_counter=function(){for(var e=!0,t=0;t<h.default.Instance.TsGame.team22_array.length;t++){var n=h.default.Instance.TsGame.team22_array[t];if(n.team_id!=this.team_id)switch(n.behavior){case p.Team22Behavior.move_3:case p.Team22Behavior.wait_check_in:case p.Team22Behavior.check_in:e=!1}}this.counter_id=1==e?0:2},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],team31_item:[function(e,t,n){"use strict";cc._RF.push(t,"5e99c54TJ9CCZY8Mb2YqF69","team31_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"068ec0AU8FEgL8hZbmxTwnt","team31_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TeamBase"),d=o("GameManger"),h=o("StoragerManager"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(e,t,n){var o=this;this.init_data(t,n.id),this.count_down=-10,this.behavior=null,this.change_behavior(p.Team31Behavior.move_1);for(var a=function(t){var a=t;e.sort(function(){return Math.random()-.5}),cc.tween(i).delay(.8*a).call(function(){var i=d.default.Instance.GameController.FoundGuesr("guest31_item");o.guest_array.push(i),i.Init(a,e[a],n.array[t],o,o.origin)}).start()},i=this,r=0;r<n.array.length;r++)a(r)},t.prototype.Update=function(e){for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].Update(e);this.count_down>0&&(this.count_down-=e,this.count_down<=0&&this.change_behavior(p.Team31Behavior.leave))},t.prototype.change_behavior=function(e){if(this.behavior!=e){switch(this.behavior=e,this.guest_behavior_num=0,this.behavior){case p.Team31Behavior.wait_pay:null==h.default.Instance.Staff.staff_23?d.default.Instance.TsGame.group_third_floor.btn_pay.active=!0:this.count_down=5,cc.systemEvent.emit(p.DistributedEvent.visitor_statistics,23);break;case p.Team31Behavior.leave:cc.systemEvent.emit(p.DistributedEvent.departure_statistics,23)}for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].ChangeBehavior(this.behavior)}},t.prototype.guest_behavior_over=function(e,t){if(this.team_id==e.TsTeam.TeamId&&this.behavior==t&&(this.guest_behavior_num++,this.guest_behavior_num>=this.guest_array.length)){switch(t){case p.Team31Behavior.move_1:this.change_behavior(p.Team31Behavior.theatregoing);break;case p.Team31Behavior.theatregoing:this.change_behavior(p.Team31Behavior.go_counter);break;case p.Team31Behavior.go_counter:this.change_behavior(p.Team31Behavior.wait_pay);break;case p.Team31Behavior.leave:for(var n=0;n<this.guest_array.length;n++){var o=this.guest_array[n];o.node.active=!1,o.node.setParent(null)}d.default.Instance.TsGame.TeamLeave(this.team_id,31)}this.guest_behavior_num=0}},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],team32_item:[function(e,t,n){"use strict";cc._RF.push(t,"82161Zr48NAM4K5+f/E+BRX","team32_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"78e0c0TrIhFQY9b209KwC+v","team32_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TeamBase"),d=o("GameManger"),h=o("StoragerManager"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(e,t){var n=this;this.init_data(e,t.id),this.team_id=e,this.guest_team_type=t.id,this.count_down=-10,this.behavior=null,this.change_behavior(p.Team32Behavior.move_1);for(var o=function(e){var o=e,i=.5+.5*Math.random();cc.tween(a).delay(o*i).call(function(){var a=d.default.Instance.GameController.FoundGuesr("guest32_item");n.guest_array.push(a),a.Init(o,t.array[e],n,n.origin)}).start()},a=this,i=0;i<t.array.length;i++)o(i)},t.prototype.Update=function(e){for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].Update(e);this.count_down>0&&(this.count_down-=e,this.count_down<=0&&this.change_behavior(p.Team32Behavior.leave))},t.prototype.change_behavior=function(e){var t=this;if(this.behavior!=e){switch(this.behavior=e,this.guest_behavior_num=0,this.behavior){case p.Team32Behavior.wait_1:2==this.guest_array.length&&null!=h.default.Instance.Facility[p.FacilityType.third_floor_divination]&&cc.tween(this).delay(3).call(function(){d.default.Instance.TsGame.group_third_floor.spine_love.node.active=!0,Math.random()>.5?d.default.Instance.TsGame.group_third_floor.spine_love.setAnimation(0,"no",!1):d.default.Instance.TsGame.group_third_floor.spine_love.setAnimation(0,"yes",!1)}).start(),cc.systemEvent.emit(p.DistributedEvent.visitor_statistics,24);break;case p.Team32Behavior.wait_pay:null==h.default.Instance.Staff.staff_23?d.default.Instance.TsGame.group_third_floor.btn_pay.active=!0:this.count_down=5,cc.systemEvent.emit(p.DistributedEvent.visitor_statistics,23);break;case p.Team32Behavior.leave:cc.systemEvent.emit(p.DistributedEvent.departure_statistics,23);break;case p.Team32Behavior.wait_3:cc.systemEvent.emit(p.DistributedEvent.visitor_statistics,25);break;case p.Team32Behavior.go_counter:cc.systemEvent.emit(p.DistributedEvent.departure_statistics,25)}for(var n=function(e){var n=.5+1*Math.random();cc.tween(o).delay(n).call(function(){t.guest_array[e].ChangeBehavior(t.behavior)}).start()},o=this,a=0;a<this.guest_array.length;a++)n(a)}},t.prototype.guest_behavior_over=function(e,t){if(this.team_id==e.TsTeam.TeamId&&this.behavior==t&&(this.guest_behavior_num++,this.guest_behavior_num>=this.guest_array.length)){switch(t){case p.Team32Behavior.move_1:this.change_behavior(p.Team32Behavior.wait_1);break;case p.Team32Behavior.wait_1:this.judge_next(),cc.systemEvent.emit(p.DistributedEvent.departure_statistics,24);break;case p.Team32Behavior.move_2:this.change_behavior(p.Team32Behavior.wait_2);break;case p.Team32Behavior.wait_2:this.change_behavior(p.Team32Behavior.move_3);break;case p.Team32Behavior.move_3:case p.Team32Behavior.move_4:this.change_behavior(p.Team32Behavior.wait_3);break;case p.Team32Behavior.wait_3:this.change_behavior(p.Team32Behavior.go_counter);break;case p.Team32Behavior.go_counter:this.change_behavior(p.Team32Behavior.wait_pay);break;case p.Team32Behavior.leave:for(var n=0;n<this.guest_array.length;n++){var o=this.guest_array[n];o.node.active=!1,o.node.setParent(null)}d.default.Instance.TsGame.TeamLeave(this.team_id,32)}this.guest_behavior_num=0}},t.prototype.judge_next=function(){null==h.default.Instance.Facility[p.FacilityType.third_floor_bridge]?this.change_behavior(p.Team32Behavior.move_4):this.change_behavior(p.Team32Behavior.move_2)},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],team33_item:[function(e,t,n){"use strict";cc._RF.push(t,"2b4931hGtpBsZxkRgLLuJNb","team33_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"23402pge/lEyrG2geH1HRR+","team33_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TeamBase"),d=o("GameManger"),h=o("StoragerManager"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.Init=function(e,t){var n=this;this.init_data(e,t.id),this.count_down=-10,this.behavior=null,this.change_behavior(p.Team33Behavior.move_1);for(var o=function(e){var o=e;cc.tween(a).delay(.8*o).call(function(){var e=d.default.Instance.GameController.FoundGuesr("guest33_item");n.guest_array.push(e),e.Init(o,t.array[o],n,n.origin)}).start()},a=this,i=0;i<t.array.length;i++)o(i)},t.prototype.Update=function(e){for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].Update(e);this.count_down>0&&(this.count_down-=e,this.count_down<=0&&this.change_behavior(p.Team33Behavior.leave))},t.prototype.change_behavior=function(e){if(this.behavior!=e){switch(this.behavior=e,this.guest_behavior_num=0,this.behavior){case p.Team33Behavior.queue_up:d.default.Instance.TsGame.RefreshDrifting(this.team_id);break;case p.Team33Behavior.move_2:d.default.Instance.TsGame.drifting_num-=this.guest_array.length,d.default.Instance.TsGame.RefreshDrifting(null);break;case p.Team33Behavior.drifting:d.default.Instance.TsGame.group_third_floor.ts_bamboo.Drifting(this);break;case p.Team33Behavior.wait_pay:null==h.default.Instance.Staff.staff_23?d.default.Instance.TsGame.group_third_floor.btn_pay.active=!0:this.count_down=5,cc.systemEvent.emit(p.DistributedEvent.visitor_statistics,23);break;case p.Team33Behavior.leave:cc.systemEvent.emit(p.DistributedEvent.departure_statistics,23)}for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].ChangeBehavior(this.behavior)}},t.prototype.guest_behavior_over=function(e,t){if(this.team_id==e.TsTeam.TeamId&&this.behavior==t&&(this.guest_behavior_num++,this.guest_behavior_num>=this.guest_array.length)){switch(t){case p.Team33Behavior.move_1:this.judge_move2();break;case p.Team33Behavior.move_2:this.change_behavior(p.Team33Behavior.drifting);break;case p.Team33Behavior.move_3:this.change_behavior(p.Team33Behavior.wait_1),cc.systemEvent.emit(p.DistributedEvent.visitor_statistics,22);break;case p.Team33Behavior.wait_1:this.change_behavior(p.Team33Behavior.go_counter),cc.systemEvent.emit(p.DistributedEvent.departure_statistics,22);break;case p.Team33Behavior.go_counter:this.change_behavior(p.Team33Behavior.wait_pay);break;case p.Team33Behavior.leave:for(var n=0;n<this.guest_array.length;n++){var o=this.guest_array[n];o.node.active=!1,o.node.setParent(null)}d.default.Instance.TsGame.TeamLeave(this.team_id,33)}this.guest_behavior_num=0}},t.prototype.judge_move2=function(){1==d.default.Instance.TsGame.group_third_floor.ts_bamboo.Useing?this.change_behavior(p.Team33Behavior.queue_up):(d.default.Instance.TsGame.group_third_floor.ts_bamboo.Useing=!0,this.change_behavior(p.Team33Behavior.move_2))},t.prototype.judge_move3=function(){this.change_behavior(p.Team33Behavior.go_counter)},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],team34_item:[function(e,t,n){"use strict";cc._RF.push(t,"388fahZB+1EPrLSKhuCSObh","team34_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"b2f77rf+zZEMrHuVL+M+MaA","team34_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TeamBase"),d=o("GameManger"),h=o("StoragerManager"),p=o("TypeManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wait_1_pos=[cc.v2(-180,-790),cc.v2(-80,-790),cc.v2(-180,-960),cc.v2(-80,-960)],t.wait_2_pos=[cc.v2(-810,-820),cc.v2(-1130,-630),cc.v2(-1130,-760),cc.v2(-1130,-890)],t.wait_3_pos=[cc.v2(-810,-820),cc.v2(-1130,-630),cc.v2(-1130,-760),cc.v2(-1130,-890)],t}return s(t,e),t.prototype.Init=function(e,t,n){var o=this;this.init_data(t,n.id),this.count_down=-10,this.behavior=null,this.change_behavior(p.Team34Behavior.move_1);for(var a=function(t){var a=t,r=.5+.5*Math.random();cc.tween(i).delay(a*r).call(function(){var i=d.default.Instance.GameController.FoundGuesr("guest34_item");o.guest_array.push(i),i.Init(a,e[a],n.array[t],o,o.origin)}).start()},i=this,r=0;r<n.array.length;r++)a(r)},t.prototype.Update=function(e){for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].Update(e);this.count_down>0&&(this.count_down-=e,this.count_down<=0&&this.change_behavior(p.Team34Behavior.leave))},t.prototype.change_behavior=function(e){var t=this;if(this.behavior!=e){switch(this.behavior=e,this.guest_behavior_num=0,this.behavior){case p.Team34Behavior.go_counter1:case p.Team34Behavior.go_counter2:case p.Team34Behavior.go_counter3:case p.Team34Behavior.go_counter4:for(var n=0;n<this.guest_array.length;n++)d.default.Instance.TsGame.hot_spring_stool_record[this.guest_array[n].Seat]=!1;break;case p.Team34Behavior.wait_pay:null==h.default.Instance.Staff.staff_23?d.default.Instance.TsGame.group_third_floor.btn_pay.active=!0:this.count_down=5,cc.systemEvent.emit(p.DistributedEvent.visitor_statistics,23);break;case p.Team34Behavior.leave:cc.systemEvent.emit(p.DistributedEvent.departure_statistics,23)}var o=function(e){var n=.5+1*Math.random();cc.tween(a).delay(n).call(function(){t.guest_array[e].ChangeBehavior(t.behavior)}).start()},a=this;for(n=0;n<this.guest_array.length;n++)o(n)}},t.prototype.guest_behavior_over=function(e,t){if(this.team_id==e.TsTeam.TeamId&&this.behavior==t&&(this.guest_behavior_num++,this.guest_behavior_num>=this.guest_array.length)){switch(t){case p.Team34Behavior.move_1:this.change_behavior(p.Team34Behavior.wait_1);break;case p.Team34Behavior.wait_1:this.judge_move2();break;case p.Team34Behavior.move_2:this.change_behavior(p.Team34Behavior.wait_2);break;case p.Team34Behavior.wait_2:this.change_behavior(p.Team34Behavior.go_counter2);break;case p.Team34Behavior.move_3:this.change_behavior(p.Team34Behavior.wait_3);break;case p.Team34Behavior.wait_3:this.change_behavior(p.Team34Behavior.go_counter3);break;case p.Team34Behavior.move_4:this.change_behavior(p.Team34Behavior.wait_4);break;case p.Team34Behavior.wait_4:this.change_behavior(p.Team34Behavior.go_counter4);break;case p.Team34Behavior.go_counter1:case p.Team34Behavior.go_counter2:case p.Team34Behavior.go_counter3:case p.Team34Behavior.go_counter4:this.change_behavior(p.Team34Behavior.wait_pay);break;case p.Team34Behavior.leave:for(var n=0;n<this.guest_array.length;n++){var o=this.guest_array[n];o.node.active=!1,o.node.setParent(null)}d.default.Instance.TsGame.TeamLeave(this.team_id,34)}this.guest_behavior_num=0}},t.prototype.judge_move2=function(){var e=d.default.Instance.TsGame,t=e.NodeFacility[p.FacilityType.third_floor_stool2],n=e.table_array[p.FacilityType.third_floor_table1],o=e.table_array[p.FacilityType.third_floor_table2],a=[];if(null!=t&&1!=e.group_third_floor.btn_sauna.active&&a.push(1),null!=n&&1!=e.group_third_floor.btn_mahjong.active&&a.push(2),null!=o&&1!=e.group_third_floor.btn_mahjong.active&&a.push(3),0==a.length)this.change_behavior(p.Team34Behavior.go_counter1);else switch(a[Math.floor(100*Math.random())%a.length]){case 1:e.group_third_floor.AddSauna(),this.change_behavior(p.Team34Behavior.move_2);break;case 2:e.group_third_floor.AddMahjong(),this.change_behavior(p.Team34Behavior.move_3);break;case 3:e.group_third_floor.AddMahjong(),this.change_behavior(p.Team34Behavior.move_4)}},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),l([_],t)}(u.default));i.default=y,cc._RF.pop(),cc._RF.pop()},{}],team41_item:[function(e,t,n){"use strict";cc._RF.push(t,"50cd0y1nDxImLix9TZYHNGm","team41_item");var o=e,a=t,i=n,r=function(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)};cc._RF.push(a,"4df50IdYW5LQpgWhtVuoZR4","team41_item");var c,s=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==r(Reflect.decorate))c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(c=(i<3?a(c):i>3?a(t,n,c):a(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=o("TeamBase"),d=o("DataManager"),h=o("GameManger"),p=o("StoragerManager"),f=o("TypeManager"),_=cc._decorator,y=_.ccclass,b=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.souvenir_num_data=[{lv:1,value:500},{lv:2,value:2e3},{lv:3,value:3e3},{lv:4,value:2e3},{lv:5,value:1500}],t}return s(t,e),t.prototype.Init=function(e,t,n){var o=this;this.init_data(e,t.id),this.visit_booth=n,this.guest_num=t.array.length,this.souvenir_num=0,this.count_down=-10,this.visit_index=-1,this.last_booth=-1,this.behavior=null,this.change_behavior(f.Team41Behavior.move_1);for(var a=function(e){var n=e,a=.5+.5*Math.random();cc.tween(i).delay(n*a).call(function(){var a=h.default.Instance.GameController.FoundGuesr("guest41_item");o.guest_array.push(a),a.Init(n,t.array[e],o,o.pos_1)}).start()},i=this,r=0;r<t.array.length;r++)a(r)},t.prototype.Update=function(e){for(var t=0;t<this.guest_array.length;t++)this.guest_array[t].Update(e);if(this.count_down>0&&(this.count_down-=e,this.count_down<=0))switch(this.behavior){case f.Team41Behavior.booth_visiti:this.JudgeNextVisit("\u53bb\u5c55\u4f4d\u53c2\u89c2\u7ed3\u675f\u540e\uff08\u53c2\u89c2\u6210\u529f\uff09");break;case f.Team41Behavior.pay_2:h.default.Instance.TsGame.group_exhibition.HidePayBtn(2),this.change_behavior(f.Team41Behavior.leave1),h.default.Instance.TsGame.NextBoothWait()}},t.prototype.change_behavior=function(e){switch(e){case f.Team41Behavior.booth_move:}switch(this.behavior=e,this.guest_behavior_num=0,this.behavior){case f.Team41Behavior.move_3:for(var t=0;t<h.default.Instance.TsGame.team41_array.length;t++){var n=h.default.Instance.TsGame.team41_array[t];if(n.Behavior==f.Team41Behavior.move_2){var o=h.default.Instance.TsGame.JudgeQueue(n.team_id);n.queue_index!=o&&(n.queue_index=o,n.change_behavior(f.Team41Behavior.move_2))}}break;case f.Team41Behavior.booth_move:-1==this.last_booth&&h.default.Instance.TsGame.EscortNext();break;case f.Team41Behavior.booth_visiti:this.count_down=2*Math.random()+3;break;case f.Team41Behavior.pay_2:this.count_down=5*Math.random()+15,h.default.Instance.TsGame.group_exhibition.ShowPayBtn(2);break;case f.Team41Behavior.leave2:h.default.Instance.TsGame.NextBoothWait()}for(t=0;t<this.guest_array.length;t++)this.guest_array[t].ChangeBehavior(this.behavior,"\u8ddf\u968f\u56e2\u961f\u4fee\u6539")},t.prototype.guest_behavior_over=function(e,t,n){if(this.team_id==e.TsTeam.TeamId&&this.behavior==t){switch(this.guest_behavior_num++,t){case f.Team41Behavior.move_1:this.guest_behavior_num=this.guest_array.length;break;case f.Team41Behavior.booth_move:if(n!=this.visit_index)return}if(this.guest_behavior_num>=this.guest_array.length){switch(t){case f.Team41Behavior.move_1:var o;this.queue_index=h.default.Instance.TsGame.JudgeQueue(this.team_id),o=this.queue_index<=0&&1==h.default.Instance.TsGame.JudgePay()?f.Team41Behavior.move_3:f.Team41Behavior.move_2,this.change_behavior(o);break;case f.Team41Behavior.move_2:0==this.queue_index&&1==h.default.Instance.TsGame.JudgePay()&&this.change_behavior(f.Team41Behavior.move_3);break;case f.Team41Behavior.move_3:this.change_behavior(f.Team41Behavior.pay_1),h.default.Instance.TsGame.group_exhibition.ShowPayBtn(1);break;case f.Team41Behavior.booth_move:this.visit_index==d.default.Instance.ExhibitionPath.length-1?(this.souvenir_num=this.random_souvenir_num(),0==h.default.Instance.TsGame.JudgePos(this.visit_index)&&(this.souvenir_num=0),this.souvenir_num>0?1==h.default.Instance.TsGame.JudgePos2()?this.change_behavior(f.Team41Behavior.move_shop):this.change_behavior(f.Team41Behavior.booth_wait):this.change_behavior(f.Team41Behavior.leave1)):1==h.default.Instance.TsGame.JudgePos(this.visit_index)?this.change_behavior(f.Team41Behavior.booth_visiti):this.JudgeNextVisit("\u53bb\u5c55\u4f4d\u53c2\u89c2\u7ed3\u675f\u540e\uff08\u6709\u4eba\u672a\u53c2\u89c2\uff09");break;case f.Team41Behavior.move_shop:this.change_behavior(f.Team41Behavior.pay_2);break;case f.Team41Behavior.leave1:case f.Team41Behavior.leave2:for(var a=0;a<this.guest_array.length;a++){var i=this.guest_array[a];i.node.active=!1,i.node.setParent(null)}h.default.Instance.TsGame.TeamLeave(this.team_id,41)}this.guest_behavior_num=0}}},t.prototype.JudgeNextVisit=function(){this.last_booth==d.default.Instance.ExhibitionPath.length-1?this.change_behavior(f.Team41Behavior.move_shop):(this.visit_index=this.visit_booth[0],null!=this.visit_index?this.visit_booth.splice(0,1):this.visit_index=d.default.Instance.ExhibitionPath.length-1,this.change_behavior(f.Team41Behavior.booth_move),this.last_booth=this.visit_index)},t.prototype.random_souvenir_num=function(){if(null==p.default.Instance.Facility[f.FacilityType.exhibition_table])return 0;for(var e=0,t=[],n=0;n<this.souvenir_num_data.length;n++){var o=this.souvenir_num_data[n];t.push({lv:o.lv,value:o.value}),e+=o.value}t.sort(function(){return Math.random()-.5});for(var a=Math.random()*e,i=0;a>=0;)(a-=t[i].value)>=0&&i++;return t[i].lv},Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.behavior},enumerable:!1,configurable:!0}),l([y],t)}(u.default));i.default=b,cc._RF.pop(),cc._RF.pop()},{}],timePlayVoice:[function(e,t){"use strict";cc._RF.push(t,"4eb13Z7mk5Hw4eC/cHcP+dr","timePlayVoice"),cc._RF.pop()},{}]},{},["AuthorizationInterface","BarbecueAgainInterface","BarbecueChallangeInterface","BarbecueChallangeListItem","BarbecueChallangeOverInterface","BarbecueChallangeRecoverInterface","BarbecueDifficultyInterface","BarbecueExplainInterface","BarbecueFreePropInterface","BarbecueOvenInterface","BarbecuePropInterface","BarbecueResurgenceInterface","BarbecueReturnInterface","BarbecueStandInterface","BarbecueBase","GuestBase","StaffBase","TeamBase","UIBase","BarbecueOverInterface","GameGuideInterface","MainInterface","NoCoinInterface","AddPowerInterface","GameInterface","Illustration1Interface","NoticeInterface","ShopAwardInterface","TaskInterface","WinActivityOpenInterface","bed2_item","group_second_floor","pool2_item","tea2_item","team21_item","team22_item","group_third_floor","table4_item","team31_item","team32_item","team33_item","team34_item","group_backyard","group_park","node_park_sedan","JengaInterface","ButtonEffect","BarbecueChallangeDetailInterface","DayChallangeManager","Fireworks","GMPanel","GameController","GameExplainInterface","InitialInterface","BarbecueLvInterface","FacilityInterface","FacilityTipsInterface","Illustration2Interface","MoreGameInterface","ShopLvInterface","InterstitialAdManager","JengaOverInterface","ListItem","ListUtil","LoginInterface","AutoManager","BundleManger","DataManager","FunctionManager","GameManger","InfoManager","ItemManager","JengaManager","PoolManager","SdkManager","SkinManager","SoundManager","StoragerManager","TimePlayVoiceManager","TypeManager","UIManager","VoiceLabelManager","WinActivityManager","AStar","List","MapControl3","Util","moreClickUtil","Platform","RoleSoundManager","RotationCtr","SettingInterface","SkinInterface","SkinKebabItem","SkinRuleInterface","UiAnimation","WinActivityInterface","WinActivityRuleInterface","bamboo_item","bezier","group_escort","group_exhibition","staff104_item","staff105_item","staff106_item","team41_item","AddDesktopInterface","CollectGiftsInterface","GameCircleInterface","LevelPackInterface","NewcomerPackPreInterface","currency_item","facility_item2","guest11_item","guest12_item","guest21_item","guest22_item","guest31_item","guest32_item","guest33_item","guest34_item","guest41_item","JengaFoodItem","JengaPanziItem","JengaQianZiItem","KebabListItem","MoreGameItem","SkinBgItem","SkinTableItem","WinActivityRankItem","WinActivityRewardTip","barbecue_oven_item","barbecue_plate_item","barbecue_tray_item","btn_prop_item","dialogue_bubble_item","dishes_eff","eff_compound_item","eff_facility","eff_frozen_tiem","eff_kebabs_item","eff_tinfoil_item","facility_array_item2","gameGuestItem","group_canteen1","group_canteen2","group_doorway","group_kitchen","illustration1_item","illustration2_item","lv_tiem","node_dishes","node_facility","node_staff","passerby_item","staff10_item","staff11_item","staff15_item","staff1_item","staff27_item","staff28_item","staff2_item","staff3_item","staff4_item","staff5_item","staff7_item","staff8_item","staff9_item","table_item","task_item","team11_item","team12_item","timePlayVoice","BarbecueChallangePropItem","Arrayincludes","fflate"]);